Feature: スキーマ読み込み機能
  As a データベース開発者
  I want to 様々な形式のデータベーススキーマを読み込める
  So that 既存のプロジェクトのER図を簡単に生成できる

  Background:
    Given ユーザーがLiam ERDアプリケーションにアクセスしている

  Scenario: 公開リポジトリのスキーマファイル読み込み
    Given ユーザーが公開GitHubリポジトリのスキーマファイルURLを持っている
    When ユーザーがURLに "liambx.com/erd/p/" プレフィックスを追加する
    And 修正されたURLにアクセスする
    Then スキーマファイルが正常に読み込まれる
    And ER図が表示される

  Scenario: プライベートリポジトリでのCLI使用
    Given ユーザーがプライベートリポジトリを使用している
    When ユーザーが "npx @liam-hq/cli init" コマンドを実行する
    Then インタラクティブなセットアップが開始される
    And ローカル環境でER図が生成される

  Scenario: サポートされているスキーマ形式の読み込み
    Given ユーザーが以下のいずれかの形式のスキーマファイルを持っている:
      | 形式 | 拡張子 |
      | Ruby on Rails | schema.rb |
      | Django | models.py |
      | Laravel | migration files |
      | SQL DDL | .sql |
    When ユーザーがスキーマファイルを指定する
    Then 形式が自動検出される
    And 適切なパーサーが選択される
    And スキーマが正常に解析される

  Scenario: 無効なスキーマファイルの処理
    Given ユーザーが無効な形式のファイルを指定している
    When スキーマ読み込みを試行する
    Then エラーメッセージが表示される
    And "サポートされていない形式です" という内容が含まれる
    And サポートされている形式の一覧が表示される

  Scenario: 大きなスキーマファイルの読み込み
    Given ユーザーが100以上のテーブルを含む大きなスキーマファイルを持っている
    When スキーマファイルを読み込む
    Then ローディングインジケーターが表示される
    And 段階的にテーブルが表示される
    And パフォーマンスが最適化されている

  Scenario: ネットワークエラー時の処理
    Given ユーザーがリモートスキーマファイルを読み込もうとしている
    And ネットワーク接続に問題がある
    When スキーマ読み込みを試行する
    Then 適切なエラーメッセージが表示される
    And リトライオプションが提供される

  Scenario: スキーマファイルの更新検知
    Given ユーザーがスキーマファイルを読み込んでいる
    And 元のスキーマファイルが更新されている
    When ページを再読み込みする
    Then 最新のスキーマ内容が反映される
    And 変更されたテーブル構造が表示される

  Scenario: 複数データベースのスキーマ統合
    Given ユーザーが複数のデータベーススキーマファイルを持っている
    When 複数のスキーマファイルを同時に読み込む
    Then 統合されたER図が表示される
    And データベース間の関連が適切に表示される
    And 各テーブルの所属データベースが識別される
