Feature: モバイル対応機能
  As a モバイルデバイスを使用するデータベース開発者
  I want to モバイル環境でもER図を快適に閲覧・操作できる
  So that 場所を選ばずにデータベース構造を確認できる

  Background:
    Given ユーザーがモバイルデバイスを使用している
    And Liam ERDアプリケーションにアクセスしている
    And データベーススキーマが読み込まれている

  Scenario: モバイル環境でのページ表示
    Given ユーザーがモバイルブラウザでアプリケーションを開く
    When ページが読み込まれる
    Then ページタイトルに "Liam ERD" が含まれている
    And モバイル向けのレスポンシブレイアウトが適用される
    And タッチ操作に最適化されたUI要素が表示される

  Scenario: モバイル環境でのツールバー表示
    Given ERD画面が表示されている
    And ツールバーが初期状態では非表示になっている
    When ユーザーがツールバー開くボタンをタップする
    Then ツールバーが表示される
    And モバイル向けのツールバーレイアウトが適用される

  Scenario: タッチ操作でのテーブル選択
    Given ERD画面が表示されている
    When ユーザーが "accounts" テーブルノードをタップする
    Then そのテーブルノードがハイライト表示される
    And URLに "active=accounts" パラメータが追加される
    And タッチフィードバックが提供される

  Scenario: ピンチ操作でのズーム
    Given ERD画面が表示されている
    When ユーザーがピンチアウト操作を行う
    Then ER図が拡大表示される
    When ユーザーがピンチイン操作を行う
    Then ER図が縮小表示される

  Scenario: スワイプ操作でのパン
    Given ERD画面が表示されている
    And ER図が表示されている
    When ユーザーが画面をスワイプする
    Then ER図の表示位置が移動する
    And スムーズなスクロール動作が実行される

  Scenario: モバイル環境での表示モード切り替え
    Given ERD画面が表示されている
    And ツールバーが表示されている
    When ユーザーが表示モードボタンをタップする
    Then モバイル向けの選択メニューが表示される
    When ユーザーが "Key Only" オプションをタップする
    Then テーブルノードにキーフィールドのみが表示される

  Scenario: モバイル環境でのコマンドパレット無効化
    Given ERD画面が表示されている
    When ユーザーがコマンドパレットを起動しようとする
    Then コマンドパレット機能は利用できない
    And 代替として検索機能が提供される

  Scenario: 縦向き・横向き画面の対応
    Given ERD画面が表示されている
    And デバイスが縦向きモードになっている
    When ユーザーがデバイスを横向きに回転させる
    Then レイアウトが横向きモードに適応される
    And ER図の表示領域が最適化される
    And ツールバーの配置が調整される

  Scenario: モバイル環境でのパフォーマンス最適化
    Given 大きなスキーマファイル（100以上のテーブル）が読み込まれている
    When モバイルデバイスでER図を表示する
    Then レンダリングパフォーマンスが最適化されている
    And 必要に応じて表示要素が間引かれる
    And スムーズな操作が維持される

  Scenario: タッチ操作でのテーブル移動制限
    Given ERD画面が表示されている
    And ユーザーがテーブルノードをタップしている
    When ユーザーがドラッグ操作を試行する
    Then テーブルの移動機能は無効化されている
    And 代わりに選択・ハイライト機能が動作する

  Scenario: モバイル環境でのエラーハンドリング
    Given ネットワーク接続が不安定な状況である
    When スキーマファイルの読み込みでエラーが発生する
    Then モバイル向けのエラーメッセージが表示される
    And リトライボタンがタップしやすいサイズで表示される
    And オフライン対応の案内が提供される
