{
  "version": 3,
  "sources": ["../../../../../../../../../../../node_modules/.pnpm/neverthrow@8.2.0/node_modules/neverthrow/dist/index.cjs.js", "../../../../../../../../../../../node_modules/.pnpm/fast-json-patch@3.1.1/node_modules/fast-json-patch/commonjs/helpers.js", "../../../../../../../../../../../node_modules/.pnpm/fast-json-patch@3.1.1/node_modules/fast-json-patch/commonjs/core.js", "../../../../../../../../../../../node_modules/.pnpm/fast-json-patch@3.1.1/node_modules/fast-json-patch/commonjs/duplex.js", "../../../../../../../../../../../node_modules/.pnpm/fast-json-patch@3.1.1/node_modules/fast-json-patch/index.js", "../../../../../../../../src/trigger/deepModelingWorkflowTask.ts", "../../../../../../../../../agent/src/index.ts", "../../../../../../../../../agent/src/deepModeling.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/setup/async_local_storage.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/singletons.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/web.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/graph/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/graph/annotation.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/channels/binop.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/errors.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/channels/base.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/memory.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/base.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/id.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/serde/types.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/serde/jsonplus.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/load.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/load/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/load/import_constants.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/load/import_map.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/agents.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/caches/base.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/hash.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/js-sha1/hash.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/js-sha256/hash.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/chat_history.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/documents/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/documents/document.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/documents/transformers.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/embeddings.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/example_selectors/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/example_selectors/base.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/example_selectors/conditional.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/example_selectors/length_based.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/language_models/base.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/tiktoken.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/language_models/chat_models.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/runnables/passthrough.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/language_models/llms.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/memory.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/base.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/runnables/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/runnables/router.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/runnables/branch.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/runnables/history.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/bytes.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/transform.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/list.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/string.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/structured.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/json.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/json_patch.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/xml.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/sax-js/sax.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/prompts/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/prompts/pipeline.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/prompts/serde.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/prompts/structured.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/retrievers/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/stores.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/tools/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/tools/types.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/tracers/initialize.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/tracers/run_collector.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/chunk_array.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/function_calling.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/math.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/ml-distance/similarities.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/ml-distance/distances.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/ml-distance-euclidean/euclidean.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/testing/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/vectorstores.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/utils/types/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/serde/utils/fast-safe-stringify/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/dist/types.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/dist/serde/base.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/store/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/store/base.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/store/batch.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/store/memory.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/store/utils.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/cache/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/cache/base.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.18_@langchain+core@0.3.61_@opentelemetry+api@1.9.0__a6099cbbd47045e82bada733957b498f/node_modules/@langchain/langgraph-checkpoint/src/cache/memory.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/channels/last_value.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/managed/base.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/constants.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/graph/graph.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/runnables.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/runnables/graph.js", "../../../../../../../../../../../node_modules/.pnpm/zod@3.24.4/node_modules/zod/lib/index.mjs", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/read.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/write.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/utils.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/utils/config.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/validate.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/io.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/debug.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/utils/subgraph.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/algo.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/types.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/utils/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/call.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/loop.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/stream.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/utils/stream.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/messages.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/callbacks/base.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/messages.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/runner.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/pregel/retry.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/channels/ephemeral_value.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/channels/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/graph/state.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/channels/named_barrier_value.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/graph/zod/state.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/graph/message.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/managed/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/managed/is_last_step.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/managed/shared_value.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/func/index.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/graph/messages_annotation.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+langgraph@0.3.1_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemet_cdb1d148cbed415c86f23df208f44a6e/node_modules/@langchain/langgraph/src/interrupt.ts", "../../../../../../../../../agent/src/chat/workflow/constants.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/index.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/analyzeRequirementsNode.ts", "../../../../../../../../../agent/src/langchain/agents/index.ts", "../../../../../../../../../agent/src/langchain/agents/databaseSchemaBuildAgent/index.ts", "../../../../../../../../../agent/src/langchain/agents/databaseSchemaBuildAgent/agent.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/chat_models.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/outputs.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/utils/env.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/language_models/chat_models.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/language_models/base.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/output_parsers.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/output_parsers/openai_tools.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/utils/types.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/utils/json_schema.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/utils/azure.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/utils/openai.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/utils/function_calling.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/utils/errors.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/utils/openai-format-fndef.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/utils/tools.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/azure/chat_models.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/utils/headers.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/llms.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/language_models/llms.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/utils/chunk_array.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/azure/llms.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/azure/embeddings.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/embeddings.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/embeddings.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/types.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/tools/index.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/tools/dalle.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/tools.js", "../../../../../../../../../../../node_modules/.pnpm/@langchain+openai@0.5.15_@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry_cd2a0fb140c3a0b3252024df0b963dca/node_modules/@langchain/openai/dist/utils/prompts.js", "../../../../../../../../../../packages/db-structure/dist/index.js", "../../../../../../../../../../packages/db-structure/dist/deparser/postgresql/index.js", "../../../../../../../../../../packages/db-structure/dist/deparser/postgresql/operationDeparser.js", "../../../../../../../../../../packages/db-structure/dist/operation/constants.js", "../../../../../../../../../../packages/db-structure/dist/operation/schema/column.js", "../../../../../../../../../../../node_modules/.pnpm/valibot@1.1.0_typescript@5.8.3/node_modules/valibot/dist/index.js", "../../../../../../../../../../packages/db-structure/dist/schema/index.js", "../../../../../../../../../../packages/db-structure/dist/schema/factories.js", "../../../../../../../../../../packages/db-structure/dist/schema/mergeSchema.js", "../../../../../../../../../../packages/db-structure/dist/schema/schema.js", "../../../../../../../../../../packages/db-structure/dist/operation/schema/constraint.js", "../../../../../../../../../../packages/db-structure/dist/operation/schema/indexOperations.js", "../../../../../../../../../../packages/db-structure/dist/operation/schema/table.js", "../../../../../../../../../../packages/db-structure/dist/deparser/postgresql/utils.js", "../../../../../../../../../../packages/db-structure/dist/deparser/postgresql/schemaDeparser.js", "../../../../../../../../../../packages/db-structure/dist/diff/index.js", "../../../../../../../../../../packages/db-structure/dist/diff/buildSchemaDiff.js", "../../../../../../../../../../packages/db-structure/dist/diff/columns/buildColumnCheckDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/utils/getChangeStatus.js", "../../../../../../../../../../packages/db-structure/dist/diff/columns/buildColumnCommentDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/columns/buildColumnDefaultDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/columns/buildColumnDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/columns/buildColumnNameDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/columns/buildColumnNotNullDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/constraints/buildConstraintColumnNameDiffItem.js", "../../../../../../../../../../../node_modules/.pnpm/ts-pattern@5.7.1/node_modules/ts-pattern/src/internals/symbols.ts", "../../../../../../../../../../../node_modules/.pnpm/ts-pattern@5.7.1/node_modules/ts-pattern/src/internals/helpers.ts", "../../../../../../../../../../../node_modules/.pnpm/ts-pattern@5.7.1/node_modules/ts-pattern/src/is-matching.ts", "../../../../../../../../../../../node_modules/.pnpm/ts-pattern@5.7.1/node_modules/ts-pattern/src/patterns.ts", "../../../../../../../../../../../node_modules/.pnpm/ts-pattern@5.7.1/node_modules/ts-pattern/src/errors.ts", "../../../../../../../../../../../node_modules/.pnpm/ts-pattern@5.7.1/node_modules/ts-pattern/src/match.ts", "../../../../../../../../../../packages/db-structure/dist/diff/constraints/buildConstraintDeleteConstraintDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/constraints/buildConstraintDetailDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/constraints/buildConstraintDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/constraints/buildConstraintNameDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/constraints/buildConstraintTargetColumnNameDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/constraints/buildConstraintTargetTableNameDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/constraints/buildConstraintUpdateConstraintDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/indexes/buildIndexColumnsDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/indexes/buildIndexDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/indexes/buildIndexNameDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/indexes/buildIndexTypeDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/indexes/buildIndexUniqueDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/tables/buildTableCommentDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/tables/buildTableDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/tables/buildTableNameDiffItem.js", "../../../../../../../../../../packages/db-structure/dist/diff/types.js", "../../../../../../../../../../packages/db-structure/dist/operation/index.js", "../../../../../../../../../../packages/db-structure/dist/operation/applyPatchOperations.js", "../../../../../../../../../../packages/db-structure/dist/operation/schema/index.js", "../../../../../../../../../../packages/db-structure/dist/utils/constraintsToRelationships.js", "../../../../../../../../../../packages/db-structure/dist/utils/isPrimaryKey.js", "../../../../../../../../../../../node_modules/.pnpm/@valibot+to-json-schema@1.3.0_valibot@1.1.0_typescript@5.8.3_/node_modules/@valibot/to-json-schema/dist/index.js", "../../../../../../../../../agent/src/langchain/utils/telemetry.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/eventemitter.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/prompts/promptCache.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/types.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/prompts/promptClients.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/utils.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/release-env.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/media/LangfuseMedia.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/sampling.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/storage-memory.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-core@3.38.0/node_modules/langfuse-core/src/index.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse@3.38.0/node_modules/langfuse/src/storage.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse@3.38.0/node_modules/langfuse/src/publicApi.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse@3.38.0/node_modules/langfuse/src/langfuse.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse@3.38.0/node_modules/langfuse/src/openai/LangfuseSingleton.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse@3.38.0/node_modules/langfuse/src/openai/parseOpenAI.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse@3.38.0/node_modules/langfuse/src/openai/utils.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse@3.38.0/node_modules/langfuse/src/openai/traceMethod.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse@3.38.0/node_modules/langfuse/src/openai/observeOpenAI.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-langchain@3.37.4_langchain@0.3.29_@langchain+core@0.3.61_@opentelemetry+api@1._4cd67286ccd7744833f51a4cccddb6cc/node_modules/langfuse-langchain/src/callback.ts", "../../../../../../../../../../../node_modules/.pnpm/langfuse-langchain@3.37.4_langchain@0.3.29_@langchain+core@0.3.61_@opentelemetry+api@1._4cd67286ccd7744833f51a4cccddb6cc/node_modules/langfuse-langchain/src/createDatasetItemHandler.ts", "../../../../../../../../../agent/src/langchain/agents/databaseSchemaBuildAgent/prompts.ts", "../../../../../../../../../../../node_modules/.pnpm/@langchain+core@0.3.61_@opentelemetry+api@1.9.0_@opentelemetry+exporter-trace-otlp-prot_0b0ad8d1f102d40fa2004ef9b372cb09/node_modules/@langchain/core/prompts.js", "../../../../../../../../../agent/src/langchain/agents/pmAnalysisAgent/index.ts", "../../../../../../../../../agent/src/langchain/agents/pmAnalysisAgent/agent.ts", "../../../../../../../../../agent/src/langchain/agents/pmAnalysisAgent/prompts.ts", "../../../../../../../../../agent/src/langchain/agents/qaGenerateUsecaseAgent/index.ts", "../../../../../../../../../agent/src/langchain/agents/qaGenerateUsecaseAgent/agent.ts", "../../../../../../../../../agent/src/langchain/agents/qaGenerateUsecaseAgent/prompts.ts", "../../../../../../../../../agent/src/chat/workflow/shared/getConfigurable.ts", "../../../../../../../../../agent/src/chat/workflow/utils/timelineLogger.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/designSchemaNode.ts", "../../../../../../../../../agent/src/utils/convertSchemaToText.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/executeDdlNode.ts", "../../../../../../../../../../packages/pglite-server/src/index.ts", "../../../../../../../../../../packages/pglite-server/src/client.ts", "../../../../../../../../../../packages/pglite-server/src/PGliteInstanceManager.ts", "../../../../../../../../../../packages/pglite-server/src/types.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/finalizeArtifactsNode.ts", "../../../../../../../../../agent/src/chat/workflow/utils/transformWorkflowStateToArtifact.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/generateUsecaseNode.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/prepareDmlNode.ts", "../../../../../../../../../agent/src/langchain/agents/dmlGenerationAgent/agent.ts", "../../../../../../../../../agent/src/langchain/agents/dmlGenerationAgent/prompts.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/reviewDeliverablesNode.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/saveUserMessageNode.ts", "../../../../../../../../../agent/src/chat/workflow/nodes/validateSchemaNode.ts", "../../../../../../../../../agent/src/chat/workflow/shared/langGraphUtils.ts", "../../../../../../../../../agent/src/repositories/index.ts", "../../../../../../../../../agent/src/repositories/factory.ts", "../../../../../../../../../agent/src/repositories/supabase.ts", "../../../../../../../../../artifact/src/index.ts", "../../../../../../../../../artifact/src/schemas/artifact.ts", "../../../../../../../../../agent/src/utils/nodeLogger.ts"],
  "sourcesContent": ["'use strict';\n\nconst defaultErrorConfig = {\r\n    withStackTrace: false,\r\n};\r\n// Custom error object\r\n// Context / discussion: https://github.com/supermacro/neverthrow/pull/215\r\nconst createNeverThrowError = (message, result, config = defaultErrorConfig) => {\r\n    const data = result.isOk()\r\n        ? { type: 'Ok', value: result.value }\r\n        : { type: 'Err', value: result.error };\r\n    const maybeStack = config.withStackTrace ? new Error().stack : undefined;\r\n    return {\r\n        data,\r\n        message,\r\n        stack: maybeStack,\r\n    };\r\n};\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nclass ResultAsync {\r\n    constructor(res) {\r\n        this._promise = res;\r\n    }\r\n    static fromSafePromise(promise) {\r\n        const newPromise = promise.then((value) => new Ok(value));\r\n        return new ResultAsync(newPromise);\r\n    }\r\n    static fromPromise(promise, errorFn) {\r\n        const newPromise = promise\r\n            .then((value) => new Ok(value))\r\n            .catch((e) => new Err(errorFn(e)));\r\n        return new ResultAsync(newPromise);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    static fromThrowable(fn, errorFn) {\r\n        return (...args) => {\r\n            return new ResultAsync((() => __awaiter(this, void 0, void 0, function* () {\r\n                try {\r\n                    return new Ok(yield fn(...args));\r\n                }\r\n                catch (error) {\r\n                    return new Err(errorFn ? errorFn(error) : error);\r\n                }\r\n            }))());\r\n        };\r\n    }\r\n    static combine(asyncResultList) {\r\n        return combineResultAsyncList(asyncResultList);\r\n    }\r\n    static combineWithAllErrors(asyncResultList) {\r\n        return combineResultAsyncListWithAllErrors(asyncResultList);\r\n    }\r\n    map(f) {\r\n        return new ResultAsync(this._promise.then((res) => __awaiter(this, void 0, void 0, function* () {\r\n            if (res.isErr()) {\r\n                return new Err(res.error);\r\n            }\r\n            return new Ok(yield f(res.value));\r\n        })));\r\n    }\r\n    andThrough(f) {\r\n        return new ResultAsync(this._promise.then((res) => __awaiter(this, void 0, void 0, function* () {\r\n            if (res.isErr()) {\r\n                return new Err(res.error);\r\n            }\r\n            const newRes = yield f(res.value);\r\n            if (newRes.isErr()) {\r\n                return new Err(newRes.error);\r\n            }\r\n            return new Ok(res.value);\r\n        })));\r\n    }\r\n    andTee(f) {\r\n        return new ResultAsync(this._promise.then((res) => __awaiter(this, void 0, void 0, function* () {\r\n            if (res.isErr()) {\r\n                return new Err(res.error);\r\n            }\r\n            try {\r\n                yield f(res.value);\r\n            }\r\n            catch (e) {\r\n                // Tee does not care about the error\r\n            }\r\n            return new Ok(res.value);\r\n        })));\r\n    }\r\n    orTee(f) {\r\n        return new ResultAsync(this._promise.then((res) => __awaiter(this, void 0, void 0, function* () {\r\n            if (res.isOk()) {\r\n                return new Ok(res.value);\r\n            }\r\n            try {\r\n                yield f(res.error);\r\n            }\r\n            catch (e) {\r\n                // Tee does not care about the error\r\n            }\r\n            return new Err(res.error);\r\n        })));\r\n    }\r\n    mapErr(f) {\r\n        return new ResultAsync(this._promise.then((res) => __awaiter(this, void 0, void 0, function* () {\r\n            if (res.isOk()) {\r\n                return new Ok(res.value);\r\n            }\r\n            return new Err(yield f(res.error));\r\n        })));\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n    andThen(f) {\r\n        return new ResultAsync(this._promise.then((res) => {\r\n            if (res.isErr()) {\r\n                return new Err(res.error);\r\n            }\r\n            const newValue = f(res.value);\r\n            return newValue instanceof ResultAsync ? newValue._promise : newValue;\r\n        }));\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n    orElse(f) {\r\n        return new ResultAsync(this._promise.then((res) => __awaiter(this, void 0, void 0, function* () {\r\n            if (res.isErr()) {\r\n                return f(res.error);\r\n            }\r\n            return new Ok(res.value);\r\n        })));\r\n    }\r\n    match(ok, _err) {\r\n        return this._promise.then((res) => res.match(ok, _err));\r\n    }\r\n    unwrapOr(t) {\r\n        return this._promise.then((res) => res.unwrapOr(t));\r\n    }\r\n    /**\r\n     * @deprecated will be removed in 9.0.0.\r\n     *\r\n     * You can use `safeTry` without this method.\r\n     * @example\r\n     * ```typescript\r\n     * safeTry(async function* () {\r\n     *   const okValue = yield* yourResult\r\n     * })\r\n     * ```\r\n     * Emulates Rust's `?` operator in `safeTry`'s body. See also `safeTry`.\r\n     */\r\n    safeUnwrap() {\r\n        return __asyncGenerator(this, arguments, function* safeUnwrap_1() {\r\n            return yield __await(yield __await(yield* __asyncDelegator(__asyncValues(yield __await(this._promise.then((res) => res.safeUnwrap()))))));\r\n        });\r\n    }\r\n    // Makes ResultAsync implement PromiseLike<Result>\r\n    then(successCallback, failureCallback) {\r\n        return this._promise.then(successCallback, failureCallback);\r\n    }\r\n    [Symbol.asyncIterator]() {\r\n        return __asyncGenerator(this, arguments, function* _a() {\r\n            const result = yield __await(this._promise);\r\n            if (result.isErr()) {\r\n                // @ts-expect-error -- This is structurally equivalent and safe\r\n                yield yield __await(errAsync(result.error));\r\n            }\r\n            // @ts-expect-error -- This is structurally equivalent and safe\r\n            return yield __await(result.value);\r\n        });\r\n    }\r\n}\r\nfunction okAsync(value) {\r\n    return new ResultAsync(Promise.resolve(new Ok(value)));\r\n}\r\nfunction errAsync(err) {\r\n    return new ResultAsync(Promise.resolve(new Err(err)));\r\n}\r\nconst fromPromise = ResultAsync.fromPromise;\r\nconst fromSafePromise = ResultAsync.fromSafePromise;\r\nconst fromAsyncThrowable = ResultAsync.fromThrowable;\n\n/**\r\n * Short circuits on the FIRST Err value that we find\r\n */\r\nconst combineResultList = (resultList) => {\r\n    let acc = ok([]);\r\n    for (const result of resultList) {\r\n        if (result.isErr()) {\r\n            acc = err(result.error);\r\n            break;\r\n        }\r\n        else {\r\n            acc.map((list) => list.push(result.value));\r\n        }\r\n    }\r\n    return acc;\r\n};\r\n/* This is the typesafe version of Promise.all\r\n *\r\n * Takes a list of ResultAsync<T, E> and success if all inner results are Ok values\r\n * or fails if one (or more) of the inner results are Err values\r\n */\r\nconst combineResultAsyncList = (asyncResultList) => ResultAsync.fromSafePromise(Promise.all(asyncResultList)).andThen(combineResultList);\r\n/**\r\n * Give a list of all the errors we find\r\n */\r\nconst combineResultListWithAllErrors = (resultList) => {\r\n    let acc = ok([]);\r\n    for (const result of resultList) {\r\n        if (result.isErr() && acc.isErr()) {\r\n            acc.error.push(result.error);\r\n        }\r\n        else if (result.isErr() && acc.isOk()) {\r\n            acc = err([result.error]);\r\n        }\r\n        else if (result.isOk() && acc.isOk()) {\r\n            acc.value.push(result.value);\r\n        }\r\n        // do nothing when result.isOk() && acc.isErr()\r\n    }\r\n    return acc;\r\n};\r\nconst combineResultAsyncListWithAllErrors = (asyncResultList) => ResultAsync.fromSafePromise(Promise.all(asyncResultList)).andThen(combineResultListWithAllErrors);\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexports.Result = void 0;\r\n(function (Result) {\r\n    /**\r\n     * Wraps a function with a try catch, creating a new function with the same\r\n     * arguments but returning `Ok` if successful, `Err` if the function throws\r\n     *\r\n     * @param fn function to wrap with ok on success or err on failure\r\n     * @param errorFn when an error is thrown, this will wrap the error result if provided\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function fromThrowable(fn, errorFn) {\r\n        return (...args) => {\r\n            try {\r\n                const result = fn(...args);\r\n                return ok(result);\r\n            }\r\n            catch (e) {\r\n                return err(errorFn ? errorFn(e) : e);\r\n            }\r\n        };\r\n    }\r\n    Result.fromThrowable = fromThrowable;\r\n    function combine(resultList) {\r\n        return combineResultList(resultList);\r\n    }\r\n    Result.combine = combine;\r\n    function combineWithAllErrors(resultList) {\r\n        return combineResultListWithAllErrors(resultList);\r\n    }\r\n    Result.combineWithAllErrors = combineWithAllErrors;\r\n})(exports.Result || (exports.Result = {}));\r\nfunction ok(value) {\r\n    return new Ok(value);\r\n}\r\nfunction err(err) {\r\n    return new Err(err);\r\n}\r\nfunction safeTry(body) {\r\n    const n = body().next();\r\n    if (n instanceof Promise) {\r\n        return new ResultAsync(n.then((r) => r.value));\r\n    }\r\n    return n.value;\r\n}\r\nclass Ok {\r\n    constructor(value) {\r\n        this.value = value;\r\n    }\r\n    isOk() {\r\n        return true;\r\n    }\r\n    isErr() {\r\n        return !this.isOk();\r\n    }\r\n    map(f) {\r\n        return ok(f(this.value));\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    mapErr(_f) {\r\n        return ok(this.value);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n    andThen(f) {\r\n        return f(this.value);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n    andThrough(f) {\r\n        return f(this.value).map((_value) => this.value);\r\n    }\r\n    andTee(f) {\r\n        try {\r\n            f(this.value);\r\n        }\r\n        catch (e) {\r\n            // Tee doesn't care about the error\r\n        }\r\n        return ok(this.value);\r\n    }\r\n    orTee(_f) {\r\n        return ok(this.value);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n    orElse(_f) {\r\n        return ok(this.value);\r\n    }\r\n    asyncAndThen(f) {\r\n        return f(this.value);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n    asyncAndThrough(f) {\r\n        return f(this.value).map(() => this.value);\r\n    }\r\n    asyncMap(f) {\r\n        return ResultAsync.fromSafePromise(f(this.value));\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    unwrapOr(_v) {\r\n        return this.value;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    match(ok, _err) {\r\n        return ok(this.value);\r\n    }\r\n    safeUnwrap() {\r\n        const value = this.value;\r\n        /* eslint-disable-next-line require-yield */\r\n        return (function* () {\r\n            return value;\r\n        })();\r\n    }\r\n    _unsafeUnwrap(_) {\r\n        return this.value;\r\n    }\r\n    _unsafeUnwrapErr(config) {\r\n        throw createNeverThrowError('Called `_unsafeUnwrapErr` on an Ok', this, config);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-this-alias, require-yield\r\n    *[Symbol.iterator]() {\r\n        return this.value;\r\n    }\r\n}\r\nclass Err {\r\n    constructor(error) {\r\n        this.error = error;\r\n    }\r\n    isOk() {\r\n        return false;\r\n    }\r\n    isErr() {\r\n        return !this.isOk();\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    map(_f) {\r\n        return err(this.error);\r\n    }\r\n    mapErr(f) {\r\n        return err(f(this.error));\r\n    }\r\n    andThrough(_f) {\r\n        return err(this.error);\r\n    }\r\n    andTee(_f) {\r\n        return err(this.error);\r\n    }\r\n    orTee(f) {\r\n        try {\r\n            f(this.error);\r\n        }\r\n        catch (e) {\r\n            // Tee doesn't care about the error\r\n        }\r\n        return err(this.error);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n    andThen(_f) {\r\n        return err(this.error);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n    orElse(f) {\r\n        return f(this.error);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    asyncAndThen(_f) {\r\n        return errAsync(this.error);\r\n    }\r\n    asyncAndThrough(_f) {\r\n        return errAsync(this.error);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    asyncMap(_f) {\r\n        return errAsync(this.error);\r\n    }\r\n    unwrapOr(v) {\r\n        return v;\r\n    }\r\n    match(_ok, err) {\r\n        return err(this.error);\r\n    }\r\n    safeUnwrap() {\r\n        const error = this.error;\r\n        return (function* () {\r\n            yield err(error);\r\n            throw new Error('Do not use this generator out of `safeTry`');\r\n        })();\r\n    }\r\n    _unsafeUnwrap(config) {\r\n        throw createNeverThrowError('Called `_unsafeUnwrap` on an Err', this, config);\r\n    }\r\n    _unsafeUnwrapErr(_) {\r\n        return this.error;\r\n    }\r\n    *[Symbol.iterator]() {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        // @ts-expect-error -- This is structurally equivalent and safe\r\n        yield self;\r\n        // @ts-expect-error -- This is structurally equivalent and safe\r\n        return self;\r\n    }\r\n}\r\nconst fromThrowable = exports.Result.fromThrowable;\r\n//#endregion\n\nexports.Err = Err;\nexports.Ok = Ok;\nexports.ResultAsync = ResultAsync;\nexports.err = err;\nexports.errAsync = errAsync;\nexports.fromAsyncThrowable = fromAsyncThrowable;\nexports.fromPromise = fromPromise;\nexports.fromSafePromise = fromSafePromise;\nexports.fromThrowable = fromThrowable;\nexports.ok = ok;\nexports.okAsync = okAsync;\nexports.safeTry = safeTry;\n", "/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nexports.hasOwnProperty = hasOwnProperty;\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        var keys_1 = new Array(obj.length);\n        for (var k = 0; k < keys_1.length; k++) {\n            keys_1[k] = \"\" + k;\n        }\n        return keys_1;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keys = [];\n    for (var i in obj) {\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\nexports._objectKeys = _objectKeys;\n;\n/**\n* Deeply clone the object.\n* https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n* @param  {any} obj value to clone\n* @return {any} cloned obj\n*/\nfunction _deepClone(obj) {\n    switch (typeof obj) {\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\nexports._deepClone = _deepClone;\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    var i = 0;\n    var len = str.length;\n    var charCode;\n    while (i < len) {\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\nexports.isInteger = isInteger;\n/**\n* Escapes a json pointer path\n* @param path The raw pointer\n* @return the Escaped path\n*/\nfunction escapePathComponent(path) {\n    if (path.indexOf('/') === -1 && path.indexOf('~') === -1)\n        return path;\n    return path.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\nexports.escapePathComponent = escapePathComponent;\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */\nfunction unescapePathComponent(path) {\n    return path.replace(/~1/g, '/').replace(/~0/g, '~');\n}\nexports.unescapePathComponent = unescapePathComponent;\nfunction _getPathRecursive(root, obj) {\n    var found;\n    for (var key in root) {\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + '/';\n            }\n            else if (typeof root[key] === 'object') {\n                found = _getPathRecursive(root[key], obj);\n                if (found != '') {\n                    return escapePathComponent(key) + '/' + found;\n                }\n            }\n        }\n    }\n    return '';\n}\nexports._getPathRecursive = _getPathRecursive;\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return '/';\n    }\n    var path = _getPathRecursive(root, obj);\n    if (path === '') {\n        throw new Error(\"Object not found in root\");\n    }\n    return \"/\" + path;\n}\nexports.getPath = getPath;\n/**\n* Recursively checks whether an object has any undefined values inside.\n*/\nfunction hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for (var i_1 = 0, len = obj.length; i_1 < len; i_1++) {\n                if (hasUndefined(obj[i_1])) {\n                    return true;\n                }\n            }\n        }\n        else if (typeof obj === \"object\") {\n            var objKeys = _objectKeys(obj);\n            var objKeysLength = objKeys.length;\n            for (var i = 0; i < objKeysLength; i++) {\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nexports.hasUndefined = hasUndefined;\nfunction patchErrorMessageFormatter(message, args) {\n    var messageParts = [message];\n    for (var key in args) {\n        var value = typeof args[key] === 'object' ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== 'undefined') {\n            messageParts.push(key + \": \" + value);\n        }\n    }\n    return messageParts.join('\\n');\n}\nvar PatchError = /** @class */ (function (_super) {\n    __extends(PatchError, _super);\n    function PatchError(message, name, index, operation, tree) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, patchErrorMessageFormatter(message, { name: name, index: index, operation: operation, tree: tree })) || this;\n        _this.name = name;\n        _this.index = index;\n        _this.operation = operation;\n        _this.tree = tree;\n        Object.setPrototypeOf(_this, _newTarget.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        _this.message = patchErrorMessageFormatter(message, { name: name, index: index, operation: operation, tree: tree });\n        return _this;\n    }\n    return PatchError;\n}(Error));\nexports.PatchError = PatchError;\n", "Object.defineProperty(exports, \"__esModule\", { value: true });\nvar helpers_js_1 = require(\"./helpers.js\");\nexports.JsonPatchError = helpers_js_1.PatchError;\nexports.deepClone = helpers_js_1._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */\n/* The operations applicable to an object */\nvar objOps = {\n    add: function (obj, key, document) {\n        obj[key] = this.value;\n        return { newDocument: document };\n    },\n    remove: function (obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return { newDocument: document, removed: removed };\n    },\n    replace: function (obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return { newDocument: document, removed: removed };\n    },\n    move: function (obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */\n        var removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = helpers_js_1._deepClone(removed);\n        }\n        var originalValue = applyOperation(document, { op: \"remove\", path: this.from }).removed;\n        applyOperation(document, { op: \"add\", path: this.path, value: originalValue });\n        return { newDocument: document, removed: removed };\n    },\n    copy: function (obj, key, document) {\n        var valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, { op: \"add\", path: this.path, value: helpers_js_1._deepClone(valueToCopy) });\n        return { newDocument: document };\n    },\n    test: function (obj, key, document) {\n        return { newDocument: document, test: _areEquals(obj[key], this.value) };\n    },\n    _get: function (obj, key, document) {\n        this.value = obj[key];\n        return { newDocument: document };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */\nvar arrOps = {\n    add: function (arr, i, document) {\n        if (helpers_js_1.isInteger(i)) {\n            arr.splice(i, 0, this.value);\n        }\n        else { // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return { newDocument: document, index: i };\n    },\n    remove: function (arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return { newDocument: document, removed: removedList[0] };\n    },\n    replace: function (arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return { newDocument: document, removed: removed };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */\nfunction getValueByPointer(document, pointer) {\n    if (pointer == '') {\n        return document;\n    }\n    var getOriginalDestination = { op: \"_get\", path: pointer };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\nexports.getValueByPointer = getValueByPointer;\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */\nfunction applyOperation(document, operation, validateOperation, mutateDocument, banPrototypeModifications, index) {\n    if (validateOperation === void 0) { validateOperation = false; }\n    if (mutateDocument === void 0) { mutateDocument = true; }\n    if (banPrototypeModifications === void 0) { banPrototypeModifications = true; }\n    if (index === void 0) { index = 0; }\n    if (validateOperation) {\n        if (typeof validateOperation == 'function') {\n            validateOperation(operation, 0, document, operation.path);\n        }\n        else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */\n    if (operation.path === \"\") {\n        var returnValue = { newDocument: document };\n        if (operation.op === 'add') {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        }\n        else if (operation.op === 'replace') {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        }\n        else if (operation.op === 'move' || operation.op === 'copy') { // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === 'move') { // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        }\n        else if (operation.op === 'test') {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new exports.JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        }\n        else if (operation.op === 'remove') { // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        }\n        else if (operation.op === '_get') {\n            operation.value = document;\n            return returnValue;\n        }\n        else { /* bad operation */\n            if (validateOperation) {\n                throw new exports.JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, document);\n            }\n            else {\n                return returnValue;\n            }\n        }\n    } /* END ROOT OPERATIONS */\n    else {\n        if (!mutateDocument) {\n            document = helpers_js_1._deepClone(document);\n        }\n        var path = operation.path || \"\";\n        var keys = path.split('/');\n        var obj = document;\n        var t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        var len = keys.length;\n        var existingPathFragment = undefined;\n        var key = void 0;\n        var validateFunction = void 0;\n        if (typeof validateOperation == 'function') {\n            validateFunction = validateOperation;\n        }\n        else {\n            validateFunction = validator;\n        }\n        while (true) {\n            key = keys[t];\n            if (key && key.indexOf('~') != -1) {\n                key = helpers_js_1.unescapePathComponent(key);\n            }\n            if (banPrototypeModifications &&\n                (key == '__proto__' ||\n                    (key == 'prototype' && t > 0 && keys[t - 1] == 'constructor'))) {\n                throw new TypeError('JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README');\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join('/');\n                    }\n                    else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === '-') {\n                    key = obj.length;\n                }\n                else {\n                    if (validateOperation && !helpers_js_1.isInteger(key)) {\n                        throw new exports.JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } // only parse key when it's an integer for `arr.prop` to work\n                    else if (helpers_js_1.isInteger(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new exports.JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    var returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new exports.JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            else {\n                if (t >= len) {\n                    var returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new exports.JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new exports.JsonPatchError('Cannot perform operation at the desired path', 'OPERATION_PATH_UNRESOLVABLE', index, operation, document);\n            }\n        }\n    }\n}\nexports.applyOperation = applyOperation;\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */\nfunction applyPatch(document, patch, validateOperation, mutateDocument, banPrototypeModifications) {\n    if (mutateDocument === void 0) { mutateDocument = true; }\n    if (banPrototypeModifications === void 0) { banPrototypeModifications = true; }\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new exports.JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n        }\n    }\n    if (!mutateDocument) {\n        document = helpers_js_1._deepClone(document);\n    }\n    var results = new Array(patch.length);\n    for (var i = 0, length_1 = patch.length; i < length_1; i++) {\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\nexports.applyPatch = applyPatch;\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */\nfunction applyReducer(document, operation, index) {\n    var operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) { // failed test\n        throw new exports.JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n    }\n    return operationResult.newDocument;\n}\nexports.applyReducer = applyReducer;\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */\nfunction validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== 'object' || operation === null || Array.isArray(operation)) {\n        throw new exports.JsonPatchError('Operation is not an object', 'OPERATION_NOT_AN_OBJECT', index, operation, document);\n    }\n    else if (!objOps[operation.op]) {\n        throw new exports.JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, document);\n    }\n    else if (typeof operation.path !== 'string') {\n        throw new exports.JsonPatchError('Operation `path` property is not a string', 'OPERATION_PATH_INVALID', index, operation, document);\n    }\n    else if (operation.path.indexOf('/') !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new exports.JsonPatchError('Operation `path` property must start with \"/\"', 'OPERATION_PATH_INVALID', index, operation, document);\n    }\n    else if ((operation.op === 'move' || operation.op === 'copy') && typeof operation.from !== 'string') {\n        throw new exports.JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)', 'OPERATION_FROM_REQUIRED', index, operation, document);\n    }\n    else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && operation.value === undefined) {\n        throw new exports.JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_REQUIRED', index, operation, document);\n    }\n    else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && helpers_js_1.hasUndefined(operation.value)) {\n        throw new exports.JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED', index, operation, document);\n    }\n    else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new exports.JsonPatchError('Cannot perform an `add` operation at the desired path', 'OPERATION_PATH_CANNOT_ADD', index, operation, document);\n            }\n        }\n        else if (operation.op === 'replace' || operation.op === 'remove' || operation.op === '_get') {\n            if (operation.path !== existingPathFragment) {\n                throw new exports.JsonPatchError('Cannot perform the operation at a path that does not exist', 'OPERATION_PATH_UNRESOLVABLE', index, operation, document);\n            }\n        }\n        else if (operation.op === 'move' || operation.op === 'copy') {\n            var existingValue = { op: \"_get\", path: operation.from, value: undefined };\n            var error = validate([existingValue], document);\n            if (error && error.name === 'OPERATION_PATH_UNRESOLVABLE') {\n                throw new exports.JsonPatchError('Cannot perform the operation from a path that does not exist', 'OPERATION_FROM_UNRESOLVABLE', index, operation, document);\n            }\n        }\n    }\n}\nexports.validator = validator;\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */\nfunction validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new exports.JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch(helpers_js_1._deepClone(document), helpers_js_1._deepClone(sequence), externalValidator || true);\n        }\n        else {\n            externalValidator = externalValidator || validator;\n            for (var i = 0; i < sequence.length; i++) {\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    }\n    catch (e) {\n        if (e instanceof exports.JsonPatchError) {\n            return e;\n        }\n        else {\n            throw e;\n        }\n    }\n}\nexports.validate = validate;\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length)\n                return false;\n            for (i = length; i-- !== 0;)\n                if (!_areEquals(a[i], b[i]))\n                    return false;\n            return true;\n        }\n        if (arrA != arrB)\n            return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length)\n            return false;\n        for (i = length; i-- !== 0;)\n            if (!b.hasOwnProperty(keys[i]))\n                return false;\n        for (i = length; i-- !== 0;) {\n            key = keys[i];\n            if (!_areEquals(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\nexports._areEquals = _areEquals;\n;\n", "Object.defineProperty(exports, \"__esModule\", { value: true });\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2021 Joachim Wester\n * MIT license\n */\nvar helpers_js_1 = require(\"./helpers.js\");\nvar core_js_1 = require(\"./core.js\");\nvar beforeDict = new WeakMap();\nvar Mirror = /** @class */ (function () {\n    function Mirror(obj) {\n        this.observers = new Map();\n        this.obj = obj;\n    }\n    return Mirror;\n}());\nvar ObserverInfo = /** @class */ (function () {\n    function ObserverInfo(callback, observer) {\n        this.callback = callback;\n        this.observer = observer;\n    }\n    return ObserverInfo;\n}());\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */\nfunction unobserve(root, observer) {\n    observer.unobserve();\n}\nexports.unobserve = unobserve;\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */\nfunction observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    }\n    else {\n        var observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = helpers_js_1._deepClone(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = function () {\n            generate(observer);\n        };\n        var fastCheck = function () {\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (typeof window !== 'undefined') { //not Node\n            window.addEventListener('mouseup', fastCheck);\n            window.addEventListener('keyup', fastCheck);\n            window.addEventListener('mousedown', fastCheck);\n            window.addEventListener('keydown', fastCheck);\n            window.addEventListener('change', fastCheck);\n        }\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = function () {\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('mouseup', fastCheck);\n            window.removeEventListener('keyup', fastCheck);\n            window.removeEventListener('mousedown', fastCheck);\n            window.removeEventListener('keydown', fastCheck);\n            window.removeEventListener('change', fastCheck);\n        }\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\nexports.observe = observe;\n/**\n * Generate an array of patches from an observer\n */\nfunction generate(observer, invertible) {\n    if (invertible === void 0) { invertible = false; }\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        core_js_1.applyPatch(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\nexports.generate = generate;\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = helpers_js_1._objectKeys(obj);\n    var oldKeys = helpers_js_1._objectKeys(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for (var t = oldKeys.length - 1; t >= 0; t--) {\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if (helpers_js_1.hasOwnProperty(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + helpers_js_1.escapePathComponent(key), invertible);\n            }\n            else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({ op: \"test\", path: path + \"/\" + helpers_js_1.escapePathComponent(key), value: helpers_js_1._deepClone(oldVal) });\n                    }\n                    patches.push({ op: \"replace\", path: path + \"/\" + helpers_js_1.escapePathComponent(key), value: helpers_js_1._deepClone(newVal) });\n                }\n            }\n        }\n        else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({ op: \"test\", path: path + \"/\" + helpers_js_1.escapePathComponent(key), value: helpers_js_1._deepClone(oldVal) });\n            }\n            patches.push({ op: \"remove\", path: path + \"/\" + helpers_js_1.escapePathComponent(key) });\n            deleted = true; // property has been deleted\n        }\n        else {\n            if (invertible) {\n                patches.push({ op: \"test\", path: path, value: mirror });\n            }\n            patches.push({ op: \"replace\", path: path, value: obj });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for (var t = 0; t < newKeys.length; t++) {\n        var key = newKeys[t];\n        if (!helpers_js_1.hasOwnProperty(mirror, key) && obj[key] !== undefined) {\n            patches.push({ op: \"add\", path: path + \"/\" + helpers_js_1.escapePathComponent(key), value: helpers_js_1._deepClone(obj[key]) });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */\nfunction compare(tree1, tree2, invertible) {\n    if (invertible === void 0) { invertible = false; }\n    var patches = [];\n    _generate(tree1, tree2, patches, '', invertible);\n    return patches;\n}\nexports.compare = compare;\n", "var core = require(\"./commonjs/core.js\");\nObject.assign(exports, core);\n\nvar duplex = require(\"./commonjs/duplex.js\");\nObject.assign(exports, duplex);\n\nvar helpers = require(\"./commonjs/helpers.js\");\nexports.JsonPatchError = helpers.PatchError;\nexports.deepClone = helpers._deepClone;\nexports.escapePathComponent = helpers.escapePathComponent;\nexports.unescapePathComponent = helpers.unescapePathComponent;\n", "import type { DeepModelingParams, NodeLogger } from '@liam-hq/agent'\nimport { createSupabaseRepositories, deepModeling } from '@liam-hq/agent'\nimport { logger, task } from '@trigger.dev/sdk'\nimport { createClient } from '../libs/supabase'\n\n// Define type excluding schemaData (repositories and logger are now passed via config)\ntype DeepModelingPayload = Omit<DeepModelingParams, 'schemaData'>\n\nfunction createWorkflowLogger(): NodeLogger {\n  return {\n    debug: (message: string, metadata?: Record<string, unknown>) => {\n      logger.debug(message, metadata)\n    },\n    log: (message: string, metadata?: Record<string, unknown>) => {\n      logger.log(message, metadata)\n    },\n    info: (message: string, metadata?: Record<string, unknown>) => {\n      logger.info(message, metadata)\n    },\n    warn: (message: string, metadata?: Record<string, unknown>) => {\n      logger.warn(message, metadata)\n    },\n    error: (message: string, metadata?: Record<string, unknown>) => {\n      logger.error(message, metadata)\n    },\n  }\n}\n\nexport const deepModelingWorkflowTask = task({\n  id: 'deep-modeling-workflow',\n  machine: 'medium-1x',\n  run: async (payload: DeepModelingPayload) => {\n    logger.log('Starting Deep Modeling workflow:', {\n      buildingSchemaId: payload.buildingSchemaId,\n      messageLength: payload.userInput.length,\n      timestamp: new Date().toISOString(),\n    })\n\n    // Create fresh repositories in job to avoid serialization issues\n    // When repositories are passed from API Route to Job, class instances lose their methods\n    // during JSON serialization/deserialization, causing \"createMessage is not a function\" errors\n    const supabaseClient = createClient()\n    const repositories = createSupabaseRepositories(supabaseClient)\n\n    const schemaResult = await repositories.schema.getSchema(\n      payload.designSessionId,\n    )\n    if (schemaResult.error || !schemaResult.data) {\n      throw new Error(`Failed to fetch schema data: ${schemaResult.error}`)\n    }\n\n    const workflowLogger = createWorkflowLogger()\n\n    const deepModelingParams: DeepModelingParams = {\n      ...payload,\n      schemaData: schemaResult.data.schema,\n    }\n\n    const result = await deepModeling(deepModelingParams, {\n      configurable: {\n        repositories,\n        logger: workflowLogger,\n      },\n    })\n\n    logger.log('Deep Modeling workflow completed:', {\n      success: result.isOk(),\n    })\n\n    return result\n  },\n})\n", "export * from './deepModeling'\nexport * from './repositories'\nexport * from './utils/nodeLogger'\n", "import { END, START, StateGraph } from '@langchain/langgraph'\nimport type { Schema } from '@liam-hq/db-structure'\nimport type { Result } from 'neverthrow'\nimport { err, ok } from 'neverthrow'\nimport { WORKFLOW_ERROR_MESSAGES } from './chat/workflow/constants'\nimport {\n  analyzeRequirementsNode,\n  designSchemaNode,\n  executeDdlNode,\n  finalizeArtifactsNode,\n  generateUsecaseNode,\n  prepareDmlNode,\n  reviewDeliverablesNode,\n  saveUserMessageNode,\n  validateSchemaNode,\n} from './chat/workflow/nodes'\nimport {\n  createAnnotations,\n  DEFAULT_RECURSION_LIMIT,\n} from './chat/workflow/shared/langGraphUtils'\nimport type { WorkflowConfigurable, WorkflowState } from './chat/workflow/types'\n\nexport type DeepModelingParams = {\n  userInput: string\n  schemaData: Schema\n  history: [string, string][]\n  organizationId?: string\n  buildingSchemaId: string\n  latestVersionNumber: number\n  designSessionId: string\n  userId: string\n  recursionLimit?: number\n}\n\nexport type DeepModelingResult = Result<\n  {\n    text: string\n  },\n  Error\n>\n\n/**\n * Format chat history array into a string\n * @param history - Array of formatted chat history strings\n * @returns Formatted chat history string or default message if empty\n */\nconst formatChatHistory = (history: string[]): string => {\n  return history.length > 0 ? history.join('\\n') : 'No previous conversation.'\n}\n\n/**\n * Retry policy configuration for all nodes\n */\nconst RETRY_POLICY = {\n  maxAttempts: 3,\n}\n\n/**\n * Create and configure the LangGraph workflow\n */\nconst createGraph = () => {\n  const ChatStateAnnotation = createAnnotations()\n  const graph = new StateGraph(ChatStateAnnotation)\n\n  graph\n    .addNode('saveUserMessage', saveUserMessageNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n    .addNode('analyzeRequirements', analyzeRequirementsNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n    .addNode('designSchema', designSchemaNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n    .addNode('executeDDL', executeDdlNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n    .addNode('generateUsecase', generateUsecaseNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n    .addNode('prepareDML', prepareDmlNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n    .addNode('validateSchema', validateSchemaNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n    .addNode('reviewDeliverables', reviewDeliverablesNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n    .addNode('finalizeArtifacts', finalizeArtifactsNode, {\n      retryPolicy: RETRY_POLICY,\n    })\n\n    .addEdge(START, 'saveUserMessage')\n    .addEdge('analyzeRequirements', 'designSchema')\n    .addEdge('executeDDL', 'generateUsecase')\n    .addEdge('generateUsecase', 'prepareDML')\n    .addEdge('prepareDML', 'validateSchema')\n    .addEdge('finalizeArtifacts', END)\n\n    // Conditional edge for saveUserMessage - skip to finalizeArtifacts if error\n    .addConditionalEdges('saveUserMessage', (state) => {\n      return state.error ? 'finalizeArtifacts' : 'analyzeRequirements'\n    })\n\n    // Conditional edge for designSchema - skip to finalizeArtifacts if error\n    .addConditionalEdges('designSchema', (state) => {\n      return state.error ? 'finalizeArtifacts' : 'executeDDL'\n    })\n\n    // Conditional edge for executeDDL - retry with designSchema if DDL execution fails\n    .addConditionalEdges('executeDDL', (state) => {\n      if (state.shouldRetryWithDesignSchema) {\n        return 'designSchema'\n      }\n      if (state.ddlExecutionFailed) {\n        return 'finalizeArtifacts'\n      }\n      return 'generateUsecase'\n    })\n\n    // Conditional edges for validation results\n    .addConditionalEdges('validateSchema', (state) => {\n      // success → reviewDeliverables\n      // dml error or test fail → designSchema\n      return state.error ? 'designSchema' : 'reviewDeliverables'\n    })\n\n    // Conditional edges for review results\n    .addConditionalEdges('reviewDeliverables', (state) => {\n      // OK → finalizeArtifacts\n      // NG or issues found → analyzeRequirements\n      return state.error ? 'analyzeRequirements' : 'finalizeArtifacts'\n    })\n\n  return graph.compile()\n}\n\n/**\n * Execute Deep Modeling workflow\n */\nexport const deepModeling = async (\n  params: DeepModelingParams,\n  config: {\n    configurable: WorkflowConfigurable\n  },\n): Promise<DeepModelingResult> => {\n  const {\n    userInput,\n    schemaData,\n    history,\n    organizationId,\n    buildingSchemaId,\n    latestVersionNumber = 0,\n    designSessionId,\n    userId,\n    recursionLimit = DEFAULT_RECURSION_LIMIT,\n  } = params\n\n  const { repositories, logger } = config.configurable\n\n  // Convert history format with role prefix\n  const historyArray = history.map(([role, content]) => {\n    const prefix = role === 'assistant' ? 'Assistant' : 'User'\n    return `${prefix}: ${content}`\n  })\n\n  // Create workflow state\n  const workflowState: WorkflowState = {\n    userInput: userInput,\n    formattedHistory: formatChatHistory(historyArray),\n    schemaData,\n    organizationId,\n    buildingSchemaId,\n    latestVersionNumber,\n    designSessionId,\n    userId,\n    retryCount: {},\n  }\n\n  try {\n    const compiled = createGraph()\n    const result = await compiled.invoke(workflowState, {\n      recursionLimit,\n      configurable: {\n        repositories,\n        logger,\n      },\n    })\n\n    if (result.error) {\n      return err(new Error(result.error.message))\n    }\n\n    return ok({\n      text: result.finalResponse || result.generatedAnswer || '',\n    })\n  } catch (error) {\n    logger.error(WORKFLOW_ERROR_MESSAGES.LANGGRAPH_FAILED, { error })\n\n    const errorMessage =\n      error instanceof Error\n        ? error.message\n        : WORKFLOW_ERROR_MESSAGES.EXECUTION_FAILED\n\n    const errorState = { ...workflowState, error: new Error(errorMessage) }\n    const finalizedResult = await finalizeArtifactsNode(errorState, {\n      configurable: {\n        repositories,\n        logger,\n      },\n    })\n\n    return err(new Error(finalizedResult.error?.message || errorMessage))\n  }\n}\n", "export * from './dist/index.js'", null, null, "export * from './dist/singletons/index.js'", null, null, null, null, null, null, "export * from './dist/index.js'", null, null, null, null, null, null, "export * from './dist/load/index.js'", "import { get_lc_unique_name, } from \"./serializable.js\";\nimport { optionalImportEntrypoints as defaultOptionalImportEntrypoints } from \"./import_constants.js\";\nimport * as coreImportMap from \"./import_map.js\";\nimport { keyFromJson, mapKeys } from \"./map_keys.js\";\nimport { getEnvironmentVariable } from \"../utils/env.js\";\nfunction combineAliasesAndInvert(constructor) {\n    const aliases = {};\n    for (\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let current = constructor; current && current.prototype; current = Object.getPrototypeOf(current)) {\n        Object.assign(aliases, Reflect.get(current.prototype, \"lc_aliases\"));\n    }\n    return Object.entries(aliases).reduce((acc, [key, value]) => {\n        acc[value] = key;\n        return acc;\n    }, {});\n}\nasync function reviver(value) {\n    const { optionalImportsMap = {}, optionalImportEntrypoints = [], importMap = {}, secretsMap = {}, path = [\"$\"], } = this;\n    const pathStr = path.join(\".\");\n    if (typeof value === \"object\" &&\n        value !== null &&\n        !Array.isArray(value) &&\n        \"lc\" in value &&\n        \"type\" in value &&\n        \"id\" in value &&\n        value.lc === 1 &&\n        value.type === \"secret\") {\n        const serialized = value;\n        const [key] = serialized.id;\n        if (key in secretsMap) {\n            return secretsMap[key];\n        }\n        else {\n            const secretValueInEnv = getEnvironmentVariable(key);\n            if (secretValueInEnv) {\n                return secretValueInEnv;\n            }\n            else {\n                throw new Error(`Missing key \"${key}\" for ${pathStr} in load(secretsMap={})`);\n            }\n        }\n    }\n    else if (typeof value === \"object\" &&\n        value !== null &&\n        !Array.isArray(value) &&\n        \"lc\" in value &&\n        \"type\" in value &&\n        \"id\" in value &&\n        value.lc === 1 &&\n        value.type === \"not_implemented\") {\n        const serialized = value;\n        const str = JSON.stringify(serialized);\n        throw new Error(`Trying to load an object that doesn't implement serialization: ${pathStr} -> ${str}`);\n    }\n    else if (typeof value === \"object\" &&\n        value !== null &&\n        !Array.isArray(value) &&\n        \"lc\" in value &&\n        \"type\" in value &&\n        \"id\" in value &&\n        \"kwargs\" in value &&\n        value.lc === 1) {\n        const serialized = value;\n        const str = JSON.stringify(serialized);\n        const [name, ...namespaceReverse] = serialized.id.slice().reverse();\n        const namespace = namespaceReverse.reverse();\n        const importMaps = { langchain_core: coreImportMap, langchain: importMap };\n        let module = null;\n        const optionalImportNamespaceAliases = [namespace.join(\"/\")];\n        if (namespace[0] === \"langchain_community\") {\n            optionalImportNamespaceAliases.push([\"langchain\", ...namespace.slice(1)].join(\"/\"));\n        }\n        const matchingNamespaceAlias = optionalImportNamespaceAliases.find((alias) => alias in optionalImportsMap);\n        if (defaultOptionalImportEntrypoints\n            .concat(optionalImportEntrypoints)\n            .includes(namespace.join(\"/\")) ||\n            matchingNamespaceAlias) {\n            if (matchingNamespaceAlias !== undefined) {\n                module = await optionalImportsMap[matchingNamespaceAlias];\n            }\n            else {\n                throw new Error(`Missing key \"${namespace.join(\"/\")}\" for ${pathStr} in load(optionalImportsMap={})`);\n            }\n        }\n        else {\n            let finalImportMap;\n            // Currently, we only support langchain and langchain_core imports.\n            if (namespace[0] === \"langchain\" || namespace[0] === \"langchain_core\") {\n                finalImportMap = importMaps[namespace[0]];\n                namespace.shift();\n            }\n            else {\n                throw new Error(`Invalid namespace: ${pathStr} -> ${str}`);\n            }\n            // The root namespace \"langchain\" is not a valid import.\n            if (namespace.length === 0) {\n                throw new Error(`Invalid namespace: ${pathStr} -> ${str}`);\n            }\n            // Find the longest matching namespace.\n            let importMapKey;\n            do {\n                importMapKey = namespace.join(\"__\");\n                if (importMapKey in finalImportMap) {\n                    break;\n                }\n                else {\n                    namespace.pop();\n                }\n            } while (namespace.length > 0);\n            // If no matching namespace is found, throw an error.\n            if (importMapKey in finalImportMap) {\n                module = finalImportMap[importMapKey];\n            }\n        }\n        if (typeof module !== \"object\" || module === null) {\n            throw new Error(`Invalid namespace: ${pathStr} -> ${str}`);\n        }\n        // Extract the builder from the import map.\n        const builder = \n        // look for a named export with the same name as the class\n        module[name] ??\n            // look for an export with a lc_name property matching the class name\n            // this is necessary for classes that are minified\n            Object.values(module).find((v) => typeof v === \"function\" &&\n                get_lc_unique_name(v) === name);\n        if (typeof builder !== \"function\") {\n            throw new Error(`Invalid identifer: ${pathStr} -> ${str}`);\n        }\n        // Recurse on the arguments, which may be serialized objects themselves\n        const kwargs = await reviver.call({ ...this, path: [...path, \"kwargs\"] }, serialized.kwargs);\n        // Construct the object\n        if (serialized.type === \"constructor\") {\n            // eslint-disable-next-line new-cap, @typescript-eslint/no-explicit-any\n            const instance = new builder(mapKeys(kwargs, keyFromJson, combineAliasesAndInvert(builder)));\n            // Minification in severless/edge runtimes will mange the\n            // name of classes presented in traces. As the names in import map\n            // are present as-is even with minification, use these names instead\n            Object.defineProperty(instance.constructor, \"name\", { value: name });\n            return instance;\n        }\n        else {\n            throw new Error(`Invalid type: ${pathStr} -> ${str}`);\n        }\n    }\n    else if (typeof value === \"object\" && value !== null) {\n        if (Array.isArray(value)) {\n            return Promise.all(value.map((v, i) => reviver.call({ ...this, path: [...path, `${i}`] }, v)));\n        }\n        else {\n            return Object.fromEntries(await Promise.all(Object.entries(value).map(async ([key, value]) => [\n                key,\n                await reviver.call({ ...this, path: [...path, key] }, value),\n            ])));\n        }\n    }\n    return value;\n}\nexport async function load(text, mappings) {\n    const json = JSON.parse(text);\n    return reviver.call({ ...mappings }, json);\n}\n", "// Auto-generated by `scripts/create-entrypoints.js`. Do not edit manually.\nexport const optionalImportEntrypoints = [];\n", "// Auto-generated by `scripts/create-entrypoints.js`. Do not edit manually.\nexport * as agents from \"../agents.js\";\nexport * as caches from \"../caches/base.js\";\nexport * as callbacks__base from \"../callbacks/base.js\";\nexport * as callbacks__manager from \"../callbacks/manager.js\";\nexport * as callbacks__promises from \"../callbacks/promises.js\";\nexport * as chat_history from \"../chat_history.js\";\nexport * as documents from \"../documents/index.js\";\nexport * as embeddings from \"../embeddings.js\";\nexport * as example_selectors from \"../example_selectors/index.js\";\nexport * as language_models__base from \"../language_models/base.js\";\nexport * as language_models__chat_models from \"../language_models/chat_models.js\";\nexport * as language_models__llms from \"../language_models/llms.js\";\nexport * as load__serializable from \"../load/serializable.js\";\nexport * as memory from \"../memory.js\";\nexport * as messages from \"../messages/index.js\";\nexport * as output_parsers from \"../output_parsers/index.js\";\nexport * as outputs from \"../outputs.js\";\nexport * as prompts from \"../prompts/index.js\";\nexport * as prompt_values from \"../prompt_values.js\";\nexport * as runnables from \"../runnables/index.js\";\nexport * as retrievers from \"../retrievers/index.js\";\nexport * as stores from \"../stores.js\";\nexport * as tools from \"../tools/index.js\";\nexport * as tracers__base from \"../tracers/base.js\";\nexport * as tracers__console from \"../tracers/console.js\";\nexport * as tracers__initialize from \"../tracers/initialize.js\";\nexport * as tracers__log_stream from \"../tracers/log_stream.js\";\nexport * as tracers__run_collector from \"../tracers/run_collector.js\";\nexport * as tracers__tracer_langchain from \"../tracers/tracer_langchain.js\";\nexport * as tracers__tracer_langchain_v1 from \"../tracers/tracer_langchain_v1.js\";\nexport * as utils__async_caller from \"../utils/async_caller.js\";\nexport * as utils__chunk_array from \"../utils/chunk_array.js\";\nexport * as utils__env from \"../utils/env.js\";\nexport * as utils__function_calling from \"../utils/function_calling.js\";\nexport * as utils__hash from \"../utils/hash.js\";\nexport * as utils__json_patch from \"../utils/json_patch.js\";\nexport * as utils__json_schema from \"../utils/json_schema.js\";\nexport * as utils__math from \"../utils/math.js\";\nexport * as utils__stream from \"../utils/stream.js\";\nexport * as utils__testing from \"../utils/testing/index.js\";\nexport * as utils__tiktoken from \"../utils/tiktoken.js\";\nexport * as utils__types from \"../utils/types/index.js\";\nexport * as vectorstores from \"../vectorstores.js\";\n", "export {};\n", "import { insecureHash } from \"../utils/hash.js\";\nimport { mapStoredMessageToChatMessage } from \"../messages/utils.js\";\n/**\n * This cache key should be consistent across all versions of LangChain.\n * It is currently NOT consistent across versions of LangChain.\n *\n * A huge benefit of having a remote cache (like redis) is that you can\n * access the cache from different processes/machines. The allows you to\n * separate concerns and scale horizontally.\n *\n * TODO: Make cache key consistent across versions of LangChain.\n *\n * @deprecated Use `makeDefaultKeyEncoder()` to create a custom key encoder.\n * This function will be removed in a future version.\n */\nexport const getCacheKey = (...strings) => insecureHash(strings.join(\"_\"));\nexport function deserializeStoredGeneration(storedGeneration) {\n    if (storedGeneration.message !== undefined) {\n        return {\n            text: storedGeneration.text,\n            message: mapStoredMessageToChatMessage(storedGeneration.message),\n        };\n    }\n    else {\n        return { text: storedGeneration.text };\n    }\n}\nexport function serializeGeneration(generation) {\n    const serializedValue = {\n        text: generation.text,\n    };\n    if (generation.message !== undefined) {\n        serializedValue.message = generation.message.toDict();\n    }\n    return serializedValue;\n}\n/**\n * Base class for all caches. All caches should extend this class.\n */\nexport class BaseCache {\n    constructor() {\n        // For backwards compatibility, we use a default key encoder\n        // that uses SHA-1 to hash the prompt and LLM key. This will also print a warning\n        // about the security implications of using SHA-1 as a cache key.\n        Object.defineProperty(this, \"keyEncoder\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: getCacheKey\n        });\n    }\n    /**\n     * Sets a custom key encoder function for the cache.\n     * This function should take a prompt and an LLM key and return a string\n     * that will be used as the cache key.\n     * @param keyEncoderFn The custom key encoder function.\n     */\n    makeDefaultKeyEncoder(keyEncoderFn) {\n        this.keyEncoder = keyEncoderFn;\n    }\n}\nconst GLOBAL_MAP = new Map();\n/**\n * A cache for storing LLM generations that stores data in memory.\n */\nexport class InMemoryCache extends BaseCache {\n    constructor(map) {\n        super();\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.cache = map ?? new Map();\n    }\n    /**\n     * Retrieves data from the cache using a prompt and an LLM key. If the\n     * data is not found, it returns null.\n     * @param prompt The prompt used to find the data.\n     * @param llmKey The LLM key used to find the data.\n     * @returns The data corresponding to the prompt and LLM key, or null if not found.\n     */\n    lookup(prompt, llmKey) {\n        return Promise.resolve(this.cache.get(this.keyEncoder(prompt, llmKey)) ?? null);\n    }\n    /**\n     * Updates the cache with new data using a prompt and an LLM key.\n     * @param prompt The prompt used to store the data.\n     * @param llmKey The LLM key used to store the data.\n     * @param value The data to be stored.\n     */\n    async update(prompt, llmKey, value) {\n        this.cache.set(this.keyEncoder(prompt, llmKey), value);\n    }\n    /**\n     * Returns a global instance of InMemoryCache using a predefined global\n     * map as the initial cache.\n     * @returns A global instance of InMemoryCache.\n     */\n    static global() {\n        return new InMemoryCache(GLOBAL_MAP);\n    }\n}\n", "export { insecureHash } from \"./js-sha1/hash.js\";\nexport { sha256 } from \"./js-sha256/hash.js\";\n", "// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n\"use strict\";\nvar root = typeof window === \"object\" ? window : {};\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [-2147483648, 8388608, 32768, 128];\nvar SHIFT = [24, 16, 8, 0];\nvar OUTPUT_TYPES = [\"hex\", \"array\", \"digest\", \"arrayBuffer\"];\nvar blocks = [];\nfunction Sha1(sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] =\n            blocks[16] =\n                blocks[1] =\n                    blocks[2] =\n                        blocks[3] =\n                            blocks[4] =\n                                blocks[5] =\n                                    blocks[6] =\n                                        blocks[7] =\n                                            blocks[8] =\n                                                blocks[9] =\n                                                    blocks[10] =\n                                                        blocks[11] =\n                                                            blocks[12] =\n                                                                blocks[13] =\n                                                                    blocks[14] =\n                                                                        blocks[15] =\n                                                                            0;\n        this.blocks = blocks;\n    }\n    else {\n        this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n    this.h0 = 0x67452301;\n    this.h1 = 0xefcdab89;\n    this.h2 = 0x98badcfe;\n    this.h3 = 0x10325476;\n    this.h4 = 0xc3d2e1f0;\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n}\nSha1.prototype.update = function (message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString = typeof message !== \"string\";\n    if (notString && message.constructor === root.ArrayBuffer) {\n        message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n    while (index < length) {\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            blocks[16] =\n                blocks[1] =\n                    blocks[2] =\n                        blocks[3] =\n                            blocks[4] =\n                                blocks[5] =\n                                    blocks[6] =\n                                        blocks[7] =\n                                            blocks[8] =\n                                                blocks[9] =\n                                                    blocks[10] =\n                                                        blocks[11] =\n                                                            blocks[12] =\n                                                                blocks[13] =\n                                                                    blocks[14] =\n                                                                        blocks[15] =\n                                                                            0;\n        }\n        if (notString) {\n            for (i = this.start; index < length && i < 64; ++index) {\n                blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        }\n        else {\n            for (i = this.start; index < length && i < 64; ++index) {\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >> 2] |= code << SHIFT[i++ & 3];\n                }\n                else if (code < 0x800) {\n                    blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n                else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n                else {\n                    code =\n                        0x10000 +\n                            (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n                    blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        }\n        else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += (this.bytes / 4294967296) << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha1.prototype.finalize = function () {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] =\n            blocks[1] =\n                blocks[2] =\n                    blocks[3] =\n                        blocks[4] =\n                            blocks[5] =\n                                blocks[6] =\n                                    blocks[7] =\n                                        blocks[8] =\n                                            blocks[9] =\n                                                blocks[10] =\n                                                    blocks[11] =\n                                                        blocks[12] =\n                                                            blocks[13] =\n                                                                blocks[14] =\n                                                                    blocks[15] =\n                                                                        0;\n    }\n    blocks[14] = (this.hBytes << 3) | (this.bytes >>> 29);\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha1.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n    for (j = 16; j < 80; ++j) {\n        t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n        blocks[j] = (t << 1) | (t >>> 31);\n    }\n    for (j = 0; j < 20; j += 5) {\n        f = (b & c) | (~b & d);\n        t = (a << 5) | (a >>> 27);\n        e = (t + f + e + 1518500249 + blocks[j]) << 0;\n        b = (b << 30) | (b >>> 2);\n        f = (a & b) | (~a & c);\n        t = (e << 5) | (e >>> 27);\n        d = (t + f + d + 1518500249 + blocks[j + 1]) << 0;\n        a = (a << 30) | (a >>> 2);\n        f = (e & a) | (~e & b);\n        t = (d << 5) | (d >>> 27);\n        c = (t + f + c + 1518500249 + blocks[j + 2]) << 0;\n        e = (e << 30) | (e >>> 2);\n        f = (d & e) | (~d & a);\n        t = (c << 5) | (c >>> 27);\n        b = (t + f + b + 1518500249 + blocks[j + 3]) << 0;\n        d = (d << 30) | (d >>> 2);\n        f = (c & d) | (~c & e);\n        t = (b << 5) | (b >>> 27);\n        a = (t + f + a + 1518500249 + blocks[j + 4]) << 0;\n        c = (c << 30) | (c >>> 2);\n    }\n    for (; j < 40; j += 5) {\n        f = b ^ c ^ d;\n        t = (a << 5) | (a >>> 27);\n        e = (t + f + e + 1859775393 + blocks[j]) << 0;\n        b = (b << 30) | (b >>> 2);\n        f = a ^ b ^ c;\n        t = (e << 5) | (e >>> 27);\n        d = (t + f + d + 1859775393 + blocks[j + 1]) << 0;\n        a = (a << 30) | (a >>> 2);\n        f = e ^ a ^ b;\n        t = (d << 5) | (d >>> 27);\n        c = (t + f + c + 1859775393 + blocks[j + 2]) << 0;\n        e = (e << 30) | (e >>> 2);\n        f = d ^ e ^ a;\n        t = (c << 5) | (c >>> 27);\n        b = (t + f + b + 1859775393 + blocks[j + 3]) << 0;\n        d = (d << 30) | (d >>> 2);\n        f = c ^ d ^ e;\n        t = (b << 5) | (b >>> 27);\n        a = (t + f + a + 1859775393 + blocks[j + 4]) << 0;\n        c = (c << 30) | (c >>> 2);\n    }\n    for (; j < 60; j += 5) {\n        f = (b & c) | (b & d) | (c & d);\n        t = (a << 5) | (a >>> 27);\n        e = (t + f + e - 1894007588 + blocks[j]) << 0;\n        b = (b << 30) | (b >>> 2);\n        f = (a & b) | (a & c) | (b & c);\n        t = (e << 5) | (e >>> 27);\n        d = (t + f + d - 1894007588 + blocks[j + 1]) << 0;\n        a = (a << 30) | (a >>> 2);\n        f = (e & a) | (e & b) | (a & b);\n        t = (d << 5) | (d >>> 27);\n        c = (t + f + c - 1894007588 + blocks[j + 2]) << 0;\n        e = (e << 30) | (e >>> 2);\n        f = (d & e) | (d & a) | (e & a);\n        t = (c << 5) | (c >>> 27);\n        b = (t + f + b - 1894007588 + blocks[j + 3]) << 0;\n        d = (d << 30) | (d >>> 2);\n        f = (c & d) | (c & e) | (d & e);\n        t = (b << 5) | (b >>> 27);\n        a = (t + f + a - 1894007588 + blocks[j + 4]) << 0;\n        c = (c << 30) | (c >>> 2);\n    }\n    for (; j < 80; j += 5) {\n        f = b ^ c ^ d;\n        t = (a << 5) | (a >>> 27);\n        e = (t + f + e - 899497514 + blocks[j]) << 0;\n        b = (b << 30) | (b >>> 2);\n        f = a ^ b ^ c;\n        t = (e << 5) | (e >>> 27);\n        d = (t + f + d - 899497514 + blocks[j + 1]) << 0;\n        a = (a << 30) | (a >>> 2);\n        f = e ^ a ^ b;\n        t = (d << 5) | (d >>> 27);\n        c = (t + f + c - 899497514 + blocks[j + 2]) << 0;\n        e = (e << 30) | (e >>> 2);\n        f = d ^ e ^ a;\n        t = (c << 5) | (c >>> 27);\n        b = (t + f + b - 899497514 + blocks[j + 3]) << 0;\n        d = (d << 30) | (d >>> 2);\n        f = c ^ d ^ e;\n        t = (b << 5) | (b >>> 27);\n        a = (t + f + a - 899497514 + blocks[j + 4]) << 0;\n        c = (c << 30) | (c >>> 2);\n    }\n    this.h0 = (this.h0 + a) << 0;\n    this.h1 = (this.h1 + b) << 0;\n    this.h2 = (this.h2 + c) << 0;\n    this.h3 = (this.h3 + d) << 0;\n    this.h4 = (this.h4 + e) << 0;\n};\nSha1.prototype.hex = function () {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return (HEX_CHARS[(h0 >> 28) & 0x0f] +\n        HEX_CHARS[(h0 >> 24) & 0x0f] +\n        HEX_CHARS[(h0 >> 20) & 0x0f] +\n        HEX_CHARS[(h0 >> 16) & 0x0f] +\n        HEX_CHARS[(h0 >> 12) & 0x0f] +\n        HEX_CHARS[(h0 >> 8) & 0x0f] +\n        HEX_CHARS[(h0 >> 4) & 0x0f] +\n        HEX_CHARS[h0 & 0x0f] +\n        HEX_CHARS[(h1 >> 28) & 0x0f] +\n        HEX_CHARS[(h1 >> 24) & 0x0f] +\n        HEX_CHARS[(h1 >> 20) & 0x0f] +\n        HEX_CHARS[(h1 >> 16) & 0x0f] +\n        HEX_CHARS[(h1 >> 12) & 0x0f] +\n        HEX_CHARS[(h1 >> 8) & 0x0f] +\n        HEX_CHARS[(h1 >> 4) & 0x0f] +\n        HEX_CHARS[h1 & 0x0f] +\n        HEX_CHARS[(h2 >> 28) & 0x0f] +\n        HEX_CHARS[(h2 >> 24) & 0x0f] +\n        HEX_CHARS[(h2 >> 20) & 0x0f] +\n        HEX_CHARS[(h2 >> 16) & 0x0f] +\n        HEX_CHARS[(h2 >> 12) & 0x0f] +\n        HEX_CHARS[(h2 >> 8) & 0x0f] +\n        HEX_CHARS[(h2 >> 4) & 0x0f] +\n        HEX_CHARS[h2 & 0x0f] +\n        HEX_CHARS[(h3 >> 28) & 0x0f] +\n        HEX_CHARS[(h3 >> 24) & 0x0f] +\n        HEX_CHARS[(h3 >> 20) & 0x0f] +\n        HEX_CHARS[(h3 >> 16) & 0x0f] +\n        HEX_CHARS[(h3 >> 12) & 0x0f] +\n        HEX_CHARS[(h3 >> 8) & 0x0f] +\n        HEX_CHARS[(h3 >> 4) & 0x0f] +\n        HEX_CHARS[h3 & 0x0f] +\n        HEX_CHARS[(h4 >> 28) & 0x0f] +\n        HEX_CHARS[(h4 >> 24) & 0x0f] +\n        HEX_CHARS[(h4 >> 20) & 0x0f] +\n        HEX_CHARS[(h4 >> 16) & 0x0f] +\n        HEX_CHARS[(h4 >> 12) & 0x0f] +\n        HEX_CHARS[(h4 >> 8) & 0x0f] +\n        HEX_CHARS[(h4 >> 4) & 0x0f] +\n        HEX_CHARS[h4 & 0x0f]);\n};\nSha1.prototype.toString = Sha1.prototype.hex;\nSha1.prototype.digest = function () {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return [\n        (h0 >> 24) & 0xff,\n        (h0 >> 16) & 0xff,\n        (h0 >> 8) & 0xff,\n        h0 & 0xff,\n        (h1 >> 24) & 0xff,\n        (h1 >> 16) & 0xff,\n        (h1 >> 8) & 0xff,\n        h1 & 0xff,\n        (h2 >> 24) & 0xff,\n        (h2 >> 16) & 0xff,\n        (h2 >> 8) & 0xff,\n        h2 & 0xff,\n        (h3 >> 24) & 0xff,\n        (h3 >> 16) & 0xff,\n        (h3 >> 8) & 0xff,\n        h3 & 0xff,\n        (h4 >> 24) & 0xff,\n        (h4 >> 16) & 0xff,\n        (h4 >> 8) & 0xff,\n        h4 & 0xff,\n    ];\n};\nSha1.prototype.array = Sha1.prototype.digest;\nSha1.prototype.arrayBuffer = function () {\n    this.finalize();\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n};\nlet hasLoggedWarning = false;\n/**\n * @deprecated Use `makeDefaultKeyEncoder()` to create a custom key encoder.\n * This function will be removed in a future version.\n */\nexport const insecureHash = (message) => {\n    if (!hasLoggedWarning) {\n        console.warn([\n            `The default method for hashing keys is insecure and will be replaced in a future version,`,\n            `but hasn't been replaced yet as to not break existing caches. It's recommended that you use`,\n            `a more secure hashing algorithm to avoid cache poisoning.`,\n            ``,\n            `See this page for more information:`,\n            `|`,\n            `└> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm`,\n        ].join(\"\\n\"));\n        hasLoggedWarning = true;\n    }\n    return new Sha1(true).update(message)[\"hex\"]();\n};\n", "// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.11.1\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2025\n * @license MIT\n */\n/*jslint bitwise: true */\n\"use strict\";\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [-2147483648, 8388608, 32768, 128];\nvar SHIFT = [24, 16, 8, 0];\nvar K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1,\n    0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n    0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174, 0xe49b69c1, 0xefbe4786,\n    0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147,\n    0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n    0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85, 0xa2bfe8a1, 0xa81a664b,\n    0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a,\n    0x5b9cca4f, 0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n    0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2,\n];\nvar OUTPUT_TYPES = [\"hex\", \"array\", \"digest\", \"arrayBuffer\"];\nvar blocks = [];\nfunction Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] =\n            blocks[16] =\n                blocks[1] =\n                    blocks[2] =\n                        blocks[3] =\n                            blocks[4] =\n                                blocks[5] =\n                                    blocks[6] =\n                                        blocks[7] =\n                                            blocks[8] =\n                                                blocks[9] =\n                                                    blocks[10] =\n                                                        blocks[11] =\n                                                            blocks[12] =\n                                                                blocks[13] =\n                                                                    blocks[14] =\n                                                                        blocks[15] =\n                                                                            0;\n        this.blocks = blocks;\n    }\n    else {\n        this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n    if (is224) {\n        this.h0 = 0xc1059ed8;\n        this.h1 = 0x367cd507;\n        this.h2 = 0x3070dd17;\n        this.h3 = 0xf70e5939;\n        this.h4 = 0xffc00b31;\n        this.h5 = 0x68581511;\n        this.h6 = 0x64f98fa7;\n        this.h7 = 0xbefa4fa4;\n    }\n    else {\n        // 256\n        this.h0 = 0x6a09e667;\n        this.h1 = 0xbb67ae85;\n        this.h2 = 0x3c6ef372;\n        this.h3 = 0xa54ff53a;\n        this.h4 = 0x510e527f;\n        this.h5 = 0x9b05688c;\n        this.h6 = 0x1f83d9ab;\n        this.h7 = 0x5be0cd19;\n    }\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n}\nSha256.prototype.update = function (message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString, type = typeof message;\n    if (type !== \"string\") {\n        if (type === \"object\") {\n            if (message === null) {\n                throw new Error(ERROR);\n            }\n            else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n                message = new Uint8Array(message);\n            }\n            else if (!Array.isArray(message)) {\n                if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n                    throw new Error(ERROR);\n                }\n            }\n        }\n        else {\n            throw new Error(ERROR);\n        }\n        notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n    while (index < length) {\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            this.block =\n                blocks[16] =\n                    blocks[1] =\n                        blocks[2] =\n                            blocks[3] =\n                                blocks[4] =\n                                    blocks[5] =\n                                        blocks[6] =\n                                            blocks[7] =\n                                                blocks[8] =\n                                                    blocks[9] =\n                                                        blocks[10] =\n                                                            blocks[11] =\n                                                                blocks[12] =\n                                                                    blocks[13] =\n                                                                        blocks[14] =\n                                                                            blocks[15] =\n                                                                                0;\n        }\n        if (notString) {\n            for (i = this.start; index < length && i < 64; ++index) {\n                blocks[i >>> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        }\n        else {\n            for (i = this.start; index < length && i < 64; ++index) {\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >>> 2] |= code << SHIFT[i++ & 3];\n                }\n                else if (code < 0x800) {\n                    blocks[i >>> 2] |= (0xc0 | (code >>> 6)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n                else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >>> 2] |= (0xe0 | (code >>> 12)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n                else {\n                    code =\n                        0x10000 +\n                            (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n                    blocks[i >>> 2] |= (0xf0 | (code >>> 18)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | ((code >>> 12) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n                    blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        }\n        else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += (this.bytes / 4294967296) << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha256.prototype.finalize = function () {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >>> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] =\n            blocks[1] =\n                blocks[2] =\n                    blocks[3] =\n                        blocks[4] =\n                            blocks[5] =\n                                blocks[6] =\n                                    blocks[7] =\n                                        blocks[8] =\n                                            blocks[9] =\n                                                blocks[10] =\n                                                    blocks[11] =\n                                                        blocks[12] =\n                                                            blocks[13] =\n                                                                blocks[14] =\n                                                                    blocks[15] =\n                                                                        0;\n    }\n    blocks[14] = (this.hBytes << 3) | (this.bytes >>> 29);\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6, h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n    for (j = 16; j < 64; ++j) {\n        // rightrotate\n        t1 = blocks[j - 15];\n        s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n        t1 = blocks[j - 2];\n        s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n        blocks[j] = (blocks[j - 16] + s0 + blocks[j - 7] + s1) << 0;\n    }\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n        if (this.first) {\n            if (this.is224) {\n                ab = 300032;\n                t1 = blocks[0] - 1413257819;\n                h = (t1 - 150054599) << 0;\n                d = (t1 + 24177077) << 0;\n            }\n            else {\n                ab = 704751109;\n                t1 = blocks[0] - 210244248;\n                h = (t1 - 1521486534) << 0;\n                d = (t1 + 143694565) << 0;\n            }\n            this.first = false;\n        }\n        else {\n            s0 =\n                ((a >>> 2) | (a << 30)) ^\n                    ((a >>> 13) | (a << 19)) ^\n                    ((a >>> 22) | (a << 10));\n            s1 =\n                ((e >>> 6) | (e << 26)) ^\n                    ((e >>> 11) | (e << 21)) ^\n                    ((e >>> 25) | (e << 7));\n            ab = a & b;\n            maj = ab ^ (a & c) ^ bc;\n            ch = (e & f) ^ (~e & g);\n            t1 = h + s1 + ch + K[j] + blocks[j];\n            t2 = s0 + maj;\n            h = (d + t1) << 0;\n            d = (t1 + t2) << 0;\n        }\n        s0 =\n            ((d >>> 2) | (d << 30)) ^\n                ((d >>> 13) | (d << 19)) ^\n                ((d >>> 22) | (d << 10));\n        s1 =\n            ((h >>> 6) | (h << 26)) ^\n                ((h >>> 11) | (h << 21)) ^\n                ((h >>> 25) | (h << 7));\n        da = d & a;\n        maj = da ^ (d & b) ^ ab;\n        ch = (g & h) ^ (~g & e);\n        t1 = f + s1 + ch + K[j + 1] + blocks[j + 1];\n        t2 = s0 + maj;\n        g = (c + t1) << 0;\n        c = (t1 + t2) << 0;\n        s0 =\n            ((c >>> 2) | (c << 30)) ^\n                ((c >>> 13) | (c << 19)) ^\n                ((c >>> 22) | (c << 10));\n        s1 =\n            ((g >>> 6) | (g << 26)) ^\n                ((g >>> 11) | (g << 21)) ^\n                ((g >>> 25) | (g << 7));\n        cd = c & d;\n        maj = cd ^ (c & a) ^ da;\n        ch = (f & g) ^ (~f & h);\n        t1 = e + s1 + ch + K[j + 2] + blocks[j + 2];\n        t2 = s0 + maj;\n        f = (b + t1) << 0;\n        b = (t1 + t2) << 0;\n        s0 =\n            ((b >>> 2) | (b << 30)) ^\n                ((b >>> 13) | (b << 19)) ^\n                ((b >>> 22) | (b << 10));\n        s1 =\n            ((f >>> 6) | (f << 26)) ^\n                ((f >>> 11) | (f << 21)) ^\n                ((f >>> 25) | (f << 7));\n        bc = b & c;\n        maj = bc ^ (b & d) ^ cd;\n        ch = (f & g) ^ (~f & h);\n        t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n        t2 = s0 + maj;\n        e = (a + t1) << 0;\n        a = (t1 + t2) << 0;\n        this.chromeBugWorkAround = true;\n    }\n    this.h0 = (this.h0 + a) << 0;\n    this.h1 = (this.h1 + b) << 0;\n    this.h2 = (this.h2 + c) << 0;\n    this.h3 = (this.h3 + d) << 0;\n    this.h4 = (this.h4 + e) << 0;\n    this.h5 = (this.h5 + f) << 0;\n    this.h6 = (this.h6 + g) << 0;\n    this.h7 = (this.h7 + h) << 0;\n};\nSha256.prototype.hex = function () {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5, h6 = this.h6, h7 = this.h7;\n    var hex = HEX_CHARS[(h0 >>> 28) & 0x0f] +\n        HEX_CHARS[(h0 >>> 24) & 0x0f] +\n        HEX_CHARS[(h0 >>> 20) & 0x0f] +\n        HEX_CHARS[(h0 >>> 16) & 0x0f] +\n        HEX_CHARS[(h0 >>> 12) & 0x0f] +\n        HEX_CHARS[(h0 >>> 8) & 0x0f] +\n        HEX_CHARS[(h0 >>> 4) & 0x0f] +\n        HEX_CHARS[h0 & 0x0f] +\n        HEX_CHARS[(h1 >>> 28) & 0x0f] +\n        HEX_CHARS[(h1 >>> 24) & 0x0f] +\n        HEX_CHARS[(h1 >>> 20) & 0x0f] +\n        HEX_CHARS[(h1 >>> 16) & 0x0f] +\n        HEX_CHARS[(h1 >>> 12) & 0x0f] +\n        HEX_CHARS[(h1 >>> 8) & 0x0f] +\n        HEX_CHARS[(h1 >>> 4) & 0x0f] +\n        HEX_CHARS[h1 & 0x0f] +\n        HEX_CHARS[(h2 >>> 28) & 0x0f] +\n        HEX_CHARS[(h2 >>> 24) & 0x0f] +\n        HEX_CHARS[(h2 >>> 20) & 0x0f] +\n        HEX_CHARS[(h2 >>> 16) & 0x0f] +\n        HEX_CHARS[(h2 >>> 12) & 0x0f] +\n        HEX_CHARS[(h2 >>> 8) & 0x0f] +\n        HEX_CHARS[(h2 >>> 4) & 0x0f] +\n        HEX_CHARS[h2 & 0x0f] +\n        HEX_CHARS[(h3 >>> 28) & 0x0f] +\n        HEX_CHARS[(h3 >>> 24) & 0x0f] +\n        HEX_CHARS[(h3 >>> 20) & 0x0f] +\n        HEX_CHARS[(h3 >>> 16) & 0x0f] +\n        HEX_CHARS[(h3 >>> 12) & 0x0f] +\n        HEX_CHARS[(h3 >>> 8) & 0x0f] +\n        HEX_CHARS[(h3 >>> 4) & 0x0f] +\n        HEX_CHARS[h3 & 0x0f] +\n        HEX_CHARS[(h4 >>> 28) & 0x0f] +\n        HEX_CHARS[(h4 >>> 24) & 0x0f] +\n        HEX_CHARS[(h4 >>> 20) & 0x0f] +\n        HEX_CHARS[(h4 >>> 16) & 0x0f] +\n        HEX_CHARS[(h4 >>> 12) & 0x0f] +\n        HEX_CHARS[(h4 >>> 8) & 0x0f] +\n        HEX_CHARS[(h4 >>> 4) & 0x0f] +\n        HEX_CHARS[h4 & 0x0f] +\n        HEX_CHARS[(h5 >>> 28) & 0x0f] +\n        HEX_CHARS[(h5 >>> 24) & 0x0f] +\n        HEX_CHARS[(h5 >>> 20) & 0x0f] +\n        HEX_CHARS[(h5 >>> 16) & 0x0f] +\n        HEX_CHARS[(h5 >>> 12) & 0x0f] +\n        HEX_CHARS[(h5 >>> 8) & 0x0f] +\n        HEX_CHARS[(h5 >>> 4) & 0x0f] +\n        HEX_CHARS[h5 & 0x0f] +\n        HEX_CHARS[(h6 >>> 28) & 0x0f] +\n        HEX_CHARS[(h6 >>> 24) & 0x0f] +\n        HEX_CHARS[(h6 >>> 20) & 0x0f] +\n        HEX_CHARS[(h6 >>> 16) & 0x0f] +\n        HEX_CHARS[(h6 >>> 12) & 0x0f] +\n        HEX_CHARS[(h6 >>> 8) & 0x0f] +\n        HEX_CHARS[(h6 >>> 4) & 0x0f] +\n        HEX_CHARS[h6 & 0x0f];\n    if (!this.is224) {\n        hex +=\n            HEX_CHARS[(h7 >>> 28) & 0x0f] +\n                HEX_CHARS[(h7 >>> 24) & 0x0f] +\n                HEX_CHARS[(h7 >>> 20) & 0x0f] +\n                HEX_CHARS[(h7 >>> 16) & 0x0f] +\n                HEX_CHARS[(h7 >>> 12) & 0x0f] +\n                HEX_CHARS[(h7 >>> 8) & 0x0f] +\n                HEX_CHARS[(h7 >>> 4) & 0x0f] +\n                HEX_CHARS[h7 & 0x0f];\n    }\n    return hex;\n};\nSha256.prototype.toString = Sha256.prototype.hex;\nSha256.prototype.digest = function () {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5, h6 = this.h6, h7 = this.h7;\n    var arr = [\n        (h0 >>> 24) & 0xff,\n        (h0 >>> 16) & 0xff,\n        (h0 >>> 8) & 0xff,\n        h0 & 0xff,\n        (h1 >>> 24) & 0xff,\n        (h1 >>> 16) & 0xff,\n        (h1 >>> 8) & 0xff,\n        h1 & 0xff,\n        (h2 >>> 24) & 0xff,\n        (h2 >>> 16) & 0xff,\n        (h2 >>> 8) & 0xff,\n        h2 & 0xff,\n        (h3 >>> 24) & 0xff,\n        (h3 >>> 16) & 0xff,\n        (h3 >>> 8) & 0xff,\n        h3 & 0xff,\n        (h4 >>> 24) & 0xff,\n        (h4 >>> 16) & 0xff,\n        (h4 >>> 8) & 0xff,\n        h4 & 0xff,\n        (h5 >>> 24) & 0xff,\n        (h5 >>> 16) & 0xff,\n        (h5 >>> 8) & 0xff,\n        h5 & 0xff,\n        (h6 >>> 24) & 0xff,\n        (h6 >>> 16) & 0xff,\n        (h6 >>> 8) & 0xff,\n        h6 & 0xff,\n    ];\n    if (!this.is224) {\n        arr.push((h7 >>> 24) & 0xff, (h7 >>> 16) & 0xff, (h7 >>> 8) & 0xff, h7 & 0xff);\n    }\n    return arr;\n};\nSha256.prototype.array = Sha256.prototype.digest;\nSha256.prototype.arrayBuffer = function () {\n    this.finalize();\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n        dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n};\nexport const sha256 = (...strings) => {\n    return new Sha256(false, true).update(strings.join(\"\")).hex();\n};\n", "import { Serializable } from \"./load/serializable.js\";\nimport { HumanMessage, AIMessage } from \"./messages/index.js\";\n// TODO: Combine into one class for 0.2\n/**\n * Base class for all chat message histories. All chat message histories\n * should extend this class.\n */\nexport class BaseChatMessageHistory extends Serializable {\n    /**\n     * Add a list of messages.\n     *\n     * Implementations should override this method to handle bulk addition of messages\n     * in an efficient manner to avoid unnecessary round-trips to the underlying store.\n     *\n     * @param messages - A list of BaseMessage objects to store.\n     */\n    async addMessages(messages) {\n        for (const message of messages) {\n            await this.addMessage(message);\n        }\n    }\n}\n/**\n * Base class for all list chat message histories. All list chat message\n * histories should extend this class.\n */\nexport class BaseListChatMessageHistory extends Serializable {\n    /**\n     * This is a convenience method for adding a human message string to the store.\n     * Please note that this is a convenience method. Code should favor the\n     * bulk addMessages interface instead to save on round-trips to the underlying\n     * persistence layer.\n     * This method may be deprecated in a future release.\n     */\n    addUserMessage(message) {\n        return this.addMessage(new HumanMessage(message));\n    }\n    /** @deprecated Use addAIMessage instead */\n    addAIChatMessage(message) {\n        return this.addMessage(new AIMessage(message));\n    }\n    /**\n     * This is a convenience method for adding an AI message string to the store.\n     * Please note that this is a convenience method. Code should favor the bulk\n     * addMessages interface instead to save on round-trips to the underlying\n     * persistence layer.\n     * This method may be deprecated in a future release.\n     */\n    addAIMessage(message) {\n        return this.addMessage(new AIMessage(message));\n    }\n    /**\n     * Add a list of messages.\n     *\n     * Implementations should override this method to handle bulk addition of messages\n     * in an efficient manner to avoid unnecessary round-trips to the underlying store.\n     *\n     * @param messages - A list of BaseMessage objects to store.\n     */\n    async addMessages(messages) {\n        for (const message of messages) {\n            await this.addMessage(message);\n        }\n    }\n    /**\n     * Remove all messages from the store.\n     */\n    clear() {\n        throw new Error(\"Not implemented.\");\n    }\n}\n/**\n * Class for storing chat message history in-memory. It extends the\n * BaseListChatMessageHistory class and provides methods to get, add, and\n * clear messages.\n */\nexport class InMemoryChatMessageHistory extends BaseListChatMessageHistory {\n    constructor(messages) {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"stores\", \"message\", \"in_memory\"]\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.messages = messages ?? [];\n    }\n    /**\n     * Method to get all the messages stored in the ChatMessageHistory\n     * instance.\n     * @returns Array of stored BaseMessage instances.\n     */\n    async getMessages() {\n        return this.messages;\n    }\n    /**\n     * Method to add a new message to the ChatMessageHistory instance.\n     * @param message The BaseMessage instance to add.\n     * @returns A promise that resolves when the message has been added.\n     */\n    async addMessage(message) {\n        this.messages.push(message);\n    }\n    /**\n     * Method to clear all the messages from the ChatMessageHistory instance.\n     * @returns A promise that resolves when all messages have been cleared.\n     */\n    async clear() {\n        this.messages = [];\n    }\n}\n", "export * from \"./document.js\";\nexport * from \"./transformers.js\";\n", "/**\n * Interface for interacting with a document.\n */\nexport class Document {\n    constructor(fields) {\n        Object.defineProperty(this, \"pageContent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // The ID field is optional at the moment.\n        // It will likely become required in a future major release after\n        // it has been adopted by enough vectorstore implementations.\n        /**\n         * An optional identifier for the document.\n         *\n         * Ideally this should be unique across the document collection and formatted\n         * as a UUID, but this will not be enforced.\n         */\n        Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pageContent =\n            fields.pageContent !== undefined ? fields.pageContent.toString() : \"\";\n        this.metadata = fields.metadata ?? {};\n        this.id = fields.id;\n    }\n}\n", "import { Runnable } from \"../runnables/base.js\";\n/**\n * Abstract base class for document transformation systems.\n *\n * A document transformation system takes an array of Documents and returns an\n * array of transformed Documents. These arrays do not necessarily have to have\n * the same length.\n *\n * One example of this is a text splitter that splits a large document into\n * many smaller documents.\n */\nexport class BaseDocumentTransformer extends Runnable {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"documents\", \"transformers\"]\n        });\n    }\n    /**\n     * Method to invoke the document transformation. This method calls the\n     * transformDocuments method with the provided input.\n     * @param input The input documents to be transformed.\n     * @param _options Optional configuration object to customize the behavior of callbacks.\n     * @returns A Promise that resolves to the transformed documents.\n     */\n    invoke(input, _options) {\n        return this.transformDocuments(input);\n    }\n}\n/**\n * Class for document transformers that return exactly one transformed document\n * for each input document.\n */\nexport class MappingDocumentTransformer extends BaseDocumentTransformer {\n    async transformDocuments(documents) {\n        const newDocuments = [];\n        for (const document of documents) {\n            const transformedDocument = await this._transformDocument(document);\n            newDocuments.push(transformedDocument);\n        }\n        return newDocuments;\n    }\n}\n", "import { AsyncCaller } from \"./utils/async_caller.js\";\n/**\n * An abstract class that provides methods for embedding documents and\n * queries using LangChain.\n */\nexport class Embeddings {\n    constructor(params) {\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */\n        Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.caller = new AsyncCaller(params ?? {});\n    }\n}\n", "export * from \"./base.js\";\nexport * from \"./conditional.js\";\nexport * from \"./length_based.js\";\nexport * from \"./semantic_similarity.js\";\n", "import { Serializable } from \"../load/serializable.js\";\n/**\n * Base class for example selectors.\n */\nexport class BaseExampleSelector extends Serializable {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"example_selectors\", \"base\"]\n        });\n    }\n}\n", "/**\n * Abstract class that defines the interface for selecting a prompt for a\n * given language model.\n */\nexport class BasePromptSelector {\n    /**\n     * Asynchronous version of `getPrompt` that also accepts an options object\n     * for partial variables.\n     * @param llm The language model for which to get a prompt.\n     * @param options Optional object for partial variables.\n     * @returns A Promise that resolves to a prompt template.\n     */\n    async getPromptAsync(llm, options) {\n        const prompt = this.getPrompt(llm);\n        return prompt.partial(options?.partialVariables ?? {});\n    }\n}\n/**\n * Concrete implementation of `BasePromptSelector` that selects a prompt\n * based on a set of conditions. It has a default prompt that it returns\n * if none of the conditions are met.\n */\nexport class ConditionalPromptSelector extends BasePromptSelector {\n    constructor(default_prompt, conditionals = []) {\n        super();\n        Object.defineProperty(this, \"defaultPrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"conditionals\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.defaultPrompt = default_prompt;\n        this.conditionals = conditionals;\n    }\n    /**\n     * Method that selects a prompt based on a set of conditions. If none of\n     * the conditions are met, it returns the default prompt.\n     * @param llm The language model for which to get a prompt.\n     * @returns A prompt template.\n     */\n    getPrompt(llm) {\n        for (const [condition, prompt] of this.conditionals) {\n            if (condition(llm)) {\n                return prompt;\n            }\n        }\n        return this.defaultPrompt;\n    }\n}\n/**\n * Type guard function that checks if a given language model is of type\n * `BaseLLM`.\n */\nexport function isLLM(llm) {\n    return llm._modelType() === \"base_llm\";\n}\n/**\n * Type guard function that checks if a given language model is of type\n * `BaseChatModel`.\n */\nexport function isChatModel(llm) {\n    return llm._modelType() === \"base_chat_model\";\n}\n", "import { BaseExampleSelector } from \"./base.js\";\n/**\n * Calculates the length of a text based on the number of words and lines.\n */\nfunction getLengthBased(text) {\n    return text.split(/\\n| /).length;\n}\n/**\n * A specialized example selector that selects examples based on their\n * length, ensuring that the total length of the selected examples does\n * not exceed a specified maximum length.\n * @example\n * ```typescript\n * const exampleSelector = new LengthBasedExampleSelector(\n *   [\n *     { input: \"happy\", output: \"sad\" },\n *     { input: \"tall\", output: \"short\" },\n *     { input: \"energetic\", output: \"lethargic\" },\n *     { input: \"sunny\", output: \"gloomy\" },\n *     { input: \"windy\", output: \"calm\" },\n *   ],\n *   {\n *     examplePrompt: new PromptTemplate({\n *       inputVariables: [\"input\", \"output\"],\n *       template: \"Input: {input}\\nOutput: {output}\",\n *     }),\n *     maxLength: 25,\n *   },\n * );\n * const dynamicPrompt = new FewShotPromptTemplate({\n *   exampleSelector,\n *   examplePrompt: new PromptTemplate({\n *     inputVariables: [\"input\", \"output\"],\n *     template: \"Input: {input}\\nOutput: {output}\",\n *   }),\n *   prefix: \"Give the antonym of every input\",\n *   suffix: \"Input: {adjective}\\nOutput:\",\n *   inputVariables: [\"adjective\"],\n * });\n * console.log(dynamicPrompt.format({ adjective: \"big\" }));\n * console.log(\n *   dynamicPrompt.format({\n *     adjective:\n *       \"big and huge and massive and large and gigantic and tall and much much much much much bigger than everything else\",\n *   }),\n * );\n * ```\n */\nexport class LengthBasedExampleSelector extends BaseExampleSelector {\n    constructor(data) {\n        super(data);\n        Object.defineProperty(this, \"examples\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"examplePrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"getTextLength\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: getLengthBased\n        });\n        Object.defineProperty(this, \"maxLength\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 2048\n        });\n        Object.defineProperty(this, \"exampleTextLengths\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.examplePrompt = data.examplePrompt;\n        this.maxLength = data.maxLength ?? 2048;\n        this.getTextLength = data.getTextLength ?? getLengthBased;\n    }\n    /**\n     * Adds an example to the list of examples and calculates its length.\n     * @param example The example to be added.\n     * @returns Promise that resolves when the example has been added and its length calculated.\n     */\n    async addExample(example) {\n        this.examples.push(example);\n        const stringExample = await this.examplePrompt.format(example);\n        this.exampleTextLengths.push(this.getTextLength(stringExample));\n    }\n    /**\n     * Calculates the lengths of the examples.\n     * @param v Array of lengths of the examples.\n     * @param values Instance of LengthBasedExampleSelector.\n     * @returns Promise that resolves with an array of lengths of the examples.\n     */\n    async calculateExampleTextLengths(v, values) {\n        if (v.length > 0) {\n            return v;\n        }\n        const { examples, examplePrompt } = values;\n        const stringExamples = await Promise.all(examples.map((eg) => examplePrompt.format(eg)));\n        return stringExamples.map((eg) => this.getTextLength(eg));\n    }\n    /**\n     * Selects examples until the total length of the selected examples\n     * reaches the maxLength.\n     * @param inputVariables The input variables for the examples.\n     * @returns Promise that resolves with an array of selected examples.\n     */\n    async selectExamples(inputVariables) {\n        const inputs = Object.values(inputVariables).join(\" \");\n        let remainingLength = this.maxLength - this.getTextLength(inputs);\n        let i = 0;\n        const examples = [];\n        while (remainingLength > 0 && i < this.examples.length) {\n            const newLength = remainingLength - this.exampleTextLengths[i];\n            if (newLength < 0) {\n                break;\n            }\n            else {\n                examples.push(this.examples[i]);\n                remainingLength = newLength;\n            }\n            i += 1;\n        }\n        return examples;\n    }\n    /**\n     * Creates a new instance of LengthBasedExampleSelector and adds a list of\n     * examples to it.\n     * @param examples Array of examples to be added.\n     * @param args Input parameters for the LengthBasedExampleSelector.\n     * @returns Promise that resolves with a new instance of LengthBasedExampleSelector with the examples added.\n     */\n    static async fromExamples(examples, args) {\n        const selector = new LengthBasedExampleSelector(args);\n        await Promise.all(examples.map((eg) => selector.addExample(eg)));\n        return selector;\n    }\n}\n", "import { Document } from \"../documents/document.js\";\nimport { BaseExampleSelector } from \"./base.js\";\nfunction sortedValues(values) {\n    return Object.keys(values)\n        .sort()\n        .map((key) => values[key]);\n}\n/**\n * Class that selects examples based on semantic similarity. It extends\n * the BaseExampleSelector class.\n * @example\n * ```typescript\n * const exampleSelector = await SemanticSimilarityExampleSelector.fromExamples(\n *   [\n *     { input: \"happy\", output: \"sad\" },\n *     { input: \"tall\", output: \"short\" },\n *     { input: \"energetic\", output: \"lethargic\" },\n *     { input: \"sunny\", output: \"gloomy\" },\n *     { input: \"windy\", output: \"calm\" },\n *   ],\n *   new OpenAIEmbeddings(),\n *   HNSWLib,\n *   { k: 1 },\n * );\n * const dynamicPrompt = new FewShotPromptTemplate({\n *   exampleSelector,\n *   examplePrompt: PromptTemplate.fromTemplate(\n *     \"Input: {input}\\nOutput: {output}\",\n *   ),\n *   prefix: \"Give the antonym of every input\",\n *   suffix: \"Input: {adjective}\\nOutput:\",\n *   inputVariables: [\"adjective\"],\n * });\n * console.log(await dynamicPrompt.format({ adjective: \"rainy\" }));\n * ```\n */\nexport class SemanticSimilarityExampleSelector extends BaseExampleSelector {\n    constructor(data) {\n        super(data);\n        Object.defineProperty(this, \"vectorStoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleKeys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputKeys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.exampleKeys = data.exampleKeys;\n        this.inputKeys = data.inputKeys;\n        if (data.vectorStore !== undefined) {\n            this.vectorStoreRetriever = data.vectorStore.asRetriever({\n                k: data.k ?? 4,\n                filter: data.filter,\n            });\n        }\n        else if (data.vectorStoreRetriever) {\n            this.vectorStoreRetriever = data.vectorStoreRetriever;\n        }\n        else {\n            throw new Error(`You must specify one of \"vectorStore\" and \"vectorStoreRetriever\".`);\n        }\n    }\n    /**\n     * Method that adds a new example to the vectorStore. The example is\n     * converted to a string and added to the vectorStore as a document.\n     * @param example The example to be added to the vectorStore.\n     * @returns Promise that resolves when the example has been added to the vectorStore.\n     */\n    async addExample(example) {\n        const inputKeys = this.inputKeys ?? Object.keys(example);\n        const stringExample = sortedValues(inputKeys.reduce((acc, key) => ({ ...acc, [key]: example[key] }), {})).join(\" \");\n        await this.vectorStoreRetriever.addDocuments([\n            new Document({\n                pageContent: stringExample,\n                metadata: example,\n            }),\n        ]);\n    }\n    /**\n     * Method that selects which examples to use based on semantic similarity.\n     * It performs a similarity search in the vectorStore using the input\n     * variables and returns the examples with the highest similarity.\n     * @param inputVariables The input variables used for the similarity search.\n     * @returns Promise that resolves with an array of the selected examples.\n     */\n    async selectExamples(inputVariables) {\n        const inputKeys = this.inputKeys ?? Object.keys(inputVariables);\n        const query = sortedValues(inputKeys.reduce((acc, key) => ({ ...acc, [key]: inputVariables[key] }), {})).join(\" \");\n        const exampleDocs = await this.vectorStoreRetriever.invoke(query);\n        const examples = exampleDocs.map((doc) => doc.metadata);\n        if (this.exampleKeys) {\n            // If example keys are provided, filter examples to those keys.\n            return examples.map((example) => this.exampleKeys.reduce((acc, key) => ({ ...acc, [key]: example[key] }), {}));\n        }\n        return examples;\n    }\n    /**\n     * Static method that creates a new instance of\n     * SemanticSimilarityExampleSelector. It takes a list of examples, an\n     * instance of Embeddings, a VectorStore class, and an options object as\n     * parameters. It converts the examples to strings, creates a VectorStore\n     * from the strings and the embeddings, and returns a new\n     * SemanticSimilarityExampleSelector with the created VectorStore and the\n     * options provided.\n     * @param examples The list of examples to be used.\n     * @param embeddings The instance of Embeddings to be used.\n     * @param vectorStoreCls The VectorStore class to be used.\n     * @param options The options object for the SemanticSimilarityExampleSelector.\n     * @returns Promise that resolves with a new instance of SemanticSimilarityExampleSelector.\n     */\n    static async fromExamples(examples, embeddings, vectorStoreCls, options = {}) {\n        const inputKeys = options.inputKeys ?? null;\n        const stringExamples = examples.map((example) => sortedValues(inputKeys\n            ? inputKeys.reduce((acc, key) => ({ ...acc, [key]: example[key] }), {})\n            : example).join(\" \"));\n        const vectorStore = await vectorStoreCls.fromTexts(stringExamples, examples, // metadatas\n        embeddings, options);\n        return new SemanticSimilarityExampleSelector({\n            vectorStore,\n            k: options.k ?? 4,\n            exampleKeys: options.exampleKeys,\n            inputKeys: options.inputKeys,\n        });\n    }\n}\n", "import { InMemoryCache } from \"../caches/base.js\";\nimport { StringPromptValue, ChatPromptValue, } from \"../prompt_values.js\";\nimport { coerceMessageLikeToMessage } from \"../messages/utils.js\";\nimport { AsyncCaller } from \"../utils/async_caller.js\";\nimport { encodingForModel } from \"../utils/tiktoken.js\";\nimport { Runnable } from \"../runnables/base.js\";\n// https://www.npmjs.com/package/js-tiktoken\nexport const getModelNameForTiktoken = (modelName) => {\n    if (modelName.startsWith(\"gpt-3.5-turbo-16k\")) {\n        return \"gpt-3.5-turbo-16k\";\n    }\n    if (modelName.startsWith(\"gpt-3.5-turbo-\")) {\n        return \"gpt-3.5-turbo\";\n    }\n    if (modelName.startsWith(\"gpt-4-32k\")) {\n        return \"gpt-4-32k\";\n    }\n    if (modelName.startsWith(\"gpt-4-\")) {\n        return \"gpt-4\";\n    }\n    if (modelName.startsWith(\"gpt-4o\")) {\n        return \"gpt-4o\";\n    }\n    return modelName;\n};\nexport const getEmbeddingContextSize = (modelName) => {\n    switch (modelName) {\n        case \"text-embedding-ada-002\":\n            return 8191;\n        default:\n            return 2046;\n    }\n};\nexport const getModelContextSize = (modelName) => {\n    switch (getModelNameForTiktoken(modelName)) {\n        case \"gpt-3.5-turbo-16k\":\n            return 16384;\n        case \"gpt-3.5-turbo\":\n            return 4096;\n        case \"gpt-4-32k\":\n            return 32768;\n        case \"gpt-4\":\n            return 8192;\n        case \"text-davinci-003\":\n            return 4097;\n        case \"text-curie-001\":\n            return 2048;\n        case \"text-babbage-001\":\n            return 2048;\n        case \"text-ada-001\":\n            return 2048;\n        case \"code-davinci-002\":\n            return 8000;\n        case \"code-cushman-001\":\n            return 2048;\n        default:\n            return 4097;\n    }\n};\n/**\n * Whether or not the input matches the OpenAI tool definition.\n * @param {unknown} tool The input to check.\n * @returns {boolean} Whether the input is an OpenAI tool definition.\n */\nexport function isOpenAITool(tool) {\n    if (typeof tool !== \"object\" || !tool)\n        return false;\n    if (\"type\" in tool &&\n        tool.type === \"function\" &&\n        \"function\" in tool &&\n        typeof tool.function === \"object\" &&\n        tool.function &&\n        \"name\" in tool.function &&\n        \"parameters\" in tool.function) {\n        return true;\n    }\n    return false;\n}\nexport const calculateMaxTokens = async ({ prompt, modelName, }) => {\n    let numTokens;\n    try {\n        numTokens = (await encodingForModel(getModelNameForTiktoken(modelName))).encode(prompt).length;\n    }\n    catch (error) {\n        console.warn(\"Failed to calculate number of tokens, falling back to approximate count\");\n        // fallback to approximate calculation if tiktoken is not available\n        // each token is ~4 characters: https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them#\n        numTokens = Math.ceil(prompt.length / 4);\n    }\n    const maxTokens = getModelContextSize(modelName);\n    return maxTokens - numTokens;\n};\nconst getVerbosity = () => false;\n/**\n * Base class for language models, chains, tools.\n */\nexport class BaseLangChain extends Runnable {\n    get lc_attributes() {\n        return {\n            callbacks: undefined,\n            verbose: undefined,\n        };\n    }\n    constructor(params) {\n        super(params);\n        /**\n         * Whether to print out response text.\n         */\n        Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.verbose = params.verbose ?? getVerbosity();\n        this.callbacks = params.callbacks;\n        this.tags = params.tags ?? [];\n        this.metadata = params.metadata ?? {};\n    }\n}\n/**\n * Base class for language models.\n */\nexport class BaseLanguageModel extends BaseLangChain {\n    /**\n     * Keys that the language model accepts as call options.\n     */\n    get callKeys() {\n        return [\"stop\", \"timeout\", \"signal\", \"tags\", \"metadata\", \"callbacks\"];\n    }\n    constructor({ callbacks, callbackManager, ...params }) {\n        const { cache, ...rest } = params;\n        super({\n            callbacks: callbacks ?? callbackManager,\n            ...rest,\n        });\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */\n        Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_encoding\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof cache === \"object\") {\n            this.cache = cache;\n        }\n        else if (cache) {\n            this.cache = InMemoryCache.global();\n        }\n        else {\n            this.cache = undefined;\n        }\n        this.caller = new AsyncCaller(params ?? {});\n    }\n    /**\n     * Get the number of tokens in the content.\n     * @param content The content to get the number of tokens for.\n     * @returns The number of tokens in the content.\n     */\n    async getNumTokens(content) {\n        // Extract text content from MessageContent\n        let textContent;\n        if (typeof content === \"string\") {\n            textContent = content;\n        }\n        else {\n            /**\n             * Content is an array of MessageContentComplex\n             *\n             * ToDo(@christian-bromann): This is a temporary fix to get the number of tokens for the content.\n             * We need to find a better way to do this.\n             * @see https://github.com/langchain-ai/langchainjs/pull/8341#pullrequestreview-2933713116\n             */\n            textContent = content\n                .map((item) => {\n                if (typeof item === \"string\")\n                    return item;\n                if (item.type === \"text\" && \"text\" in item)\n                    return item.text;\n                return \"\";\n            })\n                .join(\"\");\n        }\n        // fallback to approximate calculation if tiktoken is not available\n        let numTokens = Math.ceil(textContent.length / 4);\n        if (!this._encoding) {\n            try {\n                this._encoding = await encodingForModel(\"modelName\" in this\n                    ? getModelNameForTiktoken(this.modelName)\n                    : \"gpt2\");\n            }\n            catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        if (this._encoding) {\n            try {\n                numTokens = this._encoding.encode(textContent).length;\n            }\n            catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        return numTokens;\n    }\n    static _convertInputToPromptValue(input) {\n        if (typeof input === \"string\") {\n            return new StringPromptValue(input);\n        }\n        else if (Array.isArray(input)) {\n            return new ChatPromptValue(input.map(coerceMessageLikeToMessage));\n        }\n        else {\n            return input;\n        }\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * Create a unique cache key for a specific call to a specific language model.\n     * @param callOptions Call options for the model\n     * @returns A unique cache key.\n     */\n    _getSerializedCacheKeyParametersForCall(\n    // TODO: Fix when we remove the RunnableLambda backwards compatibility shim.\n    { config, ...callOptions }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const params = {\n            ...this._identifyingParams(),\n            ...callOptions,\n            _type: this._llmType(),\n            _model: this._modelType(),\n        };\n        const filteredEntries = Object.entries(params).filter(([_, value]) => value !== undefined);\n        const serializedEntries = filteredEntries\n            .map(([key, value]) => `${key}:${JSON.stringify(value)}`)\n            .sort()\n            .join(\",\");\n        return serializedEntries;\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */\n    serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType(),\n        };\n    }\n    /**\n     * @deprecated\n     * Load an LLM from a json-like object describing it.\n     */\n    static async deserialize(_data) {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n}\n", "import { Tiktoken, getEncodingNameForModel, } from \"js-tiktoken/lite\";\nimport { AsyncCaller } from \"./async_caller.js\";\nconst cache = {};\nconst caller = /* #__PURE__ */ new AsyncCaller({});\nexport async function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller\n            .fetch(`https://tiktoken.pages.dev/js/${encoding}.json`)\n            .then((res) => res.json())\n            .then((data) => new Tiktoken(data))\n            .catch((e) => {\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nexport async function encodingForModel(model) {\n    return getEncoding(getEncodingNameForModel(model));\n}\n", "import { AIMessage, HumanMessage, coerceMessageLikeToMessage, isAIMessageChunk, isBaseMessage, isAIMessage, convertToOpenAIImageBlock, isURLContentBlock, isBase64ContentBlock, } from \"../messages/index.js\";\nimport { RUN_KEY, } from \"../outputs.js\";\nimport { BaseLanguageModel, } from \"./base.js\";\nimport { CallbackManager, } from \"../callbacks/manager.js\";\nimport { RunnableLambda, RunnableSequence, } from \"../runnables/base.js\";\nimport { concat } from \"../utils/stream.js\";\nimport { RunnablePassthrough } from \"../runnables/passthrough.js\";\nimport { getSchemaDescription, isInteropZodSchema, } from \"../utils/types/zod.js\";\nimport { callbackHandlerPrefersStreaming } from \"../callbacks/base.js\";\nimport { toJsonSchema } from \"../utils/json_schema.js\";\n/**\n * Creates a transform stream for encoding chat message chunks.\n * @deprecated Use {@link BytesOutputParser} instead\n * @returns A TransformStream instance that encodes chat message chunks.\n */\nexport function createChatMessageChunkEncoderStream() {\n    const textEncoder = new TextEncoder();\n    return new TransformStream({\n        transform(chunk, controller) {\n            controller.enqueue(textEncoder.encode(typeof chunk.content === \"string\"\n                ? chunk.content\n                : JSON.stringify(chunk.content)));\n        },\n    });\n}\nfunction _formatForTracing(messages) {\n    const messagesToTrace = [];\n    for (const message of messages) {\n        let messageToTrace = message;\n        if (Array.isArray(message.content)) {\n            for (let idx = 0; idx < message.content.length; idx++) {\n                const block = message.content[idx];\n                if (isURLContentBlock(block) || isBase64ContentBlock(block)) {\n                    if (messageToTrace === message) {\n                        // Also shallow-copy content\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        messageToTrace = new message.constructor({\n                            ...messageToTrace,\n                            content: [\n                                ...message.content.slice(0, idx),\n                                convertToOpenAIImageBlock(block),\n                                ...message.content.slice(idx + 1),\n                            ],\n                        });\n                    }\n                }\n            }\n        }\n        messagesToTrace.push(messageToTrace);\n    }\n    return messagesToTrace;\n}\n/**\n * Base class for chat models. It extends the BaseLanguageModel class and\n * provides methods for generating chat based on input messages.\n */\nexport class BaseChatModel extends BaseLanguageModel {\n    constructor(fields) {\n        super(fields);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"chat_models\", this._llmType()]\n        });\n        Object.defineProperty(this, \"disableStreaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    _separateRunnableConfigFromCallOptionsCompat(options) {\n        // For backwards compat, keep `signal` in both runnableConfig and callOptions\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        callOptions.signal = runnableConfig.signal;\n        return [runnableConfig, callOptions];\n    }\n    /**\n     * Invokes the chat model with a single input.\n     * @param input The input for the language model.\n     * @param options The call options.\n     * @returns A Promise that resolves to a BaseMessageChunk.\n     */\n    async invoke(input, options) {\n        const promptValue = BaseChatModel._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([promptValue], options, options?.callbacks);\n        const chatGeneration = result.generations[0][0];\n        // TODO: Remove cast after figuring out inheritance\n        return chatGeneration.message;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_messages, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks ===\n            BaseChatModel.prototype._streamResponseChunks ||\n            this.disableStreaming) {\n            yield this.invoke(input, options);\n        }\n        else {\n            const prompt = BaseChatModel._convertInputToPromptValue(input);\n            const messages = prompt.toChatMessages();\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(options);\n            const inheritableMetadata = {\n                ...runnableConfig.metadata,\n                ...this.getLsParams(callOptions),\n            };\n            const callbackManager_ = await CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, inheritableMetadata, this.metadata, { verbose: this.verbose });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1,\n            };\n            const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), [_formatForTracing(messages)], runnableConfig.runId, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generationChunk;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let llmOutput;\n            try {\n                for await (const chunk of this._streamResponseChunks(messages, callOptions, runManagers?.[0])) {\n                    if (chunk.message.id == null) {\n                        const runId = runManagers?.at(0)?.runId;\n                        if (runId != null)\n                            chunk.message._updateId(`run-${runId}`);\n                    }\n                    chunk.message.response_metadata = {\n                        ...chunk.generationInfo,\n                        ...chunk.message.response_metadata,\n                    };\n                    yield chunk.message;\n                    if (!generationChunk) {\n                        generationChunk = chunk;\n                    }\n                    else {\n                        generationChunk = generationChunk.concat(chunk);\n                    }\n                    if (isAIMessageChunk(chunk.message) &&\n                        chunk.message.usage_metadata !== undefined) {\n                        llmOutput = {\n                            tokenUsage: {\n                                promptTokens: chunk.message.usage_metadata.input_tokens,\n                                completionTokens: chunk.message.usage_metadata.output_tokens,\n                                totalTokens: chunk.message.usage_metadata.total_tokens,\n                            },\n                        };\n                    }\n                }\n            }\n            catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMEnd({\n                // TODO: Remove cast after figuring out inheritance\n                generations: [[generationChunk]],\n                llmOutput,\n            })));\n        }\n    }\n    getLsParams(options) {\n        const providerName = this.getName().startsWith(\"Chat\")\n            ? this.getName().replace(\"Chat\", \"\")\n            : this.getName();\n        return {\n            ls_model_type: \"chat\",\n            ls_stop: options.stop,\n            ls_provider: providerName,\n        };\n    }\n    /** @ignore */\n    async _generateUncached(messages, parsedOptions, handledOptions, startedRunManagers) {\n        const baseMessages = messages.map((messageList) => messageList.map(coerceMessageLikeToMessage));\n        let runManagers;\n        if (startedRunManagers !== undefined &&\n            startedRunManagers.length === baseMessages.length) {\n            runManagers = startedRunManagers;\n        }\n        else {\n            const inheritableMetadata = {\n                ...handledOptions.metadata,\n                ...this.getLsParams(parsedOptions),\n            };\n            // create callback manager and start run\n            const callbackManager_ = await CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, inheritableMetadata, this.metadata, { verbose: this.verbose });\n            const extra = {\n                options: parsedOptions,\n                invocation_params: this?.invocationParams(parsedOptions),\n                batch_size: 1,\n            };\n            runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages.map(_formatForTracing), handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        }\n        const generations = [];\n        const llmOutputs = [];\n        // Even if stream is not explicitly called, check if model is implicitly\n        // called from streamEvents() or streamLog() to get all streamed events.\n        // Bail out if _streamResponseChunks not overridden\n        const hasStreamingHandler = !!runManagers?.[0].handlers.find(callbackHandlerPrefersStreaming);\n        if (hasStreamingHandler &&\n            !this.disableStreaming &&\n            baseMessages.length === 1 &&\n            this._streamResponseChunks !==\n                BaseChatModel.prototype._streamResponseChunks) {\n            try {\n                const stream = await this._streamResponseChunks(baseMessages[0], parsedOptions, runManagers?.[0]);\n                let aggregated;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                let llmOutput;\n                for await (const chunk of stream) {\n                    if (chunk.message.id == null) {\n                        const runId = runManagers?.at(0)?.runId;\n                        if (runId != null)\n                            chunk.message._updateId(`run-${runId}`);\n                    }\n                    if (aggregated === undefined) {\n                        aggregated = chunk;\n                    }\n                    else {\n                        aggregated = concat(aggregated, chunk);\n                    }\n                    if (isAIMessageChunk(chunk.message) &&\n                        chunk.message.usage_metadata !== undefined) {\n                        llmOutput = {\n                            tokenUsage: {\n                                promptTokens: chunk.message.usage_metadata.input_tokens,\n                                completionTokens: chunk.message.usage_metadata.output_tokens,\n                                totalTokens: chunk.message.usage_metadata.total_tokens,\n                            },\n                        };\n                    }\n                }\n                if (aggregated === undefined) {\n                    throw new Error(\"Received empty response from chat model call.\");\n                }\n                generations.push([aggregated]);\n                await runManagers?.[0].handleLLMEnd({\n                    generations,\n                    llmOutput,\n                });\n            }\n            catch (e) {\n                await runManagers?.[0].handleLLMError(e);\n                throw e;\n            }\n        }\n        else {\n            // generate results\n            const results = await Promise.allSettled(baseMessages.map((messageList, i) => this._generate(messageList, { ...parsedOptions, promptIndex: i }, runManagers?.[i])));\n            // handle results\n            await Promise.all(results.map(async (pResult, i) => {\n                if (pResult.status === \"fulfilled\") {\n                    const result = pResult.value;\n                    for (const generation of result.generations) {\n                        if (generation.message.id == null) {\n                            const runId = runManagers?.at(0)?.runId;\n                            if (runId != null)\n                                generation.message._updateId(`run-${runId}`);\n                        }\n                        generation.message.response_metadata = {\n                            ...generation.generationInfo,\n                            ...generation.message.response_metadata,\n                        };\n                    }\n                    if (result.generations.length === 1) {\n                        result.generations[0].message.response_metadata = {\n                            ...result.llmOutput,\n                            ...result.generations[0].message.response_metadata,\n                        };\n                    }\n                    generations[i] = result.generations;\n                    llmOutputs[i] = result.llmOutput;\n                    return runManagers?.[i]?.handleLLMEnd({\n                        generations: [result.generations],\n                        llmOutput: result.llmOutput,\n                    });\n                }\n                else {\n                    // status === \"rejected\"\n                    await runManagers?.[i]?.handleLLMError(pResult.reason);\n                    return Promise.reject(pResult.reason);\n                }\n            }));\n        }\n        // create combined output\n        const output = {\n            generations,\n            llmOutput: llmOutputs.length\n                ? this._combineLLMOutput?.(...llmOutputs)\n                : undefined,\n        };\n        Object.defineProperty(output, RUN_KEY, {\n            value: runManagers\n                ? { runIds: runManagers?.map((manager) => manager.runId) }\n                : undefined,\n            configurable: true,\n        });\n        return output;\n    }\n    async _generateCached({ messages, cache, llmStringKey, parsedOptions, handledOptions, }) {\n        const baseMessages = messages.map((messageList) => messageList.map(coerceMessageLikeToMessage));\n        const inheritableMetadata = {\n            ...handledOptions.metadata,\n            ...this.getLsParams(parsedOptions),\n        };\n        // create callback manager and start run\n        const callbackManager_ = await CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, inheritableMetadata, this.metadata, { verbose: this.verbose });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1,\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages.map(_formatForTracing), handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(baseMessages.map(async (baseMessage, index) => {\n            // Join all content into one string for the prompt index\n            const prompt = BaseChatModel._convertInputToPromptValue(baseMessage).toString();\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results\n            .map((result, index) => ({ result, runManager: runManagers?.[index] }))\n            .filter(({ result }) => (result.status === \"fulfilled\" && result.value != null) ||\n            result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i) => {\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result.map((result) => {\n                    if (\"message\" in result &&\n                        isBaseMessage(result.message) &&\n                        isAIMessage(result.message)) {\n                        // eslint-disable-next-line no-param-reassign\n                        result.message.usage_metadata = {\n                            input_tokens: 0,\n                            output_tokens: 0,\n                            total_tokens: 0,\n                        };\n                    }\n                    // eslint-disable-next-line no-param-reassign\n                    result.generationInfo = {\n                        ...result.generationInfo,\n                        tokenUsage: {},\n                    };\n                    return result;\n                });\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [result],\n                }, undefined, undefined, undefined, {\n                    cached: true,\n                });\n            }\n            else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason, undefined, undefined, undefined, {\n                    cached: true,\n                });\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices,\n            startedRunManagers: runManagers,\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, RUN_KEY, {\n            value: runManagers\n                ? { runIds: runManagers?.map((manager) => manager.runId) }\n                : undefined,\n            configurable: true,\n        });\n        return output;\n    }\n    /**\n     * Generates chat based on the input messages.\n     * @param messages An array of arrays of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */\n    async generate(messages, options, callbacks) {\n        // parse call options\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = { stop: options };\n        }\n        else {\n            parsedOptions = options;\n        }\n        const baseMessages = messages.map((messageList) => messageList.map(coerceMessageLikeToMessage));\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(baseMessages, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices, startedRunManagers } = await this._generateCached({\n            messages: baseMessages,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig,\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i) => baseMessages[i]), callOptions, runnableConfig, startedRunManagers !== undefined\n                ? missingPromptIndices.map((i) => startedRunManagers?.[i])\n                : undefined);\n            await Promise.all(results.generations.map(async (generation, index) => {\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                // Join all content into one string for the prompt index\n                const prompt = BaseChatModel._convertInputToPromptValue(baseMessages[promptIndex]).toString();\n                return cache.update(prompt, llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return { generations, llmOutput };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _modelType() {\n        return \"base_chat_model\";\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */\n    serialize() {\n        return {\n            ...this.invocationParams(),\n            _type: this._llmType(),\n            _model: this._modelType(),\n        };\n    }\n    /**\n     * Generates a prompt based on the input prompt values.\n     * @param promptValues An array of BasePromptValue instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */\n    async generatePrompt(promptValues, options, callbacks) {\n        const promptMessages = promptValues.map((promptValue) => promptValue.toChatMessages());\n        return this.generate(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */\n    async call(messages, options, callbacks) {\n        const result = await this.generate([messages.map(coerceMessageLikeToMessage)], options, callbacks);\n        const generations = result.generations;\n        return generations[0][0].message;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model with a prompt value.\n     * @param promptValue The value of the prompt.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */\n    async callPrompt(promptValue, options, callbacks) {\n        const promptMessages = promptValue.toChatMessages();\n        return this.call(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on the input messages.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */\n    async predictMessages(messages, options, callbacks) {\n        return this.call(messages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on a text input.\n     * @param text The text input.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a string.\n     */\n    async predict(text, options, callbacks) {\n        const message = new HumanMessage(text);\n        const result = await this.call([message], options, callbacks);\n        if (typeof result.content !== \"string\") {\n            throw new Error(\"Cannot use predict when output is not a string.\");\n        }\n        return result.content;\n    }\n    withStructuredOutput(outputSchema, config) {\n        if (typeof this.bindTools !== \"function\") {\n            throw new Error(`Chat model must implement \".bindTools()\" to use withStructuredOutput.`);\n        }\n        if (config?.strict) {\n            throw new Error(`\"strict\" mode is not supported for this model by default.`);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const schema = outputSchema;\n        const name = config?.name;\n        const description = getSchemaDescription(schema) ?? \"A function available to call.\";\n        const method = config?.method;\n        const includeRaw = config?.includeRaw;\n        if (method === \"jsonMode\") {\n            throw new Error(`Base withStructuredOutput implementation only supports \"functionCalling\" as a method.`);\n        }\n        let functionName = name ?? \"extract\";\n        let tools;\n        if (isInteropZodSchema(schema)) {\n            tools = [\n                {\n                    type: \"function\",\n                    function: {\n                        name: functionName,\n                        description,\n                        parameters: toJsonSchema(schema),\n                    },\n                },\n            ];\n        }\n        else {\n            if (\"name\" in schema) {\n                functionName = schema.name;\n            }\n            tools = [\n                {\n                    type: \"function\",\n                    function: {\n                        name: functionName,\n                        description,\n                        parameters: schema,\n                    },\n                },\n            ];\n        }\n        const llm = this.bindTools(tools);\n        const outputParser = RunnableLambda.from((input) => {\n            if (!input.tool_calls || input.tool_calls.length === 0) {\n                throw new Error(\"No tool calls found in the response.\");\n            }\n            const toolCall = input.tool_calls.find((tc) => tc.name === functionName);\n            if (!toolCall) {\n                throw new Error(`No tool call found with name ${functionName}.`);\n            }\n            return toolCall.args;\n        });\n        if (!includeRaw) {\n            return llm.pipe(outputParser).withConfig({\n                runName: \"StructuredOutput\",\n            });\n        }\n        const parserAssign = RunnablePassthrough.assign({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            parsed: (input, config) => outputParser.invoke(input.raw, config),\n        });\n        const parserNone = RunnablePassthrough.assign({\n            parsed: () => null,\n        });\n        const parsedWithFallback = parserAssign.withFallbacks({\n            fallbacks: [parserNone],\n        });\n        return RunnableSequence.from([\n            {\n                raw: llm,\n            },\n            parsedWithFallback,\n        ]).withConfig({\n            runName: \"StructuredOutputRunnable\",\n        });\n    }\n}\n/**\n * An abstract class that extends BaseChatModel and provides a simple\n * implementation of _generate.\n */\nexport class SimpleChatModel extends BaseChatModel {\n    async _generate(messages, options, runManager) {\n        const text = await this._call(messages, options, runManager);\n        const message = new AIMessage(text);\n        if (typeof message.content !== \"string\") {\n            throw new Error(\"Cannot generate with a simple chat model when output is not a string.\");\n        }\n        return {\n            generations: [\n                {\n                    text: message.content,\n                    message,\n                },\n            ],\n        };\n    }\n}\n", "import { concat } from \"../utils/stream.js\";\nimport { Runnable, RunnableAssign, RunnableMap, } from \"./base.js\";\nimport { ensureConfig } from \"./config.js\";\n/**\n * A runnable to passthrough inputs unchanged or with additional keys.\n *\n * This runnable behaves almost like the identity function, except that it\n * can be configured to add additional keys to the output, if the input is\n * an object.\n *\n * The example below demonstrates how to use `RunnablePassthrough to\n * passthrough the input from the `.invoke()`\n *\n * @example\n * ```typescript\n * const chain = RunnableSequence.from([\n *   {\n *     question: new RunnablePassthrough(),\n *     context: async () => loadContextFromStore(),\n *   },\n *   prompt,\n *   llm,\n *   outputParser,\n * ]);\n * const response = await chain.invoke(\n *   \"I can pass a single string instead of an object since I'm using `RunnablePassthrough`.\"\n * );\n * ```\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class RunnablePassthrough extends Runnable {\n    static lc_name() {\n        return \"RunnablePassthrough\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"runnables\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (fields) {\n            this.func = fields.func;\n        }\n    }\n    async invoke(input, options) {\n        const config = ensureConfig(options);\n        if (this.func) {\n            await this.func(input, config);\n        }\n        return this._callWithConfig((input) => Promise.resolve(input), input, config);\n    }\n    async *transform(generator, options) {\n        const config = ensureConfig(options);\n        let finalOutput;\n        let finalOutputSupported = true;\n        for await (const chunk of this._transformStreamWithConfig(generator, (input) => input, config)) {\n            yield chunk;\n            if (finalOutputSupported) {\n                if (finalOutput === undefined) {\n                    finalOutput = chunk;\n                }\n                else {\n                    try {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        finalOutput = concat(finalOutput, chunk);\n                    }\n                    catch {\n                        finalOutput = undefined;\n                        finalOutputSupported = false;\n                    }\n                }\n            }\n        }\n        if (this.func && finalOutput !== undefined) {\n            await this.func(finalOutput, config);\n        }\n    }\n    /**\n     * A runnable that assigns key-value pairs to the input.\n     *\n     * The example below shows how you could use it with an inline function.\n     *\n     * @example\n     * ```typescript\n     * const prompt =\n     *   PromptTemplate.fromTemplate(`Write a SQL query to answer the question using the following schema: {schema}\n     * Question: {question}\n     * SQL Query:`);\n     *\n     * // The `RunnablePassthrough.assign()` is used here to passthrough the input from the `.invoke()`\n     * // call (in this example it's the question), along with any inputs passed to the `.assign()` method.\n     * // In this case, we're passing the schema.\n     * const sqlQueryGeneratorChain = RunnableSequence.from([\n     *   RunnablePassthrough.assign({\n     *     schema: async () => db.getTableInfo(),\n     *   }),\n     *   prompt,\n     *   new ChatOpenAI({}).withConfig({ stop: [\"\\nSQLResult:\"] }),\n     *   new StringOutputParser(),\n     * ]);\n     * const result = await sqlQueryGeneratorChain.invoke({\n     *   question: \"How many employees are there?\",\n     * });\n     * ```\n     */\n    static assign(mapping) {\n        return new RunnableAssign(new RunnableMap({ steps: mapping }));\n    }\n}\n", "import { AIMessage, getBufferString, } from \"../messages/index.js\";\nimport { RUN_KEY, GenerationChunk, } from \"../outputs.js\";\nimport { CallbackManager, } from \"../callbacks/manager.js\";\nimport { BaseLanguageModel, } from \"./base.js\";\nimport { concat } from \"../utils/stream.js\";\nimport { callbackHandlerPrefersStreaming } from \"../callbacks/base.js\";\n/**\n * LLM Wrapper. Takes in a prompt (or prompts) and returns a string.\n */\nexport class BaseLLM extends BaseLanguageModel {\n    constructor({ concurrency, ...rest }) {\n        super(concurrency ? { maxConcurrency: concurrency, ...rest } : rest);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"llms\", this._llmType()]\n        });\n    }\n    /**\n     * This method takes an input and options, and returns a string. It\n     * converts the input to a prompt value and generates a result based on\n     * the prompt.\n     * @param input Input for the LLM.\n     * @param options Options for the LLM call.\n     * @returns A string result based on the prompt.\n     */\n    async invoke(input, options) {\n        const promptValue = BaseLLM._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([promptValue], options, options?.callbacks);\n        return result.generations[0][0].text;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_input, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    _separateRunnableConfigFromCallOptionsCompat(options) {\n        // For backwards compat, keep `signal` in both runnableConfig and callOptions\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        callOptions.signal = runnableConfig.signal;\n        return [runnableConfig, callOptions];\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks === BaseLLM.prototype._streamResponseChunks) {\n            yield this.invoke(input, options);\n        }\n        else {\n            const prompt = BaseLLM._convertInputToPromptValue(input);\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(options);\n            const callbackManager_ = await CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, { verbose: this.verbose });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1,\n            };\n            const runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), [prompt.toString()], runnableConfig.runId, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generation = new GenerationChunk({\n                text: \"\",\n            });\n            try {\n                for await (const chunk of this._streamResponseChunks(prompt.toString(), callOptions, runManagers?.[0])) {\n                    if (!generation) {\n                        generation = chunk;\n                    }\n                    else {\n                        generation = generation.concat(chunk);\n                    }\n                    if (typeof chunk.text === \"string\") {\n                        yield chunk.text;\n                    }\n                }\n            }\n            catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMEnd({\n                generations: [[generation]],\n            })));\n        }\n    }\n    /**\n     * This method takes prompt values, options, and callbacks, and generates\n     * a result based on the prompts.\n     * @param promptValues Prompt values for the LLM.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns An LLMResult based on the prompts.\n     */\n    async generatePrompt(promptValues, options, callbacks) {\n        const prompts = promptValues.map((promptValue) => promptValue.toString());\n        return this.generate(prompts, options, callbacks);\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _flattenLLMResult(llmResult) {\n        const llmResults = [];\n        for (let i = 0; i < llmResult.generations.length; i += 1) {\n            const genList = llmResult.generations[i];\n            if (i === 0) {\n                llmResults.push({\n                    generations: [genList],\n                    llmOutput: llmResult.llmOutput,\n                });\n            }\n            else {\n                const llmOutput = llmResult.llmOutput\n                    ? { ...llmResult.llmOutput, tokenUsage: {} }\n                    : undefined;\n                llmResults.push({\n                    generations: [genList],\n                    llmOutput,\n                });\n            }\n        }\n        return llmResults;\n    }\n    /** @ignore */\n    async _generateUncached(prompts, parsedOptions, handledOptions, startedRunManagers) {\n        let runManagers;\n        if (startedRunManagers !== undefined &&\n            startedRunManagers.length === prompts.length) {\n            runManagers = startedRunManagers;\n        }\n        else {\n            const callbackManager_ = await CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, { verbose: this.verbose });\n            const extra = {\n                options: parsedOptions,\n                invocation_params: this?.invocationParams(parsedOptions),\n                batch_size: prompts.length,\n            };\n            runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), prompts, handledOptions.runId, undefined, extra, undefined, undefined, handledOptions?.runName);\n        }\n        // Even if stream is not explicitly called, check if model is implicitly\n        // called from streamEvents() or streamLog() to get all streamed events.\n        // Bail out if _streamResponseChunks not overridden\n        const hasStreamingHandler = !!runManagers?.[0].handlers.find(callbackHandlerPrefersStreaming);\n        let output;\n        if (hasStreamingHandler &&\n            prompts.length === 1 &&\n            this._streamResponseChunks !== BaseLLM.prototype._streamResponseChunks) {\n            try {\n                const stream = await this._streamResponseChunks(prompts[0], parsedOptions, runManagers?.[0]);\n                let aggregated;\n                for await (const chunk of stream) {\n                    if (aggregated === undefined) {\n                        aggregated = chunk;\n                    }\n                    else {\n                        aggregated = concat(aggregated, chunk);\n                    }\n                }\n                if (aggregated === undefined) {\n                    throw new Error(\"Received empty response from chat model call.\");\n                }\n                output = { generations: [[aggregated]], llmOutput: {} };\n                await runManagers?.[0].handleLLMEnd(output);\n            }\n            catch (e) {\n                await runManagers?.[0].handleLLMError(e);\n                throw e;\n            }\n        }\n        else {\n            try {\n                output = await this._generate(prompts, parsedOptions, runManagers?.[0]);\n            }\n            catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMError(err)));\n                throw err;\n            }\n            const flattenedOutputs = this._flattenLLMResult(output);\n            await Promise.all((runManagers ?? []).map((runManager, i) => runManager?.handleLLMEnd(flattenedOutputs[i])));\n        }\n        const runIds = runManagers?.map((manager) => manager.runId) || undefined;\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, RUN_KEY, {\n            value: runIds ? { runIds } : undefined,\n            configurable: true,\n        });\n        return output;\n    }\n    async _generateCached({ prompts, cache, llmStringKey, parsedOptions, handledOptions, runId, }) {\n        const callbackManager_ = await CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, { verbose: this.verbose });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: prompts.length,\n        };\n        const runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), prompts, runId, undefined, extra, undefined, undefined, handledOptions?.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(prompts.map(async (prompt, index) => {\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results\n            .map((result, index) => ({ result, runManager: runManagers?.[index] }))\n            .filter(({ result }) => (result.status === \"fulfilled\" && result.value != null) ||\n            result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i) => {\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result.map((result) => {\n                    // eslint-disable-next-line no-param-reassign\n                    result.generationInfo = {\n                        ...result.generationInfo,\n                        tokenUsage: {},\n                    };\n                    return result;\n                });\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [result],\n                }, undefined, undefined, undefined, {\n                    cached: true,\n                });\n            }\n            else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason, undefined, undefined, undefined, {\n                    cached: true,\n                });\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices,\n            startedRunManagers: runManagers,\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, RUN_KEY, {\n            value: runManagers\n                ? { runIds: runManagers?.map((manager) => manager.runId) }\n                : undefined,\n            configurable: true,\n        });\n        return output;\n    }\n    /**\n     * Run the LLM on the given prompts and input, handling caching.\n     */\n    async generate(prompts, options, callbacks) {\n        if (!Array.isArray(prompts)) {\n            throw new Error(\"Argument 'prompts' is expected to be a string[]\");\n        }\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = { stop: options };\n        }\n        else {\n            parsedOptions = options;\n        }\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(prompts, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices, startedRunManagers } = await this._generateCached({\n            prompts,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig,\n            runId: runnableConfig.runId,\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i) => prompts[i]), callOptions, runnableConfig, startedRunManagers !== undefined\n                ? missingPromptIndices.map((i) => startedRunManagers?.[i])\n                : undefined);\n            await Promise.all(results.generations.map(async (generation, index) => {\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                return cache.update(prompts[promptIndex], llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return { generations, llmOutput };\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     * Convenience wrapper for {@link generate} that takes in a single string prompt and returns a single string output.\n     */\n    async call(prompt, options, callbacks) {\n        const { generations } = await this.generate([prompt], options, callbacks);\n        return generations[0][0].text;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * This method is similar to `call`, but it's used for making predictions\n     * based on the input text.\n     * @param text Input text for the prediction.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns A prediction based on the input text.\n     */\n    async predict(text, options, callbacks) {\n        return this.call(text, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * This method takes a list of messages, options, and callbacks, and\n     * returns a predicted message.\n     * @param messages A list of messages for the prediction.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns A predicted message based on the list of messages.\n     */\n    async predictMessages(messages, options, callbacks) {\n        const text = getBufferString(messages);\n        const prediction = await this.call(text, options, callbacks);\n        return new AIMessage(prediction);\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */\n    serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType(),\n        };\n    }\n    _modelType() {\n        return \"base_llm\";\n    }\n}\n/**\n * LLM class that provides a simpler interface to subclass than {@link BaseLLM}.\n *\n * Requires only implementing a simpler {@link _call} method instead of {@link _generate}.\n *\n * @augments BaseLLM\n */\nexport class LLM extends BaseLLM {\n    async _generate(prompts, options, runManager) {\n        const generations = await Promise.all(prompts.map((prompt, promptIndex) => this._call(prompt, { ...options, promptIndex }, runManager).then((text) => [{ text }])));\n        return { generations };\n    }\n}\n", "/**\n * Abstract base class for memory in LangChain's Chains. Memory refers to\n * the state in Chains. It can be used to store information about past\n * executions of a Chain and inject that information into the inputs of\n * future executions of the Chain.\n */\nexport class BaseMemory {\n}\nconst getValue = (values, key) => {\n    if (key !== undefined) {\n        return values[key];\n    }\n    const keys = Object.keys(values);\n    if (keys.length === 1) {\n        return values[keys[0]];\n    }\n};\n/**\n * This function is used by memory classes to select the input value\n * to use for the memory. If there is only one input value, it is used.\n * If there are multiple input values, the inputKey must be specified.\n */\nexport const getInputValue = (inputValues, inputKey) => {\n    const value = getValue(inputValues, inputKey);\n    if (!value) {\n        const keys = Object.keys(inputValues);\n        throw new Error(`input values have ${keys.length} keys, you must specify an input key or pass only 1 key as input`);\n    }\n    return value;\n};\n/**\n * This function is used by memory classes to select the output value\n * to use for the memory. If there is only one output value, it is used.\n * If there are multiple output values, the outputKey must be specified.\n * If no outputKey is specified, an error is thrown.\n */\nexport const getOutputValue = (outputValues, outputKey) => {\n    const value = getValue(outputValues, outputKey);\n    if (!value && value !== \"\") {\n        const keys = Object.keys(outputValues);\n        throw new Error(`output values have ${keys.length} keys, you must specify an output key or pass only 1 key as output`);\n    }\n    return value;\n};\n/**\n * Function used by memory classes to get the key of the prompt input,\n * excluding any keys that are memory variables or the \"stop\" key. If\n * there is not exactly one prompt input key, an error is thrown.\n */\nexport function getPromptInputKey(inputs, memoryVariables) {\n    const promptInputKeys = Object.keys(inputs).filter((key) => !memoryVariables.includes(key) && key !== \"stop\");\n    if (promptInputKeys.length !== 1) {\n        throw new Error(`One input key expected, but got ${promptInputKeys.length}`);\n    }\n    return promptInputKeys[0];\n}\n", "export * from \"./base.js\";\nexport * from \"./bytes.js\";\nexport * from \"./list.js\";\nexport * from \"./string.js\";\nexport * from \"./structured.js\";\nexport * from \"./transform.js\";\nexport * from \"./json.js\";\nexport * from \"./xml.js\";\n", "import { Runnable } from \"../runnables/index.js\";\nimport { addLangChainErrorFields } from \"../errors/index.js\";\n/**\n * Abstract base class for parsing the output of a Large Language Model\n * (LLM) call. It provides methods for parsing the result of an LLM call\n * and invoking the parser with a given input.\n */\nexport class BaseLLMOutputParser extends Runnable {\n    /**\n     * Parses the result of an LLM call with a given prompt. By default, it\n     * simply calls `parseResult`.\n     * @param generations The generations from an LLM call.\n     * @param _prompt The prompt used in the LLM call.\n     * @param callbacks Optional callbacks.\n     * @returns A promise of the parsed output.\n     */\n    parseResultWithPrompt(generations, _prompt, callbacks) {\n        return this.parseResult(generations, callbacks);\n    }\n    _baseMessageToString(message) {\n        return typeof message.content === \"string\"\n            ? message.content\n            : this._baseMessageContentToString(message.content);\n    }\n    _baseMessageContentToString(content) {\n        return JSON.stringify(content);\n    }\n    /**\n     * Calls the parser with a given input and optional configuration options.\n     * If the input is a string, it creates a generation with the input as\n     * text and calls `parseResult`. If the input is a `BaseMessage`, it\n     * creates a generation with the input as a message and the content of the\n     * input as text, and then calls `parseResult`.\n     * @param input The input to the parser, which can be a string or a `BaseMessage`.\n     * @param options Optional configuration options.\n     * @returns A promise of the parsed output.\n     */\n    async invoke(input, options) {\n        if (typeof input === \"string\") {\n            return this._callWithConfig(async (input, options) => this.parseResult([{ text: input }], options?.callbacks), input, { ...options, runType: \"parser\" });\n        }\n        else {\n            return this._callWithConfig(async (input, options) => this.parseResult([\n                {\n                    message: input,\n                    text: this._baseMessageToString(input),\n                },\n            ], options?.callbacks), input, { ...options, runType: \"parser\" });\n        }\n    }\n}\n/**\n * Class to parse the output of an LLM call.\n */\nexport class BaseOutputParser extends BaseLLMOutputParser {\n    parseResult(generations, callbacks) {\n        return this.parse(generations[0].text, callbacks);\n    }\n    async parseWithPrompt(text, _prompt, callbacks) {\n        return this.parse(text, callbacks);\n    }\n    /**\n     * Return the string type key uniquely identifying this class of parser\n     */\n    _type() {\n        throw new Error(\"_type not implemented\");\n    }\n}\n/**\n * Exception that output parsers should raise to signify a parsing error.\n *\n * This exists to differentiate parsing errors from other code or execution errors\n * that also may arise inside the output parser. OutputParserExceptions will be\n * available to catch and handle in ways to fix the parsing error, while other\n * errors will be raised.\n *\n * @param message - The error that's being re-raised or an error message.\n * @param llmOutput - String model output which is error-ing.\n * @param observation - String explanation of error which can be passed to a\n *     model to try and remediate the issue.\n * @param sendToLLM - Whether to send the observation and llm_output back to an Agent\n *     after an OutputParserException has been raised. This gives the underlying\n *     model driving the agent the context that the previous output was improperly\n *     structured, in the hopes that it will update the output to the correct\n *     format.\n */\nexport class OutputParserException extends Error {\n    constructor(message, llmOutput, observation, sendToLLM = false) {\n        super(message);\n        Object.defineProperty(this, \"llmOutput\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"sendToLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.llmOutput = llmOutput;\n        this.observation = observation;\n        this.sendToLLM = sendToLLM;\n        if (sendToLLM) {\n            if (observation === undefined || llmOutput === undefined) {\n                throw new Error(\"Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true\");\n            }\n        }\n        addLangChainErrorFields(this, \"OUTPUT_PARSING_FAILURE\");\n    }\n}\n", "export { Runnable, RunnableBinding, RunnableEach, RunnableRetry, RunnableSequence, RunnableMap, RunnableParallel, RunnableLambda, RunnableWithFallbacks, RunnableAssign, RunnablePick, _coerceToRunnable, RunnableToolLike, } from \"./base.js\";\nexport { getCallbackManagerForConfig, patchConfig, ensureConfig, mergeConfigs, pickRunnableConfigKeys, } from \"./config.js\";\nexport { RunnablePassthrough } from \"./passthrough.js\";\nexport { RouterRunnable } from \"./router.js\";\nexport { RunnableBranch } from \"./branch.js\";\nexport { RunnableWithMessageHistory, } from \"./history.js\";\n", "import { Runnable } from \"./base.js\";\nimport { ensureConfig } from \"./config.js\";\n/**\n * A runnable that routes to a set of runnables based on Input['key'].\n * Returns the output of the selected runnable.\n * @example\n * ```typescript\n * import { RouterRunnable, RunnableLambda } from \"@langchain/core/runnables\";\n *\n * const router = new RouterRunnable({\n *   runnables: {\n *     toUpperCase: RunnableLambda.from((text: string) => text.toUpperCase()),\n *     reverseText: RunnableLambda.from((text: string) =>\n *       text.split(\"\").reverse().join(\"\")\n *     ),\n *   },\n * });\n *\n * // Invoke the 'reverseText' runnable\n * const result1 = router.invoke({ key: \"reverseText\", input: \"Hello World\" });\n *\n * // \"dlroW olleH\"\n *\n * // Invoke the 'toUpperCase' runnable\n * const result2 = router.invoke({ key: \"toUpperCase\", input: \"Hello World\" });\n *\n * // \"HELLO WORLD\"\n * ```\n */\nexport class RouterRunnable extends Runnable {\n    static lc_name() {\n        return \"RouterRunnable\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"runnables\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnables = fields.runnables;\n    }\n    async invoke(input, options) {\n        const { key, input: actualInput } = input;\n        const runnable = this.runnables[key];\n        if (runnable === undefined) {\n            throw new Error(`No runnable associated with key \"${key}\".`);\n        }\n        return runnable.invoke(actualInput, ensureConfig(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const keys = inputs.map((input) => input.key);\n        const actualInputs = inputs.map((input) => input.input);\n        const missingKey = keys.find((key) => this.runnables[key] === undefined);\n        if (missingKey !== undefined) {\n            throw new Error(`One or more keys do not have a corresponding runnable.`);\n        }\n        const runnables = keys.map((key) => this.runnables[key]);\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = optionsList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const batchSize = maxConcurrency && maxConcurrency > 0 ? maxConcurrency : inputs.length;\n        const batchResults = [];\n        for (let i = 0; i < actualInputs.length; i += batchSize) {\n            const batchPromises = actualInputs\n                .slice(i, i + batchSize)\n                .map((actualInput, i) => runnables[i].invoke(actualInput, optionsList[i]));\n            const batchResult = await Promise.all(batchPromises);\n            batchResults.push(batchResult);\n        }\n        return batchResults.flat();\n    }\n    async stream(input, options) {\n        const { key, input: actualInput } = input;\n        const runnable = this.runnables[key];\n        if (runnable === undefined) {\n            throw new Error(`No runnable associated with key \"${key}\".`);\n        }\n        return runnable.stream(actualInput, options);\n    }\n}\n", "import { Runnable, _coerceToDict, _coerceToRunnable, } from \"./base.js\";\nimport { getCallbackManagerForConfig, patchConfig, } from \"./config.js\";\nimport { concat } from \"../utils/stream.js\";\n/**\n * Class that represents a runnable branch. The RunnableBranch is\n * initialized with an array of branches and a default branch. When invoked,\n * it evaluates the condition of each branch in order and executes the\n * corresponding branch if the condition is true. If none of the conditions\n * are true, it executes the default branch.\n * @example\n * ```typescript\n * const branch = RunnableBranch.from([\n *   [\n *     (x: { topic: string; question: string }) =>\n *       x.topic.toLowerCase().includes(\"anthropic\"),\n *     anthropicChain,\n *   ],\n *   [\n *     (x: { topic: string; question: string }) =>\n *       x.topic.toLowerCase().includes(\"langchain\"),\n *     langChainChain,\n *   ],\n *   generalChain,\n * ]);\n *\n * const fullChain = RunnableSequence.from([\n *   {\n *     topic: classificationChain,\n *     question: (input: { question: string }) => input.question,\n *   },\n *   branch,\n * ]);\n *\n * const result = await fullChain.invoke({\n *   question: \"how do I use LangChain?\",\n * });\n * ```\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class RunnableBranch extends Runnable {\n    static lc_name() {\n        return \"RunnableBranch\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"runnables\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"default\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"branches\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.branches = fields.branches;\n        this.default = fields.default;\n    }\n    /**\n     * Convenience method for instantiating a RunnableBranch from\n     * RunnableLikes (objects, functions, or Runnables).\n     *\n     * Each item in the input except for the last one should be a\n     * tuple with two items. The first is a \"condition\" RunnableLike that\n     * returns \"true\" if the second RunnableLike in the tuple should run.\n     *\n     * The final item in the input should be a RunnableLike that acts as a\n     * default branch if no other branches match.\n     *\n     * @example\n     * ```ts\n     * import { RunnableBranch } from \"@langchain/core/runnables\";\n     *\n     * const branch = RunnableBranch.from([\n     *   [(x: number) => x > 0, (x: number) => x + 1],\n     *   [(x: number) => x < 0, (x: number) => x - 1],\n     *   (x: number) => x\n     * ]);\n     * ```\n     * @param branches An array where the every item except the last is a tuple of [condition, runnable]\n     *   pairs. The last item is a default runnable which is invoked if no other condition matches.\n     * @returns A new RunnableBranch.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from(branches) {\n        if (branches.length < 1) {\n            throw new Error(\"RunnableBranch requires at least one branch\");\n        }\n        const branchLikes = branches.slice(0, -1);\n        const coercedBranches = branchLikes.map(([condition, runnable]) => [\n            _coerceToRunnable(condition),\n            _coerceToRunnable(runnable),\n        ]);\n        const defaultBranch = _coerceToRunnable(branches[branches.length - 1]);\n        return new this({\n            branches: coercedBranches,\n            default: defaultBranch,\n        });\n    }\n    async _invoke(input, config, runManager) {\n        let result;\n        for (let i = 0; i < this.branches.length; i += 1) {\n            const [condition, branchRunnable] = this.branches[i];\n            const conditionValue = await condition.invoke(input, patchConfig(config, {\n                callbacks: runManager?.getChild(`condition:${i + 1}`),\n            }));\n            if (conditionValue) {\n                result = await branchRunnable.invoke(input, patchConfig(config, {\n                    callbacks: runManager?.getChild(`branch:${i + 1}`),\n                }));\n                break;\n            }\n        }\n        if (!result) {\n            result = await this.default.invoke(input, patchConfig(config, {\n                callbacks: runManager?.getChild(\"branch:default\"),\n            }));\n        }\n        return result;\n    }\n    async invoke(input, config = {}) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async *_streamIterator(input, config) {\n        const callbackManager_ = await getCallbackManagerForConfig(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config?.runId, undefined, undefined, undefined, config?.runName);\n        let finalOutput;\n        let finalOutputSupported = true;\n        let stream;\n        try {\n            for (let i = 0; i < this.branches.length; i += 1) {\n                const [condition, branchRunnable] = this.branches[i];\n                const conditionValue = await condition.invoke(input, patchConfig(config, {\n                    callbacks: runManager?.getChild(`condition:${i + 1}`),\n                }));\n                if (conditionValue) {\n                    stream = await branchRunnable.stream(input, patchConfig(config, {\n                        callbacks: runManager?.getChild(`branch:${i + 1}`),\n                    }));\n                    for await (const chunk of stream) {\n                        yield chunk;\n                        if (finalOutputSupported) {\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            }\n                            else {\n                                try {\n                                    finalOutput = concat(finalOutput, chunk);\n                                }\n                                catch (e) {\n                                    finalOutput = undefined;\n                                    finalOutputSupported = false;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                }\n            }\n            if (stream === undefined) {\n                stream = await this.default.stream(input, patchConfig(config, {\n                    callbacks: runManager?.getChild(\"branch:default\"),\n                }));\n                for await (const chunk of stream) {\n                    yield chunk;\n                    if (finalOutputSupported) {\n                        if (finalOutput === undefined) {\n                            finalOutput = chunk;\n                        }\n                        else {\n                            try {\n                                finalOutput = concat(finalOutput, chunk);\n                            }\n                            catch (e) {\n                                finalOutput = undefined;\n                                finalOutputSupported = false;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {});\n    }\n}\n", "import { AIMessage, HumanMessage, isBaseMessage, } from \"../messages/index.js\";\nimport { RunnableBinding, RunnableLambda, } from \"./base.js\";\nimport { RunnablePassthrough } from \"./passthrough.js\";\n/**\n * Wraps a LCEL chain and manages history. It appends input messages\n * and chain outputs as history, and adds the current history messages to\n * the chain input.\n * @example\n * ```typescript\n * // yarn add @langchain/anthropic @langchain/community @upstash/redis\n *\n * import {\n *   ChatPromptTemplate,\n *   MessagesPlaceholder,\n * } from \"@langchain/core/prompts\";\n * import { ChatAnthropic } from \"@langchain/anthropic\";\n * import { UpstashRedisChatMessageHistory } from \"@langchain/community/stores/message/upstash_redis\";\n * // For demos, you can also use an in-memory store:\n * // import { ChatMessageHistory } from \"langchain/stores/message/in_memory\";\n *\n * const prompt = ChatPromptTemplate.fromMessages([\n *   [\"system\", \"You're an assistant who's good at {ability}\"],\n *   new MessagesPlaceholder(\"history\"),\n *   [\"human\", \"{question}\"],\n * ]);\n *\n * const chain = prompt.pipe(new ChatAnthropic({}));\n *\n * const chainWithHistory = new RunnableWithMessageHistory({\n *   runnable: chain,\n *   getMessageHistory: (sessionId) =>\n *     new UpstashRedisChatMessageHistory({\n *       sessionId,\n *       config: {\n *         url: process.env.UPSTASH_REDIS_REST_URL!,\n *         token: process.env.UPSTASH_REDIS_REST_TOKEN!,\n *       },\n *     }),\n *   inputMessagesKey: \"question\",\n *   historyMessagesKey: \"history\",\n * });\n *\n * const result = await chainWithHistory.invoke(\n *   {\n *     ability: \"math\",\n *     question: \"What does cosine mean?\",\n *   },\n *   {\n *     configurable: {\n *       sessionId: \"some_string_identifying_a_user\",\n *     },\n *   }\n * );\n *\n * const result2 = await chainWithHistory.invoke(\n *   {\n *     ability: \"math\",\n *     question: \"What's its inverse?\",\n *   },\n *   {\n *     configurable: {\n *       sessionId: \"some_string_identifying_a_user\",\n *     },\n *   }\n * );\n * ```\n */\nexport class RunnableWithMessageHistory extends RunnableBinding {\n    constructor(fields) {\n        let historyChain = RunnableLambda.from((input, options) => this._enterHistory(input, options ?? {})).withConfig({ runName: \"loadHistory\" });\n        const messagesKey = fields.historyMessagesKey ?? fields.inputMessagesKey;\n        if (messagesKey) {\n            historyChain = RunnablePassthrough.assign({\n                [messagesKey]: historyChain,\n            }).withConfig({ runName: \"insertHistory\" });\n        }\n        const bound = historyChain\n            .pipe(fields.runnable.withListeners({\n            onEnd: (run, config) => this._exitHistory(run, config ?? {}),\n        }))\n            .withConfig({ runName: \"RunnableWithMessageHistory\" });\n        const config = fields.config ?? {};\n        super({\n            ...fields,\n            config,\n            bound,\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"historyMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"getMessageHistory\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.getMessageHistory = fields.getMessageHistory;\n        this.inputMessagesKey = fields.inputMessagesKey;\n        this.outputMessagesKey = fields.outputMessagesKey;\n        this.historyMessagesKey = fields.historyMessagesKey;\n    }\n    _getInputMessages(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    inputValue) {\n        let parsedInputValue;\n        if (typeof inputValue === \"object\" &&\n            !Array.isArray(inputValue) &&\n            !isBaseMessage(inputValue)) {\n            let key;\n            if (this.inputMessagesKey) {\n                key = this.inputMessagesKey;\n            }\n            else if (Object.keys(inputValue).length === 1) {\n                key = Object.keys(inputValue)[0];\n            }\n            else {\n                key = \"input\";\n            }\n            if (Array.isArray(inputValue[key]) && Array.isArray(inputValue[key][0])) {\n                parsedInputValue = inputValue[key][0];\n            }\n            else {\n                parsedInputValue = inputValue[key];\n            }\n        }\n        else {\n            parsedInputValue = inputValue;\n        }\n        if (typeof parsedInputValue === \"string\") {\n            return [new HumanMessage(parsedInputValue)];\n        }\n        else if (Array.isArray(parsedInputValue)) {\n            return parsedInputValue;\n        }\n        else if (isBaseMessage(parsedInputValue)) {\n            return [parsedInputValue];\n        }\n        else {\n            throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.\\nGot ${JSON.stringify(parsedInputValue, null, 2)}`);\n        }\n    }\n    _getOutputMessages(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    outputValue) {\n        let parsedOutputValue;\n        if (!Array.isArray(outputValue) &&\n            !isBaseMessage(outputValue) &&\n            typeof outputValue !== \"string\") {\n            let key;\n            if (this.outputMessagesKey !== undefined) {\n                key = this.outputMessagesKey;\n            }\n            else if (Object.keys(outputValue).length === 1) {\n                key = Object.keys(outputValue)[0];\n            }\n            else {\n                key = \"output\";\n            }\n            // If you are wrapping a chat model directly\n            // The output is actually this weird generations object\n            if (outputValue.generations !== undefined) {\n                parsedOutputValue = outputValue.generations[0][0].message;\n            }\n            else {\n                parsedOutputValue = outputValue[key];\n            }\n        }\n        else {\n            parsedOutputValue = outputValue;\n        }\n        if (typeof parsedOutputValue === \"string\") {\n            return [new AIMessage(parsedOutputValue)];\n        }\n        else if (Array.isArray(parsedOutputValue)) {\n            return parsedOutputValue;\n        }\n        else if (isBaseMessage(parsedOutputValue)) {\n            return [parsedOutputValue];\n        }\n        else {\n            throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(parsedOutputValue, null, 2)}`);\n        }\n    }\n    async _enterHistory(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    input, kwargs) {\n        const history = kwargs?.configurable?.messageHistory;\n        const messages = await history.getMessages();\n        if (this.historyMessagesKey === undefined) {\n            return messages.concat(this._getInputMessages(input));\n        }\n        return messages;\n    }\n    async _exitHistory(run, config) {\n        const history = config.configurable?.messageHistory;\n        // Get input messages\n        let inputs;\n        // Chat model inputs are nested arrays\n        if (Array.isArray(run.inputs) && Array.isArray(run.inputs[0])) {\n            inputs = run.inputs[0];\n        }\n        else {\n            inputs = run.inputs;\n        }\n        let inputMessages = this._getInputMessages(inputs);\n        // If historic messages were prepended to the input messages, remove them to\n        // avoid adding duplicate messages to history.\n        if (this.historyMessagesKey === undefined) {\n            const existingMessages = await history.getMessages();\n            inputMessages = inputMessages.slice(existingMessages.length);\n        }\n        // Get output messages\n        const outputValue = run.outputs;\n        if (!outputValue) {\n            throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(run, null, 2)}`);\n        }\n        const outputMessages = this._getOutputMessages(outputValue);\n        await history.addMessages([...inputMessages, ...outputMessages]);\n    }\n    async _mergeConfig(...configs) {\n        const config = await super._mergeConfig(...configs);\n        // Extract sessionId\n        if (!config.configurable || !config.configurable.sessionId) {\n            const exampleInput = {\n                [this.inputMessagesKey ?? \"input\"]: \"foo\",\n            };\n            const exampleConfig = { configurable: { sessionId: \"123\" } };\n            throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()\\n` +\n                `eg. chain.invoke(${JSON.stringify(exampleInput)}, ${JSON.stringify(exampleConfig)})`);\n        }\n        // attach messageHistory\n        const { sessionId } = config.configurable;\n        config.configurable.messageHistory = await this.getMessageHistory(sessionId);\n        return config;\n    }\n}\n", "import { BaseTransformOutputParser } from \"./transform.js\";\n/**\n * OutputParser that parses LLMResult into the top likely string and\n * encodes it into bytes.\n */\nexport class BytesOutputParser extends BaseTransformOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"output_parsers\", \"bytes\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"textEncoder\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new TextEncoder()\n        });\n    }\n    static lc_name() {\n        return \"BytesOutputParser\";\n    }\n    parse(text) {\n        return Promise.resolve(this.textEncoder.encode(text));\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n", "import { deepCompareStrict } from \"@cfworker/json-schema\";\nimport { BaseOutputParser } from \"./base.js\";\nimport { isBaseMessage, isBaseMessageChunk, } from \"../messages/base.js\";\nimport { convertToChunk } from \"../messages/utils.js\";\nimport { GenerationChunk, ChatGenerationChunk, } from \"../outputs.js\";\n/**\n * Class to parse the output of an LLM call that also allows streaming inputs.\n */\nexport class BaseTransformOutputParser extends BaseOutputParser {\n    async *_transform(inputGenerator) {\n        for await (const chunk of inputGenerator) {\n            if (typeof chunk === \"string\") {\n                yield this.parseResult([{ text: chunk }]);\n            }\n            else {\n                yield this.parseResult([\n                    {\n                        message: chunk,\n                        text: this._baseMessageToString(chunk),\n                    },\n                ]);\n            }\n        }\n    }\n    /**\n     * Transforms an asynchronous generator of input into an asynchronous\n     * generator of parsed output.\n     * @param inputGenerator An asynchronous generator of input.\n     * @param options A configuration object.\n     * @returns An asynchronous generator of parsed output.\n     */\n    async *transform(inputGenerator, options) {\n        yield* this._transformStreamWithConfig(inputGenerator, this._transform.bind(this), {\n            ...options,\n            runType: \"parser\",\n        });\n    }\n}\n/**\n * A base class for output parsers that can handle streaming input. It\n * extends the `BaseTransformOutputParser` class and provides a method for\n * converting parsed outputs into a diff format.\n */\nexport class BaseCumulativeTransformOutputParser extends BaseTransformOutputParser {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"diff\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.diff = fields?.diff ?? this.diff;\n    }\n    async *_transform(inputGenerator) {\n        let prevParsed;\n        let accGen;\n        for await (const chunk of inputGenerator) {\n            if (typeof chunk !== \"string\" && typeof chunk.content !== \"string\") {\n                throw new Error(\"Cannot handle non-string output.\");\n            }\n            let chunkGen;\n            if (isBaseMessageChunk(chunk)) {\n                if (typeof chunk.content !== \"string\") {\n                    throw new Error(\"Cannot handle non-string message output.\");\n                }\n                chunkGen = new ChatGenerationChunk({\n                    message: chunk,\n                    text: chunk.content,\n                });\n            }\n            else if (isBaseMessage(chunk)) {\n                if (typeof chunk.content !== \"string\") {\n                    throw new Error(\"Cannot handle non-string message output.\");\n                }\n                chunkGen = new ChatGenerationChunk({\n                    message: convertToChunk(chunk),\n                    text: chunk.content,\n                });\n            }\n            else {\n                chunkGen = new GenerationChunk({ text: chunk });\n            }\n            if (accGen === undefined) {\n                accGen = chunkGen;\n            }\n            else {\n                accGen = accGen.concat(chunkGen);\n            }\n            const parsed = await this.parsePartialResult([accGen]);\n            if (parsed !== undefined &&\n                parsed !== null &&\n                !deepCompareStrict(parsed, prevParsed)) {\n                if (this.diff) {\n                    yield this._diff(prevParsed, parsed);\n                }\n                else {\n                    yield parsed;\n                }\n                prevParsed = parsed;\n            }\n        }\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n", "import { OutputParserException } from \"./base.js\";\nimport { BaseTransformOutputParser } from \"./transform.js\";\n/**\n * Class to parse the output of an LLM call to a list.\n * @augments BaseOutputParser\n */\nexport class ListOutputParser extends BaseTransformOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async *_transform(inputGenerator) {\n        let buffer = \"\";\n        for await (const input of inputGenerator) {\n            if (typeof input === \"string\") {\n                // add current chunk to buffer\n                buffer += input;\n            }\n            else {\n                // extract message content and add to buffer\n                buffer += input.content;\n            }\n            // get parts in buffer\n            if (!this.re) {\n                const parts = await this.parse(buffer);\n                if (parts.length > 1) {\n                    // if there are multiple parts, yield all but the last one\n                    for (const part of parts.slice(0, -1)) {\n                        yield [part];\n                    }\n                    // keep the last part in the buffer\n                    buffer = parts[parts.length - 1];\n                }\n            }\n            else {\n                // if there is a regex, get all matches\n                const matches = [...buffer.matchAll(this.re)];\n                if (matches.length > 1) {\n                    let doneIdx = 0;\n                    // if there are multiple matches, yield all but the last one\n                    for (const match of matches.slice(0, -1)) {\n                        yield [match[1]];\n                        doneIdx += (match.index ?? 0) + match[0].length;\n                    }\n                    // keep the last match in the buffer\n                    buffer = buffer.slice(doneIdx);\n                }\n            }\n        }\n        // yield the last part\n        for (const part of await this.parse(buffer)) {\n            yield [part];\n        }\n    }\n}\n/**\n * Class to parse the output of an LLM call as a comma-separated list.\n * @augments ListOutputParser\n */\nexport class CommaSeparatedListOutputParser extends ListOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"output_parsers\", \"list\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"CommaSeparatedListOutputParser\";\n    }\n    /**\n     * Parses the given text into an array of strings, using a comma as the\n     * separator. If the parsing fails, throws an OutputParserException.\n     * @param text The text to parse.\n     * @returns An array of strings obtained by splitting the input text at each comma.\n     */\n    async parse(text) {\n        try {\n            return text\n                .trim()\n                .split(\",\")\n                .map((s) => s.trim());\n        }\n        catch (e) {\n            throw new OutputParserException(`Could not parse output: ${text}`, text);\n        }\n    }\n    /**\n     * Provides instructions on the expected format of the response for the\n     * CommaSeparatedListOutputParser.\n     * @returns A string containing instructions on the expected format of the response.\n     */\n    getFormatInstructions() {\n        return `Your response should be a list of comma separated values, eg: \\`foo, bar, baz\\``;\n    }\n}\n/**\n * Class to parse the output of an LLM call to a list with a specific length and separator.\n * @augments ListOutputParser\n */\nexport class CustomListOutputParser extends ListOutputParser {\n    constructor({ length, separator }) {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"output_parsers\", \"list\"]\n        });\n        Object.defineProperty(this, \"length\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"separator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.length = length;\n        this.separator = separator || \",\";\n    }\n    /**\n     * Parses the given text into an array of strings, using the specified\n     * separator. If the parsing fails or the number of items in the list\n     * doesn't match the expected length, throws an OutputParserException.\n     * @param text The text to parse.\n     * @returns An array of strings obtained by splitting the input text at each occurrence of the specified separator.\n     */\n    async parse(text) {\n        try {\n            const items = text\n                .trim()\n                .split(this.separator)\n                .map((s) => s.trim());\n            if (this.length !== undefined && items.length !== this.length) {\n                throw new OutputParserException(`Incorrect number of items. Expected ${this.length}, got ${items.length}.`);\n            }\n            return items;\n        }\n        catch (e) {\n            if (Object.getPrototypeOf(e) === OutputParserException.prototype) {\n                throw e;\n            }\n            throw new OutputParserException(`Could not parse output: ${text}`);\n        }\n    }\n    /**\n     * Provides instructions on the expected format of the response for the\n     * CustomListOutputParser, including the number of items and the\n     * separator.\n     * @returns A string containing instructions on the expected format of the response.\n     */\n    getFormatInstructions() {\n        return `Your response should be a list of ${this.length === undefined ? \"\" : `${this.length} `}items separated by \"${this.separator}\" (eg: \\`foo${this.separator} bar${this.separator} baz\\`)`;\n    }\n}\nexport class NumberedListOutputParser extends ListOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"output_parsers\", \"list\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: /\\d+\\.\\s([^\\n]+)/g\n        });\n    }\n    static lc_name() {\n        return \"NumberedListOutputParser\";\n    }\n    getFormatInstructions() {\n        return `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n    }\n    async parse(text) {\n        return [...(text.matchAll(this.re) ?? [])].map((m) => m[1]);\n    }\n}\nexport class MarkdownListOutputParser extends ListOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"output_parsers\", \"list\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: /^\\s*[-*]\\s([^\\n]+)$/gm\n        });\n    }\n    static lc_name() {\n        return \"NumberedListOutputParser\";\n    }\n    getFormatInstructions() {\n        return `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n    }\n    async parse(text) {\n        return [...(text.matchAll(this.re) ?? [])].map((m) => m[1]);\n    }\n}\n", "import { BaseTransformOutputParser } from \"./transform.js\";\n/**\n * OutputParser that parses LLMResult into the top likely string.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n *\n * const chain = RunnableSequence.from([\n *   promptTemplate,\n *   new ChatOpenAI({}),\n *   new StringOutputParser(),\n * ]);\n *\n * const result = await chain.invoke({ topic: \"bears\" });\n * console.log(\"What do you call a bear with no teeth? A gummy bear!\");\n * ```\n */\nexport class StringOutputParser extends BaseTransformOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"output_parsers\", \"string\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"StrOutputParser\";\n    }\n    /**\n     * Parses a string output from an LLM call. This method is meant to be\n     * implemented by subclasses to define how a string output from an LLM\n     * should be parsed.\n     * @param text The string output from an LLM call.\n     * @param callbacks Optional callbacks.\n     * @returns A promise of the parsed output.\n     */\n    parse(text) {\n        return Promise.resolve(text);\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n    _textContentToString(content) {\n        return content.text;\n    }\n    _imageUrlContentToString(_content) {\n        throw new Error(`Cannot coerce a multimodal \"image_url\" message part into a string.`);\n    }\n    _messageContentComplexToString(content) {\n        switch (content.type) {\n            case \"text\":\n            case \"text_delta\":\n                if (\"text\" in content) {\n                    // Type guard for MessageContentText\n                    return this._textContentToString(content);\n                }\n                break;\n            case \"image_url\":\n                if (\"image_url\" in content) {\n                    // Type guard for MessageContentImageUrl\n                    return this._imageUrlContentToString(content);\n                }\n                break;\n            default:\n                throw new Error(`Cannot coerce \"${content.type}\" message part into a string.`);\n        }\n        throw new Error(`Invalid content type: ${content.type}`);\n    }\n    _baseMessageContentToString(content) {\n        return content.reduce((acc, item) => acc + this._messageContentComplexToString(item), \"\");\n    }\n}\n", "import { z } from \"zod/v3\";\nimport { BaseOutputParser, OutputParserException, } from \"./base.js\";\nimport { interopParseAsync, } from \"../utils/types/zod.js\";\nimport { toJsonSchema, } from \"../utils/json_schema.js\";\nexport class StructuredOutputParser extends BaseOutputParser {\n    static lc_name() {\n        return \"StructuredOutputParser\";\n    }\n    toJSON() {\n        return this.toJSONNotImplemented();\n    }\n    constructor(schema) {\n        super(schema);\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: schema\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"output_parsers\", \"structured\"]\n        });\n    }\n    /**\n     * Creates a new StructuredOutputParser from a Zod schema.\n     * @param schema The Zod schema which the output should match\n     * @returns A new instance of StructuredOutputParser.\n     */\n    static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    /**\n     * Creates a new StructuredOutputParser from a set of names and\n     * descriptions.\n     * @param schemas An object where each key is a name and each value is a description\n     * @returns A new instance of StructuredOutputParser.\n     */\n    static fromNamesAndDescriptions(schemas) {\n        const zodSchema = z.object(Object.fromEntries(Object.entries(schemas).map(([name, description]) => [name, z.string().describe(description)])));\n        return new this(zodSchema);\n    }\n    /**\n     * Returns a markdown code snippet with a JSON object formatted according\n     * to the schema.\n     * @param options Optional. The options for formatting the instructions\n     * @returns A markdown code snippet with a JSON object formatted according to the schema.\n     */\n    getFormatInstructions() {\n        return `You must format your output as a JSON value that adheres to a given \"JSON Schema\" instance.\n\n\"JSON Schema\" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example \"JSON Schema\" instance {{\"properties\": {{\"foo\": {{\"description\": \"a list of test words\", \"type\": \"array\", \"items\": {{\"type\": \"string\"}}}}}}, \"required\": [\"foo\"]}}\nwould match an object with one required property, \"foo\". The \"type\" property specifies \"foo\" must be an \"array\", and the \"description\" property semantically describes it as \"a list of test words\". The items within \"foo\" must be strings.\nThus, the object {{\"foo\": [\"bar\", \"baz\"]}} is a well-formatted instance of this example \"JSON Schema\". The object {{\"properties\": {{\"foo\": [\"bar\", \"baz\"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\\`\\`\\`json\n${JSON.stringify(toJsonSchema(this.schema))}\n\\`\\`\\`\n`;\n    }\n    /**\n     * Parses the given text according to the schema.\n     * @param text The text to parse\n     * @returns The parsed output.\n     */\n    async parse(text) {\n        try {\n            const json = text.includes(\"```\")\n                ? text.trim().split(/```(?:json)?/)[1]\n                : text.trim();\n            const escapedJson = json\n                .replace(/\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"/g, (_match, capturedGroup) => {\n                const escapedInsideQuotes = capturedGroup.replace(/\\n/g, \"\\\\n\");\n                return `\"${escapedInsideQuotes}\"`;\n            })\n                .replace(/\\n/g, \"\");\n            return await interopParseAsync(this.schema, JSON.parse(escapedJson));\n        }\n        catch (e) {\n            throw new OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n    }\n}\n/**\n * A specific type of `StructuredOutputParser` that parses JSON data\n * formatted as a markdown code snippet.\n */\nexport class JsonMarkdownStructuredOutputParser extends StructuredOutputParser {\n    static lc_name() {\n        return \"JsonMarkdownStructuredOutputParser\";\n    }\n    getFormatInstructions(options) {\n        const interpolationDepth = options?.interpolationDepth ?? 1;\n        if (interpolationDepth < 1) {\n            throw new Error(\"f string interpolation depth must be at least 1\");\n        }\n        return `Return a markdown code snippet with a JSON object formatted to look like:\\n\\`\\`\\`json\\n${this._schemaToInstruction(toJsonSchema(this.schema))\n            .replaceAll(\"{\", \"{\".repeat(interpolationDepth))\n            .replaceAll(\"}\", \"}\".repeat(interpolationDepth))}\\n\\`\\`\\``;\n    }\n    _schemaToInstruction(schemaInput, indent = 2) {\n        const schema = schemaInput;\n        if (\"type\" in schema) {\n            let nullable = false;\n            let type;\n            if (Array.isArray(schema.type)) {\n                const nullIdx = schema.type.findIndex((type) => type === \"null\");\n                if (nullIdx !== -1) {\n                    nullable = true;\n                    schema.type.splice(nullIdx, 1);\n                }\n                type = schema.type.join(\" | \");\n            }\n            else {\n                type = schema.type;\n            }\n            if (schema.type === \"object\" && schema.properties) {\n                const description = schema.description\n                    ? ` // ${schema.description}`\n                    : \"\";\n                const properties = Object.entries(schema.properties)\n                    .map(([key, value]) => {\n                    const isOptional = schema.required?.includes(key)\n                        ? \"\"\n                        : \" (optional)\";\n                    return `${\" \".repeat(indent)}\"${key}\": ${this._schemaToInstruction(value, indent + 2)}${isOptional}`;\n                })\n                    .join(\"\\n\");\n                return `{\\n${properties}\\n${\" \".repeat(indent - 2)}}${description}`;\n            }\n            if (schema.type === \"array\" && schema.items) {\n                const description = schema.description\n                    ? ` // ${schema.description}`\n                    : \"\";\n                return `array[\\n${\" \".repeat(indent)}${this._schemaToInstruction(schema.items, indent + 2)}\\n${\" \".repeat(indent - 2)}] ${description}`;\n            }\n            const isNullable = nullable ? \" (nullable)\" : \"\";\n            const description = schema.description ? ` // ${schema.description}` : \"\";\n            return `${type}${description}${isNullable}`;\n        }\n        if (\"anyOf\" in schema) {\n            return schema.anyOf\n                .map((s) => this._schemaToInstruction(s, indent))\n                .join(`\\n${\" \".repeat(indent - 2)}`);\n        }\n        throw new Error(\"unsupported schema type\");\n    }\n    static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    static fromNamesAndDescriptions(schemas) {\n        const zodSchema = z.object(Object.fromEntries(Object.entries(schemas).map(([name, description]) => [name, z.string().describe(description)])));\n        return new this(zodSchema);\n    }\n}\n/**\n * A type of `StructuredOutputParser` that handles asymmetric input and\n * output schemas.\n */\nexport class AsymmetricStructuredOutputParser extends BaseOutputParser {\n    constructor({ inputSchema }) {\n        super(...arguments);\n        Object.defineProperty(this, \"structuredInputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.structuredInputParser = new JsonMarkdownStructuredOutputParser(inputSchema);\n    }\n    async parse(text) {\n        let parsedInput;\n        try {\n            parsedInput = await this.structuredInputParser.parse(text);\n        }\n        catch (e) {\n            throw new OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n        return this.outputProcessor(parsedInput);\n    }\n    getFormatInstructions() {\n        return this.structuredInputParser.getFormatInstructions();\n    }\n}\n", "import { BaseCumulativeTransformOutputParser } from \"./transform.js\";\nimport { compare } from \"../utils/json_patch.js\";\nimport { parseJsonMarkdown, parsePartialJson } from \"../utils/json.js\";\n/**\n * Class for parsing the output of an LLM into a JSON object.\n */\nexport class JsonOutputParser extends BaseCumulativeTransformOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"output_parsers\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"JsonOutputParser\";\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        if (!prev) {\n            return [{ op: \"replace\", path: \"\", value: next }];\n        }\n        return compare(prev, next);\n    }\n    // This should actually return Partial<T>, but there's no way\n    // to specify emitted chunks as instances separate from the main output type.\n    async parsePartialResult(generations) {\n        return parseJsonMarkdown(generations[0].text);\n    }\n    async parse(text) {\n        return parseJsonMarkdown(text, JSON.parse);\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\nexport { parsePartialJson, parseJsonMarkdown };\n", "export { compare, applyPatch, } from \"./fast-json-patch/index.js\";\n", "import { BaseCumulativeTransformOutputParser, } from \"./transform.js\";\nimport { compare } from \"../utils/json_patch.js\";\nimport { sax } from \"../utils/sax-js/sax.js\";\nexport const XML_FORMAT_INSTRUCTIONS = `The output should be formatted as a XML file.\n1. Output should conform to the tags below. \n2. If tags are not given, make them on your own.\n3. Remember to always open and close all the tags.\n\nAs an example, for the tags [\"foo\", \"bar\", \"baz\"]:\n1. String \"<foo>\\n   <bar>\\n      <baz></baz>\\n   </bar>\\n</foo>\" is a well-formatted instance of the schema. \n2. String \"<foo>\\n   <bar>\\n   </foo>\" is a badly-formatted instance.\n3. String \"<foo>\\n   <tag>\\n   </tag>\\n</foo>\" is a badly-formatted instance.\n\nHere are the output tags:\n\\`\\`\\`\n{tags}\n\\`\\`\\``;\nexport class XMLOutputParser extends BaseCumulativeTransformOutputParser {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"output_parsers\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.tags = fields?.tags;\n    }\n    static lc_name() {\n        return \"XMLOutputParser\";\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        if (!prev) {\n            return [{ op: \"replace\", path: \"\", value: next }];\n        }\n        return compare(prev, next);\n    }\n    async parsePartialResult(generations) {\n        return parseXMLMarkdown(generations[0].text);\n    }\n    async parse(text) {\n        return parseXMLMarkdown(text);\n    }\n    getFormatInstructions() {\n        const withTags = !!(this.tags && this.tags.length > 0);\n        return withTags\n            ? XML_FORMAT_INSTRUCTIONS.replace(\"{tags}\", this.tags?.join(\", \") ?? \"\")\n            : XML_FORMAT_INSTRUCTIONS;\n    }\n}\nconst strip = (text) => text\n    .split(\"\\n\")\n    .map((line) => line.replace(/^\\s+/, \"\"))\n    .join(\"\\n\")\n    .trim();\nconst parseParsedResult = (input) => {\n    if (Object.keys(input).length === 0) {\n        return {};\n    }\n    const result = {};\n    if (input.children.length > 0) {\n        result[input.name] = input.children.map(parseParsedResult);\n        return result;\n    }\n    else {\n        result[input.name] = input.text ?? undefined;\n        return result;\n    }\n};\nexport function parseXMLMarkdown(s) {\n    const cleanedString = strip(s);\n    const parser = sax.parser(true);\n    let parsedResult = {};\n    const elementStack = [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.onopentag = (node) => {\n        const element = {\n            name: node.name,\n            attributes: node.attributes,\n            children: [],\n            text: \"\",\n            isSelfClosing: node.isSelfClosing,\n        };\n        if (elementStack.length > 0) {\n            const parentElement = elementStack[elementStack.length - 1];\n            parentElement.children.push(element);\n        }\n        else {\n            parsedResult = element;\n        }\n        if (!node.isSelfClosing) {\n            elementStack.push(element);\n        }\n    };\n    parser.onclosetag = () => {\n        if (elementStack.length > 0) {\n            const lastElement = elementStack.pop();\n            if (elementStack.length === 0 && lastElement) {\n                parsedResult = lastElement;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.ontext = (text) => {\n        if (elementStack.length > 0) {\n            const currentElement = elementStack[elementStack.length - 1];\n            currentElement.text += text;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.onattribute = (attr) => {\n        if (elementStack.length > 0) {\n            const currentElement = elementStack[elementStack.length - 1];\n            currentElement.attributes[attr.name] = attr.value;\n        }\n    };\n    // Try to find XML string within triple backticks.\n    const match = /```(xml)?(.*)```/s.exec(cleanedString);\n    const xmlString = match ? match[2] : cleanedString;\n    parser.write(xmlString).close();\n    // Remove the XML declaration if present\n    if (parsedResult && parsedResult.name === \"?xml\") {\n        parsedResult = parsedResult.children[0];\n    }\n    return parseParsedResult(parsedResult);\n}\n", "// @ts-nocheck\n// Inlined to deal with portability issues\n// Originally from: https://github.com/isaacs/sax-js\nconst initializeSax = function () {\n    const sax = {};\n    sax.parser = function (strict, opt) {\n        return new SAXParser(strict, opt);\n    };\n    sax.SAXParser = SAXParser;\n    sax.SAXStream = SAXStream;\n    sax.createStream = createStream;\n    // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n    // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n    // since that's the earliest that a buffer overrun could occur.  This way, checks are\n    // as rare as required, but as often as necessary to ensure never crossing this bound.\n    // Furthermore, buffers are only tested at most once per write(), so passing a very\n    // large string into write() might have undesirable effects, but this is manageable by\n    // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n    // edge case, result in creating at most one complete copy of the string passed in.\n    // Set to Infinity to have unlimited buffers.\n    sax.MAX_BUFFER_LENGTH = 64 * 1024;\n    const buffers = [\n        \"comment\",\n        \"sgmlDecl\",\n        \"textNode\",\n        \"tagName\",\n        \"doctype\",\n        \"procInstName\",\n        \"procInstBody\",\n        \"entity\",\n        \"attribName\",\n        \"attribValue\",\n        \"cdata\",\n        \"script\",\n    ];\n    sax.EVENTS = [\n        \"text\",\n        \"processinginstruction\",\n        \"sgmldeclaration\",\n        \"doctype\",\n        \"comment\",\n        \"opentagstart\",\n        \"attribute\",\n        \"opentag\",\n        \"closetag\",\n        \"opencdata\",\n        \"cdata\",\n        \"closecdata\",\n        \"error\",\n        \"end\",\n        \"ready\",\n        \"script\",\n        \"opennamespace\",\n        \"closenamespace\",\n    ];\n    function SAXParser(strict, opt) {\n        if (!(this instanceof SAXParser)) {\n            return new SAXParser(strict, opt);\n        }\n        var parser = this;\n        clearBuffers(parser);\n        parser.q = parser.c = \"\";\n        parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH;\n        parser.opt = opt || {};\n        parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;\n        parser.looseCase = parser.opt.lowercase ? \"toLowerCase\" : \"toUpperCase\";\n        parser.tags = [];\n        parser.closed = parser.closedRoot = parser.sawRoot = false;\n        parser.tag = parser.error = null;\n        parser.strict = !!strict;\n        parser.noscript = !!(strict || parser.opt.noscript);\n        parser.state = S.BEGIN;\n        parser.strictEntities = parser.opt.strictEntities;\n        parser.ENTITIES = parser.strictEntities\n            ? Object.create(sax.XML_ENTITIES)\n            : Object.create(sax.ENTITIES);\n        parser.attribList = [];\n        // namespaces form a prototype chain.\n        // it always points at the current tag,\n        // which protos to its parent tag.\n        if (parser.opt.xmlns) {\n            parser.ns = Object.create(rootNS);\n        }\n        // mostly just for error reporting\n        parser.trackPosition = parser.opt.position !== false;\n        if (parser.trackPosition) {\n            parser.position = parser.line = parser.column = 0;\n        }\n        emit(parser, \"onready\");\n    }\n    if (!Object.create) {\n        Object.create = function (o) {\n            function F() { }\n            F.prototype = o;\n            var newf = new F();\n            return newf;\n        };\n    }\n    if (!Object.keys) {\n        Object.keys = function (o) {\n            var a = [];\n            for (var i in o)\n                if (o.hasOwnProperty(i))\n                    a.push(i);\n            return a;\n        };\n    }\n    function checkBufferLength(parser) {\n        var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10);\n        var maxActual = 0;\n        for (var i = 0, l = buffers.length; i < l; i++) {\n            var len = parser[buffers[i]].length;\n            if (len > maxAllowed) {\n                // Text/cdata nodes can get big, and since they're buffered,\n                // we can get here under normal conditions.\n                // Avoid issues by emitting the text node now,\n                // so at least it won't get any bigger.\n                switch (buffers[i]) {\n                    case \"textNode\":\n                        closeText(parser);\n                        break;\n                    case \"cdata\":\n                        emitNode(parser, \"oncdata\", parser.cdata);\n                        parser.cdata = \"\";\n                        break;\n                    case \"script\":\n                        emitNode(parser, \"onscript\", parser.script);\n                        parser.script = \"\";\n                        break;\n                    default:\n                        error(parser, \"Max buffer length exceeded: \" + buffers[i]);\n                }\n            }\n            maxActual = Math.max(maxActual, len);\n        }\n        // schedule the next check for the earliest possible buffer overrun.\n        var m = sax.MAX_BUFFER_LENGTH - maxActual;\n        parser.bufferCheckPosition = m + parser.position;\n    }\n    function clearBuffers(parser) {\n        for (var i = 0, l = buffers.length; i < l; i++) {\n            parser[buffers[i]] = \"\";\n        }\n    }\n    function flushBuffers(parser) {\n        closeText(parser);\n        if (parser.cdata !== \"\") {\n            emitNode(parser, \"oncdata\", parser.cdata);\n            parser.cdata = \"\";\n        }\n        if (parser.script !== \"\") {\n            emitNode(parser, \"onscript\", parser.script);\n            parser.script = \"\";\n        }\n    }\n    SAXParser.prototype = {\n        end: function () {\n            end(this);\n        },\n        write: write,\n        resume: function () {\n            this.error = null;\n            return this;\n        },\n        close: function () {\n            return this.write(null);\n        },\n        flush: function () {\n            flushBuffers(this);\n        },\n    };\n    var Stream = ReadableStream;\n    if (!Stream)\n        Stream = function () { };\n    var streamWraps = sax.EVENTS.filter(function (ev) {\n        return ev !== \"error\" && ev !== \"end\";\n    });\n    function createStream(strict, opt) {\n        return new SAXStream(strict, opt);\n    }\n    function SAXStream(strict, opt) {\n        if (!(this instanceof SAXStream)) {\n            return new SAXStream(strict, opt);\n        }\n        Stream.apply(this);\n        this._parser = new SAXParser(strict, opt);\n        this.writable = true;\n        this.readable = true;\n        var me = this;\n        this._parser.onend = function () {\n            me.emit(\"end\");\n        };\n        this._parser.onerror = function (er) {\n            me.emit(\"error\", er);\n            // if didn't throw, then means error was handled.\n            // go ahead and clear error, so we can write again.\n            me._parser.error = null;\n        };\n        this._decoder = null;\n        streamWraps.forEach(function (ev) {\n            Object.defineProperty(me, \"on\" + ev, {\n                get: function () {\n                    return me._parser[\"on\" + ev];\n                },\n                set: function (h) {\n                    if (!h) {\n                        me.removeAllListeners(ev);\n                        me._parser[\"on\" + ev] = h;\n                        return h;\n                    }\n                    me.on(ev, h);\n                },\n                enumerable: true,\n                configurable: false,\n            });\n        });\n    }\n    SAXStream.prototype = Object.create(Stream.prototype, {\n        constructor: {\n            value: SAXStream,\n        },\n    });\n    SAXStream.prototype.write = function (data) {\n        this._parser.write(data.toString());\n        this.emit(\"data\", data);\n        return true;\n    };\n    SAXStream.prototype.end = function (chunk) {\n        if (chunk && chunk.length) {\n            this.write(chunk);\n        }\n        this._parser.end();\n        return true;\n    };\n    SAXStream.prototype.on = function (ev, handler) {\n        var me = this;\n        if (!me._parser[\"on\" + ev] && streamWraps.indexOf(ev) !== -1) {\n            me._parser[\"on\" + ev] = function () {\n                var args = arguments.length === 1\n                    ? [arguments[0]]\n                    : Array.apply(null, arguments);\n                args.splice(0, 0, ev);\n                me.emit.apply(me, args);\n            };\n        }\n        return Stream.prototype.on.call(me, ev, handler);\n    };\n    // this really needs to be replaced with character classes.\n    // XML allows all manner of ridiculous numbers and digits.\n    var CDATA = \"[CDATA[\";\n    var DOCTYPE = \"DOCTYPE\";\n    var XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\";\n    var XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\";\n    var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE };\n    // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n    // This implementation works on strings, a single character at a time\n    // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n    // without a significant breaking change to either this  parser, or the\n    // JavaScript language.  Implementation of an emoji-capable xml parser\n    // is left as an exercise for the reader.\n    var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    function isWhitespace(c) {\n        return c === \" \" || c === \"\\n\" || c === \"\\r\" || c === \"\\t\";\n    }\n    function isQuote(c) {\n        return c === '\"' || c === \"'\";\n    }\n    function isAttribEnd(c) {\n        return c === \">\" || isWhitespace(c);\n    }\n    function isMatch(regex, c) {\n        return regex.test(c);\n    }\n    function notMatch(regex, c) {\n        return !isMatch(regex, c);\n    }\n    var S = 0;\n    sax.STATE = {\n        BEGIN: S++, // leading byte order mark or whitespace\n        BEGIN_WHITESPACE: S++, // leading whitespace\n        TEXT: S++, // general stuff\n        TEXT_ENTITY: S++, // &amp and such.\n        OPEN_WAKA: S++, // <\n        SGML_DECL: S++, // <!BLARG\n        SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n        DOCTYPE: S++, // <!DOCTYPE\n        DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n        DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n        DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n        COMMENT_STARTING: S++, // <!-\n        COMMENT: S++, // <!--\n        COMMENT_ENDING: S++, // <!-- blah -\n        COMMENT_ENDED: S++, // <!-- blah --\n        CDATA: S++, // <![CDATA[ something\n        CDATA_ENDING: S++, // ]\n        CDATA_ENDING_2: S++, // ]]\n        PROC_INST: S++, // <?hi\n        PROC_INST_BODY: S++, // <?hi there\n        PROC_INST_ENDING: S++, // <?hi \"there\" ?\n        OPEN_TAG: S++, // <strong\n        OPEN_TAG_SLASH: S++, // <strong /\n        ATTRIB: S++, // <a\n        ATTRIB_NAME: S++, // <a foo\n        ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n        ATTRIB_VALUE: S++, // <a foo=\n        ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n        ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n        ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n        ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n        ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n        CLOSE_TAG: S++, // </a\n        CLOSE_TAG_SAW_WHITE: S++, // </a   >\n        SCRIPT: S++, // <script> ...\n        SCRIPT_ENDING: S++, // <script> ... <\n    };\n    sax.XML_ENTITIES = {\n        amp: \"&\",\n        gt: \">\",\n        lt: \"<\",\n        quot: '\"',\n        apos: \"'\",\n    };\n    sax.ENTITIES = {\n        amp: \"&\",\n        gt: \">\",\n        lt: \"<\",\n        quot: '\"',\n        apos: \"'\",\n        AElig: 198,\n        Aacute: 193,\n        Acirc: 194,\n        Agrave: 192,\n        Aring: 197,\n        Atilde: 195,\n        Auml: 196,\n        Ccedil: 199,\n        ETH: 208,\n        Eacute: 201,\n        Ecirc: 202,\n        Egrave: 200,\n        Euml: 203,\n        Iacute: 205,\n        Icirc: 206,\n        Igrave: 204,\n        Iuml: 207,\n        Ntilde: 209,\n        Oacute: 211,\n        Ocirc: 212,\n        Ograve: 210,\n        Oslash: 216,\n        Otilde: 213,\n        Ouml: 214,\n        THORN: 222,\n        Uacute: 218,\n        Ucirc: 219,\n        Ugrave: 217,\n        Uuml: 220,\n        Yacute: 221,\n        aacute: 225,\n        acirc: 226,\n        aelig: 230,\n        agrave: 224,\n        aring: 229,\n        atilde: 227,\n        auml: 228,\n        ccedil: 231,\n        eacute: 233,\n        ecirc: 234,\n        egrave: 232,\n        eth: 240,\n        euml: 235,\n        iacute: 237,\n        icirc: 238,\n        igrave: 236,\n        iuml: 239,\n        ntilde: 241,\n        oacute: 243,\n        ocirc: 244,\n        ograve: 242,\n        oslash: 248,\n        otilde: 245,\n        ouml: 246,\n        szlig: 223,\n        thorn: 254,\n        uacute: 250,\n        ucirc: 251,\n        ugrave: 249,\n        uuml: 252,\n        yacute: 253,\n        yuml: 255,\n        copy: 169,\n        reg: 174,\n        nbsp: 160,\n        iexcl: 161,\n        cent: 162,\n        pound: 163,\n        curren: 164,\n        yen: 165,\n        brvbar: 166,\n        sect: 167,\n        uml: 168,\n        ordf: 170,\n        laquo: 171,\n        not: 172,\n        shy: 173,\n        macr: 175,\n        deg: 176,\n        plusmn: 177,\n        sup1: 185,\n        sup2: 178,\n        sup3: 179,\n        acute: 180,\n        micro: 181,\n        para: 182,\n        middot: 183,\n        cedil: 184,\n        ordm: 186,\n        raquo: 187,\n        frac14: 188,\n        frac12: 189,\n        frac34: 190,\n        iquest: 191,\n        times: 215,\n        divide: 247,\n        OElig: 338,\n        oelig: 339,\n        Scaron: 352,\n        scaron: 353,\n        Yuml: 376,\n        fnof: 402,\n        circ: 710,\n        tilde: 732,\n        Alpha: 913,\n        Beta: 914,\n        Gamma: 915,\n        Delta: 916,\n        Epsilon: 917,\n        Zeta: 918,\n        Eta: 919,\n        Theta: 920,\n        Iota: 921,\n        Kappa: 922,\n        Lambda: 923,\n        Mu: 924,\n        Nu: 925,\n        Xi: 926,\n        Omicron: 927,\n        Pi: 928,\n        Rho: 929,\n        Sigma: 931,\n        Tau: 932,\n        Upsilon: 933,\n        Phi: 934,\n        Chi: 935,\n        Psi: 936,\n        Omega: 937,\n        alpha: 945,\n        beta: 946,\n        gamma: 947,\n        delta: 948,\n        epsilon: 949,\n        zeta: 950,\n        eta: 951,\n        theta: 952,\n        iota: 953,\n        kappa: 954,\n        lambda: 955,\n        mu: 956,\n        nu: 957,\n        xi: 958,\n        omicron: 959,\n        pi: 960,\n        rho: 961,\n        sigmaf: 962,\n        sigma: 963,\n        tau: 964,\n        upsilon: 965,\n        phi: 966,\n        chi: 967,\n        psi: 968,\n        omega: 969,\n        thetasym: 977,\n        upsih: 978,\n        piv: 982,\n        ensp: 8194,\n        emsp: 8195,\n        thinsp: 8201,\n        zwnj: 8204,\n        zwj: 8205,\n        lrm: 8206,\n        rlm: 8207,\n        ndash: 8211,\n        mdash: 8212,\n        lsquo: 8216,\n        rsquo: 8217,\n        sbquo: 8218,\n        ldquo: 8220,\n        rdquo: 8221,\n        bdquo: 8222,\n        dagger: 8224,\n        Dagger: 8225,\n        bull: 8226,\n        hellip: 8230,\n        permil: 8240,\n        prime: 8242,\n        Prime: 8243,\n        lsaquo: 8249,\n        rsaquo: 8250,\n        oline: 8254,\n        frasl: 8260,\n        euro: 8364,\n        image: 8465,\n        weierp: 8472,\n        real: 8476,\n        trade: 8482,\n        alefsym: 8501,\n        larr: 8592,\n        uarr: 8593,\n        rarr: 8594,\n        darr: 8595,\n        harr: 8596,\n        crarr: 8629,\n        lArr: 8656,\n        uArr: 8657,\n        rArr: 8658,\n        dArr: 8659,\n        hArr: 8660,\n        forall: 8704,\n        part: 8706,\n        exist: 8707,\n        empty: 8709,\n        nabla: 8711,\n        isin: 8712,\n        notin: 8713,\n        ni: 8715,\n        prod: 8719,\n        sum: 8721,\n        minus: 8722,\n        lowast: 8727,\n        radic: 8730,\n        prop: 8733,\n        infin: 8734,\n        ang: 8736,\n        and: 8743,\n        or: 8744,\n        cap: 8745,\n        cup: 8746,\n        int: 8747,\n        there4: 8756,\n        sim: 8764,\n        cong: 8773,\n        asymp: 8776,\n        ne: 8800,\n        equiv: 8801,\n        le: 8804,\n        ge: 8805,\n        sub: 8834,\n        sup: 8835,\n        nsub: 8836,\n        sube: 8838,\n        supe: 8839,\n        oplus: 8853,\n        otimes: 8855,\n        perp: 8869,\n        sdot: 8901,\n        lceil: 8968,\n        rceil: 8969,\n        lfloor: 8970,\n        rfloor: 8971,\n        lang: 9001,\n        rang: 9002,\n        loz: 9674,\n        spades: 9824,\n        clubs: 9827,\n        hearts: 9829,\n        diams: 9830,\n    };\n    Object.keys(sax.ENTITIES).forEach(function (key) {\n        var e = sax.ENTITIES[key];\n        var s = typeof e === \"number\" ? String.fromCharCode(e) : e;\n        sax.ENTITIES[key] = s;\n    });\n    for (var s in sax.STATE) {\n        sax.STATE[sax.STATE[s]] = s;\n    }\n    // shorthand\n    S = sax.STATE;\n    function emit(parser, event, data) {\n        parser[event] && parser[event](data);\n    }\n    function emitNode(parser, nodeType, data) {\n        if (parser.textNode)\n            closeText(parser);\n        emit(parser, nodeType, data);\n    }\n    function closeText(parser) {\n        parser.textNode = textopts(parser.opt, parser.textNode);\n        if (parser.textNode)\n            emit(parser, \"ontext\", parser.textNode);\n        parser.textNode = \"\";\n    }\n    function textopts(opt, text) {\n        if (opt.trim)\n            text = text.trim();\n        if (opt.normalize)\n            text = text.replace(/\\s+/g, \" \");\n        return text;\n    }\n    function error(parser, er) {\n        closeText(parser);\n        if (parser.trackPosition) {\n            er +=\n                \"\\nLine: \" +\n                    parser.line +\n                    \"\\nColumn: \" +\n                    parser.column +\n                    \"\\nChar: \" +\n                    parser.c;\n        }\n        er = new Error(er);\n        parser.error = er;\n        emit(parser, \"onerror\", er);\n        return parser;\n    }\n    function end(parser) {\n        if (parser.sawRoot && !parser.closedRoot)\n            strictFail(parser, \"Unclosed root tag\");\n        if (parser.state !== S.BEGIN &&\n            parser.state !== S.BEGIN_WHITESPACE &&\n            parser.state !== S.TEXT) {\n            error(parser, \"Unexpected end\");\n        }\n        closeText(parser);\n        parser.c = \"\";\n        parser.closed = true;\n        emit(parser, \"onend\");\n        SAXParser.call(parser, parser.strict, parser.opt);\n        return parser;\n    }\n    function strictFail(parser, message) {\n        if (typeof parser !== \"object\" || !(parser instanceof SAXParser)) {\n            throw new Error(\"bad call to strictFail\");\n        }\n        if (parser.strict) {\n            error(parser, message);\n        }\n    }\n    function newTag(parser) {\n        if (!parser.strict)\n            parser.tagName = parser.tagName[parser.looseCase]();\n        var parent = parser.tags[parser.tags.length - 1] || parser;\n        var tag = (parser.tag = { name: parser.tagName, attributes: {} });\n        // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n        if (parser.opt.xmlns) {\n            tag.ns = parent.ns;\n        }\n        parser.attribList.length = 0;\n        emitNode(parser, \"onopentagstart\", tag);\n    }\n    function qname(name, attribute) {\n        var i = name.indexOf(\":\");\n        var qualName = i < 0 ? [\"\", name] : name.split(\":\");\n        var prefix = qualName[0];\n        var local = qualName[1];\n        // <x \"xmlns\"=\"http://foo\">\n        if (attribute && name === \"xmlns\") {\n            prefix = \"xmlns\";\n            local = \"\";\n        }\n        return { prefix: prefix, local: local };\n    }\n    function attrib(parser) {\n        if (!parser.strict) {\n            parser.attribName = parser.attribName[parser.looseCase]();\n        }\n        if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n            parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n            parser.attribName = parser.attribValue = \"\";\n            return;\n        }\n        if (parser.opt.xmlns) {\n            var qn = qname(parser.attribName, true);\n            var prefix = qn.prefix;\n            var local = qn.local;\n            if (prefix === \"xmlns\") {\n                // namespace binding attribute. push the binding into scope\n                if (local === \"xml\" && parser.attribValue !== XML_NAMESPACE) {\n                    strictFail(parser, \"xml: prefix must be bound to \" +\n                        XML_NAMESPACE +\n                        \"\\n\" +\n                        \"Actual: \" +\n                        parser.attribValue);\n                }\n                else if (local === \"xmlns\" &&\n                    parser.attribValue !== XMLNS_NAMESPACE) {\n                    strictFail(parser, \"xmlns: prefix must be bound to \" +\n                        XMLNS_NAMESPACE +\n                        \"\\n\" +\n                        \"Actual: \" +\n                        parser.attribValue);\n                }\n                else {\n                    var tag = parser.tag;\n                    var parent = parser.tags[parser.tags.length - 1] || parser;\n                    if (tag.ns === parent.ns) {\n                        tag.ns = Object.create(parent.ns);\n                    }\n                    tag.ns[local] = parser.attribValue;\n                }\n            }\n            // defer onattribute events until all attributes have been seen\n            // so any new bindings can take effect. preserve attribute order\n            // so deferred events can be emitted in document order\n            parser.attribList.push([parser.attribName, parser.attribValue]);\n        }\n        else {\n            // in non-xmlns mode, we can emit the event right away\n            parser.tag.attributes[parser.attribName] = parser.attribValue;\n            emitNode(parser, \"onattribute\", {\n                name: parser.attribName,\n                value: parser.attribValue,\n            });\n        }\n        parser.attribName = parser.attribValue = \"\";\n    }\n    function openTag(parser, selfClosing) {\n        if (parser.opt.xmlns) {\n            // emit namespace binding events\n            var tag = parser.tag;\n            // add namespace info to tag\n            var qn = qname(parser.tagName);\n            tag.prefix = qn.prefix;\n            tag.local = qn.local;\n            tag.uri = tag.ns[qn.prefix] || \"\";\n            if (tag.prefix && !tag.uri) {\n                strictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(parser.tagName));\n                tag.uri = qn.prefix;\n            }\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n            if (tag.ns && parent.ns !== tag.ns) {\n                Object.keys(tag.ns).forEach(function (p) {\n                    emitNode(parser, \"onopennamespace\", {\n                        prefix: p,\n                        uri: tag.ns[p],\n                    });\n                });\n            }\n            // handle deferred onattribute events\n            // Note: do not apply default ns to attributes:\n            //   http://www.w3.org/TR/REC-xml-names/#defaulting\n            for (var i = 0, l = parser.attribList.length; i < l; i++) {\n                var nv = parser.attribList[i];\n                var name = nv[0];\n                var value = nv[1];\n                var qualName = qname(name, true);\n                var prefix = qualName.prefix;\n                var local = qualName.local;\n                var uri = prefix === \"\" ? \"\" : tag.ns[prefix] || \"\";\n                var a = {\n                    name: name,\n                    value: value,\n                    prefix: prefix,\n                    local: local,\n                    uri: uri,\n                };\n                // if there's any attributes with an undefined namespace,\n                // then fail on them now.\n                if (prefix && prefix !== \"xmlns\" && !uri) {\n                    strictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(prefix));\n                    a.uri = prefix;\n                }\n                parser.tag.attributes[name] = a;\n                emitNode(parser, \"onattribute\", a);\n            }\n            parser.attribList.length = 0;\n        }\n        parser.tag.isSelfClosing = !!selfClosing;\n        // process the tag\n        parser.sawRoot = true;\n        parser.tags.push(parser.tag);\n        emitNode(parser, \"onopentag\", parser.tag);\n        if (!selfClosing) {\n            // special case for <script> in non-strict mode.\n            if (!parser.noscript && parser.tagName.toLowerCase() === \"script\") {\n                parser.state = S.SCRIPT;\n            }\n            else {\n                parser.state = S.TEXT;\n            }\n            parser.tag = null;\n            parser.tagName = \"\";\n        }\n        parser.attribName = parser.attribValue = \"\";\n        parser.attribList.length = 0;\n    }\n    function closeTag(parser) {\n        if (!parser.tagName) {\n            strictFail(parser, \"Weird empty close tag.\");\n            parser.textNode += \"</>\";\n            parser.state = S.TEXT;\n            return;\n        }\n        if (parser.script) {\n            if (parser.tagName !== \"script\") {\n                parser.script += \"</\" + parser.tagName + \">\";\n                parser.tagName = \"\";\n                parser.state = S.SCRIPT;\n                return;\n            }\n            emitNode(parser, \"onscript\", parser.script);\n            parser.script = \"\";\n        }\n        // first make sure that the closing tag actually exists.\n        // <a><b></c></b></a> will close everything, otherwise.\n        var t = parser.tags.length;\n        var tagName = parser.tagName;\n        if (!parser.strict) {\n            tagName = tagName[parser.looseCase]();\n        }\n        var closeTo = tagName;\n        while (t--) {\n            var close = parser.tags[t];\n            if (close.name !== closeTo) {\n                // fail the first time in strict mode\n                strictFail(parser, \"Unexpected close tag\");\n            }\n            else {\n                break;\n            }\n        }\n        // didn't find it.  we already failed for strict, so just abort.\n        if (t < 0) {\n            strictFail(parser, \"Unmatched closing tag: \" + parser.tagName);\n            parser.textNode += \"</\" + parser.tagName + \">\";\n            parser.state = S.TEXT;\n            return;\n        }\n        parser.tagName = tagName;\n        var s = parser.tags.length;\n        while (s-- > t) {\n            var tag = (parser.tag = parser.tags.pop());\n            parser.tagName = parser.tag.name;\n            emitNode(parser, \"onclosetag\", parser.tagName);\n            var x = {};\n            for (var i in tag.ns) {\n                x[i] = tag.ns[i];\n            }\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n            if (parser.opt.xmlns && tag.ns !== parent.ns) {\n                // remove namespace bindings introduced by tag\n                Object.keys(tag.ns).forEach(function (p) {\n                    var n = tag.ns[p];\n                    emitNode(parser, \"onclosenamespace\", { prefix: p, uri: n });\n                });\n            }\n        }\n        if (t === 0)\n            parser.closedRoot = true;\n        parser.tagName = parser.attribValue = parser.attribName = \"\";\n        parser.attribList.length = 0;\n        parser.state = S.TEXT;\n    }\n    function parseEntity(parser) {\n        var entity = parser.entity;\n        var entityLC = entity.toLowerCase();\n        var num;\n        var numStr = \"\";\n        if (parser.ENTITIES[entity]) {\n            return parser.ENTITIES[entity];\n        }\n        if (parser.ENTITIES[entityLC]) {\n            return parser.ENTITIES[entityLC];\n        }\n        entity = entityLC;\n        if (entity.charAt(0) === \"#\") {\n            if (entity.charAt(1) === \"x\") {\n                entity = entity.slice(2);\n                num = parseInt(entity, 16);\n                numStr = num.toString(16);\n            }\n            else {\n                entity = entity.slice(1);\n                num = parseInt(entity, 10);\n                numStr = num.toString(10);\n            }\n        }\n        entity = entity.replace(/^0+/, \"\");\n        if (isNaN(num) || numStr.toLowerCase() !== entity) {\n            strictFail(parser, \"Invalid character entity\");\n            return \"&\" + parser.entity + \";\";\n        }\n        return String.fromCodePoint(num);\n    }\n    function beginWhiteSpace(parser, c) {\n        if (c === \"<\") {\n            parser.state = S.OPEN_WAKA;\n            parser.startTagPosition = parser.position;\n        }\n        else if (!isWhitespace(c)) {\n            // have to process this as a text node.\n            // weird, but happens.\n            strictFail(parser, \"Non-whitespace before first tag.\");\n            parser.textNode = c;\n            parser.state = S.TEXT;\n        }\n    }\n    function charAt(chunk, i) {\n        var result = \"\";\n        if (i < chunk.length) {\n            result = chunk.charAt(i);\n        }\n        return result;\n    }\n    function write(chunk) {\n        var parser = this;\n        if (this.error) {\n            throw this.error;\n        }\n        if (parser.closed) {\n            return error(parser, \"Cannot write after close. Assign an onready handler.\");\n        }\n        if (chunk === null) {\n            return end(parser);\n        }\n        if (typeof chunk === \"object\") {\n            chunk = chunk.toString();\n        }\n        var i = 0;\n        var c = \"\";\n        while (true) {\n            c = charAt(chunk, i++);\n            parser.c = c;\n            if (!c) {\n                break;\n            }\n            if (parser.trackPosition) {\n                parser.position++;\n                if (c === \"\\n\") {\n                    parser.line++;\n                    parser.column = 0;\n                }\n                else {\n                    parser.column++;\n                }\n            }\n            switch (parser.state) {\n                case S.BEGIN:\n                    parser.state = S.BEGIN_WHITESPACE;\n                    if (c === \"\\uFEFF\") {\n                        continue;\n                    }\n                    beginWhiteSpace(parser, c);\n                    continue;\n                case S.BEGIN_WHITESPACE:\n                    beginWhiteSpace(parser, c);\n                    continue;\n                case S.TEXT:\n                    if (parser.sawRoot && !parser.closedRoot) {\n                        var starti = i - 1;\n                        while (c && c !== \"<\" && c !== \"&\") {\n                            c = charAt(chunk, i++);\n                            if (c && parser.trackPosition) {\n                                parser.position++;\n                                if (c === \"\\n\") {\n                                    parser.line++;\n                                    parser.column = 0;\n                                }\n                                else {\n                                    parser.column++;\n                                }\n                            }\n                        }\n                        parser.textNode += chunk.substring(starti, i - 1);\n                    }\n                    if (c === \"<\" &&\n                        !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n                        parser.state = S.OPEN_WAKA;\n                        parser.startTagPosition = parser.position;\n                    }\n                    else {\n                        if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n                            strictFail(parser, \"Text data outside of root node.\");\n                        }\n                        if (c === \"&\") {\n                            parser.state = S.TEXT_ENTITY;\n                        }\n                        else {\n                            parser.textNode += c;\n                        }\n                    }\n                    continue;\n                case S.SCRIPT:\n                    // only non-strict\n                    if (c === \"<\") {\n                        parser.state = S.SCRIPT_ENDING;\n                    }\n                    else {\n                        parser.script += c;\n                    }\n                    continue;\n                case S.SCRIPT_ENDING:\n                    if (c === \"/\") {\n                        parser.state = S.CLOSE_TAG;\n                    }\n                    else {\n                        parser.script += \"<\" + c;\n                        parser.state = S.SCRIPT;\n                    }\n                    continue;\n                case S.OPEN_WAKA:\n                    // either a /, ?, !, or text is coming next.\n                    if (c === \"!\") {\n                        parser.state = S.SGML_DECL;\n                        parser.sgmlDecl = \"\";\n                    }\n                    else if (isWhitespace(c)) {\n                        // wait for it...\n                    }\n                    else if (isMatch(nameStart, c)) {\n                        parser.state = S.OPEN_TAG;\n                        parser.tagName = c;\n                    }\n                    else if (c === \"/\") {\n                        parser.state = S.CLOSE_TAG;\n                        parser.tagName = \"\";\n                    }\n                    else if (c === \"?\") {\n                        parser.state = S.PROC_INST;\n                        parser.procInstName = parser.procInstBody = \"\";\n                    }\n                    else {\n                        strictFail(parser, \"Unencoded <\");\n                        // if there was some whitespace, then add that in.\n                        if (parser.startTagPosition + 1 < parser.position) {\n                            var pad = parser.position - parser.startTagPosition;\n                            c = new Array(pad).join(\" \") + c;\n                        }\n                        parser.textNode += \"<\" + c;\n                        parser.state = S.TEXT;\n                    }\n                    continue;\n                case S.SGML_DECL:\n                    if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n                        emitNode(parser, \"onopencdata\");\n                        parser.state = S.CDATA;\n                        parser.sgmlDecl = \"\";\n                        parser.cdata = \"\";\n                    }\n                    else if (parser.sgmlDecl + c === \"--\") {\n                        parser.state = S.COMMENT;\n                        parser.comment = \"\";\n                        parser.sgmlDecl = \"\";\n                    }\n                    else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n                        parser.state = S.DOCTYPE;\n                        if (parser.doctype || parser.sawRoot) {\n                            strictFail(parser, \"Inappropriately located doctype declaration\");\n                        }\n                        parser.doctype = \"\";\n                        parser.sgmlDecl = \"\";\n                    }\n                    else if (c === \">\") {\n                        emitNode(parser, \"onsgmldeclaration\", parser.sgmlDecl);\n                        parser.sgmlDecl = \"\";\n                        parser.state = S.TEXT;\n                    }\n                    else if (isQuote(c)) {\n                        parser.state = S.SGML_DECL_QUOTED;\n                        parser.sgmlDecl += c;\n                    }\n                    else {\n                        parser.sgmlDecl += c;\n                    }\n                    continue;\n                case S.SGML_DECL_QUOTED:\n                    if (c === parser.q) {\n                        parser.state = S.SGML_DECL;\n                        parser.q = \"\";\n                    }\n                    parser.sgmlDecl += c;\n                    continue;\n                case S.DOCTYPE:\n                    if (c === \">\") {\n                        parser.state = S.TEXT;\n                        emitNode(parser, \"ondoctype\", parser.doctype);\n                        parser.doctype = true; // just remember that we saw it.\n                    }\n                    else {\n                        parser.doctype += c;\n                        if (c === \"[\") {\n                            parser.state = S.DOCTYPE_DTD;\n                        }\n                        else if (isQuote(c)) {\n                            parser.state = S.DOCTYPE_QUOTED;\n                            parser.q = c;\n                        }\n                    }\n                    continue;\n                case S.DOCTYPE_QUOTED:\n                    parser.doctype += c;\n                    if (c === parser.q) {\n                        parser.q = \"\";\n                        parser.state = S.DOCTYPE;\n                    }\n                    continue;\n                case S.DOCTYPE_DTD:\n                    parser.doctype += c;\n                    if (c === \"]\") {\n                        parser.state = S.DOCTYPE;\n                    }\n                    else if (isQuote(c)) {\n                        parser.state = S.DOCTYPE_DTD_QUOTED;\n                        parser.q = c;\n                    }\n                    continue;\n                case S.DOCTYPE_DTD_QUOTED:\n                    parser.doctype += c;\n                    if (c === parser.q) {\n                        parser.state = S.DOCTYPE_DTD;\n                        parser.q = \"\";\n                    }\n                    continue;\n                case S.COMMENT:\n                    if (c === \"-\") {\n                        parser.state = S.COMMENT_ENDING;\n                    }\n                    else {\n                        parser.comment += c;\n                    }\n                    continue;\n                case S.COMMENT_ENDING:\n                    if (c === \"-\") {\n                        parser.state = S.COMMENT_ENDED;\n                        parser.comment = textopts(parser.opt, parser.comment);\n                        if (parser.comment) {\n                            emitNode(parser, \"oncomment\", parser.comment);\n                        }\n                        parser.comment = \"\";\n                    }\n                    else {\n                        parser.comment += \"-\" + c;\n                        parser.state = S.COMMENT;\n                    }\n                    continue;\n                case S.COMMENT_ENDED:\n                    if (c !== \">\") {\n                        strictFail(parser, \"Malformed comment\");\n                        // allow <!-- blah -- bloo --> in non-strict mode,\n                        // which is a comment of \" blah -- bloo \"\n                        parser.comment += \"--\" + c;\n                        parser.state = S.COMMENT;\n                    }\n                    else {\n                        parser.state = S.TEXT;\n                    }\n                    continue;\n                case S.CDATA:\n                    if (c === \"]\") {\n                        parser.state = S.CDATA_ENDING;\n                    }\n                    else {\n                        parser.cdata += c;\n                    }\n                    continue;\n                case S.CDATA_ENDING:\n                    if (c === \"]\") {\n                        parser.state = S.CDATA_ENDING_2;\n                    }\n                    else {\n                        parser.cdata += \"]\" + c;\n                        parser.state = S.CDATA;\n                    }\n                    continue;\n                case S.CDATA_ENDING_2:\n                    if (c === \">\") {\n                        if (parser.cdata) {\n                            emitNode(parser, \"oncdata\", parser.cdata);\n                        }\n                        emitNode(parser, \"onclosecdata\");\n                        parser.cdata = \"\";\n                        parser.state = S.TEXT;\n                    }\n                    else if (c === \"]\") {\n                        parser.cdata += \"]\";\n                    }\n                    else {\n                        parser.cdata += \"]]\" + c;\n                        parser.state = S.CDATA;\n                    }\n                    continue;\n                case S.PROC_INST:\n                    if (c === \"?\") {\n                        parser.state = S.PROC_INST_ENDING;\n                    }\n                    else if (isWhitespace(c)) {\n                        parser.state = S.PROC_INST_BODY;\n                    }\n                    else {\n                        parser.procInstName += c;\n                    }\n                    continue;\n                case S.PROC_INST_BODY:\n                    if (!parser.procInstBody && isWhitespace(c)) {\n                        continue;\n                    }\n                    else if (c === \"?\") {\n                        parser.state = S.PROC_INST_ENDING;\n                    }\n                    else {\n                        parser.procInstBody += c;\n                    }\n                    continue;\n                case S.PROC_INST_ENDING:\n                    if (c === \">\") {\n                        emitNode(parser, \"onprocessinginstruction\", {\n                            name: parser.procInstName,\n                            body: parser.procInstBody,\n                        });\n                        parser.procInstName = parser.procInstBody = \"\";\n                        parser.state = S.TEXT;\n                    }\n                    else {\n                        parser.procInstBody += \"?\" + c;\n                        parser.state = S.PROC_INST_BODY;\n                    }\n                    continue;\n                case S.OPEN_TAG:\n                    if (isMatch(nameBody, c)) {\n                        parser.tagName += c;\n                    }\n                    else {\n                        newTag(parser);\n                        if (c === \">\") {\n                            openTag(parser);\n                        }\n                        else if (c === \"/\") {\n                            parser.state = S.OPEN_TAG_SLASH;\n                        }\n                        else {\n                            if (!isWhitespace(c)) {\n                                strictFail(parser, \"Invalid character in tag name\");\n                            }\n                            parser.state = S.ATTRIB;\n                        }\n                    }\n                    continue;\n                case S.OPEN_TAG_SLASH:\n                    if (c === \">\") {\n                        openTag(parser, true);\n                        closeTag(parser);\n                    }\n                    else {\n                        strictFail(parser, \"Forward-slash in opening tag not followed by >\");\n                        parser.state = S.ATTRIB;\n                    }\n                    continue;\n                case S.ATTRIB:\n                    // haven't read the attribute name yet.\n                    if (isWhitespace(c)) {\n                        continue;\n                    }\n                    else if (c === \">\") {\n                        openTag(parser);\n                    }\n                    else if (c === \"/\") {\n                        parser.state = S.OPEN_TAG_SLASH;\n                    }\n                    else if (isMatch(nameStart, c)) {\n                        parser.attribName = c;\n                        parser.attribValue = \"\";\n                        parser.state = S.ATTRIB_NAME;\n                    }\n                    else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_NAME:\n                    if (c === \"=\") {\n                        parser.state = S.ATTRIB_VALUE;\n                    }\n                    else if (c === \">\") {\n                        strictFail(parser, \"Attribute without value\");\n                        parser.attribValue = parser.attribName;\n                        attrib(parser);\n                        openTag(parser);\n                    }\n                    else if (isWhitespace(c)) {\n                        parser.state = S.ATTRIB_NAME_SAW_WHITE;\n                    }\n                    else if (isMatch(nameBody, c)) {\n                        parser.attribName += c;\n                    }\n                    else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_NAME_SAW_WHITE:\n                    if (c === \"=\") {\n                        parser.state = S.ATTRIB_VALUE;\n                    }\n                    else if (isWhitespace(c)) {\n                        continue;\n                    }\n                    else {\n                        strictFail(parser, \"Attribute without value\");\n                        parser.tag.attributes[parser.attribName] = \"\";\n                        parser.attribValue = \"\";\n                        emitNode(parser, \"onattribute\", {\n                            name: parser.attribName,\n                            value: \"\",\n                        });\n                        parser.attribName = \"\";\n                        if (c === \">\") {\n                            openTag(parser);\n                        }\n                        else if (isMatch(nameStart, c)) {\n                            parser.attribName = c;\n                            parser.state = S.ATTRIB_NAME;\n                        }\n                        else {\n                            strictFail(parser, \"Invalid attribute name\");\n                            parser.state = S.ATTRIB;\n                        }\n                    }\n                    continue;\n                case S.ATTRIB_VALUE:\n                    if (isWhitespace(c)) {\n                        continue;\n                    }\n                    else if (isQuote(c)) {\n                        parser.q = c;\n                        parser.state = S.ATTRIB_VALUE_QUOTED;\n                    }\n                    else {\n                        strictFail(parser, \"Unquoted attribute value\");\n                        parser.state = S.ATTRIB_VALUE_UNQUOTED;\n                        parser.attribValue = c;\n                    }\n                    continue;\n                case S.ATTRIB_VALUE_QUOTED:\n                    if (c !== parser.q) {\n                        if (c === \"&\") {\n                            parser.state = S.ATTRIB_VALUE_ENTITY_Q;\n                        }\n                        else {\n                            parser.attribValue += c;\n                        }\n                        continue;\n                    }\n                    attrib(parser);\n                    parser.q = \"\";\n                    parser.state = S.ATTRIB_VALUE_CLOSED;\n                    continue;\n                case S.ATTRIB_VALUE_CLOSED:\n                    if (isWhitespace(c)) {\n                        parser.state = S.ATTRIB;\n                    }\n                    else if (c === \">\") {\n                        openTag(parser);\n                    }\n                    else if (c === \"/\") {\n                        parser.state = S.OPEN_TAG_SLASH;\n                    }\n                    else if (isMatch(nameStart, c)) {\n                        strictFail(parser, \"No whitespace between attributes\");\n                        parser.attribName = c;\n                        parser.attribValue = \"\";\n                        parser.state = S.ATTRIB_NAME;\n                    }\n                    else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_VALUE_UNQUOTED:\n                    if (!isAttribEnd(c)) {\n                        if (c === \"&\") {\n                            parser.state = S.ATTRIB_VALUE_ENTITY_U;\n                        }\n                        else {\n                            parser.attribValue += c;\n                        }\n                        continue;\n                    }\n                    attrib(parser);\n                    if (c === \">\") {\n                        openTag(parser);\n                    }\n                    else {\n                        parser.state = S.ATTRIB;\n                    }\n                    continue;\n                case S.CLOSE_TAG:\n                    if (!parser.tagName) {\n                        if (isWhitespace(c)) {\n                            continue;\n                        }\n                        else if (notMatch(nameStart, c)) {\n                            if (parser.script) {\n                                parser.script += \"</\" + c;\n                                parser.state = S.SCRIPT;\n                            }\n                            else {\n                                strictFail(parser, \"Invalid tagname in closing tag.\");\n                            }\n                        }\n                        else {\n                            parser.tagName = c;\n                        }\n                    }\n                    else if (c === \">\") {\n                        closeTag(parser);\n                    }\n                    else if (isMatch(nameBody, c)) {\n                        parser.tagName += c;\n                    }\n                    else if (parser.script) {\n                        parser.script += \"</\" + parser.tagName;\n                        parser.tagName = \"\";\n                        parser.state = S.SCRIPT;\n                    }\n                    else {\n                        if (!isWhitespace(c)) {\n                            strictFail(parser, \"Invalid tagname in closing tag\");\n                        }\n                        parser.state = S.CLOSE_TAG_SAW_WHITE;\n                    }\n                    continue;\n                case S.CLOSE_TAG_SAW_WHITE:\n                    if (isWhitespace(c)) {\n                        continue;\n                    }\n                    if (c === \">\") {\n                        closeTag(parser);\n                    }\n                    else {\n                        strictFail(parser, \"Invalid characters in closing tag\");\n                    }\n                    continue;\n                case S.TEXT_ENTITY:\n                case S.ATTRIB_VALUE_ENTITY_Q:\n                case S.ATTRIB_VALUE_ENTITY_U:\n                    var returnState;\n                    var buffer;\n                    switch (parser.state) {\n                        case S.TEXT_ENTITY:\n                            returnState = S.TEXT;\n                            buffer = \"textNode\";\n                            break;\n                        case S.ATTRIB_VALUE_ENTITY_Q:\n                            returnState = S.ATTRIB_VALUE_QUOTED;\n                            buffer = \"attribValue\";\n                            break;\n                        case S.ATTRIB_VALUE_ENTITY_U:\n                            returnState = S.ATTRIB_VALUE_UNQUOTED;\n                            buffer = \"attribValue\";\n                            break;\n                    }\n                    if (c === \";\") {\n                        if (parser.opt.unparsedEntities) {\n                            var parsedEntity = parseEntity(parser);\n                            parser.entity = \"\";\n                            parser.state = returnState;\n                            parser.write(parsedEntity);\n                        }\n                        else {\n                            parser[buffer] += parseEntity(parser);\n                            parser.entity = \"\";\n                            parser.state = returnState;\n                        }\n                    }\n                    else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n                        parser.entity += c;\n                    }\n                    else {\n                        strictFail(parser, \"Invalid character in entity name\");\n                        parser[buffer] += \"&\" + parser.entity + c;\n                        parser.entity = \"\";\n                        parser.state = returnState;\n                    }\n                    continue;\n                default: /* istanbul ignore next */ {\n                    throw new Error(parser, \"Unknown state: \" + parser.state);\n                }\n            }\n        } // while\n        if (parser.position >= parser.bufferCheckPosition) {\n            checkBufferLength(parser);\n        }\n        return parser;\n    }\n    /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n    /* istanbul ignore next */\n    if (!String.fromCodePoint) {\n        (function () {\n            var stringFromCharCode = String.fromCharCode;\n            var floor = Math.floor;\n            var fromCodePoint = function () {\n                var MAX_SIZE = 0x4000;\n                var codeUnits = [];\n                var highSurrogate;\n                var lowSurrogate;\n                var index = -1;\n                var length = arguments.length;\n                if (!length) {\n                    return \"\";\n                }\n                var result = \"\";\n                while (++index < length) {\n                    var codePoint = Number(arguments[index]);\n                    if (!isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n                        codePoint < 0 || // not a valid Unicode code point\n                        codePoint > 0x10ffff || // not a valid Unicode code point\n                        floor(codePoint) !== codePoint // not an integer\n                    ) {\n                        throw RangeError(\"Invalid code point: \" + codePoint);\n                    }\n                    if (codePoint <= 0xffff) {\n                        // BMP code point\n                        codeUnits.push(codePoint);\n                    }\n                    else {\n                        // Astral code point; split in surrogate halves\n                        // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n                        codePoint -= 0x10000;\n                        highSurrogate = (codePoint >> 10) + 0xd800;\n                        lowSurrogate = (codePoint % 0x400) + 0xdc00;\n                        codeUnits.push(highSurrogate, lowSurrogate);\n                    }\n                    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n                        result += stringFromCharCode.apply(null, codeUnits);\n                        codeUnits.length = 0;\n                    }\n                }\n                return result;\n            };\n            /* istanbul ignore next */\n            if (Object.defineProperty) {\n                Object.defineProperty(String, \"fromCodePoint\", {\n                    value: fromCodePoint,\n                    configurable: true,\n                    writable: true,\n                });\n            }\n            else {\n                String.fromCodePoint = fromCodePoint;\n            }\n        })();\n    }\n    return sax;\n};\nconst sax = /** #__PURE__ */ initializeSax();\nexport { sax };\n", "export * from \"./base.js\";\nexport * from \"./chat.js\";\nexport * from \"./few_shot.js\";\nexport * from \"./pipeline.js\";\nexport * from \"./prompt.js\";\nexport * from \"./serde.js\";\nexport * from \"./string.js\";\nexport * from \"./template.js\";\nexport * from \"./image.js\";\nexport * from \"./structured.js\";\nexport * from \"./dict.js\";\n", "import { BasePromptTemplate } from \"./base.js\";\nimport { ChatPromptTemplate } from \"./chat.js\";\n/**\n * Class that handles a sequence of prompts, each of which may require\n * different input variables. Includes methods for formatting these\n * prompts, extracting required input values, and handling partial\n * prompts.\n * @example\n * ```typescript\n * const composedPrompt = new PipelinePromptTemplate({\n *   pipelinePrompts: [\n *     {\n *       name: \"introduction\",\n *       prompt: PromptTemplate.fromTemplate(`You are impersonating {person}.`),\n *     },\n *     {\n *       name: \"example\",\n *       prompt: PromptTemplate.fromTemplate(\n *         `Here's an example of an interaction:\n * Q: {example_q}\n * A: {example_a}`,\n *       ),\n *     },\n *     {\n *       name: \"start\",\n *       prompt: PromptTemplate.fromTemplate(\n *         `Now, do this for real!\n * Q: {input}\n * A:`,\n *       ),\n *     },\n *   ],\n *   finalPrompt: PromptTemplate.fromTemplate(\n *     `{introduction}\n * {example}\n * {start}`,\n *   ),\n * });\n *\n * const formattedPrompt = await composedPrompt.format({\n *   person: \"Elon Musk\",\n *   example_q: `What's your favorite car?`,\n *   example_a: \"Tesla\",\n *   input: `What's your favorite social media site?`,\n * });\n * ```\n */\nexport class PipelinePromptTemplate extends BasePromptTemplate {\n    static lc_name() {\n        return \"PipelinePromptTemplate\";\n    }\n    constructor(input) {\n        super({ ...input, inputVariables: [] });\n        Object.defineProperty(this, \"pipelinePrompts\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"finalPrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pipelinePrompts = input.pipelinePrompts;\n        this.finalPrompt = input.finalPrompt;\n        this.inputVariables = this.computeInputValues();\n    }\n    /**\n     * Computes the input values required by the pipeline prompts.\n     * @returns Array of input values required by the pipeline prompts.\n     */\n    computeInputValues() {\n        const intermediateValues = this.pipelinePrompts.map((pipelinePrompt) => pipelinePrompt.name);\n        const inputValues = this.pipelinePrompts\n            .map((pipelinePrompt) => pipelinePrompt.prompt.inputVariables.filter((inputValue) => !intermediateValues.includes(inputValue)))\n            .flat();\n        return [...new Set(inputValues)];\n    }\n    static extractRequiredInputValues(allValues, requiredValueNames) {\n        return requiredValueNames.reduce((requiredValues, valueName) => {\n            // eslint-disable-next-line no-param-reassign\n            requiredValues[valueName] = allValues[valueName];\n            return requiredValues;\n        }, {});\n    }\n    /**\n     * Formats the pipeline prompts based on the provided input values.\n     * @param values Input values to format the pipeline prompts.\n     * @returns Promise that resolves with the formatted input values.\n     */\n    async formatPipelinePrompts(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        for (const { name: pipelinePromptName, prompt: pipelinePrompt } of this\n            .pipelinePrompts) {\n            const pipelinePromptInputValues = PipelinePromptTemplate.extractRequiredInputValues(allValues, pipelinePrompt.inputVariables);\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (pipelinePrompt instanceof ChatPromptTemplate) {\n                allValues[pipelinePromptName] = await pipelinePrompt.formatMessages(pipelinePromptInputValues);\n            }\n            else {\n                allValues[pipelinePromptName] = await pipelinePrompt.format(pipelinePromptInputValues);\n            }\n        }\n        return PipelinePromptTemplate.extractRequiredInputValues(allValues, this.finalPrompt.inputVariables);\n    }\n    /**\n     * Formats the final prompt value based on the provided input values.\n     * @param values Input values to format the final prompt value.\n     * @returns Promise that resolves with the formatted final prompt value.\n     */\n    async formatPromptValue(values) {\n        return this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(values));\n    }\n    async format(values) {\n        return this.finalPrompt.format(await this.formatPipelinePrompts(values));\n    }\n    /**\n     * Handles partial prompts, which are prompts that have been partially\n     * filled with input values.\n     * @param values Partial input values.\n     * @returns Promise that resolves with a new PipelinePromptTemplate instance with updated input variables.\n     */\n    async partial(values) {\n        const promptDict = { ...this };\n        promptDict.inputVariables = this.inputVariables.filter((iv) => !(iv in values));\n        promptDict.partialVariables = {\n            ...(this.partialVariables ?? {}),\n            ...values,\n        };\n        return new PipelinePromptTemplate(promptDict);\n    }\n    serialize() {\n        throw new Error(\"Not implemented.\");\n    }\n    _getPromptType() {\n        return \"pipeline\";\n    }\n}\n", "export {};\n", "import { RunnableBinding } from \"../runnables/base.js\";\nimport { ChatPromptTemplate, } from \"./chat.js\";\nfunction isWithStructuredOutput(x\n// eslint-disable-next-line @typescript-eslint/ban-types\n) {\n    return (typeof x === \"object\" &&\n        x != null &&\n        \"withStructuredOutput\" in x &&\n        typeof x.withStructuredOutput === \"function\");\n}\nfunction isRunnableBinding(x) {\n    return (typeof x === \"object\" &&\n        x != null &&\n        \"lc_id\" in x &&\n        Array.isArray(x.lc_id) &&\n        x.lc_id.join(\"/\") === \"langchain_core/runnables/RunnableBinding\");\n}\nexport class StructuredPrompt extends ChatPromptTemplate {\n    get lc_aliases() {\n        return {\n            ...super.lc_aliases,\n            schema: \"schema_\",\n        };\n    }\n    constructor(input) {\n        super(input);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"method\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"prompts\", \"structured\"]\n        });\n        this.schema = input.schema;\n        this.method = input.method;\n    }\n    pipe(coerceable) {\n        if (isWithStructuredOutput(coerceable)) {\n            return super.pipe(coerceable.withStructuredOutput(this.schema));\n        }\n        if (isRunnableBinding(coerceable) &&\n            isWithStructuredOutput(coerceable.bound)) {\n            return super.pipe(new RunnableBinding({\n                bound: coerceable.bound.withStructuredOutput(this.schema, ...(this.method ? [{ method: this.method }] : [])),\n                kwargs: coerceable.kwargs ?? {},\n                config: coerceable.config,\n                configFactories: coerceable.configFactories,\n            }));\n        }\n        throw new Error(`Structured prompts need to be piped to a language model that supports the \"withStructuredOutput()\" method.`);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static fromMessagesAndSchema(promptMessages, schema, method\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n        return StructuredPrompt.fromMessages(promptMessages, { schema, method });\n    }\n}\n", "import { CallbackManager, parseCallbackConfigArg, } from \"../callbacks/manager.js\";\nimport { Runnable } from \"../runnables/base.js\";\nimport { ensureConfig } from \"../runnables/config.js\";\n/**\n * Abstract base class for a document retrieval system, designed to\n * process string queries and return the most relevant documents from a source.\n *\n * `BaseRetriever` provides common properties and methods for derived retrievers,\n * such as callbacks, tagging, and verbose logging. Custom retrieval systems\n * should extend this class and implement `_getRelevantDocuments` to define\n * the specific retrieval logic.\n *\n * @template Metadata - The type of metadata associated with each document,\n *                      defaulting to `Record<string, any>`.\n */\nexport class BaseRetriever extends Runnable {\n    /**\n     * Constructs a new `BaseRetriever` instance with optional configuration fields.\n     *\n     * @param fields - Optional input configuration that can include `callbacks`,\n     *                 `tags`, `metadata`, and `verbose` settings for custom retriever behavior.\n     */\n    constructor(fields) {\n        super(fields);\n        /**\n         * Optional callbacks to handle various events in the retrieval process.\n         */\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Tags to label or categorize the retrieval operation.\n         */\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Metadata to provide additional context or information about the retrieval\n         * operation.\n         */\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * If set to `true`, enables verbose logging for the retrieval process.\n         */\n        Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callbacks = fields?.callbacks;\n        this.tags = fields?.tags ?? [];\n        this.metadata = fields?.metadata ?? {};\n        this.verbose = fields?.verbose ?? false;\n    }\n    /**\n     * TODO: This should be an abstract method, but we'd like to avoid breaking\n     * changes to people currently using subclassed custom retrievers.\n     * Change it on next major release.\n     */\n    /**\n     * Placeholder method for retrieving relevant documents based on a query.\n     *\n     * This method is intended to be implemented by subclasses and will be\n     * converted to an abstract method in the next major release. Currently, it\n     * throws an error if not implemented, ensuring that custom retrievers define\n     * the specific retrieval logic.\n     *\n     * @param _query - The query string used to search for relevant documents.\n     * @param _callbacks - (optional) Callback manager for managing callbacks\n     *                     during retrieval.\n     * @returns A promise resolving to an array of `DocumentInterface` instances relevant to the query.\n     * @throws {Error} Throws an error indicating the method is not implemented.\n     */\n    _getRelevantDocuments(_query, _callbacks) {\n        throw new Error(\"Not implemented!\");\n    }\n    /**\n     * Executes a retrieval operation.\n     *\n     * @param input - The query string used to search for relevant documents.\n     * @param options - (optional) Configuration options for the retrieval run,\n     *                  which may include callbacks, tags, and metadata.\n     * @returns A promise that resolves to an array of `DocumentInterface` instances\n     *          representing the most relevant documents to the query.\n     */\n    async invoke(input, options) {\n        return this.getRelevantDocuments(input, ensureConfig(options));\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     *\n     * Main method used to retrieve relevant documents. It takes a query\n     * string and an optional configuration object, and returns a promise that\n     * resolves to an array of `Document` objects. This method handles the\n     * retrieval process, including starting and ending callbacks, and error\n     * handling.\n     * @param query The query string to retrieve relevant documents for.\n     * @param config Optional configuration object for the retrieval process.\n     * @returns A promise that resolves to an array of `Document` objects.\n     */\n    async getRelevantDocuments(query, config) {\n        const parsedConfig = ensureConfig(parseCallbackConfigArg(config));\n        const callbackManager_ = await CallbackManager.configure(parsedConfig.callbacks, this.callbacks, parsedConfig.tags, this.tags, parsedConfig.metadata, this.metadata, { verbose: this.verbose });\n        const runManager = await callbackManager_?.handleRetrieverStart(this.toJSON(), query, parsedConfig.runId, undefined, undefined, undefined, parsedConfig.runName);\n        try {\n            const results = await this._getRelevantDocuments(query, runManager);\n            await runManager?.handleRetrieverEnd(results);\n            return results;\n        }\n        catch (error) {\n            await runManager?.handleRetrieverError(error);\n            throw error;\n        }\n    }\n}\n", "import { Serializable } from \"./load/serializable.js\";\n/**\n * Abstract interface for a key-value store.\n */\nexport class BaseStore extends Serializable {\n}\n/**\n * In-memory implementation of the BaseStore using a dictionary. Used for\n * storing key-value pairs in memory.\n * @example\n * ```typescript\n * const store = new InMemoryStore<BaseMessage>();\n * await store.mset(\n *   Array.from({ length: 5 }).map((_, index) => [\n *     `message:id:${index}`,\n *     index % 2 === 0\n *       ? new AIMessage(\"ai stuff...\")\n *       : new HumanMessage(\"human stuff...\"),\n *   ]),\n * );\n *\n * const retrievedMessages = await store.mget([\"message:id:0\", \"message:id:1\"]);\n * await store.mdelete(await store.yieldKeys(\"message:id:\").toArray());\n * ```\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class InMemoryStore extends BaseStore {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"storage\"]\n        });\n        Object.defineProperty(this, \"store\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n    }\n    /**\n     * Retrieves the values associated with the given keys from the store.\n     * @param keys Keys to retrieve values for.\n     * @returns Array of values associated with the given keys.\n     */\n    async mget(keys) {\n        return keys.map((key) => this.store[key]);\n    }\n    /**\n     * Sets the values for the given keys in the store.\n     * @param keyValuePairs Array of key-value pairs to set in the store.\n     * @returns Promise that resolves when all key-value pairs have been set.\n     */\n    async mset(keyValuePairs) {\n        for (const [key, value] of keyValuePairs) {\n            this.store[key] = value;\n        }\n    }\n    /**\n     * Deletes the given keys and their associated values from the store.\n     * @param keys Keys to delete from the store.\n     * @returns Promise that resolves when all keys have been deleted.\n     */\n    async mdelete(keys) {\n        for (const key of keys) {\n            delete this.store[key];\n        }\n    }\n    /**\n     * Asynchronous generator that yields keys from the store. If a prefix is\n     * provided, it only yields keys that start with the prefix.\n     * @param prefix Optional prefix to filter keys.\n     * @returns AsyncGenerator that yields keys from the store.\n     */\n    async *yieldKeys(prefix) {\n        const keys = Object.keys(this.store);\n        for (const key of keys) {\n            if (prefix === undefined || key.startsWith(prefix)) {\n                yield key;\n            }\n        }\n    }\n}\n", "import { z } from \"zod/v3\";\nimport { validate, } from \"@cfworker/json-schema\";\nimport { CallbackManager, parseCallbackConfigArg, } from \"../callbacks/manager.js\";\nimport { BaseLangChain } from \"../language_models/base.js\";\nimport { ensureConfig, patchConfig, pickRunnableConfigKeys, } from \"../runnables/config.js\";\nimport { isDirectToolOutput, ToolMessage } from \"../messages/tool.js\";\nimport { AsyncLocalStorageProviderSingleton } from \"../singletons/index.js\";\nimport { _configHasToolCallId, _isToolCall, ToolInputParsingException, } from \"./utils.js\";\nimport { interopParseAsync, isSimpleStringZodSchema, isInteropZodSchema, } from \"../utils/types/zod.js\";\nimport { validatesOnlyStrings } from \"../utils/json_schema.js\";\nexport { isLangChainTool, isRunnableToolLike, isStructuredTool, isStructuredToolParams, } from \"./types.js\";\nexport { ToolInputParsingException };\n/**\n * Base class for Tools that accept input of any shape defined by a Zod schema.\n */\nexport class StructuredTool extends BaseLangChain {\n    get lc_namespace() {\n        return [\"langchain\", \"tools\"];\n    }\n    constructor(fields) {\n        super(fields ?? {});\n        /**\n         * Whether to return the tool's output directly.\n         *\n         * Setting this to true means that after the tool is called,\n         * an agent should stop looping.\n         */\n        Object.defineProperty(this, \"returnDirect\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"verboseParsingErrors\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /**\n         * The tool response format.\n         *\n         * If \"content\" then the output of the tool is interpreted as the contents of a\n         * ToolMessage. If \"content_and_artifact\" then the output is expected to be a\n         * two-tuple corresponding to the (content, artifact) of a ToolMessage.\n         *\n         * @default \"content\"\n         */\n        Object.defineProperty(this, \"responseFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"content\"\n        });\n        this.verboseParsingErrors =\n            fields?.verboseParsingErrors ?? this.verboseParsingErrors;\n        this.responseFormat = fields?.responseFormat ?? this.responseFormat;\n    }\n    /**\n     * Invokes the tool with the provided input and configuration.\n     * @param input The input for the tool.\n     * @param config Optional configuration for the tool.\n     * @returns A Promise that resolves with the tool's output.\n     */\n    async invoke(input, config) {\n        let toolInput;\n        let enrichedConfig = ensureConfig(config);\n        if (_isToolCall(input)) {\n            toolInput = input.args;\n            enrichedConfig = {\n                ...enrichedConfig,\n                toolCall: input,\n            };\n        }\n        else {\n            toolInput = input;\n        }\n        return this.call(toolInput, enrichedConfig);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     *\n     * Calls the tool with the provided argument, configuration, and tags. It\n     * parses the input according to the schema, handles any errors, and\n     * manages callbacks.\n     * @param arg The input argument for the tool.\n     * @param configArg Optional configuration or callbacks for the tool.\n     * @param tags Optional tags for the tool.\n     * @returns A Promise that resolves with a string.\n     */\n    async call(arg, configArg, \n    /** @deprecated */\n    tags) {\n        // Determine the actual input that needs parsing/validation.\n        // If arg is a ToolCall, use its args; otherwise, use arg directly.\n        const inputForValidation = _isToolCall(arg) ? arg.args : arg;\n        let parsed; // This will hold the successfully parsed input of the expected output type.\n        if (isInteropZodSchema(this.schema)) {\n            try {\n                // Validate the inputForValidation - TS needs help here as it can't exclude ToolCall based on the check\n                parsed = await interopParseAsync(this.schema, inputForValidation);\n            }\n            catch (e) {\n                let message = `Received tool input did not match expected schema`;\n                if (this.verboseParsingErrors) {\n                    message = `${message}\\nDetails: ${e.message}`;\n                }\n                // Pass the original raw input arg to the exception\n                throw new ToolInputParsingException(message, JSON.stringify(arg));\n            }\n        }\n        else {\n            const result = validate(inputForValidation, this.schema);\n            if (!result.valid) {\n                let message = `Received tool input did not match expected schema`;\n                if (this.verboseParsingErrors) {\n                    message = `${message}\\nDetails: ${result.errors\n                        .map((e) => `${e.keywordLocation}: ${e.error}`)\n                        .join(\"\\n\")}`;\n                }\n                // Pass the original raw input arg to the exception\n                throw new ToolInputParsingException(message, JSON.stringify(arg));\n            }\n            // Assign the validated input to parsed\n            // We cast here because validate() doesn't narrow the type sufficiently for TS, but we know it's valid.\n            parsed = inputForValidation;\n        }\n        const config = parseCallbackConfigArg(configArg);\n        const callbackManager_ = CallbackManager.configure(config.callbacks, this.callbacks, config.tags || tags, this.tags, config.metadata, this.metadata, { verbose: this.verbose });\n        const runManager = await callbackManager_?.handleToolStart(this.toJSON(), \n        // Log the original raw input arg\n        typeof arg === \"string\" ? arg : JSON.stringify(arg), config.runId, undefined, undefined, undefined, config.runName);\n        delete config.runId;\n        let result;\n        try {\n            // Pass the correctly typed parsed input to _call\n            result = await this._call(parsed, runManager, config);\n        }\n        catch (e) {\n            await runManager?.handleToolError(e);\n            throw e;\n        }\n        let content;\n        let artifact;\n        if (this.responseFormat === \"content_and_artifact\") {\n            if (Array.isArray(result) && result.length === 2) {\n                [content, artifact] = result;\n            }\n            else {\n                throw new Error(`Tool response format is \"content_and_artifact\" but the output was not a two-tuple.\\nResult: ${JSON.stringify(result)}`);\n            }\n        }\n        else {\n            content = result;\n        }\n        let toolCallId;\n        // Extract toolCallId ONLY if the original arg was a ToolCall\n        if (_isToolCall(arg)) {\n            toolCallId = arg.id;\n        }\n        // Or if it was provided in the config's toolCall property\n        if (!toolCallId && _configHasToolCallId(config)) {\n            toolCallId = config.toolCall.id;\n        }\n        const formattedOutput = _formatToolOutput({\n            content,\n            artifact,\n            toolCallId,\n            name: this.name,\n        });\n        await runManager?.handleToolEnd(formattedOutput);\n        return formattedOutput;\n    }\n}\n/**\n * Base class for Tools that accept input as a string.\n */\nexport class Tool extends StructuredTool {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: z\n                .object({ input: z.string().optional() })\n                .transform((obj) => obj.input)\n        });\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     *\n     * Calls the tool with the provided argument and callbacks. It handles\n     * string inputs specifically.\n     * @param arg The input argument for the tool, which can be a string, undefined, or an input of the tool's schema.\n     * @param callbacks Optional callbacks for the tool.\n     * @returns A Promise that resolves with a string.\n     */\n    // Match the base class signature including the generics and conditional return type\n    call(arg, callbacks) {\n        // Prepare the input for the base class call method.\n        // If arg is string or undefined, wrap it; otherwise, pass ToolCall or { input: ... } directly.\n        const structuredArg = typeof arg === \"string\" || arg == null ? { input: arg } : arg;\n        // Ensure TConfig is passed to super.call\n        return super.call(structuredArg, callbacks);\n    }\n}\n/**\n * A tool that can be created dynamically from a function, name, and description.\n */\nexport class DynamicTool extends Tool {\n    static lc_name() {\n        return \"DynamicTool\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.func = fields.func;\n        this.returnDirect = fields.returnDirect ?? this.returnDirect;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     */\n    async call(arg, configArg) {\n        const config = parseCallbackConfigArg(configArg);\n        if (config.runName === undefined) {\n            config.runName = this.name;\n        }\n        // Call the Tool class's call method, passing generics through\n        // Cast config to TConfig to satisfy the super.call signature\n        return super.call(arg, config);\n    }\n    /** @ignore */\n    async _call(input, // DynamicTool's _call specifically expects a string after schema transformation\n    runManager, parentConfig) {\n        return this.func(input, runManager, parentConfig);\n    }\n}\n/**\n * A tool that can be created dynamically from a function, name, and\n * description, designed to work with structured data. It extends the\n * StructuredTool class and overrides the _call method to execute the\n * provided function when the tool is called.\n *\n * Schema can be passed as Zod or JSON schema. The tool will not validate\n * input if JSON schema is passed.\n */\nexport class DynamicStructuredTool extends StructuredTool {\n    static lc_name() {\n        return \"DynamicStructuredTool\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.func = fields.func;\n        this.returnDirect = fields.returnDirect ?? this.returnDirect;\n        this.schema = fields.schema;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     */\n    // Match the base class signature\n    async call(arg, configArg, \n    /** @deprecated */\n    tags) {\n        const config = parseCallbackConfigArg(configArg);\n        if (config.runName === undefined) {\n            config.runName = this.name;\n        }\n        // Call the base class method, passing generics through\n        // Cast config to TConfig to satisfy the super.call signature\n        return super.call(arg, config, tags);\n    }\n    _call(arg, runManager, parentConfig) {\n        return this.func(arg, runManager, parentConfig);\n    }\n}\n/**\n * Abstract base class for toolkits in LangChain. Toolkits are collections\n * of tools that agents can use. Subclasses must implement the `tools`\n * property to provide the specific tools for the toolkit.\n */\nexport class BaseToolkit {\n    getTools() {\n        return this.tools;\n    }\n}\nexport function tool(func, fields) {\n    const isSimpleStringSchema = isSimpleStringZodSchema(fields.schema);\n    const isStringJSONSchema = validatesOnlyStrings(fields.schema);\n    // If the schema is not provided, or it's a simple string schema, create a DynamicTool\n    if (!fields.schema || isSimpleStringSchema || isStringJSONSchema) {\n        return new DynamicTool({\n            ...fields,\n            description: fields.description ??\n                fields.schema?.description ??\n                `${fields.name} tool`,\n            func: async (input, runManager, config) => {\n                return new Promise((resolve, reject) => {\n                    const childConfig = patchConfig(config, {\n                        callbacks: runManager?.getChild(),\n                    });\n                    void AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(childConfig), async () => {\n                        try {\n                            // TS doesn't restrict the type here based on the guard above\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            resolve(func(input, childConfig));\n                        }\n                        catch (e) {\n                            reject(e);\n                        }\n                    });\n                });\n            },\n        });\n    }\n    const schema = fields.schema;\n    const description = fields.description ??\n        fields.schema.description ??\n        `${fields.name} tool`;\n    return new DynamicStructuredTool({\n        ...fields,\n        description,\n        schema,\n        func: async (input, runManager, config) => {\n            return new Promise((resolve, reject) => {\n                const childConfig = patchConfig(config, {\n                    callbacks: runManager?.getChild(),\n                });\n                void AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(childConfig), async () => {\n                    try {\n                        resolve(func(input, childConfig));\n                    }\n                    catch (e) {\n                        reject(e);\n                    }\n                });\n            });\n        },\n    });\n}\nfunction _formatToolOutput(params) {\n    const { content, artifact, toolCallId } = params;\n    if (toolCallId && !isDirectToolOutput(content)) {\n        if (typeof content === \"string\" ||\n            (Array.isArray(content) &&\n                content.every((item) => typeof item === \"object\"))) {\n            return new ToolMessage({\n                content,\n                artifact,\n                tool_call_id: toolCallId,\n                name: params.name,\n            });\n        }\n        else {\n            return new ToolMessage({\n                content: _stringify(content),\n                artifact,\n                tool_call_id: toolCallId,\n                name: params.name,\n            });\n        }\n    }\n    else {\n        return content;\n    }\n}\nfunction _stringify(content) {\n    try {\n        return JSON.stringify(content, null, 2) ?? \"\";\n    }\n    catch (_noOp) {\n        return `${content}`;\n    }\n}\n", "import { Runnable, } from \"../runnables/base.js\";\nimport { isInteropZodSchema, } from \"../utils/types/zod.js\";\n/**\n * Confirm whether the inputted tool is an instance of `StructuredToolInterface`.\n *\n * @param {StructuredToolInterface | JSONSchema | undefined} tool The tool to check if it is an instance of `StructuredToolInterface`.\n * @returns {tool is StructuredToolInterface} Whether the inputted tool is an instance of `StructuredToolInterface`.\n */\nexport function isStructuredTool(tool) {\n    return (tool !== undefined &&\n        Array.isArray(tool.lc_namespace));\n}\n/**\n * Confirm whether the inputted tool is an instance of `RunnableToolLike`.\n *\n * @param {unknown | undefined} tool The tool to check if it is an instance of `RunnableToolLike`.\n * @returns {tool is RunnableToolLike} Whether the inputted tool is an instance of `RunnableToolLike`.\n */\nexport function isRunnableToolLike(tool) {\n    return (tool !== undefined &&\n        Runnable.isRunnable(tool) &&\n        \"lc_name\" in tool.constructor &&\n        typeof tool.constructor.lc_name === \"function\" &&\n        tool.constructor.lc_name() === \"RunnableToolLike\");\n}\n/**\n * Confirm whether or not the tool contains the necessary properties to be considered a `StructuredToolParams`.\n *\n * @param {unknown | undefined} tool The object to check if it is a `StructuredToolParams`.\n * @returns {tool is StructuredToolParams} Whether the inputted object is a `StructuredToolParams`.\n */\nexport function isStructuredToolParams(tool) {\n    return (!!tool &&\n        typeof tool === \"object\" &&\n        \"name\" in tool &&\n        \"schema\" in tool &&\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (isInteropZodSchema(tool.schema) ||\n            (tool.schema != null &&\n                typeof tool.schema === \"object\" &&\n                \"type\" in tool.schema &&\n                typeof tool.schema.type === \"string\" &&\n                [\"null\", \"boolean\", \"object\", \"array\", \"number\", \"string\"].includes(tool.schema.type))));\n}\n/**\n * Whether or not the tool is one of StructuredTool, RunnableTool or StructuredToolParams.\n * It returns `is StructuredToolParams` since that is the most minimal interface of the three,\n * while still containing the necessary properties to be passed to a LLM for tool calling.\n *\n * @param {unknown | undefined} tool The tool to check if it is a LangChain tool.\n * @returns {tool is StructuredToolParams} Whether the inputted tool is a LangChain tool.\n */\nexport function isLangChainTool(tool) {\n    return (isStructuredToolParams(tool) ||\n        isRunnableToolLike(tool) ||\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        isStructuredTool(tool));\n}\n", "import { LangChainTracer } from \"./tracer_langchain.js\";\nimport { LangChainTracerV1 } from \"./tracer_langchain_v1.js\";\n/**\n * @deprecated Use the V2 handler instead.\n *\n * Function that returns an instance of `LangChainTracerV1`. If a session\n * is provided, it loads that session into the tracer; otherwise, it loads\n * a default session.\n * @param session Optional session to load into the tracer.\n * @returns An instance of `LangChainTracerV1`.\n */\nexport async function getTracingCallbackHandler(session) {\n    const tracer = new LangChainTracerV1();\n    if (session) {\n        await tracer.loadSession(session);\n    }\n    else {\n        await tracer.loadDefaultSession();\n    }\n    return tracer;\n}\n/**\n * @deprecated Instantiate directly using the LangChainTracer constructor.\n *\n * Function that returns an instance of `LangChainTracer`. It does not\n * load any session data.\n * @returns An instance of `LangChainTracer`.\n */\nexport async function getTracingV2CallbackHandler() {\n    return new LangChainTracer();\n}\n", "import { getBufferString } from \"../messages/utils.js\";\nimport { getEnvironmentVariable } from \"../utils/env.js\";\nimport { BaseTracer } from \"./base.js\";\n/** @deprecated Use LangChainTracer instead. */\nexport class LangChainTracerV1 extends BaseTracer {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"endpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: getEnvironmentVariable(\"LANGCHAIN_ENDPOINT\") || \"http://localhost:1984\"\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                \"Content-Type\": \"application/json\",\n            }\n        });\n        Object.defineProperty(this, \"session\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = getEnvironmentVariable(\"LANGCHAIN_API_KEY\");\n        if (apiKey) {\n            this.headers[\"x-api-key\"] = apiKey;\n        }\n    }\n    async newSession(sessionName) {\n        const sessionCreate = {\n            start_time: Date.now(),\n            name: sessionName,\n        };\n        const session = await this.persistSession(sessionCreate);\n        this.session = session;\n        return session;\n    }\n    async loadSession(sessionName) {\n        const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async loadDefaultSession() {\n        const endpoint = `${this.endpoint}/sessions?name=default`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async convertV2RunToRun(run) {\n        const session = this.session ?? (await this.loadDefaultSession());\n        const serialized = run.serialized;\n        let runResult;\n        if (run.run_type === \"llm\") {\n            const prompts = run.inputs.prompts\n                ? run.inputs.prompts\n                : run.inputs.messages.map((x) => getBufferString(x));\n            const llmRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                prompts,\n                response: run.outputs,\n            };\n            runResult = llmRun;\n        }\n        else if (run.run_type === \"chain\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run) => this.convertV2RunToRun(child_run)));\n            const chainRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                inputs: run.inputs,\n                outputs: run.outputs,\n                child_llm_runs: child_runs.filter((child_run) => child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run) => child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run) => child_run.type === \"tool\"),\n            };\n            runResult = chainRun;\n        }\n        else if (run.run_type === \"tool\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run) => this.convertV2RunToRun(child_run)));\n            const toolRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                tool_input: run.inputs.input,\n                output: run.outputs?.output,\n                action: JSON.stringify(serialized),\n                child_llm_runs: child_runs.filter((child_run) => child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run) => child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run) => child_run.type === \"tool\"),\n            };\n            runResult = toolRun;\n        }\n        else {\n            throw new Error(`Unknown run type: ${run.run_type}`);\n        }\n        return runResult;\n    }\n    async persistRun(run) {\n        let endpoint;\n        let v1Run;\n        if (run.run_type !== undefined) {\n            v1Run = await this.convertV2RunToRun(run);\n        }\n        else {\n            v1Run = run;\n        }\n        if (v1Run.type === \"llm\") {\n            endpoint = `${this.endpoint}/llm-runs`;\n        }\n        else if (v1Run.type === \"chain\") {\n            endpoint = `${this.endpoint}/chain-runs`;\n        }\n        else {\n            endpoint = `${this.endpoint}/tool-runs`;\n        }\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(v1Run),\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist run: ${response.status} ${response.statusText}`);\n        }\n    }\n    async persistSession(sessionCreate) {\n        const endpoint = `${this.endpoint}/sessions`;\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(sessionCreate),\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);\n            return {\n                id: 1,\n                ...sessionCreate,\n            };\n        }\n        return {\n            id: (await response.json()).id,\n            ...sessionCreate,\n        };\n    }\n    async _handleSessionResponse(endpoint) {\n        const response = await fetch(endpoint, {\n            method: \"GET\",\n            headers: this.headers,\n        });\n        let tracerSession;\n        if (!response.ok) {\n            console.error(`Failed to load session: ${response.status} ${response.statusText}`);\n            tracerSession = {\n                id: 1,\n                start_time: Date.now(),\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        const resp = (await response.json());\n        if (resp.length === 0) {\n            tracerSession = {\n                id: 1,\n                start_time: Date.now(),\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        [tracerSession] = resp;\n        this.session = tracerSession;\n        return tracerSession;\n    }\n}\n", "import { BaseTracer } from \"./base.js\";\n/**\n * A callback handler that collects traced runs and makes it easy to fetch the traced run object from calls through any langchain object.\n * For instance, it makes it easy to fetch the run ID and then do things with that, such as log feedback.\n */\nexport class RunCollectorCallbackHandler extends BaseTracer {\n    /**\n     * Creates a new instance of the RunCollectorCallbackHandler class.\n     * @param exampleId The ID of the example.\n     */\n    constructor({ exampleId } = {}) {\n        super({ _awaitHandler: true });\n        /** The name of the callback handler. */\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"run_collector\"\n        });\n        /** The ID of the example. */\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** An array of traced runs. */\n        Object.defineProperty(this, \"tracedRuns\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.exampleId = exampleId;\n        this.tracedRuns = [];\n    }\n    /**\n     * Persists the given run object.\n     * @param run The run object to persist.\n     */\n    async persistRun(run) {\n        const run_ = { ...run };\n        run_.reference_example_id = this.exampleId;\n        this.tracedRuns.push(run_);\n    }\n}\n", "export const chunkArray = (arr, chunkSize) => arr.reduce((chunks, elem, index) => {\n    const chunkIndex = Math.floor(index / chunkSize);\n    const chunk = chunks[chunkIndex] || [];\n    // eslint-disable-next-line no-param-reassign\n    chunks[chunkIndex] = chunk.concat([elem]);\n    return chunks;\n}, []);\n", "import { isLangChainTool, } from \"../tools/types.js\";\nimport { toJsonSchema } from \"./json_schema.js\";\n// These utility functions were moved to a more appropriate location,\n// but we still export them here for backwards compatibility.\nexport { isStructuredTool, isStructuredToolParams, isRunnableToolLike, isLangChainTool, } from \"../tools/types.js\";\n/**\n * Formats a `StructuredTool` or `RunnableToolLike` instance into a format\n * that is compatible with OpenAI function calling. If `StructuredTool` or\n * `RunnableToolLike` has a zod schema, the output will be converted into a\n * JSON schema, which is then used as the parameters for the OpenAI tool.\n *\n * @param {StructuredToolInterface | RunnableToolLike} tool The tool to convert to an OpenAI function.\n * @returns {FunctionDefinition} The inputted tool in OpenAI function format.\n */\nexport function convertToOpenAIFunction(tool, fields) {\n    // @TODO 0.3.0 Remove the `number` typing\n    const fieldsCopy = typeof fields === \"number\" ? undefined : fields;\n    return {\n        name: tool.name,\n        description: tool.description,\n        parameters: toJsonSchema(tool.schema),\n        // Do not include the `strict` field if it is `undefined`.\n        ...(fieldsCopy?.strict !== undefined ? { strict: fieldsCopy.strict } : {}),\n    };\n}\n/**\n * Formats a `StructuredTool` or `RunnableToolLike` instance into a\n * format that is compatible with OpenAI tool calling. If `StructuredTool` or\n * `RunnableToolLike` has a zod schema, the output will be converted into a\n * JSON schema, which is then used as the parameters for the OpenAI tool.\n *\n * @param {StructuredToolInterface | Record<string, any> | RunnableToolLike} tool The tool to convert to an OpenAI tool.\n * @returns {ToolDefinition} The inputted tool in OpenAI tool format.\n */\nexport function convertToOpenAITool(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntool, fields) {\n    // @TODO 0.3.0 Remove the `number` typing\n    const fieldsCopy = typeof fields === \"number\" ? undefined : fields;\n    let toolDef;\n    if (isLangChainTool(tool)) {\n        toolDef = {\n            type: \"function\",\n            function: convertToOpenAIFunction(tool),\n        };\n    }\n    else {\n        toolDef = tool;\n    }\n    if (fieldsCopy?.strict !== undefined) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        toolDef.function.strict = fieldsCopy.strict;\n    }\n    return toolDef;\n}\n", "import { cosine } from \"./ml-distance/similarities.js\";\nimport { innerProduct as innerProductDistance } from \"./ml-distance/distances.js\";\nimport { euclidean } from \"./ml-distance-euclidean/euclidean.js\";\n/**\n * Apply a row-wise function between two matrices with the same number of columns.\n *\n * @param {number[][]} X - The first matrix.\n * @param {number[][]} Y - The second matrix.\n * @param {VectorFunction} func - The function to apply.\n *\n * @throws {Error} If the number of columns in X and Y are not the same.\n *\n * @returns {number[][] | [[]]} A matrix where each row represents the result of applying the function between the corresponding rows of X and Y.\n */\nexport function matrixFunc(X, Y, func) {\n    if (X.length === 0 ||\n        X[0].length === 0 ||\n        Y.length === 0 ||\n        Y[0].length === 0) {\n        return [[]];\n    }\n    if (X[0].length !== Y[0].length) {\n        throw new Error(`Number of columns in X and Y must be the same. X has shape ${[\n            X.length,\n            X[0].length,\n        ]} and Y has shape ${[Y.length, Y[0].length]}.`);\n    }\n    return X.map((xVector) => Y.map((yVector) => func(xVector, yVector)).map((similarity) => Number.isNaN(similarity) ? 0 : similarity));\n}\nexport function normalize(M, similarity = false) {\n    const max = matrixMaxVal(M);\n    return M.map((row) => row.map((val) => (similarity ? 1 - val / max : val / max)));\n}\n/**\n * This function calculates the row-wise cosine similarity between two matrices with the same number of columns.\n *\n * @param {number[][]} X - The first matrix.\n * @param {number[][]} Y - The second matrix.\n *\n * @throws {Error} If the number of columns in X and Y are not the same.\n *\n * @returns {number[][] | [[]]} A matrix where each row represents the cosine similarity values between the corresponding rows of X and Y.\n */\nexport function cosineSimilarity(X, Y) {\n    return matrixFunc(X, Y, cosine);\n}\nexport function innerProduct(X, Y) {\n    return matrixFunc(X, Y, innerProductDistance);\n}\nexport function euclideanDistance(X, Y) {\n    return matrixFunc(X, Y, euclidean);\n}\n/**\n * This function implements the Maximal Marginal Relevance algorithm\n * to select a set of embeddings that maximizes the diversity and relevance to a query embedding.\n *\n * @param {number[]|number[][]} queryEmbedding - The query embedding.\n * @param {number[][]} embeddingList - The list of embeddings to select from.\n * @param {number} [lambda=0.5] - The trade-off parameter between relevance and diversity.\n * @param {number} [k=4] - The maximum number of embeddings to select.\n *\n * @returns {number[]} The indexes of the selected embeddings in the embeddingList.\n */\nexport function maximalMarginalRelevance(queryEmbedding, embeddingList, lambda = 0.5, k = 4) {\n    if (Math.min(k, embeddingList.length) <= 0) {\n        return [];\n    }\n    const queryEmbeddingExpanded = (Array.isArray(queryEmbedding[0]) ? queryEmbedding : [queryEmbedding]);\n    const similarityToQuery = cosineSimilarity(queryEmbeddingExpanded, embeddingList)[0];\n    const mostSimilarEmbeddingIndex = argMax(similarityToQuery).maxIndex;\n    const selectedEmbeddings = [embeddingList[mostSimilarEmbeddingIndex]];\n    const selectedEmbeddingsIndexes = [mostSimilarEmbeddingIndex];\n    while (selectedEmbeddingsIndexes.length < Math.min(k, embeddingList.length)) {\n        let bestScore = -Infinity;\n        let bestIndex = -1;\n        const similarityToSelected = cosineSimilarity(embeddingList, selectedEmbeddings);\n        similarityToQuery.forEach((queryScore, queryScoreIndex) => {\n            if (selectedEmbeddingsIndexes.includes(queryScoreIndex)) {\n                return;\n            }\n            const maxSimilarityToSelected = Math.max(...similarityToSelected[queryScoreIndex]);\n            const score = lambda * queryScore - (1 - lambda) * maxSimilarityToSelected;\n            if (score > bestScore) {\n                bestScore = score;\n                bestIndex = queryScoreIndex;\n            }\n        });\n        selectedEmbeddings.push(embeddingList[bestIndex]);\n        selectedEmbeddingsIndexes.push(bestIndex);\n    }\n    return selectedEmbeddingsIndexes;\n}\n/**\n * Finds the index of the maximum value in the given array.\n * @param {number[]} array - The input array.\n *\n * @returns {number} The index of the maximum value in the array. If the array is empty, returns -1.\n */\nfunction argMax(array) {\n    if (array.length === 0) {\n        return {\n            maxIndex: -1,\n            maxValue: NaN,\n        };\n    }\n    let maxValue = array[0];\n    let maxIndex = 0;\n    for (let i = 1; i < array.length; i += 1) {\n        if (array[i] > maxValue) {\n            maxIndex = i;\n            maxValue = array[i];\n        }\n    }\n    return { maxIndex, maxValue };\n}\nfunction matrixMaxVal(arrays) {\n    return arrays.reduce((acc, array) => Math.max(acc, argMax(array).maxValue), 0);\n}\n", "/**\n * Returns the average of cosine distances between vectors a and b\n * @param a - first vector\n * @param b - second vector\n *\n */\nexport function cosine(a, b) {\n    let p = 0;\n    let p2 = 0;\n    let q2 = 0;\n    for (let i = 0; i < a.length; i++) {\n        p += a[i] * b[i];\n        p2 += a[i] * a[i];\n        q2 += b[i] * b[i];\n    }\n    return p / (Math.sqrt(p2) * Math.sqrt(q2));\n}\n", "/**\n *Returns the Inner Product similarity between vectors a and b\n * @link [Inner Product Similarity algorithm](https://www.naun.org/main/NAUN/ijmmas/mmmas-49.pdf)\n * @param a - first vector\n * @param b - second vector\n *\n */\nexport function innerProduct(a, b) {\n    let ans = 0;\n    for (let i = 0; i < a.length; i++) {\n        ans += a[i] * b[i];\n    }\n    return ans;\n}\n", "export function squaredEuclidean(p, q) {\n    let d = 0;\n    for (let i = 0; i < p.length; i++) {\n        d += (p[i] - q[i]) * (p[i] - q[i]);\n    }\n    return d;\n}\nexport function euclidean(p, q) {\n    return Math.sqrt(squaredEuclidean(p, q));\n}\n", "/* eslint-disable no-promise-executor-return */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { BaseChatMessageHistory, BaseListChatMessageHistory, } from \"../../chat_history.js\";\nimport { Document } from \"../../documents/document.js\";\nimport { BaseChatModel, } from \"../../language_models/chat_models.js\";\nimport { LLM } from \"../../language_models/llms.js\";\nimport { AIMessage, AIMessageChunk, HumanMessage, } from \"../../messages/index.js\";\nimport { BaseOutputParser } from \"../../output_parsers/base.js\";\nimport { ChatGenerationChunk, } from \"../../outputs.js\";\nimport { BaseRetriever } from \"../../retrievers/index.js\";\nimport { Runnable, RunnableLambda } from \"../../runnables/base.js\";\nimport { StructuredTool } from \"../../tools/index.js\";\nimport { BaseTracer } from \"../../tracers/base.js\";\nimport { Embeddings, } from \"../../embeddings.js\";\nimport { toJsonSchema } from \"../json_schema.js\";\nimport { VectorStore } from \"../../vectorstores.js\";\nimport { cosine } from \"../ml-distance/similarities.js\";\n/**\n * Parser for comma-separated values. It splits the input text by commas\n * and trims the resulting values.\n */\nexport class FakeSplitIntoListParser extends BaseOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"tests\", \"fake\"]\n        });\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n    async parse(text) {\n        return text.split(\",\").map((value) => value.trim());\n    }\n}\nexport class FakeRunnable extends Runnable {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"tests\", \"fake\"]\n        });\n        Object.defineProperty(this, \"returnOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.returnOptions = fields.returnOptions;\n    }\n    async invoke(input, options) {\n        if (this.returnOptions) {\n            return options ?? {};\n        }\n        return { input };\n    }\n}\nexport class FakeLLM extends LLM {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"response\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"thrownErrorString\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.response = fields.response;\n        this.thrownErrorString = fields.thrownErrorString;\n    }\n    _llmType() {\n        return \"fake\";\n    }\n    async _call(prompt, _options, runManager) {\n        if (this.thrownErrorString) {\n            throw new Error(this.thrownErrorString);\n        }\n        const response = this.response ?? prompt;\n        await runManager?.handleLLMNewToken(response);\n        return response;\n    }\n}\nexport class FakeStreamingLLM extends LLM {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"sleep\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 50\n        });\n        Object.defineProperty(this, \"responses\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"thrownErrorString\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.sleep = fields.sleep ?? this.sleep;\n        this.responses = fields.responses;\n        this.thrownErrorString = fields.thrownErrorString;\n    }\n    _llmType() {\n        return \"fake\";\n    }\n    async _call(prompt) {\n        if (this.thrownErrorString) {\n            throw new Error(this.thrownErrorString);\n        }\n        const response = this.responses?.[0];\n        this.responses = this.responses?.slice(1);\n        return response ?? prompt;\n    }\n    async *_streamResponseChunks(input, _options, runManager) {\n        if (this.thrownErrorString) {\n            throw new Error(this.thrownErrorString);\n        }\n        const response = this.responses?.[0];\n        this.responses = this.responses?.slice(1);\n        for (const c of response ?? input) {\n            await new Promise((resolve) => setTimeout(resolve, this.sleep));\n            yield { text: c, generationInfo: {} };\n            await runManager?.handleLLMNewToken(c);\n        }\n    }\n}\nexport class FakeChatModel extends BaseChatModel {\n    _combineLLMOutput() {\n        return [];\n    }\n    _llmType() {\n        return \"fake\";\n    }\n    async _generate(messages, options, runManager) {\n        if (options?.stop?.length) {\n            return {\n                generations: [\n                    {\n                        message: new AIMessage(options.stop[0]),\n                        text: options.stop[0],\n                    },\n                ],\n            };\n        }\n        const text = messages\n            .map((m) => {\n            if (typeof m.content === \"string\") {\n                return m.content;\n            }\n            return JSON.stringify(m.content, null, 2);\n        })\n            .join(\"\\n\");\n        await runManager?.handleLLMNewToken(text);\n        return {\n            generations: [\n                {\n                    message: new AIMessage(text),\n                    text,\n                },\n            ],\n            llmOutput: {},\n        };\n    }\n}\nexport class FakeStreamingChatModel extends BaseChatModel {\n    constructor({ sleep = 50, responses = [], chunks = [], toolStyle = \"openai\", thrownErrorString, ...rest }) {\n        super(rest);\n        Object.defineProperty(this, \"sleep\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 50\n        });\n        Object.defineProperty(this, \"responses\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"chunks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"toolStyle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"openai\"\n        });\n        Object.defineProperty(this, \"thrownErrorString\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tools\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.sleep = sleep;\n        this.responses = responses;\n        this.chunks = chunks;\n        this.toolStyle = toolStyle;\n        this.thrownErrorString = thrownErrorString;\n    }\n    _llmType() {\n        return \"fake\";\n    }\n    bindTools(tools) {\n        const merged = [...this.tools, ...tools];\n        const toolDicts = merged.map((t) => {\n            switch (this.toolStyle) {\n                case \"openai\":\n                    return {\n                        type: \"function\",\n                        function: {\n                            name: t.name,\n                            description: t.description,\n                            parameters: toJsonSchema(t.schema),\n                        },\n                    };\n                case \"anthropic\":\n                    return {\n                        name: t.name,\n                        description: t.description,\n                        input_schema: toJsonSchema(t.schema),\n                    };\n                case \"bedrock\":\n                    return {\n                        toolSpec: {\n                            name: t.name,\n                            description: t.description,\n                            inputSchema: toJsonSchema(t.schema),\n                        },\n                    };\n                case \"google\":\n                    return {\n                        name: t.name,\n                        description: t.description,\n                        parameters: toJsonSchema(t.schema),\n                    };\n                default:\n                    throw new Error(`Unsupported tool style: ${this.toolStyle}`);\n            }\n        });\n        const wrapped = this.toolStyle === \"google\"\n            ? [{ functionDeclarations: toolDicts }]\n            : toolDicts;\n        /* creating a *new* instance – mirrors LangChain .bind semantics for type-safety and avoiding noise */\n        const next = new FakeStreamingChatModel({\n            sleep: this.sleep,\n            responses: this.responses,\n            chunks: this.chunks,\n            toolStyle: this.toolStyle,\n            thrownErrorString: this.thrownErrorString,\n        });\n        next.tools = merged;\n        return next.withConfig({ tools: wrapped });\n    }\n    async _generate(messages, _options, _runManager) {\n        if (this.thrownErrorString) {\n            throw new Error(this.thrownErrorString);\n        }\n        const content = this.responses?.[0]?.content ?? messages[0].content ?? \"\";\n        const generation = {\n            generations: [\n                {\n                    text: \"\",\n                    message: new AIMessage({\n                        content,\n                        tool_calls: this.chunks?.[0]?.tool_calls,\n                    }),\n                },\n            ],\n        };\n        return generation;\n    }\n    async *_streamResponseChunks(_messages, _options, runManager) {\n        if (this.thrownErrorString) {\n            throw new Error(this.thrownErrorString);\n        }\n        if (this.chunks?.length) {\n            for (const msgChunk of this.chunks) {\n                const cg = new ChatGenerationChunk({\n                    message: new AIMessageChunk({\n                        content: msgChunk.content,\n                        tool_calls: msgChunk.tool_calls,\n                        additional_kwargs: msgChunk.additional_kwargs ?? {},\n                    }),\n                    text: msgChunk.content?.toString() ?? \"\",\n                });\n                yield cg;\n                await runManager?.handleLLMNewToken(msgChunk.content, undefined, undefined, undefined, undefined, { chunk: cg });\n            }\n            return;\n        }\n        const fallback = this.responses?.[0] ??\n            new AIMessage(typeof _messages[0].content === \"string\" ? _messages[0].content : \"\");\n        const text = typeof fallback.content === \"string\" ? fallback.content : \"\";\n        for (const ch of text) {\n            await new Promise((r) => setTimeout(r, this.sleep));\n            const cg = new ChatGenerationChunk({\n                message: new AIMessageChunk({ content: ch }),\n                text: ch,\n            });\n            yield cg;\n            await runManager?.handleLLMNewToken(ch, undefined, undefined, undefined, undefined, { chunk: cg });\n        }\n    }\n}\nexport class FakeRetriever extends BaseRetriever {\n    constructor(fields) {\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"test\", \"fake\"]\n        });\n        Object.defineProperty(this, \"output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                new Document({ pageContent: \"foo\" }),\n                new Document({ pageContent: \"bar\" }),\n            ]\n        });\n        this.output = fields?.output ?? this.output;\n    }\n    async _getRelevantDocuments(_query\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n        return this.output;\n    }\n}\n/**\n * A fake Chat Model that returns a predefined list of responses. It can be used\n * for testing purposes.\n * @example\n * ```typescript\n * const chat = new FakeListChatModel({\n *   responses: [\"I'll callback later.\", \"You 'console' them!\"]\n * });\n *\n * const firstMessage = new HumanMessage(\"You want to hear a JavaScript joke?\");\n * const secondMessage = new HumanMessage(\"How do you cheer up a JavaScript developer?\");\n *\n * // Call the chat model with a message and log the response\n * const firstResponse = await chat.call([firstMessage]);\n * console.log({ firstResponse });\n *\n * const secondResponse = await chat.call([secondMessage]);\n * console.log({ secondResponse });\n * ```\n */\nexport class FakeListChatModel extends BaseChatModel {\n    static lc_name() {\n        return \"FakeListChatModel\";\n    }\n    constructor(params) {\n        super(params);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"responses\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"i\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"sleep\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"emitCustomEvent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        const { responses, sleep, emitCustomEvent } = params;\n        this.responses = responses;\n        this.sleep = sleep;\n        this.emitCustomEvent = emitCustomEvent ?? this.emitCustomEvent;\n    }\n    _combineLLMOutput() {\n        return [];\n    }\n    _llmType() {\n        return \"fake-list\";\n    }\n    async _generate(_messages, options, runManager) {\n        await this._sleepIfRequested();\n        if (options?.thrownErrorString) {\n            throw new Error(options.thrownErrorString);\n        }\n        if (this.emitCustomEvent) {\n            await runManager?.handleCustomEvent(\"some_test_event\", {\n                someval: true,\n            });\n        }\n        if (options?.stop?.length) {\n            return {\n                generations: [this._formatGeneration(options.stop[0])],\n            };\n        }\n        else {\n            const response = this._currentResponse();\n            this._incrementResponse();\n            return {\n                generations: [this._formatGeneration(response)],\n                llmOutput: {},\n            };\n        }\n    }\n    _formatGeneration(text) {\n        return {\n            message: new AIMessage(text),\n            text,\n        };\n    }\n    async *_streamResponseChunks(_messages, options, runManager) {\n        const response = this._currentResponse();\n        this._incrementResponse();\n        if (this.emitCustomEvent) {\n            await runManager?.handleCustomEvent(\"some_test_event\", {\n                someval: true,\n            });\n        }\n        for await (const text of response) {\n            await this._sleepIfRequested();\n            if (options?.thrownErrorString) {\n                throw new Error(options.thrownErrorString);\n            }\n            const chunk = this._createResponseChunk(text);\n            yield chunk;\n            void runManager?.handleLLMNewToken(text);\n        }\n    }\n    async _sleepIfRequested() {\n        if (this.sleep !== undefined) {\n            await this._sleep();\n        }\n    }\n    async _sleep() {\n        return new Promise((resolve) => {\n            setTimeout(() => resolve(), this.sleep);\n        });\n    }\n    _createResponseChunk(text) {\n        return new ChatGenerationChunk({\n            message: new AIMessageChunk({ content: text }),\n            text,\n        });\n    }\n    _currentResponse() {\n        return this.responses[this.i];\n    }\n    _incrementResponse() {\n        if (this.i < this.responses.length - 1) {\n            this.i += 1;\n        }\n        else {\n            this.i = 0;\n        }\n    }\n    withStructuredOutput(_params, _config) {\n        return RunnableLambda.from(async (input) => {\n            const message = await this.invoke(input);\n            if (message.tool_calls?.[0]?.args) {\n                return message.tool_calls[0].args;\n            }\n            if (typeof message.content === \"string\") {\n                return JSON.parse(message.content);\n            }\n            throw new Error(\"No structured output found\");\n        });\n    }\n}\nexport class FakeChatMessageHistory extends BaseChatMessageHistory {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"message\", \"fake\"]\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    async getMessages() {\n        return this.messages;\n    }\n    async addMessage(message) {\n        this.messages.push(message);\n    }\n    async addUserMessage(message) {\n        this.messages.push(new HumanMessage(message));\n    }\n    async addAIChatMessage(message) {\n        this.messages.push(new AIMessage(message));\n    }\n    async clear() {\n        this.messages = [];\n    }\n}\nexport class FakeListChatMessageHistory extends BaseListChatMessageHistory {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain_core\", \"message\", \"fake\"]\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    async addMessage(message) {\n        this.messages.push(message);\n    }\n    async getMessages() {\n        return this.messages;\n    }\n}\nexport class FakeTracer extends BaseTracer {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"fake_tracer\"\n        });\n        Object.defineProperty(this, \"runs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    persistRun(run) {\n        this.runs.push(run);\n        return Promise.resolve();\n    }\n}\nexport class FakeTool extends StructuredTool {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.schema = fields.schema;\n    }\n    async _call(arg, _runManager) {\n        return JSON.stringify(arg);\n    }\n}\n/**\n * A class that provides fake embeddings by overriding the embedDocuments\n * and embedQuery methods to return fixed values.\n */\nexport class FakeEmbeddings extends Embeddings {\n    constructor(params) {\n        super(params ?? {});\n    }\n    /**\n     * Generates fixed embeddings for a list of documents.\n     * @param documents List of documents to generate embeddings for.\n     * @returns A promise that resolves with a list of fixed embeddings for each document.\n     */\n    embedDocuments(documents) {\n        return Promise.resolve(documents.map(() => [0.1, 0.2, 0.3, 0.4]));\n    }\n    /**\n     * Generates a fixed embedding for a query.\n     * @param _ The query to generate an embedding for.\n     * @returns A promise that resolves with a fixed embedding for the query.\n     */\n    embedQuery(_) {\n        return Promise.resolve([0.1, 0.2, 0.3, 0.4]);\n    }\n}\n/**\n * A class that provides synthetic embeddings by overriding the\n * embedDocuments and embedQuery methods to generate embeddings based on\n * the input documents. The embeddings are generated by converting each\n * document into chunks, calculating a numerical value for each chunk, and\n * returning an array of these values as the embedding.\n */\nexport class SyntheticEmbeddings extends Embeddings {\n    constructor(params) {\n        super(params ?? {});\n        Object.defineProperty(this, \"vectorSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.vectorSize = params?.vectorSize ?? 4;\n    }\n    /**\n     * Generates synthetic embeddings for a list of documents.\n     * @param documents List of documents to generate embeddings for.\n     * @returns A promise that resolves with a list of synthetic embeddings for each document.\n     */\n    async embedDocuments(documents) {\n        return Promise.all(documents.map((doc) => this.embedQuery(doc)));\n    }\n    /**\n     * Generates a synthetic embedding for a document. The document is\n     * converted into chunks, a numerical value is calculated for each chunk,\n     * and an array of these values is returned as the embedding.\n     * @param document The document to generate an embedding for.\n     * @returns A promise that resolves with a synthetic embedding for the document.\n     */\n    async embedQuery(document) {\n        let doc = document;\n        // Only use the letters (and space) from the document, and make them lower case\n        doc = doc.toLowerCase().replaceAll(/[^a-z ]/g, \"\");\n        // Pad the document to make sure it has a divisible number of chunks\n        const padMod = doc.length % this.vectorSize;\n        const padGapSize = padMod === 0 ? 0 : this.vectorSize - padMod;\n        const padSize = doc.length + padGapSize;\n        doc = doc.padEnd(padSize, \" \");\n        // Break it into chunks\n        const chunkSize = doc.length / this.vectorSize;\n        const docChunk = [];\n        for (let co = 0; co < doc.length; co += chunkSize) {\n            docChunk.push(doc.slice(co, co + chunkSize));\n        }\n        // Turn each chunk into a number\n        const ret = docChunk.map((s) => {\n            let sum = 0;\n            // Get a total value by adding the value of each character in the string\n            for (let co = 0; co < s.length; co += 1) {\n                sum += s === \" \" ? 0 : s.charCodeAt(co);\n            }\n            // Reduce this to a number between 0 and 25 inclusive\n            // Then get the fractional number by dividing it by 26\n            const ret = (sum % 26) / 26;\n            return ret;\n        });\n        return ret;\n    }\n}\nexport class SingleRunExtractor extends BaseTracer {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"runPromiseResolver\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"runPromise\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the callback handler. */\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"single_run_extractor\"\n        });\n        this.runPromise = new Promise((extract) => {\n            this.runPromiseResolver = extract;\n        });\n    }\n    async persistRun(run) {\n        this.runPromiseResolver(run);\n    }\n    async extract() {\n        return this.runPromise;\n    }\n}\n/**\n * Class that extends `VectorStore` to store vectors in memory. Provides\n * methods for adding documents, performing similarity searches, and\n * creating instances from texts, documents, or an existing index.\n */\nexport class FakeVectorStore extends VectorStore {\n    _vectorstoreType() {\n        return \"memory\";\n    }\n    constructor(embeddings, { similarity, ...rest } = {}) {\n        super(embeddings, rest);\n        Object.defineProperty(this, \"memoryVectors\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"similarity\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.similarity = similarity ?? cosine;\n    }\n    /**\n     * Method to add documents to the memory vector store. It extracts the\n     * text from each document, generates embeddings for them, and adds the\n     * resulting vectors to the store.\n     * @param documents Array of `Document` instances to be added to the store.\n     * @returns Promise that resolves when all documents have been added.\n     */\n    async addDocuments(documents) {\n        const texts = documents.map(({ pageContent }) => pageContent);\n        return this.addVectors(await this.embeddings.embedDocuments(texts), documents);\n    }\n    /**\n     * Method to add vectors to the memory vector store. It creates\n     * `MemoryVector` instances for each vector and document pair and adds\n     * them to the store.\n     * @param vectors Array of vectors to be added to the store.\n     * @param documents Array of `Document` instances corresponding to the vectors.\n     * @returns Promise that resolves when all vectors have been added.\n     */\n    async addVectors(vectors, documents) {\n        const memoryVectors = vectors.map((embedding, idx) => ({\n            content: documents[idx].pageContent,\n            embedding,\n            metadata: documents[idx].metadata,\n        }));\n        this.memoryVectors = this.memoryVectors.concat(memoryVectors);\n    }\n    /**\n     * Method to perform a similarity search in the memory vector store. It\n     * calculates the similarity between the query vector and each vector in\n     * the store, sorts the results by similarity, and returns the top `k`\n     * results along with their scores.\n     * @param query Query vector to compare against the vectors in the store.\n     * @param k Number of top results to return.\n     * @param filter Optional filter function to apply to the vectors before performing the search.\n     * @returns Promise that resolves with an array of tuples, each containing a `Document` and its similarity score.\n     */\n    async similaritySearchVectorWithScore(query, k, filter) {\n        const filterFunction = (memoryVector) => {\n            if (!filter) {\n                return true;\n            }\n            const doc = new Document({\n                metadata: memoryVector.metadata,\n                pageContent: memoryVector.content,\n            });\n            return filter(doc);\n        };\n        const filteredMemoryVectors = this.memoryVectors.filter(filterFunction);\n        const searches = filteredMemoryVectors\n            .map((vector, index) => ({\n            similarity: this.similarity(query, vector.embedding),\n            index,\n        }))\n            .sort((a, b) => (a.similarity > b.similarity ? -1 : 0))\n            .slice(0, k);\n        const result = searches.map((search) => [\n            new Document({\n                metadata: filteredMemoryVectors[search.index].metadata,\n                pageContent: filteredMemoryVectors[search.index].content,\n            }),\n            search.similarity,\n        ]);\n        return result;\n    }\n    /**\n     * Static method to create a `FakeVectorStore` instance from an array of\n     * texts. It creates a `Document` for each text and metadata pair, and\n     * adds them to the store.\n     * @param texts Array of texts to be added to the store.\n     * @param metadatas Array or single object of metadata corresponding to the texts.\n     * @param embeddings `Embeddings` instance used to generate embeddings for the texts.\n     * @param dbConfig Optional `FakeVectorStoreArgs` to configure the `FakeVectorStore` instance.\n     * @returns Promise that resolves with a new `FakeVectorStore` instance.\n     */\n    static async fromTexts(texts, metadatas, embeddings, dbConfig) {\n        const docs = [];\n        for (let i = 0; i < texts.length; i += 1) {\n            const metadata = Array.isArray(metadatas) ? metadatas[i] : metadatas;\n            const newDoc = new Document({\n                pageContent: texts[i],\n                metadata,\n            });\n            docs.push(newDoc);\n        }\n        return FakeVectorStore.fromDocuments(docs, embeddings, dbConfig);\n    }\n    /**\n     * Static method to create a `FakeVectorStore` instance from an array of\n     * `Document` instances. It adds the documents to the store.\n     * @param docs Array of `Document` instances to be added to the store.\n     * @param embeddings `Embeddings` instance used to generate embeddings for the documents.\n     * @param dbConfig Optional `FakeVectorStoreArgs` to configure the `FakeVectorStore` instance.\n     * @returns Promise that resolves with a new `FakeVectorStore` instance.\n     */\n    static async fromDocuments(docs, embeddings, dbConfig) {\n        const instance = new this(embeddings, dbConfig);\n        await instance.addDocuments(docs);\n        return instance;\n    }\n    /**\n     * Static method to create a `FakeVectorStore` instance from an existing\n     * index. It creates a new `FakeVectorStore` instance without adding any\n     * documents or vectors.\n     * @param embeddings `Embeddings` instance used to generate embeddings for the documents.\n     * @param dbConfig Optional `FakeVectorStoreArgs` to configure the `FakeVectorStore` instance.\n     * @returns Promise that resolves with a new `FakeVectorStore` instance.\n     */\n    static async fromExistingIndex(embeddings, dbConfig) {\n        const instance = new this(embeddings, dbConfig);\n        return instance;\n    }\n}\n", "import { BaseRetriever, } from \"./retrievers/index.js\";\nimport { Serializable } from \"./load/serializable.js\";\n/**\n * Class for retrieving documents from a `VectorStore` based on vector similarity\n * or maximal marginal relevance (MMR).\n *\n * `VectorStoreRetriever` extends `BaseRetriever`, implementing methods for\n * adding documents to the underlying vector store and performing document\n * retrieval with optional configurations.\n *\n * @class VectorStoreRetriever\n * @extends BaseRetriever\n * @implements VectorStoreRetrieverInterface\n * @template V - Type of vector store implementing `VectorStoreInterface`.\n */\nexport class VectorStoreRetriever extends BaseRetriever {\n    static lc_name() {\n        return \"VectorStoreRetriever\";\n    }\n    get lc_namespace() {\n        return [\"langchain_core\", \"vectorstores\"];\n    }\n    /**\n     * Returns the type of vector store, as defined by the `vectorStore` instance.\n     *\n     * @returns {string} The vector store type.\n     */\n    _vectorstoreType() {\n        return this.vectorStore._vectorstoreType();\n    }\n    /**\n     * Initializes a new instance of `VectorStoreRetriever` with the specified configuration.\n     *\n     * This constructor configures the retriever to interact with a given `VectorStore`\n     * and supports different retrieval strategies, including similarity search and maximal\n     * marginal relevance (MMR) search. Various options allow customization of the number\n     * of documents retrieved per query, filtering based on conditions, and fine-tuning\n     * MMR-specific parameters.\n     *\n     * @param fields - Configuration options for setting up the retriever:\n     *\n     *   - `vectorStore` (required): The `VectorStore` instance implementing `VectorStoreInterface`\n     *     that will be used to store and retrieve document embeddings. This is the core component\n     *     of the retriever, enabling vector-based similarity and MMR searches.\n     *\n     *   - `k` (optional): Specifies the number of documents to retrieve per search query. If not\n     *     provided, defaults to 4. This count determines the number of most relevant documents returned\n     *     for each search operation, balancing performance with comprehensiveness.\n     *\n     *   - `searchType` (optional): Defines the search approach used by the retriever, allowing for\n     *     flexibility between two methods:\n     *       - `\"similarity\"` (default): A similarity-based search, retrieving documents with high vector\n     *         similarity to the query. This type prioritizes relevance and is often used when diversity\n     *         among results is less critical.\n     *       - `\"mmr\"`: Maximal Marginal Relevance search, which combines relevance with diversity. MMR\n     *         is useful for scenarios where varied content is essential, as it selects results that\n     *         both match the query and introduce content diversity.\n     *\n     *   - `filter` (optional): A filter of type `FilterType`, defined by the vector store, that allows\n     *     for refined and targeted search results. This filter applies specified conditions to limit\n     *     which documents are eligible for retrieval, offering control over the scope of results.\n     *\n     *   - `searchKwargs` (optional, applicable only if `searchType` is `\"mmr\"`): Additional settings\n     *     for configuring MMR-specific behavior. These parameters allow further tuning of the MMR\n     *     search process:\n     *       - `fetchK`: The initial number of documents fetched from the vector store before the MMR\n     *         algorithm is applied. Fetching a larger set enables the algorithm to select a more\n     *         diverse subset of documents.\n     *       - `lambda`: A parameter controlling the relevance-diversity balance, where 0 emphasizes\n     *         diversity and 1 prioritizes relevance. Intermediate values provide a blend of the two,\n     *         allowing customization based on the importance of content variety relative to query relevance.\n     */\n    constructor(fields) {\n        super(fields);\n        /**\n         * The instance of `VectorStore` used for storing and retrieving document embeddings.\n         * This vector store must implement the `VectorStoreInterface` to be compatible\n         * with the retriever’s operations.\n         */\n        Object.defineProperty(this, \"vectorStore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Specifies the number of documents to retrieve for each search query.\n         * Defaults to 4 if not specified, providing a basic result count for similarity or MMR searches.\n         */\n        Object.defineProperty(this, \"k\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 4\n        });\n        /**\n         * Determines the type of search operation to perform on the vector store.\n         *\n         * - `\"similarity\"` (default): Conducts a similarity search based purely on vector similarity\n         *   to the query.\n         * - `\"mmr\"`: Executes a maximal marginal relevance (MMR) search, balancing relevance and\n         *   diversity in the retrieved results.\n         */\n        Object.defineProperty(this, \"searchType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"similarity\"\n        });\n        /**\n         * Additional options specific to maximal marginal relevance (MMR) search, applicable\n         * only if `searchType` is set to `\"mmr\"`.\n         *\n         * Includes:\n         * - `fetchK`: The initial number of documents fetched before applying the MMR algorithm,\n         *   allowing for a larger selection from which to choose the most diverse results.\n         * - `lambda`: A parameter between 0 and 1 to adjust the relevance-diversity balance,\n         *   where 0 prioritizes diversity and 1 prioritizes relevance.\n         */\n        Object.defineProperty(this, \"searchKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Optional filter applied to search results, defined by the `FilterType` of the vector store.\n         * Allows for refined, targeted results by restricting the returned documents based\n         * on specified filter criteria.\n         */\n        Object.defineProperty(this, \"filter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.vectorStore = fields.vectorStore;\n        this.k = fields.k ?? this.k;\n        this.searchType = fields.searchType ?? this.searchType;\n        this.filter = fields.filter;\n        if (fields.searchType === \"mmr\") {\n            this.searchKwargs = fields.searchKwargs;\n        }\n    }\n    /**\n     * Retrieves relevant documents based on the specified query, using either\n     * similarity or maximal marginal relevance (MMR) search.\n     *\n     * If `searchType` is set to `\"mmr\"`, performs an MMR search to balance\n     * similarity and diversity among results. If `searchType` is `\"similarity\"`,\n     * retrieves results purely based on similarity to the query.\n     *\n     * @param query - The query string used to find relevant documents.\n     * @param runManager - Optional callback manager for tracking retrieval progress.\n     * @returns A promise that resolves to an array of `DocumentInterface` instances\n     *          representing the most relevant documents to the query.\n     * @throws {Error} Throws an error if MMR search is requested but not supported\n     *                 by the vector store.\n     * @protected\n     */\n    async _getRelevantDocuments(query, runManager) {\n        if (this.searchType === \"mmr\") {\n            if (typeof this.vectorStore.maxMarginalRelevanceSearch !== \"function\") {\n                throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);\n            }\n            return this.vectorStore.maxMarginalRelevanceSearch(query, {\n                k: this.k,\n                filter: this.filter,\n                ...this.searchKwargs,\n            }, runManager?.getChild(\"vectorstore\"));\n        }\n        return this.vectorStore.similaritySearch(query, this.k, this.filter, runManager?.getChild(\"vectorstore\"));\n    }\n    /**\n     * Adds an array of documents to the vector store, embedding them as part of\n     * the storage process.\n     *\n     * This method delegates document embedding and storage to the `addDocuments`\n     * method of the underlying vector store.\n     *\n     * @param documents - An array of documents to embed and add to the vector store.\n     * @param options - Optional settings to customize document addition.\n     * @returns A promise that resolves to an array of document IDs or `void`,\n     *          depending on the vector store's implementation.\n     */\n    async addDocuments(documents, options) {\n        return this.vectorStore.addDocuments(documents, options);\n    }\n}\n/**\n * Abstract class representing a vector storage system for performing\n * similarity searches on embedded documents.\n *\n * `VectorStore` provides methods for adding precomputed vectors or documents,\n * removing documents based on criteria, and performing similarity searches\n * with optional scoring. Subclasses are responsible for implementing specific\n * storage mechanisms and the exact behavior of certain abstract methods.\n *\n * @abstract\n * @extends Serializable\n * @implements VectorStoreInterface\n */\nexport class VectorStore extends Serializable {\n    /**\n     * Initializes a new vector store with embeddings and database configuration.\n     *\n     * @param embeddings - Instance of `EmbeddingsInterface` used to embed queries.\n     * @param dbConfig - Configuration settings for the database or storage system.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(embeddings, dbConfig) {\n        super(dbConfig);\n        /**\n         * Namespace within LangChain to uniquely identify this vector store's\n         * location, based on the vector store type.\n         *\n         * @internal\n         */\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"vectorstores\", this._vectorstoreType()]\n        });\n        /**\n         * Embeddings interface for generating vector embeddings from text queries,\n         * enabling vector-based similarity searches.\n         */\n        Object.defineProperty(this, \"embeddings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.embeddings = embeddings;\n    }\n    /**\n     * Deletes documents from the vector store based on the specified parameters.\n     *\n     * @param _params - Flexible key-value pairs defining conditions for document deletion.\n     * @returns A promise that resolves once the deletion is complete.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async delete(_params) {\n        throw new Error(\"Not implemented.\");\n    }\n    /**\n     * Searches for documents similar to a text query by embedding the query and\n     * performing a similarity search on the resulting vector.\n     *\n     * @param query - Text query for finding similar documents.\n     * @param k - Number of similar results to return. Defaults to 4.\n     * @param filter - Optional filter based on `FilterType`.\n     * @param _callbacks - Optional callbacks for monitoring search progress\n     * @returns A promise resolving to an array of `DocumentInterface` instances representing similar documents.\n     */\n    async similaritySearch(query, k = 4, filter = undefined, _callbacks = undefined // implement passing to embedQuery later\n    ) {\n        const results = await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n        return results.map((result) => result[0]);\n    }\n    /**\n     * Searches for documents similar to a text query by embedding the query,\n     * and returns results with similarity scores.\n     *\n     * @param query - Text query for finding similar documents.\n     * @param k - Number of similar results to return. Defaults to 4.\n     * @param filter - Optional filter based on `FilterType`.\n     * @param _callbacks - Optional callbacks for monitoring search progress\n     * @returns A promise resolving to an array of tuples, each containing a\n     *          document and its similarity score.\n     */\n    async similaritySearchWithScore(query, k = 4, filter = undefined, _callbacks = undefined // implement passing to embedQuery later\n    ) {\n        return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n    }\n    /**\n     * Creates a `VectorStore` instance from an array of text strings and optional\n     * metadata, using the specified embeddings and database configuration.\n     *\n     * Subclasses must implement this method to define how text and metadata\n     * are embedded and stored in the vector store. Throws an error if not overridden.\n     *\n     * @param _texts - Array of strings representing the text documents to be stored.\n     * @param _metadatas - Metadata for the texts, either as an array (one for each text)\n     *                     or a single object (applied to all texts).\n     * @param _embeddings - Instance of `EmbeddingsInterface` to embed the texts.\n     * @param _dbConfig - Database configuration settings.\n     * @returns A promise that resolves to a new `VectorStore` instance.\n     * @throws {Error} Throws an error if this method is not overridden by a subclass.\n     */\n    static fromTexts(_texts, _metadatas, _embeddings, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _dbConfig) {\n        throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n    }\n    /**\n     * Creates a `VectorStore` instance from an array of documents, using the specified\n     * embeddings and database configuration.\n     *\n     * Subclasses must implement this method to define how documents are embedded\n     * and stored. Throws an error if not overridden.\n     *\n     * @param _docs - Array of `DocumentInterface` instances representing the documents to be stored.\n     * @param _embeddings - Instance of `EmbeddingsInterface` to embed the documents.\n     * @param _dbConfig - Database configuration settings.\n     * @returns A promise that resolves to a new `VectorStore` instance.\n     * @throws {Error} Throws an error if this method is not overridden by a subclass.\n     */\n    static fromDocuments(_docs, _embeddings, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _dbConfig) {\n        throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n    }\n    /**\n     * Creates a `VectorStoreRetriever` instance with flexible configuration options.\n     *\n     * @param kOrFields\n     *    - If a number is provided, it sets the `k` parameter (number of items to retrieve).\n     *    - If an object is provided, it should contain various configuration options.\n     * @param filter\n     *    - Optional filter criteria to limit the items retrieved based on the specified filter type.\n     * @param callbacks\n     *    - Optional callbacks that may be triggered at specific stages of the retrieval process.\n     * @param tags\n     *    - Tags to categorize or label the `VectorStoreRetriever`. Defaults to an empty array if not provided.\n     * @param metadata\n     *    - Additional metadata as key-value pairs to add contextual information for the retrieval process.\n     * @param verbose\n     *    - If `true`, enables detailed logging for the retrieval process. Defaults to `false`.\n     *\n     * @returns\n     *    - A configured `VectorStoreRetriever` instance based on the provided parameters.\n     *\n     * @example\n     * Basic usage with a `k` value:\n     * ```typescript\n     * const retriever = myVectorStore.asRetriever(5);\n     * ```\n     *\n     * Usage with a configuration object:\n     * ```typescript\n     * const retriever = myVectorStore.asRetriever({\n     *   k: 10,\n     *   filter: myFilter,\n     *   tags: ['example', 'test'],\n     *   verbose: true,\n     *   searchType: 'mmr',\n     *   searchKwargs: { alpha: 0.5 },\n     * });\n     * ```\n     */\n    asRetriever(kOrFields, filter, callbacks, tags, metadata, verbose) {\n        if (typeof kOrFields === \"number\") {\n            return new VectorStoreRetriever({\n                vectorStore: this,\n                k: kOrFields,\n                filter,\n                tags: [...(tags ?? []), this._vectorstoreType()],\n                metadata,\n                verbose,\n                callbacks,\n            });\n        }\n        else {\n            const params = {\n                vectorStore: this,\n                k: kOrFields?.k,\n                filter: kOrFields?.filter,\n                tags: [...(kOrFields?.tags ?? []), this._vectorstoreType()],\n                metadata: kOrFields?.metadata,\n                verbose: kOrFields?.verbose,\n                callbacks: kOrFields?.callbacks,\n                searchType: kOrFields?.searchType,\n            };\n            if (kOrFields?.searchType === \"mmr\") {\n                return new VectorStoreRetriever({\n                    ...params,\n                    searchKwargs: kOrFields.searchKwargs,\n                });\n            }\n            return new VectorStoreRetriever({ ...params });\n        }\n    }\n}\n/**\n * Abstract class extending `VectorStore` that defines a contract for saving\n * and loading vector store instances.\n *\n * The `SaveableVectorStore` class allows vector store implementations to\n * persist their data and retrieve it when needed.The format for saving and\n * loading data is left to the implementing subclass.\n *\n * Subclasses must implement the `save` method to handle their custom\n * serialization logic, while the `load` method enables reconstruction of a\n * vector store from saved data, requiring compatible embeddings through the\n * `EmbeddingsInterface`.\n *\n * @abstract\n * @extends VectorStore\n */\nexport class SaveableVectorStore extends VectorStore {\n    /**\n     * Loads a vector store instance from the specified directory, using the\n     * provided embeddings to ensure compatibility.\n     *\n     * This static method reconstructs a `SaveableVectorStore` from previously\n     * saved data. Implementations should interpret the saved data format to\n     * recreate the vector store instance.\n     *\n     * @param _directory - The directory path from which the vector store\n     * data will be loaded.\n     * @param _embeddings - An instance of `EmbeddingsInterface` to align\n     * the embeddings with the loaded vector data.\n     * @returns A promise that resolves to a `SaveableVectorStore` instance\n     * constructed from the saved data.\n     */\n    static load(_directory, _embeddings) {\n        throw new Error(\"Not implemented\");\n    }\n}\n", "export * from \"./zod.js\";\n", null, "export {};\n//# sourceMappingURL=types.js.map", "export {};\n//# sourceMappingURL=base.js.map", null, null, null, null, null, null, null, null, null, null, null, null, "export * from './dist/runnables/index.js'", "export * from '../dist/runnables/graph.js'", "var util;\n(function (util) {\n    util.assertEqual = (val) => val;\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array\n            .map((val) => (typeof val === \"string\" ? `'${val}'` : val))\n            .join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nconst ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then &&\n                typeof data.then === \"function\" &&\n                data.catch &&\n                typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n\nconst ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nclass ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `smaller than or equal to`\n                        : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\n\nlet overrideErrorMap = errorMap;\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\n\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nconst EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === errorMap ? undefined : errorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" &&\n                (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nconst INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nconst OK = (value) => ({ status: \"valid\", value });\nconst isAborted = (x) => x.status === \"aborted\";\nconst isDirty = (x) => x.status === \"dirty\";\nconst isValid = (x) => x.status === \"valid\";\nconst isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil || (errorUtil = {}));\n\nvar _ZodEnum_cache, _ZodNativeEnum_cache;\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (this._key instanceof Array) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        var _a, _b;\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message !== null && message !== void 0 ? message : ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: (_a = message !== null && message !== void 0 ? message : required_error) !== null && _a !== void 0 ? _a : ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: (_b = message !== null && message !== void 0 ? message : invalid_type_error) !== null && _b !== void 0 ? _b : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        var _a;\n        const ctx = {\n            common: {\n                issues: [],\n                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        var _a, _b;\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if ((_b = (_a = err === null || err === void 0 ? void 0 : err.message) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === null || _b === void 0 ? void 0 : _b.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n                async: true,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult)\n            ? maybeAsyncResult\n            : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\"\n                    ? refinementData(val, ctx)\n                    : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nfunction datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (!decoded.typ || !decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nclass ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch (_a) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        var _a, _b;\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,\n            local: (_b = options === null || options === void 0 ? void 0 : options.local) !== null && _b !== void 0 ? _b : false,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options === null || options === void 0 ? void 0 : options.position,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    var _a;\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / Math.pow(10, decCount);\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" ||\n            (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null, min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" ||\n                ch.kind === \"int\" ||\n                ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch (_a) {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    var _a;\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        return (this._cached = { shape, keys });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever &&\n            this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") ;\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        var _a, _b, _c, _d;\n                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        util.objectKeys(mask).forEach((key) => {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util\n            .objectKeys(a)\n            .filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date &&\n        bType === ZodParsedType.date &&\n        +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nclass ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args\n                    .parseAsync(args, params)\n                    .catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args\n                ? args\n                : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    constructor() {\n        super(...arguments);\n        _ZodEnum_cache.set(this, void 0);\n    }\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!__classPrivateFieldGet(this, _ZodEnum_cache, \"f\")) {\n            __classPrivateFieldSet(this, _ZodEnum_cache, new Set(this._def.values), \"f\");\n        }\n        if (!__classPrivateFieldGet(this, _ZodEnum_cache, \"f\").has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\n_ZodEnum_cache = new WeakMap();\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    constructor() {\n        super(...arguments);\n        _ZodNativeEnum_cache.set(this, void 0);\n    }\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string &&\n            ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, \"f\")) {\n            __classPrivateFieldSet(this, _ZodNativeEnum_cache, new Set(util.getValidEnumValues(this._def.values)), \"f\");\n        }\n        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, \"f\").has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\n_ZodNativeEnum_cache = new WeakMap();\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise &&\n            ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise\n            ? ctx.data\n            : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return base;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((base) => {\n                    if (!isValid(base))\n                        return base;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\"\n            ? params.default\n            : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nclass ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nconst BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nclass ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nclass ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result)\n            ? result.then((data) => freeze(data))\n            : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\"\n        ? params(data)\n        : typeof params === \"string\"\n            ? { message: params }\n            : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nfunction custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            var _a, _b;\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    var _a, _b;\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = (_b = (_a = params.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = (_b = (_a = params.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nconst late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nconst coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nconst NEVER = INVALID;\n\nvar z = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    defaultErrorMap: errorMap,\n    setErrorMap: setErrorMap,\n    getErrorMap: getErrorMap,\n    makeIssue: makeIssue,\n    EMPTY_PATH: EMPTY_PATH,\n    addIssueToContext: addIssueToContext,\n    ParseStatus: ParseStatus,\n    INVALID: INVALID,\n    DIRTY: DIRTY,\n    OK: OK,\n    isAborted: isAborted,\n    isDirty: isDirty,\n    isValid: isValid,\n    isAsync: isAsync,\n    get util () { return util; },\n    get objectUtil () { return objectUtil; },\n    ZodParsedType: ZodParsedType,\n    getParsedType: getParsedType,\n    ZodType: ZodType,\n    datetimeRegex: datetimeRegex,\n    ZodString: ZodString,\n    ZodNumber: ZodNumber,\n    ZodBigInt: ZodBigInt,\n    ZodBoolean: ZodBoolean,\n    ZodDate: ZodDate,\n    ZodSymbol: ZodSymbol,\n    ZodUndefined: ZodUndefined,\n    ZodNull: ZodNull,\n    ZodAny: ZodAny,\n    ZodUnknown: ZodUnknown,\n    ZodNever: ZodNever,\n    ZodVoid: ZodVoid,\n    ZodArray: ZodArray,\n    ZodObject: ZodObject,\n    ZodUnion: ZodUnion,\n    ZodDiscriminatedUnion: ZodDiscriminatedUnion,\n    ZodIntersection: ZodIntersection,\n    ZodTuple: ZodTuple,\n    ZodRecord: ZodRecord,\n    ZodMap: ZodMap,\n    ZodSet: ZodSet,\n    ZodFunction: ZodFunction,\n    ZodLazy: ZodLazy,\n    ZodLiteral: ZodLiteral,\n    ZodEnum: ZodEnum,\n    ZodNativeEnum: ZodNativeEnum,\n    ZodPromise: ZodPromise,\n    ZodEffects: ZodEffects,\n    ZodTransformer: ZodEffects,\n    ZodOptional: ZodOptional,\n    ZodNullable: ZodNullable,\n    ZodDefault: ZodDefault,\n    ZodCatch: ZodCatch,\n    ZodNaN: ZodNaN,\n    BRAND: BRAND,\n    ZodBranded: ZodBranded,\n    ZodPipeline: ZodPipeline,\n    ZodReadonly: ZodReadonly,\n    custom: custom,\n    Schema: ZodType,\n    ZodSchema: ZodType,\n    late: late,\n    get ZodFirstPartyTypeKind () { return ZodFirstPartyTypeKind; },\n    coerce: coerce,\n    any: anyType,\n    array: arrayType,\n    bigint: bigIntType,\n    boolean: booleanType,\n    date: dateType,\n    discriminatedUnion: discriminatedUnionType,\n    effect: effectsType,\n    'enum': enumType,\n    'function': functionType,\n    'instanceof': instanceOfType,\n    intersection: intersectionType,\n    lazy: lazyType,\n    literal: literalType,\n    map: mapType,\n    nan: nanType,\n    nativeEnum: nativeEnumType,\n    never: neverType,\n    'null': nullType,\n    nullable: nullableType,\n    number: numberType,\n    object: objectType,\n    oboolean: oboolean,\n    onumber: onumber,\n    optional: optionalType,\n    ostring: ostring,\n    pipeline: pipelineType,\n    preprocess: preprocessType,\n    promise: promiseType,\n    record: recordType,\n    set: setType,\n    strictObject: strictObjectType,\n    string: stringType,\n    symbol: symbolType,\n    transformer: effectsType,\n    tuple: tupleType,\n    'undefined': undefinedType,\n    union: unionType,\n    unknown: unknownType,\n    'void': voidType,\n    NEVER: NEVER,\n    ZodIssueCode: ZodIssueCode,\n    quotelessJson: quotelessJson,\n    ZodError: ZodError\n});\n\nexport { BRAND, DIRTY, EMPTY_PATH, INVALID, NEVER, OK, ParseStatus, ZodType as Schema, ZodAny, ZodArray, ZodBigInt, ZodBoolean, ZodBranded, ZodCatch, ZodDate, ZodDefault, ZodDiscriminatedUnion, ZodEffects, ZodEnum, ZodError, ZodFirstPartyTypeKind, ZodFunction, ZodIntersection, ZodIssueCode, ZodLazy, ZodLiteral, ZodMap, ZodNaN, ZodNativeEnum, ZodNever, ZodNull, ZodNullable, ZodNumber, ZodObject, ZodOptional, ZodParsedType, ZodPipeline, ZodPromise, ZodReadonly, ZodRecord, ZodType as ZodSchema, ZodSet, ZodString, ZodSymbol, ZodEffects as ZodTransformer, ZodTuple, ZodType, ZodUndefined, ZodUnion, ZodUnknown, ZodVoid, addIssueToContext, anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, coerce, custom, dateType as date, datetimeRegex, z as default, errorMap as defaultErrorMap, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, getErrorMap, getParsedType, instanceOfType as instanceof, intersectionType as intersection, isAborted, isAsync, isDirty, isValid, late, lazyType as lazy, literalType as literal, makeIssue, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, objectUtil, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, quotelessJson, recordType as record, setType as set, setErrorMap, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, util, voidType as void, z };\n", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "export * from '../dist/utils/stream.js'", null, "export * from '../dist/callbacks/base.js'", "export * from './dist/messages/index.js'", null, null, null, null, null, null, null, null, null, null, null, null, null, null, "/**\n * Default error messages for workflow\n */\nexport const WORKFLOW_ERROR_MESSAGES = {\n  EXECUTION_FAILED: 'Workflow execution failed',\n  ANSWER_GENERATION_FAILED: 'Failed to generate answer',\n  LANGGRAPH_FAILED: 'LangGraph execution failed, falling back to error state',\n} as const\n\n/**\n * Retry configuration for workflow operations\n */\nexport const WORKFLOW_RETRY_CONFIG = {\n  /**\n   * Maximum number of retries for DDL execution failures\n   * When DDL execution fails, the workflow will retry up to this many times\n   * by going back to the designSchema node with the error information\n   */\n  MAX_DDL_EXECUTION_RETRIES: 1,\n} as const\n", "export { analyzeRequirementsNode } from './analyzeRequirementsNode'\nexport { designSchemaNode } from './designSchemaNode'\nexport { executeDdlNode } from './executeDdlNode'\nexport { finalizeArtifactsNode } from './finalizeArtifactsNode'\nexport { generateUsecaseNode } from './generateUsecaseNode'\nexport { prepareDmlNode } from './prepareDmlNode'\nexport { reviewDeliverablesNode } from './reviewDeliverablesNode'\nexport { saveUserMessageNode } from './saveUserMessageNode'\nexport { validateSchemaNode } from './validateSchemaNode'\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport { ResultAsync } from 'neverthrow'\nimport type * as v from 'valibot'\nimport { PMAnalysisAgent } from '../../../langchain/agents'\nimport type { requirementsAnalysisSchema } from '../../../langchain/agents/pmAnalysisAgent/agent'\nimport type { BasePromptVariables } from '../../../langchain/utils/types'\nimport type { NodeLogger } from '../../../utils/nodeLogger'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\nimport { logAssistantMessage } from '../utils/timelineLogger'\n\nconst NODE_NAME = 'analyzeRequirementsNode'\n\ntype AnalysisResult = v.InferOutput<typeof requirementsAnalysisSchema>\n\n/**\n * Log analysis results for debugging/monitoring purposes\n * TODO: Remove this function once the feature is stable and monitoring is no longer needed\n */\nconst logAnalysisResult = (\n  logger: NodeLogger,\n  result: AnalysisResult,\n): void => {\n  logger.log(`[${NODE_NAME}] Analysis Result:`)\n  logger.log(`[${NODE_NAME}] BRD: ${result.businessRequirement}`)\n  logger.log(\n    `[${NODE_NAME}] Functional Requirements: ${JSON.stringify(result.functionalRequirements)}`,\n  )\n  logger.log(\n    `[${NODE_NAME}] Non-Functional Requirements: ${JSON.stringify(result.nonFunctionalRequirements)}`,\n  )\n}\n\n/**\n * Analyze Requirements Node - Requirements Organization\n * Performed by pmAnalysisAgent\n */\nexport async function analyzeRequirementsNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { repositories, logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  await logAssistantMessage(state, repositories, 'Analyzing requirements...')\n\n  const pmAnalysisAgent = new PMAnalysisAgent()\n\n  const promptVariables: BasePromptVariables = {\n    chat_history: state.formattedHistory,\n    user_message: state.userInput,\n  }\n\n  const retryCount = state.retryCount[NODE_NAME] ?? 0\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    'Organizing business and functional requirements...',\n  )\n\n  const analysisResult = await ResultAsync.fromPromise(\n    pmAnalysisAgent.analyzeRequirements(promptVariables),\n    (error) => (error instanceof Error ? error : new Error(String(error))),\n  )\n\n  return analysisResult.match(\n    async (result) => {\n      // Log the analysis result for debugging/monitoring purposes\n      logAnalysisResult(logger, result)\n\n      await logAssistantMessage(\n        state,\n        repositories,\n        'Requirements analysis completed',\n      )\n\n      logger.log(`[${NODE_NAME}] Completed`)\n\n      return {\n        ...state,\n        analyzedRequirements: {\n          businessRequirement: result.businessRequirement,\n          functionalRequirements: result.functionalRequirements,\n          nonFunctionalRequirements: result.nonFunctionalRequirements,\n        },\n        error: undefined, // Clear error on success\n      }\n    },\n    async (error) => {\n      logger.error(`[${NODE_NAME}] Failed: ${error.message}`)\n\n      await logAssistantMessage(\n        state,\n        repositories,\n        'Error occurred during requirements analysis',\n      )\n\n      return {\n        ...state,\n        error,\n        retryCount: {\n          ...state.retryCount,\n          [NODE_NAME]: retryCount + 1,\n        },\n      }\n    },\n  )\n}\n", "export { DatabaseSchemaBuildAgent } from './databaseSchemaBuildAgent'\nexport { PMAnalysisAgent } from './pmAnalysisAgent'\nexport { QAGenerateUsecaseAgent } from './qaGenerateUsecaseAgent'\n", "export { DatabaseSchemaBuildAgent } from './agent'\n", "import { ChatOpenAI } from '@langchain/openai'\nimport { operationsSchema } from '@liam-hq/db-structure'\nimport { toJsonSchema } from '@valibot/to-json-schema'\nimport * as v from 'valibot'\nimport { createLangfuseHandler } from '../../utils/telemetry'\nimport type { ChatAgent, SchemaAwareChatVariables } from '../../utils/types'\nimport { buildAgentPrompt } from './prompts'\n\n// Define the response schema\nconst buildAgentResponseSchema = v.object({\n  message: v.string(),\n  schemaChanges: operationsSchema,\n})\n\nexport type BuildAgentResponse = v.InferOutput<typeof buildAgentResponseSchema>\n\nexport class DatabaseSchemaBuildAgent\n  implements ChatAgent<SchemaAwareChatVariables, BuildAgentResponse>\n{\n  private model: ReturnType<ChatOpenAI['withStructuredOutput']>\n\n  constructor() {\n    const baseModel = new ChatOpenAI({\n      model: 'o4-mini',\n      callbacks: [createLangfuseHandler()],\n    })\n\n    const jsonSchema = toJsonSchema(buildAgentResponseSchema)\n    this.model = baseModel.withStructuredOutput(jsonSchema)\n  }\n\n  async generate(\n    variables: SchemaAwareChatVariables,\n  ): Promise<BuildAgentResponse> {\n    const formattedPrompt = await buildAgentPrompt.format(variables)\n    const rawResponse = await this.model.invoke(formattedPrompt)\n\n    return v.parse(buildAgentResponseSchema, rawResponse)\n  }\n}\n", "export * from './dist/index.js'", "export { OpenAI as OpenAIClient, toFile } from \"openai\";\nexport * from \"./chat_models.js\";\nexport * from \"./azure/chat_models.js\";\nexport * from \"./llms.js\";\nexport * from \"./azure/llms.js\";\nexport * from \"./azure/embeddings.js\";\nexport * from \"./embeddings.js\";\nexport * from \"./types.js\";\nexport * from \"./utils/openai.js\";\nexport * from \"./utils/azure.js\";\nexport * from \"./tools/index.js\";\nexport { convertPromptToOpenAI } from \"./utils/prompts.js\";\n", "import * as z4 from \"zod/v4/core\";\nimport { OpenAI as OpenAIClient } from \"openai\";\nimport { AIMessage, AIMessageChunk, ChatMessage, ChatMessageChunk, FunctionMessageChunk, HumanMessageChunk, SystemMessageChunk, ToolMessageChunk, isAIMessage, parseBase64DataUrl, parseMimeType, convertToProviderContentBlock, isDataContentBlock, } from \"@langchain/core/messages\";\nimport { ChatGenerationChunk, } from \"@langchain/core/outputs\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { BaseChatModel, } from \"@langchain/core/language_models/chat_models\";\nimport { isOpenAITool, } from \"@langchain/core/language_models/base\";\nimport { RunnableLambda, RunnablePassthrough, RunnableSequence, } from \"@langchain/core/runnables\";\nimport { JsonOutputParser, StructuredOutputParser, } from \"@langchain/core/output_parsers\";\nimport { JsonOutputKeyToolsParser, convertLangChainToolCallToOpenAI, makeInvalidToolCall, parseToolCall, } from \"@langchain/core/output_parsers/openai_tools\";\nimport { zodResponseFormat } from \"openai/helpers/zod\";\nimport { getSchemaDescription, isInteropZodSchema, isZodSchemaV3, isZodSchemaV4, } from \"@langchain/core/utils/types\";\nimport { toJsonSchema, } from \"@langchain/core/utils/json_schema\";\nimport { getEndpoint } from \"./utils/azure.js\";\nimport { formatToOpenAIToolChoice, wrapOpenAIClientError, } from \"./utils/openai.js\";\nimport { formatFunctionDefinitions, } from \"./utils/openai-format-fndef.js\";\nimport { _convertToOpenAITool } from \"./utils/tools.js\";\nfunction extractGenericMessageCustomRole(message) {\n    if (message.role !== \"system\" &&\n        message.role !== \"developer\" &&\n        message.role !== \"assistant\" &&\n        message.role !== \"user\" &&\n        message.role !== \"function\" &&\n        message.role !== \"tool\") {\n        console.warn(`Unknown message role: ${message.role}`);\n    }\n    return message.role;\n}\nexport function messageToOpenAIRole(message) {\n    const type = message._getType();\n    switch (type) {\n        case \"system\":\n            return \"system\";\n        case \"ai\":\n            return \"assistant\";\n        case \"human\":\n            return \"user\";\n        case \"function\":\n            return \"function\";\n        case \"tool\":\n            return \"tool\";\n        case \"generic\": {\n            if (!ChatMessage.isInstance(message))\n                throw new Error(\"Invalid generic chat message\");\n            return extractGenericMessageCustomRole(message);\n        }\n        default:\n            throw new Error(`Unknown message type: ${type}`);\n    }\n}\nconst completionsApiContentBlockConverter = {\n    providerName: \"ChatOpenAI\",\n    fromStandardTextBlock(block) {\n        return { type: \"text\", text: block.text };\n    },\n    fromStandardImageBlock(block) {\n        if (block.source_type === \"url\") {\n            return {\n                type: \"image_url\",\n                image_url: {\n                    url: block.url,\n                    ...(block.metadata?.detail\n                        ? { detail: block.metadata.detail }\n                        : {}),\n                },\n            };\n        }\n        if (block.source_type === \"base64\") {\n            const url = `data:${block.mime_type ?? \"\"};base64,${block.data}`;\n            return {\n                type: \"image_url\",\n                image_url: {\n                    url,\n                    ...(block.metadata?.detail\n                        ? { detail: block.metadata.detail }\n                        : {}),\n                },\n            };\n        }\n        throw new Error(`Image content blocks with source_type ${block.source_type} are not supported for ChatOpenAI`);\n    },\n    fromStandardAudioBlock(block) {\n        if (block.source_type === \"url\") {\n            const data = parseBase64DataUrl({ dataUrl: block.url });\n            if (!data) {\n                throw new Error(`URL audio blocks with source_type ${block.source_type} must be formatted as a data URL for ChatOpenAI`);\n            }\n            const rawMimeType = data.mime_type || block.mime_type || \"\";\n            let mimeType;\n            try {\n                mimeType = parseMimeType(rawMimeType);\n            }\n            catch {\n                throw new Error(`Audio blocks with source_type ${block.source_type} must have mime type of audio/wav or audio/mp3`);\n            }\n            if (mimeType.type !== \"audio\" ||\n                (mimeType.subtype !== \"wav\" && mimeType.subtype !== \"mp3\")) {\n                throw new Error(`Audio blocks with source_type ${block.source_type} must have mime type of audio/wav or audio/mp3`);\n            }\n            return {\n                type: \"input_audio\",\n                input_audio: {\n                    format: mimeType.subtype,\n                    data: data.data,\n                },\n            };\n        }\n        if (block.source_type === \"base64\") {\n            let mimeType;\n            try {\n                mimeType = parseMimeType(block.mime_type ?? \"\");\n            }\n            catch {\n                throw new Error(`Audio blocks with source_type ${block.source_type} must have mime type of audio/wav or audio/mp3`);\n            }\n            if (mimeType.type !== \"audio\" ||\n                (mimeType.subtype !== \"wav\" && mimeType.subtype !== \"mp3\")) {\n                throw new Error(`Audio blocks with source_type ${block.source_type} must have mime type of audio/wav or audio/mp3`);\n            }\n            return {\n                type: \"input_audio\",\n                input_audio: {\n                    format: mimeType.subtype,\n                    data: block.data,\n                },\n            };\n        }\n        throw new Error(`Audio content blocks with source_type ${block.source_type} are not supported for ChatOpenAI`);\n    },\n    fromStandardFileBlock(block) {\n        if (block.source_type === \"url\") {\n            const data = parseBase64DataUrl({ dataUrl: block.url });\n            if (!data) {\n                throw new Error(`URL file blocks with source_type ${block.source_type} must be formatted as a data URL for ChatOpenAI`);\n            }\n            return {\n                type: \"file\",\n                file: {\n                    file_data: block.url, // formatted as base64 data URL\n                    ...(block.metadata?.filename || block.metadata?.name\n                        ? {\n                            filename: (block.metadata?.filename ||\n                                block.metadata?.name),\n                        }\n                        : {}),\n                },\n            };\n        }\n        if (block.source_type === \"base64\") {\n            return {\n                type: \"file\",\n                file: {\n                    file_data: `data:${block.mime_type ?? \"\"};base64,${block.data}`,\n                    ...(block.metadata?.filename ||\n                        block.metadata?.name ||\n                        block.metadata?.title\n                        ? {\n                            filename: (block.metadata?.filename ||\n                                block.metadata?.name ||\n                                block.metadata?.title),\n                        }\n                        : {}),\n                },\n            };\n        }\n        if (block.source_type === \"id\") {\n            return {\n                type: \"file\",\n                file: {\n                    file_id: block.id,\n                },\n            };\n        }\n        throw new Error(`File content blocks with source_type ${block.source_type} are not supported for ChatOpenAI`);\n    },\n};\n// Used in LangSmith, export is important here\nexport function _convertMessagesToOpenAIParams(messages, model) {\n    // TODO: Function messages do not support array content, fix cast\n    return messages.flatMap((message) => {\n        let role = messageToOpenAIRole(message);\n        if (role === \"system\" && isReasoningModel(model)) {\n            role = \"developer\";\n        }\n        const content = typeof message.content === \"string\"\n            ? message.content\n            : message.content.map((m) => {\n                if (isDataContentBlock(m)) {\n                    return convertToProviderContentBlock(m, completionsApiContentBlockConverter);\n                }\n                return m;\n            });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const completionParam = {\n            role,\n            content,\n        };\n        if (message.name != null) {\n            completionParam.name = message.name;\n        }\n        if (message.additional_kwargs.function_call != null) {\n            completionParam.function_call = message.additional_kwargs.function_call;\n            completionParam.content = \"\";\n        }\n        if (isAIMessage(message) && !!message.tool_calls?.length) {\n            completionParam.tool_calls = message.tool_calls.map(convertLangChainToolCallToOpenAI);\n            completionParam.content = \"\";\n        }\n        else {\n            if (message.additional_kwargs.tool_calls != null) {\n                completionParam.tool_calls = message.additional_kwargs.tool_calls;\n            }\n            if (message.tool_call_id != null) {\n                completionParam.tool_call_id = message.tool_call_id;\n            }\n        }\n        if (message.additional_kwargs.audio &&\n            typeof message.additional_kwargs.audio === \"object\" &&\n            \"id\" in message.additional_kwargs.audio) {\n            const audioMessage = {\n                role: \"assistant\",\n                audio: {\n                    id: message.additional_kwargs.audio.id,\n                },\n            };\n            return [completionParam, audioMessage];\n        }\n        return completionParam;\n    });\n}\nconst _FUNCTION_CALL_IDS_MAP_KEY = \"__openai_function_call_ids__\";\nfunction _convertReasoningSummaryToOpenAIResponsesParams(reasoning) {\n    // combine summary parts that have the the same index and then remove the indexes\n    const summary = (reasoning.summary.length > 1\n        ? reasoning.summary.reduce((acc, curr) => {\n            const last = acc.at(-1);\n            if (last.index === curr.index) {\n                last.text += curr.text;\n            }\n            else {\n                acc.push(curr);\n            }\n            return acc;\n        }, [{ ...reasoning.summary[0] }])\n        : reasoning.summary).map((s) => Object.fromEntries(Object.entries(s).filter(([k]) => k !== \"index\")));\n    return {\n        ...reasoning,\n        summary,\n    };\n}\nfunction _convertMessagesToOpenAIResponsesParams(messages, model, zdrEnabled) {\n    return messages.flatMap((lcMsg) => {\n        const additional_kwargs = lcMsg.additional_kwargs;\n        let role = messageToOpenAIRole(lcMsg);\n        if (role === \"system\" && isReasoningModel(model))\n            role = \"developer\";\n        if (role === \"function\") {\n            throw new Error(\"Function messages are not supported in Responses API\");\n        }\n        if (role === \"tool\") {\n            const toolMessage = lcMsg;\n            // Handle computer call output\n            if (additional_kwargs?.type === \"computer_call_output\") {\n                const output = (() => {\n                    if (typeof toolMessage.content === \"string\") {\n                        return {\n                            type: \"computer_screenshot\",\n                            image_url: toolMessage.content,\n                        };\n                    }\n                    if (Array.isArray(toolMessage.content)) {\n                        const oaiScreenshot = toolMessage.content.find((i) => i.type === \"computer_screenshot\");\n                        if (oaiScreenshot)\n                            return oaiScreenshot;\n                        const lcImage = toolMessage.content.find((i) => i.type === \"image_url\");\n                        if (lcImage) {\n                            return {\n                                type: \"computer_screenshot\",\n                                image_url: typeof lcImage.image_url === \"string\"\n                                    ? lcImage.image_url\n                                    : lcImage.image_url.url,\n                            };\n                        }\n                    }\n                    throw new Error(\"Invalid computer call output\");\n                })();\n                return {\n                    type: \"computer_call_output\",\n                    output,\n                    call_id: toolMessage.tool_call_id,\n                };\n            }\n            return {\n                type: \"function_call_output\",\n                call_id: toolMessage.tool_call_id,\n                id: toolMessage.id?.startsWith(\"fc_\") ? toolMessage.id : undefined,\n                output: typeof toolMessage.content !== \"string\"\n                    ? JSON.stringify(toolMessage.content)\n                    : toolMessage.content,\n            };\n        }\n        if (role === \"assistant\") {\n            // if we have the original response items, just reuse them\n            if (!zdrEnabled &&\n                lcMsg.response_metadata.output != null &&\n                Array.isArray(lcMsg.response_metadata.output) &&\n                lcMsg.response_metadata.output.length > 0 &&\n                lcMsg.response_metadata.output.every((item) => \"type\" in item)) {\n                return lcMsg.response_metadata.output;\n            }\n            // otherwise, try to reconstruct the response from what we have\n            const input = [];\n            // reasoning items\n            if (additional_kwargs?.reasoning && !zdrEnabled) {\n                const reasoningItem = _convertReasoningSummaryToOpenAIResponsesParams(additional_kwargs.reasoning);\n                input.push(reasoningItem);\n            }\n            // ai content\n            let { content } = lcMsg;\n            if (additional_kwargs?.refusal) {\n                if (typeof content === \"string\") {\n                    content = [{ type: \"output_text\", text: content, annotations: [] }];\n                }\n                content = [\n                    ...content,\n                    { type: \"refusal\", refusal: additional_kwargs.refusal },\n                ];\n            }\n            input.push({\n                type: \"message\",\n                role: \"assistant\",\n                ...(lcMsg.id && !zdrEnabled ? { id: lcMsg.id } : {}),\n                content: typeof content === \"string\"\n                    ? content\n                    : content.flatMap((item) => {\n                        if (item.type === \"text\") {\n                            return {\n                                type: \"output_text\",\n                                text: item.text,\n                                // @ts-expect-error TODO: add types for `annotations`\n                                annotations: item.annotations ?? [],\n                            };\n                        }\n                        if (item.type === \"output_text\" || item.type === \"refusal\") {\n                            return item;\n                        }\n                        return [];\n                    }),\n            });\n            const functionCallIds = additional_kwargs?.[_FUNCTION_CALL_IDS_MAP_KEY];\n            if (isAIMessage(lcMsg) && !!lcMsg.tool_calls?.length) {\n                input.push(...lcMsg.tool_calls.map((toolCall) => ({\n                    type: \"function_call\",\n                    name: toolCall.name,\n                    arguments: JSON.stringify(toolCall.args),\n                    call_id: toolCall.id,\n                    ...(zdrEnabled ? { id: functionCallIds?.[toolCall.id] } : {}),\n                })));\n            }\n            else if (additional_kwargs?.tool_calls) {\n                input.push(...additional_kwargs.tool_calls.map((toolCall) => ({\n                    type: \"function_call\",\n                    name: toolCall.function.name,\n                    call_id: toolCall.id,\n                    arguments: toolCall.function.arguments,\n                    ...(zdrEnabled ? { id: functionCallIds?.[toolCall.id] } : {}),\n                })));\n            }\n            const toolOutputs = lcMsg.response_metadata.output?.length\n                ? lcMsg.response_metadata.output\n                : additional_kwargs.tool_outputs;\n            const fallthroughCallTypes = [\n                \"computer_call\",\n                \"mcp_call\",\n                \"code_interpreter_call\",\n                \"image_generation_call\",\n            ];\n            if (toolOutputs != null) {\n                const castToolOutputs = toolOutputs;\n                const fallthroughCalls = castToolOutputs?.filter((item) => fallthroughCallTypes.includes(item.type));\n                if (fallthroughCalls.length > 0)\n                    input.push(...fallthroughCalls);\n            }\n            return input;\n        }\n        if (role === \"user\" || role === \"system\" || role === \"developer\") {\n            if (typeof lcMsg.content === \"string\") {\n                return { type: \"message\", role, content: lcMsg.content };\n            }\n            const messages = [];\n            const content = lcMsg.content.flatMap((item) => {\n                if (item.type === \"mcp_approval_response\") {\n                    messages.push({\n                        type: \"mcp_approval_response\",\n                        approval_request_id: item.approval_request_id,\n                        approve: item.approve,\n                    });\n                }\n                if (isDataContentBlock(item)) {\n                    return convertToProviderContentBlock(item, completionsApiContentBlockConverter);\n                }\n                if (item.type === \"text\") {\n                    return {\n                        type: \"input_text\",\n                        text: item.text,\n                    };\n                }\n                if (item.type === \"image_url\") {\n                    return {\n                        type: \"input_image\",\n                        image_url: typeof item.image_url === \"string\"\n                            ? item.image_url\n                            : item.image_url.url,\n                        detail: typeof item.image_url === \"string\"\n                            ? \"auto\"\n                            : item.image_url.detail,\n                    };\n                }\n                if (item.type === \"input_text\" ||\n                    item.type === \"input_image\" ||\n                    item.type === \"input_file\") {\n                    return item;\n                }\n                return [];\n            });\n            if (content.length > 0) {\n                messages.push({ type: \"message\", role, content });\n            }\n            return messages;\n        }\n        console.warn(`Unsupported role found when converting to OpenAI Responses API: ${role}`);\n        return [];\n    });\n}\nfunction _convertOpenAIResponsesMessageToBaseMessage(response) {\n    if (response.error) {\n        // TODO: add support for `addLangChainErrorFields`\n        const error = new Error(response.error.message);\n        error.name = response.error.code;\n        throw error;\n    }\n    let messageId;\n    const content = [];\n    const tool_calls = [];\n    const invalid_tool_calls = [];\n    const response_metadata = {\n        model: response.model,\n        created_at: response.created_at,\n        id: response.id,\n        incomplete_details: response.incomplete_details,\n        metadata: response.metadata,\n        object: response.object,\n        status: response.status,\n        user: response.user,\n        // for compatibility with chat completion calls.\n        model_name: response.model,\n    };\n    const additional_kwargs = {};\n    for (const item of response.output) {\n        if (item.type === \"message\") {\n            messageId = item.id;\n            content.push(...item.content.flatMap((part) => {\n                if (part.type === \"output_text\") {\n                    if (\"parsed\" in part && part.parsed != null) {\n                        additional_kwargs.parsed = part.parsed;\n                    }\n                    return {\n                        type: \"text\",\n                        text: part.text,\n                        annotations: part.annotations,\n                    };\n                }\n                if (part.type === \"refusal\") {\n                    additional_kwargs.refusal = part.refusal;\n                    return [];\n                }\n                return part;\n            }));\n        }\n        else if (item.type === \"function_call\") {\n            const fnAdapter = {\n                function: { name: item.name, arguments: item.arguments },\n                id: item.call_id,\n            };\n            try {\n                tool_calls.push(parseToolCall(fnAdapter, { returnId: true }));\n            }\n            catch (e) {\n                let errMessage;\n                if (typeof e === \"object\" &&\n                    e != null &&\n                    \"message\" in e &&\n                    typeof e.message === \"string\") {\n                    errMessage = e.message;\n                }\n                invalid_tool_calls.push(makeInvalidToolCall(fnAdapter, errMessage));\n            }\n            additional_kwargs[_FUNCTION_CALL_IDS_MAP_KEY] ??= {};\n            if (item.id) {\n                additional_kwargs[_FUNCTION_CALL_IDS_MAP_KEY][item.call_id] = item.id;\n            }\n        }\n        else if (item.type === \"reasoning\") {\n            additional_kwargs.reasoning = item;\n        }\n        else {\n            additional_kwargs.tool_outputs ??= [];\n            additional_kwargs.tool_outputs.push(item);\n        }\n    }\n    return new AIMessage({\n        id: messageId,\n        content,\n        tool_calls,\n        invalid_tool_calls,\n        usage_metadata: response.usage,\n        additional_kwargs,\n        response_metadata,\n    });\n}\nfunction _convertOpenAIResponsesDeltaToBaseMessageChunk(chunk) {\n    const content = [];\n    let generationInfo = {};\n    let usage_metadata;\n    const tool_call_chunks = [];\n    const response_metadata = {};\n    const additional_kwargs = {};\n    let id;\n    if (chunk.type === \"response.output_text.delta\") {\n        content.push({\n            type: \"text\",\n            text: chunk.delta,\n            index: chunk.content_index,\n        });\n    }\n    else if (chunk.type === \"response.output_text_annotation.added\") {\n        content.push({\n            type: \"text\",\n            text: \"\",\n            annotations: [chunk.annotation],\n            index: chunk.content_index,\n        });\n    }\n    else if (chunk.type === \"response.output_item.added\" &&\n        chunk.item.type === \"message\") {\n        id = chunk.item.id;\n    }\n    else if (chunk.type === \"response.output_item.added\" &&\n        chunk.item.type === \"function_call\") {\n        tool_call_chunks.push({\n            type: \"tool_call_chunk\",\n            name: chunk.item.name,\n            args: chunk.item.arguments,\n            id: chunk.item.call_id,\n            index: chunk.output_index,\n        });\n        additional_kwargs[_FUNCTION_CALL_IDS_MAP_KEY] = {\n            [chunk.item.call_id]: chunk.item.id,\n        };\n    }\n    else if (chunk.type === \"response.output_item.done\" &&\n        [\n            \"web_search_call\",\n            \"file_search_call\",\n            \"computer_call\",\n            \"code_interpreter_call\",\n            \"mcp_call\",\n            \"mcp_list_tools\",\n            \"mcp_approval_request\",\n            \"image_generation_call\",\n        ].includes(chunk.item.type)) {\n        additional_kwargs.tool_outputs = [chunk.item];\n    }\n    else if (chunk.type === \"response.created\") {\n        response_metadata.id = chunk.response.id;\n        response_metadata.model_name = chunk.response.model;\n        response_metadata.model = chunk.response.model;\n    }\n    else if (chunk.type === \"response.completed\") {\n        const msg = _convertOpenAIResponsesMessageToBaseMessage(chunk.response);\n        usage_metadata = chunk.response.usage;\n        if (chunk.response.text?.format?.type === \"json_schema\") {\n            additional_kwargs.parsed ??= JSON.parse(msg.text);\n        }\n        for (const [key, value] of Object.entries(chunk.response)) {\n            if (key !== \"id\")\n                response_metadata[key] = value;\n        }\n    }\n    else if (chunk.type === \"response.function_call_arguments.delta\") {\n        tool_call_chunks.push({\n            type: \"tool_call_chunk\",\n            args: chunk.delta,\n            index: chunk.output_index,\n        });\n    }\n    else if (chunk.type === \"response.web_search_call.completed\" ||\n        chunk.type === \"response.file_search_call.completed\") {\n        generationInfo = {\n            tool_outputs: {\n                id: chunk.item_id,\n                type: chunk.type.replace(\"response.\", \"\").replace(\".completed\", \"\"),\n                status: \"completed\",\n            },\n        };\n    }\n    else if (chunk.type === \"response.refusal.done\") {\n        additional_kwargs.refusal = chunk.refusal;\n    }\n    else if (chunk.type === \"response.output_item.added\" &&\n        \"item\" in chunk &&\n        chunk.item.type === \"reasoning\") {\n        const summary = chunk\n            .item.summary\n            ? chunk.item.summary.map((s, index) => ({\n                ...s,\n                index,\n            }))\n            : undefined;\n        additional_kwargs.reasoning = {\n            // We only capture ID in the first chunk or else the concatenated result of all chunks will\n            // have an ID field that is repeated once per chunk. There is special handling for the `type`\n            // field that prevents this, however.\n            id: chunk.item.id,\n            type: chunk.item.type,\n            ...(summary ? { summary } : {}),\n        };\n    }\n    else if (chunk.type === \"response.reasoning_summary_part.added\") {\n        additional_kwargs.reasoning = {\n            type: \"reasoning\",\n            summary: [{ ...chunk.part, index: chunk.summary_index }],\n        };\n    }\n    else if (chunk.type === \"response.reasoning_summary_text.delta\") {\n        additional_kwargs.reasoning = {\n            type: \"reasoning\",\n            summary: [\n                { text: chunk.delta, type: \"summary_text\", index: chunk.summary_index },\n            ],\n        };\n    }\n    else if (chunk.type === \"response.image_generation_call.partial_image\") {\n        // noop/fixme: retaining partial images in a message chunk means that _all_\n        // partial images get kept in history, so we don't do anything here.\n        return null;\n    }\n    else {\n        return null;\n    }\n    return new ChatGenerationChunk({\n        // Legacy reasons, `onLLMNewToken` should pulls this out\n        text: content.map((part) => part.text).join(\"\"),\n        message: new AIMessageChunk({\n            id,\n            content,\n            tool_call_chunks,\n            usage_metadata,\n            additional_kwargs,\n            response_metadata,\n        }),\n        generationInfo,\n    });\n}\nfunction isBuiltInTool(tool) {\n    return \"type\" in tool && tool.type !== \"function\";\n}\nfunction isBuiltInToolChoice(tool_choice) {\n    return (tool_choice != null &&\n        typeof tool_choice === \"object\" &&\n        \"type\" in tool_choice &&\n        tool_choice.type !== \"function\");\n}\nfunction _reduceChatOpenAIToolsForResponses(tools, fields) {\n    const reducedTools = [];\n    for (const tool of tools) {\n        if (isBuiltInTool(tool)) {\n            if (tool.type === \"image_generation\" && fields?.stream) {\n                // OpenAI sends a 400 error if partial_images is not set and we want to stream.\n                // We also set it to 1 since we don't support partial images yet.\n                tool.partial_images = 1;\n            }\n            reducedTools.push(tool);\n        }\n        else if (isOpenAITool(tool)) {\n            reducedTools.push({\n                type: \"function\",\n                name: tool.function.name,\n                parameters: tool.function.parameters,\n                description: tool.function.description,\n                strict: fields?.strict ?? null,\n            });\n        }\n    }\n    return reducedTools;\n}\nfunction _convertChatOpenAIToolTypeToOpenAITool(tool, fields) {\n    if (isOpenAITool(tool)) {\n        if (fields?.strict !== undefined) {\n            return {\n                ...tool,\n                function: {\n                    ...tool.function,\n                    strict: fields.strict,\n                },\n            };\n        }\n        return tool;\n    }\n    return _convertToOpenAITool(tool, fields);\n}\nfunction isReasoningModel(model) {\n    return model && /^o\\d/.test(model);\n}\n/**\n * OpenAI chat model integration.\n *\n * To use with Azure, import the `AzureChatOpenAI` class.\n *\n * Setup:\n * Install `@langchain/openai` and set an environment variable named `OPENAI_API_KEY`.\n *\n * ```bash\n * npm install @langchain/openai\n * export OPENAI_API_KEY=\"your-api-key\"\n * ```\n *\n * ## [Constructor args](https://api.js.langchain.com/classes/langchain_openai.ChatOpenAI.html#constructor)\n *\n * ## [Runtime args](https://api.js.langchain.com/interfaces/langchain_openai.ChatOpenAICallOptions.html)\n *\n * Runtime args can be passed as the second argument to any of the base runnable methods `.invoke`. `.stream`, `.batch`, etc.\n * They can also be passed via `.withConfig`, or the second arg in `.bindTools`, like shown in the examples below:\n *\n * ```typescript\n * // When calling `.withConfig`, call options should be passed via the first argument\n * const llmWithArgsBound = llm.withConfig({\n *   stop: [\"\\n\"],\n *   tools: [...],\n * });\n *\n * // When calling `.bindTools`, call options should be passed via the second argument\n * const llmWithTools = llm.bindTools(\n *   [...],\n *   {\n *     tool_choice: \"auto\",\n *   }\n * );\n * ```\n *\n * ## Examples\n *\n * <details open>\n * <summary><strong>Instantiate</strong></summary>\n *\n * ```typescript\n * import { ChatOpenAI } from '@langchain/openai';\n *\n * const llm = new ChatOpenAI({\n *   model: \"gpt-4o\",\n *   temperature: 0,\n *   maxTokens: undefined,\n *   timeout: undefined,\n *   maxRetries: 2,\n *   // apiKey: \"...\",\n *   // baseUrl: \"...\",\n *   // organization: \"...\",\n *   // other params...\n * });\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Invoking</strong></summary>\n *\n * ```typescript\n * const input = `Translate \"I love programming\" into French.`;\n *\n * // Models also accept a list of chat messages or a formatted prompt\n * const result = await llm.invoke(input);\n * console.log(result);\n * ```\n *\n * ```txt\n * AIMessage {\n *   \"id\": \"chatcmpl-9u4Mpu44CbPjwYFkTbeoZgvzB00Tz\",\n *   \"content\": \"J'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"tokenUsage\": {\n *       \"completionTokens\": 5,\n *       \"promptTokens\": 28,\n *       \"totalTokens\": 33\n *     },\n *     \"finish_reason\": \"stop\",\n *     \"system_fingerprint\": \"fp_3aa7262c27\"\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Streaming Chunks</strong></summary>\n *\n * ```typescript\n * for await (const chunk of await llm.stream(input)) {\n *   console.log(chunk);\n * }\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"chatcmpl-9u4NWB7yUeHCKdLr6jP3HpaOYHTqs\",\n *   \"content\": \"\"\n * }\n * AIMessageChunk {\n *   \"content\": \"J\"\n * }\n * AIMessageChunk {\n *   \"content\": \"'adore\"\n * }\n * AIMessageChunk {\n *   \"content\": \" la\"\n * }\n * AIMessageChunk {\n *   \"content\": \" programmation\",,\n * }\n * AIMessageChunk {\n *   \"content\": \".\",,\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"response_metadata\": {\n *     \"finish_reason\": \"stop\",\n *     \"system_fingerprint\": \"fp_c9aa9c0491\"\n *   },\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Aggregate Streamed Chunks</strong></summary>\n *\n * ```typescript\n * import { AIMessageChunk } from '@langchain/core/messages';\n * import { concat } from '@langchain/core/utils/stream';\n *\n * const stream = await llm.stream(input);\n * let full: AIMessageChunk | undefined;\n * for await (const chunk of stream) {\n *   full = !full ? chunk : concat(full, chunk);\n * }\n * console.log(full);\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"chatcmpl-9u4PnX6Fy7OmK46DASy0bH6cxn5Xu\",\n *   \"content\": \"J'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"prompt\": 0,\n *     \"completion\": 0,\n *     \"finish_reason\": \"stop\",\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Bind tools</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const GetWeather = {\n *   name: \"GetWeather\",\n *   description: \"Get the current weather in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const GetPopulation = {\n *   name: \"GetPopulation\",\n *   description: \"Get the current population in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const llmWithTools = llm.bindTools(\n *   [GetWeather, GetPopulation],\n *   {\n *     // strict: true  // enforce tool args schema is respected\n *   }\n * );\n * const aiMsg = await llmWithTools.invoke(\n *   \"Which city is hotter today and which is bigger: LA or NY?\"\n * );\n * console.log(aiMsg.tool_calls);\n * ```\n *\n * ```txt\n * [\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call',\n *     id: 'call_uPU4FiFzoKAtMxfmPnfQL6UK'\n *   },\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call',\n *     id: 'call_UNkEwuQsHrGYqgDQuH9nPAtX'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call',\n *     id: 'call_kL3OXxaq9OjIKqRTpvjaCH14'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call',\n *     id: 'call_s9KQB1UWj45LLGaEnjz0179q'\n *   }\n * ]\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Structured Output</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const Joke = z.object({\n *   setup: z.string().describe(\"The setup of the joke\"),\n *   punchline: z.string().describe(\"The punchline to the joke\"),\n *   rating: z.number().nullable().describe(\"How funny the joke is, from 1 to 10\")\n * }).describe('Joke to tell user.');\n *\n * const structuredLlm = llm.withStructuredOutput(Joke, {\n *   name: \"Joke\",\n *   strict: true, // Optionally enable OpenAI structured outputs\n * });\n * const jokeResult = await structuredLlm.invoke(\"Tell me a joke about cats\");\n * console.log(jokeResult);\n * ```\n *\n * ```txt\n * {\n *   setup: 'Why was the cat sitting on the computer?',\n *   punchline: 'Because it wanted to keep an eye on the mouse!',\n *   rating: 7\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>JSON Object Response Format</strong></summary>\n *\n * ```typescript\n * const jsonLlm = llm.withConfig({ response_format: { type: \"json_object\" } });\n * const jsonLlmAiMsg = await jsonLlm.invoke(\n *   \"Return a JSON object with key 'randomInts' and a value of 10 random ints in [0-99]\"\n * );\n * console.log(jsonLlmAiMsg.content);\n * ```\n *\n * ```txt\n * {\n *   \"randomInts\": [23, 87, 45, 12, 78, 34, 56, 90, 11, 67]\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Multimodal</strong></summary>\n *\n * ```typescript\n * import { HumanMessage } from '@langchain/core/messages';\n *\n * const imageUrl = \"https://example.com/image.jpg\";\n * const imageData = await fetch(imageUrl).then(res => res.arrayBuffer());\n * const base64Image = Buffer.from(imageData).toString('base64');\n *\n * const message = new HumanMessage({\n *   content: [\n *     { type: \"text\", text: \"describe the weather in this image\" },\n *     {\n *       type: \"image_url\",\n *       image_url: { url: `data:image/jpeg;base64,${base64Image}` },\n *     },\n *   ]\n * });\n *\n * const imageDescriptionAiMsg = await llm.invoke([message]);\n * console.log(imageDescriptionAiMsg.content);\n * ```\n *\n * ```txt\n * The weather in the image appears to be clear and sunny. The sky is mostly blue with a few scattered white clouds, indicating fair weather. The bright sunlight is casting shadows on the green, grassy hill, suggesting it is a pleasant day with good visibility. There are no signs of rain or stormy conditions.\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Usage Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForMetadata = await llm.invoke(input);\n * console.log(aiMsgForMetadata.usage_metadata);\n * ```\n *\n * ```txt\n * { input_tokens: 28, output_tokens: 5, total_tokens: 33 }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Logprobs</strong></summary>\n *\n * ```typescript\n * const logprobsLlm = new ChatOpenAI({ logprobs: true });\n * const aiMsgForLogprobs = await logprobsLlm.invoke(input);\n * console.log(aiMsgForLogprobs.response_metadata.logprobs);\n * ```\n *\n * ```txt\n * {\n *   content: [\n *     {\n *       token: 'J',\n *       logprob: -0.000050616763,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: \"'\",\n *       logprob: -0.01868736,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: 'ad',\n *       logprob: -0.0000030545007,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     { token: 'ore', logprob: 0, bytes: [Array], top_logprobs: [] },\n *     {\n *       token: ' la',\n *       logprob: -0.515404,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: ' programm',\n *       logprob: -0.0000118755715,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     { token: 'ation', logprob: 0, bytes: [Array], top_logprobs: [] },\n *     {\n *       token: '.',\n *       logprob: -0.0000037697225,\n *       bytes: [Array],\n *       top_logprobs: []\n *     }\n *   ],\n *   refusal: null\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Response Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForResponseMetadata = await llm.invoke(input);\n * console.log(aiMsgForResponseMetadata.response_metadata);\n * ```\n *\n * ```txt\n * {\n *   tokenUsage: { completionTokens: 5, promptTokens: 28, totalTokens: 33 },\n *   finish_reason: 'stop',\n *   system_fingerprint: 'fp_3aa7262c27'\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>JSON Schema Structured Output</strong></summary>\n *\n * ```typescript\n * const llmForJsonSchema = new ChatOpenAI({\n *   model: \"gpt-4o-2024-08-06\",\n * }).withStructuredOutput(\n *   z.object({\n *     command: z.string().describe(\"The command to execute\"),\n *     expectedOutput: z.string().describe(\"The expected output of the command\"),\n *     options: z\n *       .array(z.string())\n *       .describe(\"The options you can pass to the command\"),\n *   }),\n *   {\n *     method: \"jsonSchema\",\n *     strict: true, // Optional when using the `jsonSchema` method\n *   }\n * );\n *\n * const jsonSchemaRes = await llmForJsonSchema.invoke(\n *   \"What is the command to list files in a directory?\"\n * );\n * console.log(jsonSchemaRes);\n * ```\n *\n * ```txt\n * {\n *   command: 'ls',\n *   expectedOutput: 'A list of files and subdirectories within the specified directory.',\n *   options: [\n *     '-a: include directory entries whose names begin with a dot (.).',\n *     '-l: use a long listing format.',\n *     '-h: with -l, print sizes in human readable format (e.g., 1K, 234M, 2G).',\n *     '-t: sort by time, newest first.',\n *     '-r: reverse order while sorting.',\n *     '-S: sort by file size, largest first.',\n *     '-R: list subdirectories recursively.'\n *   ]\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Audio Outputs</strong></summary>\n *\n * ```typescript\n * import { ChatOpenAI } from \"@langchain/openai\";\n *\n * const modelWithAudioOutput = new ChatOpenAI({\n *   model: \"gpt-4o-audio-preview\",\n *   // You may also pass these fields to `.withConfig` as a call argument.\n *   modalities: [\"text\", \"audio\"], // Specifies that the model should output audio.\n *   audio: {\n *     voice: \"alloy\",\n *     format: \"wav\",\n *   },\n * });\n *\n * const audioOutputResult = await modelWithAudioOutput.invoke(\"Tell me a joke about cats.\");\n * const castMessageContent = audioOutputResult.content[0] as Record<string, any>;\n *\n * console.log({\n *   ...castMessageContent,\n *   data: castMessageContent.data.slice(0, 100) // Sliced for brevity\n * })\n * ```\n *\n * ```txt\n * {\n *   id: 'audio_67117718c6008190a3afad3e3054b9b6',\n *   data: 'UklGRqYwBgBXQVZFZm10IBAAAAABAAEAwF0AAIC7AAACABAATElTVBoAAABJTkZPSVNGVA4AAABMYXZmNTguMjkuMTAwAGRhdGFg',\n *   expires_at: 1729201448,\n *   transcript: 'Sure! Why did the cat sit on the computer? Because it wanted to keep an eye on the mouse!'\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Audio Outputs</strong></summary>\n *\n * ```typescript\n * import { ChatOpenAI } from \"@langchain/openai\";\n *\n * const modelWithAudioOutput = new ChatOpenAI({\n *   model: \"gpt-4o-audio-preview\",\n *   // You may also pass these fields to `.withConfig` as a call argument.\n *   modalities: [\"text\", \"audio\"], // Specifies that the model should output audio.\n *   audio: {\n *     voice: \"alloy\",\n *     format: \"wav\",\n *   },\n * });\n *\n * const audioOutputResult = await modelWithAudioOutput.invoke(\"Tell me a joke about cats.\");\n * const castAudioContent = audioOutputResult.additional_kwargs.audio as Record<string, any>;\n *\n * console.log({\n *   ...castAudioContent,\n *   data: castAudioContent.data.slice(0, 100) // Sliced for brevity\n * })\n * ```\n *\n * ```txt\n * {\n *   id: 'audio_67117718c6008190a3afad3e3054b9b6',\n *   data: 'UklGRqYwBgBXQVZFZm10IBAAAAABAAEAwF0AAIC7AAACABAATElTVBoAAABJTkZPSVNGVA4AAABMYXZmNTguMjkuMTAwAGRhdGFg',\n *   expires_at: 1729201448,\n *   transcript: 'Sure! Why did the cat sit on the computer? Because it wanted to keep an eye on the mouse!'\n * }\n * ```\n * </details>\n *\n * <br />\n */\nexport class ChatOpenAI extends BaseChatModel {\n    static lc_name() {\n        return \"ChatOpenAI\";\n    }\n    get callKeys() {\n        return [\n            ...super.callKeys,\n            \"options\",\n            \"function_call\",\n            \"functions\",\n            \"tools\",\n            \"tool_choice\",\n            \"promptIndex\",\n            \"response_format\",\n            \"seed\",\n            \"reasoning_effort\",\n        ];\n    }\n    get lc_secrets() {\n        return {\n            openAIApiKey: \"OPENAI_API_KEY\",\n            apiKey: \"OPENAI_API_KEY\",\n            organization: \"OPENAI_ORGANIZATION\",\n        };\n    }\n    get lc_aliases() {\n        return {\n            modelName: \"model\",\n            openAIApiKey: \"openai_api_key\",\n            apiKey: \"openai_api_key\",\n        };\n    }\n    get lc_serializable_keys() {\n        return [\n            \"configuration\",\n            \"logprobs\",\n            \"topLogprobs\",\n            \"prefixMessages\",\n            \"supportsStrictToolCalling\",\n            \"modalities\",\n            \"audio\",\n            \"reasoningEffort\",\n            \"temperature\",\n            \"maxTokens\",\n            \"topP\",\n            \"frequencyPenalty\",\n            \"presencePenalty\",\n            \"n\",\n            \"logitBias\",\n            \"user\",\n            \"streaming\",\n            \"streamUsage\",\n            \"modelName\",\n            \"model\",\n            \"modelKwargs\",\n            \"stop\",\n            \"stopSequences\",\n            \"timeout\",\n            \"openAIApiKey\",\n            \"apiKey\",\n            \"cache\",\n            \"maxConcurrency\",\n            \"maxRetries\",\n            \"verbose\",\n            \"callbacks\",\n            \"tags\",\n            \"metadata\",\n            \"disableStreaming\",\n            \"useResponsesApi\",\n            \"zdrEnabled\",\n            \"reasoning\",\n        ];\n    }\n    constructor(fields) {\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"frequencyPenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"presencePenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"logitBias\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @deprecated Use \"model\" instead */\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gpt-3.5-turbo\"\n        });\n        Object.defineProperty(this, \"modelKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stopSequences\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"streamUsage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"logprobs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topLogprobs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"openAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"__includeRawResponse\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Whether the model supports the `strict` argument when passing in tools.\n         * If `undefined` the `strict` argument will not be passed to OpenAI.\n         */\n        Object.defineProperty(this, \"supportsStrictToolCalling\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"audio\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modalities\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * @deprecated Use {@link reasoning} object instead.\n         */\n        Object.defineProperty(this, \"reasoningEffort\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Options for reasoning models.\n         */\n        Object.defineProperty(this, \"reasoning\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Whether to use the responses API for all requests. If `false` the responses API will be used\n         * only when required in order to fulfill the request.\n         */\n        Object.defineProperty(this, \"useResponsesApi\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /**\n         * Must be set to `true` in tenancies with Zero Data Retention. Setting to `true` will disable\n         * output storage in the Responses API, but this DOES NOT enable Zero Data Retention in your\n         * OpenAI organization or project. This must be configured directly with OpenAI.\n         *\n         * See:\n         * https://help.openai.com/en/articles/10503543-data-residency-for-the-openai-api\n         * https://platform.openai.com/docs/api-reference/responses/create#responses-create-store\n         *\n         * @default false\n         */\n        Object.defineProperty(this, \"zdrEnabled\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.openAIApiKey =\n            fields?.apiKey ??\n                fields?.openAIApiKey ??\n                fields?.configuration?.apiKey ??\n                getEnvironmentVariable(\"OPENAI_API_KEY\");\n        this.apiKey = this.openAIApiKey;\n        this.organization =\n            fields?.configuration?.organization ??\n                getEnvironmentVariable(\"OPENAI_ORGANIZATION\");\n        this.model = fields?.model ?? fields?.modelName ?? this.model;\n        this.modelName = this.model;\n        this.modelKwargs = fields?.modelKwargs ?? {};\n        this.timeout = fields?.timeout;\n        this.temperature = fields?.temperature ?? this.temperature;\n        this.topP = fields?.topP ?? this.topP;\n        this.frequencyPenalty = fields?.frequencyPenalty ?? this.frequencyPenalty;\n        this.presencePenalty = fields?.presencePenalty ?? this.presencePenalty;\n        this.logprobs = fields?.logprobs;\n        this.topLogprobs = fields?.topLogprobs;\n        this.n = fields?.n ?? this.n;\n        this.logitBias = fields?.logitBias;\n        this.stop = fields?.stopSequences ?? fields?.stop;\n        this.stopSequences = this.stop;\n        this.user = fields?.user;\n        this.__includeRawResponse = fields?.__includeRawResponse;\n        this.audio = fields?.audio;\n        this.modalities = fields?.modalities;\n        this.reasoningEffort = fields?.reasoningEffort ?? fields?.reasoning?.effort;\n        this.reasoning =\n            fields?.reasoning ??\n                (fields?.reasoningEffort\n                    ? { effort: fields.reasoningEffort }\n                    : undefined);\n        this.maxTokens = fields?.maxCompletionTokens ?? fields?.maxTokens;\n        this.useResponsesApi = fields?.useResponsesApi ?? this.useResponsesApi;\n        this.disableStreaming = fields?.disableStreaming ?? this.disableStreaming;\n        this.streaming = fields?.streaming ?? false;\n        if (this.disableStreaming)\n            this.streaming = false;\n        this.streamUsage = fields?.streamUsage ?? this.streamUsage;\n        if (this.disableStreaming)\n            this.streamUsage = false;\n        this.clientConfig = {\n            apiKey: this.apiKey,\n            organization: this.organization,\n            dangerouslyAllowBrowser: true,\n            ...fields?.configuration,\n        };\n        // If `supportsStrictToolCalling` is explicitly set, use that value.\n        // Else leave undefined so it's not passed to OpenAI.\n        if (fields?.supportsStrictToolCalling !== undefined) {\n            this.supportsStrictToolCalling = fields.supportsStrictToolCalling;\n        }\n        this.zdrEnabled = fields?.zdrEnabled ?? false;\n    }\n    getLsParams(options) {\n        const params = this.invocationParams(options);\n        return {\n            ls_provider: \"openai\",\n            ls_model_name: this.model,\n            ls_model_type: \"chat\",\n            ls_temperature: params.temperature ?? undefined,\n            ls_max_tokens: params.max_tokens ?? undefined,\n            ls_stop: options.stop,\n        };\n    }\n    bindTools(tools, kwargs) {\n        let strict;\n        if (kwargs?.strict !== undefined) {\n            strict = kwargs.strict;\n        }\n        else if (this.supportsStrictToolCalling !== undefined) {\n            strict = this.supportsStrictToolCalling;\n        }\n        return this.withConfig({\n            tools: tools.map((tool) => isBuiltInTool(tool)\n                ? tool\n                : _convertChatOpenAIToolTypeToOpenAITool(tool, { strict })),\n            ...kwargs,\n        });\n    }\n    createResponseFormat(resFormat) {\n        if (resFormat &&\n            resFormat.type === \"json_schema\" &&\n            resFormat.json_schema.schema &&\n            isInteropZodSchema(resFormat.json_schema.schema)) {\n            return interopZodResponseFormat(resFormat.json_schema.schema, resFormat.json_schema.name, {\n                description: resFormat.json_schema.description,\n            });\n        }\n        return resFormat;\n    }\n    getReasoningParams(options) {\n        if (!isReasoningModel(this.model)) {\n            return;\n        }\n        let reasoning;\n        // apply reasoning options in reverse order of priority without else blocks so that highest priority overrides lowest priority\n        if (this.reasoningEffort !== undefined) {\n            reasoning = { effort: this.reasoningEffort };\n        }\n        if (this.reasoning !== undefined) {\n            reasoning = {\n                ...reasoning,\n                ...this.reasoning,\n            };\n        }\n        if (options?.reasoning_effort !== undefined) {\n            reasoning = {\n                ...reasoning,\n                effort: options.reasoning_effort,\n            };\n        }\n        if (options?.reasoning !== undefined) {\n            reasoning = {\n                ...reasoning,\n                ...options.reasoning,\n            };\n        }\n        return reasoning;\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */\n    invocationParams(options, extra) {\n        let strict;\n        if (options?.strict !== undefined) {\n            strict = options.strict;\n        }\n        else if (this.supportsStrictToolCalling !== undefined) {\n            strict = this.supportsStrictToolCalling;\n        }\n        if (this._useResponseApi(options)) {\n            const params = {\n                model: this.model,\n                temperature: this.temperature,\n                top_p: this.topP,\n                user: this.user,\n                // if include_usage is set or streamUsage then stream must be set to true.\n                stream: this.streaming,\n                previous_response_id: options?.previous_response_id,\n                truncation: options?.truncation,\n                include: options?.include,\n                tools: options?.tools?.length\n                    ? _reduceChatOpenAIToolsForResponses(options.tools, {\n                        stream: this.streaming,\n                        strict,\n                    })\n                    : undefined,\n                tool_choice: isBuiltInToolChoice(options?.tool_choice)\n                    ? options?.tool_choice\n                    : (() => {\n                        const formatted = formatToOpenAIToolChoice(options?.tool_choice);\n                        if (typeof formatted === \"object\" && \"type\" in formatted) {\n                            return { type: \"function\", name: formatted.function.name };\n                        }\n                        else {\n                            return undefined;\n                        }\n                    })(),\n                text: (() => {\n                    if (options?.text)\n                        return options.text;\n                    const format = this.createResponseFormat(options?.response_format);\n                    if (format?.type === \"json_schema\") {\n                        if (format.json_schema.schema != null) {\n                            return {\n                                format: {\n                                    type: \"json_schema\",\n                                    schema: format.json_schema.schema,\n                                    description: format.json_schema.description,\n                                    name: format.json_schema.name,\n                                    strict: format.json_schema.strict,\n                                },\n                            };\n                        }\n                        return undefined;\n                    }\n                    return { format };\n                })(),\n                parallel_tool_calls: options?.parallel_tool_calls,\n                max_output_tokens: this.maxTokens === -1 ? undefined : this.maxTokens,\n                ...(this.zdrEnabled ? { store: false } : {}),\n                ...this.modelKwargs,\n            };\n            const reasoning = this.getReasoningParams(options);\n            if (reasoning !== undefined) {\n                params.reasoning = reasoning;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return params;\n        }\n        let streamOptionsConfig = {};\n        if (options?.stream_options !== undefined) {\n            streamOptionsConfig = { stream_options: options.stream_options };\n        }\n        else if (this.streamUsage && (this.streaming || extra?.streaming)) {\n            streamOptionsConfig = { stream_options: { include_usage: true } };\n        }\n        const params = {\n            model: this.model,\n            temperature: this.temperature,\n            top_p: this.topP,\n            frequency_penalty: this.frequencyPenalty,\n            presence_penalty: this.presencePenalty,\n            logprobs: this.logprobs,\n            top_logprobs: this.topLogprobs,\n            n: this.n,\n            logit_bias: this.logitBias,\n            stop: options?.stop ?? this.stopSequences,\n            user: this.user,\n            // if include_usage is set or streamUsage then stream must be set to true.\n            stream: this.streaming,\n            functions: options?.functions,\n            function_call: options?.function_call,\n            tools: options?.tools?.length\n                ? options.tools.map((tool) => _convertChatOpenAIToolTypeToOpenAITool(tool, { strict }))\n                : undefined,\n            tool_choice: formatToOpenAIToolChoice(options?.tool_choice),\n            response_format: this.createResponseFormat(options?.response_format),\n            seed: options?.seed,\n            ...streamOptionsConfig,\n            parallel_tool_calls: options?.parallel_tool_calls,\n            ...(this.audio || options?.audio\n                ? { audio: this.audio || options?.audio }\n                : {}),\n            ...(this.modalities || options?.modalities\n                ? { modalities: this.modalities || options?.modalities }\n                : {}),\n            ...this.modelKwargs,\n        };\n        if (options?.prediction !== undefined) {\n            params.prediction = options.prediction;\n        }\n        const reasoning = this.getReasoningParams(options);\n        if (reasoning !== undefined && reasoning.effort !== undefined) {\n            params.reasoning_effort = reasoning.effort;\n        }\n        if (isReasoningModel(params.model)) {\n            params.max_completion_tokens =\n                this.maxTokens === -1 ? undefined : this.maxTokens;\n        }\n        else {\n            params.max_tokens = this.maxTokens === -1 ? undefined : this.maxTokens;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return params;\n    }\n    _convertOpenAIChatCompletionMessageToBaseMessage(message, rawResponse) {\n        const rawToolCalls = message.tool_calls;\n        switch (message.role) {\n            case \"assistant\": {\n                const toolCalls = [];\n                const invalidToolCalls = [];\n                for (const rawToolCall of rawToolCalls ?? []) {\n                    try {\n                        toolCalls.push(parseToolCall(rawToolCall, { returnId: true }));\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    }\n                    catch (e) {\n                        invalidToolCalls.push(makeInvalidToolCall(rawToolCall, e.message));\n                    }\n                }\n                const additional_kwargs = {\n                    function_call: message.function_call,\n                    tool_calls: rawToolCalls,\n                };\n                if (this.__includeRawResponse !== undefined) {\n                    additional_kwargs.__raw_response = rawResponse;\n                }\n                const response_metadata = {\n                    model_name: rawResponse.model,\n                    ...(rawResponse.system_fingerprint\n                        ? {\n                            usage: { ...rawResponse.usage },\n                            system_fingerprint: rawResponse.system_fingerprint,\n                        }\n                        : {}),\n                };\n                if (message.audio) {\n                    additional_kwargs.audio = message.audio;\n                }\n                return new AIMessage({\n                    content: message.content || \"\",\n                    tool_calls: toolCalls,\n                    invalid_tool_calls: invalidToolCalls,\n                    additional_kwargs,\n                    response_metadata,\n                    id: rawResponse.id,\n                });\n            }\n            default:\n                return new ChatMessage(message.content || \"\", message.role ?? \"unknown\");\n        }\n    }\n    _convertOpenAIDeltaToBaseMessageChunk(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    delta, rawResponse, defaultRole) {\n        const role = delta.role ?? defaultRole;\n        const content = delta.content ?? \"\";\n        let additional_kwargs;\n        if (delta.function_call) {\n            additional_kwargs = {\n                function_call: delta.function_call,\n            };\n        }\n        else if (delta.tool_calls) {\n            additional_kwargs = {\n                tool_calls: delta.tool_calls,\n            };\n        }\n        else {\n            additional_kwargs = {};\n        }\n        if (this.__includeRawResponse) {\n            additional_kwargs.__raw_response = rawResponse;\n        }\n        if (delta.audio) {\n            additional_kwargs.audio = {\n                ...delta.audio,\n                index: rawResponse.choices[0].index,\n            };\n        }\n        const response_metadata = { usage: { ...rawResponse.usage } };\n        if (role === \"user\") {\n            return new HumanMessageChunk({ content, response_metadata });\n        }\n        else if (role === \"assistant\") {\n            const toolCallChunks = [];\n            if (Array.isArray(delta.tool_calls)) {\n                for (const rawToolCall of delta.tool_calls) {\n                    toolCallChunks.push({\n                        name: rawToolCall.function?.name,\n                        args: rawToolCall.function?.arguments,\n                        id: rawToolCall.id,\n                        index: rawToolCall.index,\n                        type: \"tool_call_chunk\",\n                    });\n                }\n            }\n            return new AIMessageChunk({\n                content,\n                tool_call_chunks: toolCallChunks,\n                additional_kwargs,\n                id: rawResponse.id,\n                response_metadata,\n            });\n        }\n        else if (role === \"system\") {\n            return new SystemMessageChunk({ content, response_metadata });\n        }\n        else if (role === \"developer\") {\n            return new SystemMessageChunk({\n                content,\n                response_metadata,\n                additional_kwargs: {\n                    __openai_role__: \"developer\",\n                },\n            });\n        }\n        else if (role === \"function\") {\n            return new FunctionMessageChunk({\n                content,\n                additional_kwargs,\n                name: delta.name,\n                response_metadata,\n            });\n        }\n        else if (role === \"tool\") {\n            return new ToolMessageChunk({\n                content,\n                additional_kwargs,\n                tool_call_id: delta.tool_call_id,\n                response_metadata,\n            });\n        }\n        else {\n            return new ChatMessageChunk({ content, role, response_metadata });\n        }\n    }\n    /** @ignore */\n    _identifyingParams() {\n        return {\n            model_name: this.model,\n            ...this.invocationParams(),\n            ...this.clientConfig,\n        };\n    }\n    async *_streamResponseChunks(messages, options, runManager) {\n        if (this._useResponseApi(options)) {\n            const streamIterable = await this.responseApiWithRetry({\n                ...this.invocationParams(options, { streaming: true }),\n                input: _convertMessagesToOpenAIResponsesParams(messages, this.model, this.zdrEnabled),\n                stream: true,\n            }, options);\n            for await (const data of streamIterable) {\n                const chunk = _convertOpenAIResponsesDeltaToBaseMessageChunk(data);\n                if (chunk == null)\n                    continue;\n                yield chunk;\n            }\n            return;\n        }\n        const messagesMapped = _convertMessagesToOpenAIParams(messages, this.model);\n        const params = {\n            ...this.invocationParams(options, {\n                streaming: true,\n            }),\n            messages: messagesMapped,\n            stream: true,\n        };\n        let defaultRole;\n        const streamIterable = await this.completionWithRetry(params, options);\n        let usage;\n        for await (const data of streamIterable) {\n            const choice = data?.choices?.[0];\n            if (data.usage) {\n                usage = data.usage;\n            }\n            if (!choice) {\n                continue;\n            }\n            const { delta } = choice;\n            if (!delta) {\n                continue;\n            }\n            const chunk = this._convertOpenAIDeltaToBaseMessageChunk(delta, data, defaultRole);\n            defaultRole = delta.role ?? defaultRole;\n            const newTokenIndices = {\n                prompt: options.promptIndex ?? 0,\n                completion: choice.index ?? 0,\n            };\n            if (typeof chunk.content !== \"string\") {\n                console.log(\"[WARNING]: Received non-string content from OpenAI. This is currently not supported.\");\n                continue;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const generationInfo = { ...newTokenIndices };\n            if (choice.finish_reason != null) {\n                generationInfo.finish_reason = choice.finish_reason;\n                // Only include system fingerprint in the last chunk for now\n                // to avoid concatenation issues\n                generationInfo.system_fingerprint = data.system_fingerprint;\n                generationInfo.model_name = data.model;\n            }\n            if (this.logprobs) {\n                generationInfo.logprobs = choice.logprobs;\n            }\n            const generationChunk = new ChatGenerationChunk({\n                message: chunk,\n                text: chunk.content,\n                generationInfo,\n            });\n            yield generationChunk;\n            await runManager?.handleLLMNewToken(generationChunk.text ?? \"\", newTokenIndices, undefined, undefined, undefined, { chunk: generationChunk });\n        }\n        if (usage) {\n            const inputTokenDetails = {\n                ...(usage.prompt_tokens_details?.audio_tokens !== null && {\n                    audio: usage.prompt_tokens_details?.audio_tokens,\n                }),\n                ...(usage.prompt_tokens_details?.cached_tokens !== null && {\n                    cache_read: usage.prompt_tokens_details?.cached_tokens,\n                }),\n            };\n            const outputTokenDetails = {\n                ...(usage.completion_tokens_details?.audio_tokens !== null && {\n                    audio: usage.completion_tokens_details?.audio_tokens,\n                }),\n                ...(usage.completion_tokens_details?.reasoning_tokens !== null && {\n                    reasoning: usage.completion_tokens_details?.reasoning_tokens,\n                }),\n            };\n            const generationChunk = new ChatGenerationChunk({\n                message: new AIMessageChunk({\n                    content: \"\",\n                    response_metadata: {\n                        usage: { ...usage },\n                    },\n                    usage_metadata: {\n                        input_tokens: usage.prompt_tokens,\n                        output_tokens: usage.completion_tokens,\n                        total_tokens: usage.total_tokens,\n                        ...(Object.keys(inputTokenDetails).length > 0 && {\n                            input_token_details: inputTokenDetails,\n                        }),\n                        ...(Object.keys(outputTokenDetails).length > 0 && {\n                            output_token_details: outputTokenDetails,\n                        }),\n                    },\n                }),\n                text: \"\",\n            });\n            yield generationChunk;\n        }\n        if (options.signal?.aborted) {\n            throw new Error(\"AbortError\");\n        }\n    }\n    /**\n     * Get the identifying parameters for the model\n     *\n     */\n    identifyingParams() {\n        return this._identifyingParams();\n    }\n    /** @ignore */\n    async _responseApiGenerate(messages, options, runManager) {\n        const invocationParams = this.invocationParams(options);\n        if (invocationParams.stream) {\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            let finalChunk;\n            for await (const chunk of stream) {\n                chunk.message.response_metadata = {\n                    ...chunk.generationInfo,\n                    ...chunk.message.response_metadata,\n                };\n                finalChunk = finalChunk?.concat(chunk) ?? chunk;\n            }\n            return {\n                generations: finalChunk ? [finalChunk] : [],\n                llmOutput: {\n                    estimatedTokenUsage: finalChunk?.message\n                        ?.usage_metadata,\n                },\n            };\n        }\n        const input = _convertMessagesToOpenAIResponsesParams(messages, this.model, this.zdrEnabled);\n        const data = await this.responseApiWithRetry({\n            input,\n            ...invocationParams,\n        }, { signal: options?.signal, ...options?.options });\n        return {\n            generations: [\n                {\n                    text: data.output_text,\n                    message: _convertOpenAIResponsesMessageToBaseMessage(data),\n                },\n            ],\n            llmOutput: {\n                id: data.id,\n                estimatedTokenUsage: data.usage\n                    ? {\n                        promptTokens: data.usage.input_tokens,\n                        completionTokens: data.usage.output_tokens,\n                        totalTokens: data.usage.total_tokens,\n                    }\n                    : undefined,\n            },\n        };\n    }\n    /**\n     * Determines whether the responses API should be used for the given request.\n     *\n     * @internal\n     *\n     * @param options The parsed call options for the request.\n     * @returns `true` if the responses API should be used, either because it is explicitly enabled,\n     * or because the request requires it.\n     */\n    _useResponseApi(options) {\n        const usesBuiltInTools = options?.tools?.some(isBuiltInTool);\n        const hasResponsesOnlyKwargs = options?.previous_response_id != null ||\n            options?.text != null ||\n            options?.truncation != null ||\n            options?.include != null ||\n            options?.reasoning?.summary != null ||\n            this.reasoning?.summary != null;\n        return this.useResponsesApi || usesBuiltInTools || hasResponsesOnlyKwargs;\n    }\n    /** @ignore */\n    async _generate(messages, options, runManager) {\n        if (this._useResponseApi(options)) {\n            return this._responseApiGenerate(messages, options, runManager);\n        }\n        const usageMetadata = {};\n        const params = this.invocationParams(options);\n        const messagesMapped = _convertMessagesToOpenAIParams(messages, this.model);\n        if (params.stream) {\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            const finalChunks = {};\n            for await (const chunk of stream) {\n                chunk.message.response_metadata = {\n                    ...chunk.generationInfo,\n                    ...chunk.message.response_metadata,\n                };\n                const index = chunk.generationInfo?.completion ?? 0;\n                if (finalChunks[index] === undefined) {\n                    finalChunks[index] = chunk;\n                }\n                else {\n                    finalChunks[index] = finalChunks[index].concat(chunk);\n                }\n            }\n            const generations = Object.entries(finalChunks)\n                .sort(([aKey], [bKey]) => parseInt(aKey, 10) - parseInt(bKey, 10))\n                .map(([_, value]) => value);\n            const { functions, function_call } = this.invocationParams(options);\n            // OpenAI does not support token usage report under stream mode,\n            // fallback to estimation.\n            const promptTokenUsage = await this.getEstimatedTokenCountFromPrompt(messages, functions, function_call);\n            const completionTokenUsage = await this.getNumTokensFromGenerations(generations);\n            usageMetadata.input_tokens = promptTokenUsage;\n            usageMetadata.output_tokens = completionTokenUsage;\n            usageMetadata.total_tokens = promptTokenUsage + completionTokenUsage;\n            return {\n                generations,\n                llmOutput: {\n                    estimatedTokenUsage: {\n                        promptTokens: usageMetadata.input_tokens,\n                        completionTokens: usageMetadata.output_tokens,\n                        totalTokens: usageMetadata.total_tokens,\n                    },\n                },\n            };\n        }\n        else {\n            let data;\n            if (options.response_format &&\n                options.response_format.type === \"json_schema\") {\n                data = await this.betaParsedCompletionWithRetry({\n                    ...params,\n                    stream: false,\n                    messages: messagesMapped,\n                }, {\n                    signal: options?.signal,\n                    ...options?.options,\n                });\n            }\n            else {\n                data = await this.completionWithRetry({\n                    ...params,\n                    stream: false,\n                    messages: messagesMapped,\n                }, {\n                    signal: options?.signal,\n                    ...options?.options,\n                });\n            }\n            const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens, prompt_tokens_details: promptTokensDetails, completion_tokens_details: completionTokensDetails, } = data?.usage ?? {};\n            if (completionTokens) {\n                usageMetadata.output_tokens =\n                    (usageMetadata.output_tokens ?? 0) + completionTokens;\n            }\n            if (promptTokens) {\n                usageMetadata.input_tokens =\n                    (usageMetadata.input_tokens ?? 0) + promptTokens;\n            }\n            if (totalTokens) {\n                usageMetadata.total_tokens =\n                    (usageMetadata.total_tokens ?? 0) + totalTokens;\n            }\n            if (promptTokensDetails?.audio_tokens !== null ||\n                promptTokensDetails?.cached_tokens !== null) {\n                usageMetadata.input_token_details = {\n                    ...(promptTokensDetails?.audio_tokens !== null && {\n                        audio: promptTokensDetails?.audio_tokens,\n                    }),\n                    ...(promptTokensDetails?.cached_tokens !== null && {\n                        cache_read: promptTokensDetails?.cached_tokens,\n                    }),\n                };\n            }\n            if (completionTokensDetails?.audio_tokens !== null ||\n                completionTokensDetails?.reasoning_tokens !== null) {\n                usageMetadata.output_token_details = {\n                    ...(completionTokensDetails?.audio_tokens !== null && {\n                        audio: completionTokensDetails?.audio_tokens,\n                    }),\n                    ...(completionTokensDetails?.reasoning_tokens !== null && {\n                        reasoning: completionTokensDetails?.reasoning_tokens,\n                    }),\n                };\n            }\n            const generations = [];\n            for (const part of data?.choices ?? []) {\n                const text = part.message?.content ?? \"\";\n                const generation = {\n                    text,\n                    message: this._convertOpenAIChatCompletionMessageToBaseMessage(part.message ?? { role: \"assistant\" }, data),\n                };\n                generation.generationInfo = {\n                    ...(part.finish_reason ? { finish_reason: part.finish_reason } : {}),\n                    ...(part.logprobs ? { logprobs: part.logprobs } : {}),\n                };\n                if (isAIMessage(generation.message)) {\n                    generation.message.usage_metadata = usageMetadata;\n                }\n                // Fields are not serialized unless passed to the constructor\n                // Doing this ensures all fields on the message are serialized\n                generation.message = new AIMessage(Object.fromEntries(Object.entries(generation.message).filter(([key]) => !key.startsWith(\"lc_\"))));\n                generations.push(generation);\n            }\n            return {\n                generations,\n                llmOutput: {\n                    tokenUsage: {\n                        promptTokens: usageMetadata.input_tokens,\n                        completionTokens: usageMetadata.output_tokens,\n                        totalTokens: usageMetadata.total_tokens,\n                    },\n                },\n            };\n        }\n    }\n    /**\n     * Estimate the number of tokens a prompt will use.\n     * Modified from: https://github.com/hmarr/openai-chat-tokens/blob/main/src/index.ts\n     */\n    async getEstimatedTokenCountFromPrompt(messages, functions, function_call) {\n        // It appears that if functions are present, the first system message is padded with a trailing newline. This\n        // was inferred by trying lots of combinations of messages and functions and seeing what the token counts were.\n        let tokens = (await this.getNumTokensFromMessages(messages)).totalCount;\n        // If there are functions, add the function definitions as they count towards token usage\n        if (functions && function_call !== \"auto\") {\n            const promptDefinitions = formatFunctionDefinitions(functions);\n            tokens += await this.getNumTokens(promptDefinitions);\n            tokens += 9; // Add nine per completion\n        }\n        // If there's a system message _and_ functions are present, subtract four tokens. I assume this is because\n        // functions typically add a system message, but reuse the first one if it's already there. This offsets\n        // the extra 9 tokens added by the function definitions.\n        if (functions && messages.find((m) => m._getType() === \"system\")) {\n            tokens -= 4;\n        }\n        // If function_call is 'none', add one token.\n        // If it's a FunctionCall object, add 4 + the number of tokens in the function name.\n        // If it's undefined or 'auto', don't add anything.\n        if (function_call === \"none\") {\n            tokens += 1;\n        }\n        else if (typeof function_call === \"object\") {\n            tokens += (await this.getNumTokens(function_call.name)) + 4;\n        }\n        return tokens;\n    }\n    /**\n     * Estimate the number of tokens an array of generations have used.\n     */\n    async getNumTokensFromGenerations(generations) {\n        const generationUsages = await Promise.all(generations.map(async (generation) => {\n            if (generation.message.additional_kwargs?.function_call) {\n                return (await this.getNumTokensFromMessages([generation.message]))\n                    .countPerMessage[0];\n            }\n            else {\n                return await this.getNumTokens(generation.message.content);\n            }\n        }));\n        return generationUsages.reduce((a, b) => a + b, 0);\n    }\n    async getNumTokensFromMessages(messages) {\n        let totalCount = 0;\n        let tokensPerMessage = 0;\n        let tokensPerName = 0;\n        // From: https://github.com/openai/openai-cookbook/blob/main/examples/How_to_format_inputs_to_ChatGPT_models.ipynb\n        if (this.model === \"gpt-3.5-turbo-0301\") {\n            tokensPerMessage = 4;\n            tokensPerName = -1;\n        }\n        else {\n            tokensPerMessage = 3;\n            tokensPerName = 1;\n        }\n        const countPerMessage = await Promise.all(messages.map(async (message) => {\n            const textCount = await this.getNumTokens(message.content);\n            const roleCount = await this.getNumTokens(messageToOpenAIRole(message));\n            const nameCount = message.name !== undefined\n                ? tokensPerName + (await this.getNumTokens(message.name))\n                : 0;\n            let count = textCount + tokensPerMessage + roleCount + nameCount;\n            // From: https://github.com/hmarr/openai-chat-tokens/blob/main/src/index.ts messageTokenEstimate\n            const openAIMessage = message;\n            if (openAIMessage._getType() === \"function\") {\n                count -= 2;\n            }\n            if (openAIMessage.additional_kwargs?.function_call) {\n                count += 3;\n            }\n            if (openAIMessage?.additional_kwargs.function_call?.name) {\n                count += await this.getNumTokens(openAIMessage.additional_kwargs.function_call?.name);\n            }\n            if (openAIMessage.additional_kwargs.function_call?.arguments) {\n                try {\n                    count += await this.getNumTokens(\n                    // Remove newlines and spaces\n                    JSON.stringify(JSON.parse(openAIMessage.additional_kwargs.function_call?.arguments)));\n                }\n                catch (error) {\n                    console.error(\"Error parsing function arguments\", error, JSON.stringify(openAIMessage.additional_kwargs.function_call));\n                    count += await this.getNumTokens(openAIMessage.additional_kwargs.function_call?.arguments);\n                }\n            }\n            totalCount += count;\n            return count;\n        }));\n        totalCount += 3; // every reply is primed with <|start|>assistant<|message|>\n        return { totalCount, countPerMessage };\n    }\n    async completionWithRetry(request, options) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async () => {\n            try {\n                const res = await this.client.chat.completions.create(request, requestOptions);\n                return res;\n            }\n            catch (e) {\n                const error = wrapOpenAIClientError(e);\n                throw error;\n            }\n        });\n    }\n    async responseApiWithRetry(request, options) {\n        return this.caller.call(async () => {\n            const requestOptions = this._getClientOptions(options);\n            try {\n                // use parse if dealing with json_schema\n                if (request.text?.format?.type === \"json_schema\" && !request.stream) {\n                    return await this.client.responses.parse(request, requestOptions);\n                }\n                return await this.client.responses.create(request, requestOptions);\n            }\n            catch (e) {\n                const error = wrapOpenAIClientError(e);\n                throw error;\n            }\n        });\n    }\n    /**\n     * Call the beta chat completions parse endpoint. This should only be called if\n     * response_format is set to \"json_object\".\n     * @param {OpenAIClient.Chat.ChatCompletionCreateParamsNonStreaming} request\n     * @param {OpenAICoreRequestOptions | undefined} options\n     */\n    async betaParsedCompletionWithRetry(request, options\n    // Avoid relying importing a beta type with no official entrypoint\n    ) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async () => {\n            try {\n                const res = await this.client.chat.completions.parse(request, requestOptions);\n                return res;\n            }\n            catch (e) {\n                const error = wrapOpenAIClientError(e);\n                throw error;\n            }\n        });\n    }\n    _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                baseURL: this.clientConfig.baseURL,\n            };\n            const endpoint = getEndpoint(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0,\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new OpenAIClient(params);\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options,\n        };\n        return requestOptions;\n    }\n    _llmType() {\n        return \"openai\";\n    }\n    /** @ignore */\n    _combineLLMOutput(...llmOutputs) {\n        return llmOutputs.reduce((acc, llmOutput) => {\n            if (llmOutput && llmOutput.tokenUsage) {\n                acc.tokenUsage.completionTokens +=\n                    llmOutput.tokenUsage.completionTokens ?? 0;\n                acc.tokenUsage.promptTokens += llmOutput.tokenUsage.promptTokens ?? 0;\n                acc.tokenUsage.totalTokens += llmOutput.tokenUsage.totalTokens ?? 0;\n            }\n            return acc;\n        }, {\n            tokenUsage: {\n                completionTokens: 0,\n                promptTokens: 0,\n                totalTokens: 0,\n            },\n        });\n    }\n    withStructuredOutput(outputSchema, config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let schema;\n        let name;\n        let method;\n        let includeRaw;\n        if (isStructuredOutputMethodParams(outputSchema)) {\n            schema = outputSchema.schema;\n            name = outputSchema.name;\n            method = outputSchema.method;\n            includeRaw = outputSchema.includeRaw;\n        }\n        else {\n            schema = outputSchema;\n            name = config?.name;\n            method = config?.method;\n            includeRaw = config?.includeRaw;\n        }\n        let llm;\n        let outputParser;\n        if (config?.strict !== undefined && method === \"jsonMode\") {\n            throw new Error(\"Argument `strict` is only supported for `method` = 'function_calling'\");\n        }\n        if (!this.model.startsWith(\"gpt-3\") &&\n            !this.model.startsWith(\"gpt-4-\") &&\n            this.model !== \"gpt-4\") {\n            if (method === undefined) {\n                method = \"jsonSchema\";\n            }\n        }\n        else if (method === \"jsonSchema\") {\n            console.warn(`[WARNING]: JSON Schema is not supported for model \"${this.model}\". Falling back to tool calling.`);\n        }\n        if (method === \"jsonMode\") {\n            let outputFormatSchema;\n            if (isInteropZodSchema(schema)) {\n                outputParser = StructuredOutputParser.fromZodSchema(schema);\n                outputFormatSchema = toJsonSchema(schema);\n            }\n            else {\n                outputParser = new JsonOutputParser();\n            }\n            llm = this.withConfig({\n                response_format: { type: \"json_object\" },\n                ls_structured_output_format: {\n                    kwargs: { method: \"jsonMode\" },\n                    schema: outputFormatSchema,\n                },\n            });\n        }\n        else if (method === \"jsonSchema\") {\n            llm = this.withConfig({\n                response_format: {\n                    type: \"json_schema\",\n                    json_schema: {\n                        name: name ?? \"extract\",\n                        description: getSchemaDescription(schema),\n                        schema,\n                        strict: config?.strict,\n                    },\n                },\n                ls_structured_output_format: {\n                    kwargs: { method: \"jsonSchema\" },\n                    schema: toJsonSchema(schema),\n                },\n            });\n            if (isInteropZodSchema(schema)) {\n                const altParser = StructuredOutputParser.fromZodSchema(schema);\n                outputParser = RunnableLambda.from((aiMessage) => {\n                    if (\"parsed\" in aiMessage.additional_kwargs) {\n                        return aiMessage.additional_kwargs.parsed;\n                    }\n                    return altParser;\n                });\n            }\n            else {\n                outputParser = new JsonOutputParser();\n            }\n        }\n        else {\n            let functionName = name ?? \"extract\";\n            // Is function calling\n            if (isInteropZodSchema(schema)) {\n                const asJsonSchema = toJsonSchema(schema);\n                llm = this.withConfig({\n                    tools: [\n                        {\n                            type: \"function\",\n                            function: {\n                                name: functionName,\n                                description: asJsonSchema.description,\n                                parameters: asJsonSchema,\n                            },\n                        },\n                    ],\n                    tool_choice: {\n                        type: \"function\",\n                        function: {\n                            name: functionName,\n                        },\n                    },\n                    ls_structured_output_format: {\n                        kwargs: { method: \"functionCalling\" },\n                        schema: asJsonSchema,\n                    },\n                    // Do not pass `strict` argument to OpenAI if `config.strict` is undefined\n                    ...(config?.strict !== undefined ? { strict: config.strict } : {}),\n                });\n                outputParser = new JsonOutputKeyToolsParser({\n                    returnSingle: true,\n                    keyName: functionName,\n                    zodSchema: schema,\n                });\n            }\n            else {\n                let openAIFunctionDefinition;\n                if (typeof schema.name === \"string\" &&\n                    typeof schema.parameters === \"object\" &&\n                    schema.parameters != null) {\n                    openAIFunctionDefinition = schema;\n                    functionName = schema.name;\n                }\n                else {\n                    functionName = schema.title ?? functionName;\n                    openAIFunctionDefinition = {\n                        name: functionName,\n                        description: schema.description ?? \"\",\n                        parameters: schema,\n                    };\n                }\n                llm = this.withConfig({\n                    tools: [\n                        {\n                            type: \"function\",\n                            function: openAIFunctionDefinition,\n                        },\n                    ],\n                    tool_choice: {\n                        type: \"function\",\n                        function: {\n                            name: functionName,\n                        },\n                    },\n                    ls_structured_output_format: {\n                        kwargs: { method: \"functionCalling\" },\n                        schema: toJsonSchema(schema),\n                    },\n                    // Do not pass `strict` argument to OpenAI if `config.strict` is undefined\n                    ...(config?.strict !== undefined ? { strict: config.strict } : {}),\n                });\n                outputParser = new JsonOutputKeyToolsParser({\n                    returnSingle: true,\n                    keyName: functionName,\n                });\n            }\n        }\n        if (!includeRaw) {\n            return llm.pipe(outputParser);\n        }\n        const parserAssign = RunnablePassthrough.assign({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            parsed: (input, config) => outputParser.invoke(input.raw, config),\n        });\n        const parserNone = RunnablePassthrough.assign({\n            parsed: () => null,\n        });\n        const parsedWithFallback = parserAssign.withFallbacks({\n            fallbacks: [parserNone],\n        });\n        return RunnableSequence.from([{ raw: llm }, parsedWithFallback]);\n    }\n}\nfunction isStructuredOutputMethodParams(x\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    return (x !== undefined &&\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        typeof x.schema ===\n            \"object\");\n}\n// inlined from openai/lib/parser.ts\nfunction makeParseableResponseFormat(response_format, parser) {\n    const obj = { ...response_format };\n    Object.defineProperties(obj, {\n        $brand: {\n            value: \"auto-parseable-response-format\",\n            enumerable: false,\n        },\n        $parseRaw: {\n            value: parser,\n            enumerable: false,\n        },\n    });\n    return obj;\n}\nfunction interopZodResponseFormat(zodSchema, name, props) {\n    if (isZodSchemaV3(zodSchema)) {\n        return zodResponseFormat(zodSchema, name, props);\n    }\n    if (isZodSchemaV4(zodSchema)) {\n        return makeParseableResponseFormat({\n            type: \"json_schema\",\n            json_schema: {\n                ...props,\n                name,\n                strict: true,\n                schema: z4.toJSONSchema(zodSchema, {\n                    cycles: \"ref\", // equivalent to nameStrategy: 'duplicate-ref'\n                    reused: \"ref\", // equivalent to $refStrategy: 'extract-to-root'\n                    override(ctx) {\n                        ctx.jsonSchema.title = name; // equivalent to `name` property\n                        // TODO: implement `nullableStrategy` patch-fix (zod doesn't support openApi3 json schema target)\n                        // TODO: implement `openaiStrictMode` patch-fix (where optional properties without `nullable` are not supported)\n                    },\n                    /// property equivalents from native `zodResponseFormat` fn\n                    // openaiStrictMode: true,\n                    // name,\n                    // nameStrategy: 'duplicate-ref',\n                    // $refStrategy: 'extract-to-root',\n                    // nullableStrategy: 'property',\n                }),\n            },\n        }, (content) => z4.parse(zodSchema, JSON.parse(content)));\n    }\n    throw new Error(\"Unsupported schema response format\");\n}\n", "export * from './dist/outputs.js'", "export * from '../dist/utils/env.js'", "export * from '../dist/language_models/chat_models.js'", "export * from '../dist/language_models/base.js'", "export * from './dist/output_parsers/index.js'", "export * from '../dist/output_parsers/openai_tools/index.js'", "export * from \"./json_output_tools_parsers.js\";\n", "import { OutputParserException } from \"../base.js\";\nimport { parsePartialJson } from \"../json.js\";\nimport { BaseCumulativeTransformOutputParser, } from \"../transform.js\";\nimport { isAIMessage } from \"../../messages/ai.js\";\nimport { interopSafeParseAsync, } from \"../../utils/types/zod.js\";\nexport function parseToolCall(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCall, options) {\n    if (rawToolCall.function === undefined) {\n        return undefined;\n    }\n    let functionArgs;\n    if (options?.partial) {\n        try {\n            functionArgs = parsePartialJson(rawToolCall.function.arguments ?? \"{}\");\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n    else {\n        try {\n            functionArgs = JSON.parse(rawToolCall.function.arguments);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        }\n        catch (e) {\n            throw new OutputParserException([\n                `Function \"${rawToolCall.function.name}\" arguments:`,\n                ``,\n                rawToolCall.function.arguments,\n                ``,\n                `are not valid JSON.`,\n                `Error: ${e.message}`,\n            ].join(\"\\n\"));\n        }\n    }\n    const parsedToolCall = {\n        name: rawToolCall.function.name,\n        args: functionArgs,\n        type: \"tool_call\",\n    };\n    if (options?.returnId) {\n        parsedToolCall.id = rawToolCall.id;\n    }\n    return parsedToolCall;\n}\nexport function convertLangChainToolCallToOpenAI(toolCall) {\n    if (toolCall.id === undefined) {\n        throw new Error(`All OpenAI tool calls must have an \"id\" field.`);\n    }\n    return {\n        id: toolCall.id,\n        type: \"function\",\n        function: {\n            name: toolCall.name,\n            arguments: JSON.stringify(toolCall.args),\n        },\n    };\n}\nexport function makeInvalidToolCall(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCall, errorMsg) {\n    return {\n        name: rawToolCall.function?.name,\n        args: rawToolCall.function?.arguments,\n        id: rawToolCall.id,\n        error: errorMsg,\n        type: \"invalid_tool_call\",\n    };\n}\n/**\n * Class for parsing the output of a tool-calling LLM into a JSON object.\n */\nexport class JsonOutputToolsParser extends BaseCumulativeTransformOutputParser {\n    static lc_name() {\n        return \"JsonOutputToolsParser\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"returnId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"output_parsers\", \"openai_tools\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.returnId = fields?.returnId ?? this.returnId;\n    }\n    _diff() {\n        throw new Error(\"Not supported.\");\n    }\n    async parse() {\n        throw new Error(\"Not implemented.\");\n    }\n    async parseResult(generations) {\n        const result = await this.parsePartialResult(generations, false);\n        return result;\n    }\n    /**\n     * Parses the output and returns a JSON object. If `argsOnly` is true,\n     * only the arguments of the function call are returned.\n     * @param generations The output of the LLM to parse.\n     * @returns A JSON object representation of the function call or its arguments.\n     */\n    async parsePartialResult(generations, partial = true\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n        const message = generations[0].message;\n        let toolCalls;\n        if (isAIMessage(message) && message.tool_calls?.length) {\n            toolCalls = message.tool_calls.map((toolCall) => {\n                const { id, ...rest } = toolCall;\n                if (!this.returnId) {\n                    return rest;\n                }\n                return {\n                    id,\n                    ...rest,\n                };\n            });\n        }\n        else if (message.additional_kwargs.tool_calls !== undefined) {\n            const rawToolCalls = JSON.parse(JSON.stringify(message.additional_kwargs.tool_calls));\n            toolCalls = rawToolCalls.map((rawToolCall) => {\n                return parseToolCall(rawToolCall, { returnId: this.returnId, partial });\n            });\n        }\n        if (!toolCalls) {\n            return [];\n        }\n        const parsedToolCalls = [];\n        for (const toolCall of toolCalls) {\n            if (toolCall !== undefined) {\n                const backwardsCompatibleToolCall = {\n                    type: toolCall.name,\n                    args: toolCall.args,\n                    id: toolCall.id,\n                };\n                parsedToolCalls.push(backwardsCompatibleToolCall);\n            }\n        }\n        return parsedToolCalls;\n    }\n}\n/**\n * Class for parsing the output of a tool-calling LLM into a JSON object if you are\n * expecting only a single tool to be called.\n */\nexport class JsonOutputKeyToolsParser extends JsonOutputToolsParser {\n    static lc_name() {\n        return \"JsonOutputKeyToolsParser\";\n    }\n    constructor(params) {\n        super(params);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"output_parsers\", \"openai_tools\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"returnId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /** The type of tool calls to return. */\n        Object.defineProperty(this, \"keyName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Whether to return only the first tool call. */\n        Object.defineProperty(this, \"returnSingle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"zodSchema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keyName = params.keyName;\n        this.returnSingle = params.returnSingle ?? this.returnSingle;\n        this.zodSchema = params.zodSchema;\n    }\n    async _validateResult(result) {\n        if (this.zodSchema === undefined) {\n            return result;\n        }\n        const zodParsedResult = await interopSafeParseAsync(this.zodSchema, result);\n        if (zodParsedResult.success) {\n            return zodParsedResult.data;\n        }\n        else {\n            throw new OutputParserException(`Failed to parse. Text: \"${JSON.stringify(result, null, 2)}\". Error: ${JSON.stringify(zodParsedResult.error?.issues)}`, JSON.stringify(result, null, 2));\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async parsePartialResult(generations) {\n        const results = await super.parsePartialResult(generations);\n        const matchingResults = results.filter((result) => result.type === this.keyName);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let returnedValues = matchingResults;\n        if (!matchingResults.length) {\n            return undefined;\n        }\n        if (!this.returnId) {\n            returnedValues = matchingResults.map((result) => result.args);\n        }\n        if (this.returnSingle) {\n            return returnedValues[0];\n        }\n        return returnedValues;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async parseResult(generations) {\n        const results = await super.parsePartialResult(generations, false);\n        const matchingResults = results.filter((result) => result.type === this.keyName);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let returnedValues = matchingResults;\n        if (!matchingResults.length) {\n            return undefined;\n        }\n        if (!this.returnId) {\n            returnedValues = matchingResults.map((result) => result.args);\n        }\n        if (this.returnSingle) {\n            return this._validateResult(returnedValues[0]);\n        }\n        const toolCallResults = await Promise.all(returnedValues.map((value) => this._validateResult(value)));\n        return toolCallResults;\n    }\n}\n", "export * from '../dist/utils/types/index.js'", "export * from '../dist/utils/json_schema.js'", "/**\n * This function generates an endpoint URL for (Azure) OpenAI\n * based on the configuration parameters provided.\n *\n * @param {OpenAIEndpointConfig} config - The configuration object for the (Azure) endpoint.\n *\n * @property {string} config.azureOpenAIApiDeploymentName - The deployment name of Azure OpenAI.\n * @property {string} config.azureOpenAIApiInstanceName - The instance name of Azure OpenAI, e.g. `example-resource`.\n * @property {string} config.azureOpenAIApiKey - The API Key for Azure OpenAI.\n * @property {string} config.azureOpenAIBasePath - The base path for Azure OpenAI, e.g. `https://example-resource.azure.openai.com/openai/deployments/`.\n * @property {string} config.baseURL - Some other custom base path URL.\n * @property {string} config.azureOpenAIEndpoint - The endpoint for the Azure OpenAI instance, e.g. `https://example-resource.azure.openai.com/`.\n *\n * The function operates as follows:\n * - If both `azureOpenAIBasePath` and `azureOpenAIApiDeploymentName` (plus `azureOpenAIApiKey`) are provided, it returns an URL combining these two parameters (`${azureOpenAIBasePath}/${azureOpenAIApiDeploymentName}`).\n * - If both `azureOpenAIEndpoint` and `azureOpenAIApiDeploymentName` (plus `azureOpenAIApiKey`) are provided, it returns an URL combining these two parameters (`${azureOpenAIEndpoint}/openai/deployments/${azureOpenAIApiDeploymentName}`).\n * - If `azureOpenAIApiKey` is provided, it checks for `azureOpenAIApiInstanceName` and `azureOpenAIApiDeploymentName` and throws an error if any of these is missing. If both are provided, it generates an URL incorporating these parameters.\n * - If none of the above conditions are met, return any custom `baseURL`.\n * - The function returns the generated URL as a string, or undefined if no custom paths are specified.\n *\n * @throws Will throw an error if the necessary parameters for generating the URL are missing.\n *\n * @returns {string | undefined} The generated (Azure) OpenAI endpoint URL.\n */\nexport function getEndpoint(config) {\n    const { azureOpenAIApiDeploymentName, azureOpenAIApiInstanceName, azureOpenAIApiKey, azureOpenAIBasePath, baseURL, azureADTokenProvider, azureOpenAIEndpoint, } = config;\n    if ((azureOpenAIApiKey || azureADTokenProvider) &&\n        azureOpenAIBasePath &&\n        azureOpenAIApiDeploymentName) {\n        return `${azureOpenAIBasePath}/${azureOpenAIApiDeploymentName}`;\n    }\n    if ((azureOpenAIApiKey || azureADTokenProvider) &&\n        azureOpenAIEndpoint &&\n        azureOpenAIApiDeploymentName) {\n        return `${azureOpenAIEndpoint}/openai/deployments/${azureOpenAIApiDeploymentName}`;\n    }\n    if (azureOpenAIApiKey || azureADTokenProvider) {\n        if (!azureOpenAIApiInstanceName) {\n            throw new Error(\"azureOpenAIApiInstanceName is required when using azureOpenAIApiKey\");\n        }\n        if (!azureOpenAIApiDeploymentName) {\n            throw new Error(\"azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey\");\n        }\n        return `https://${azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${azureOpenAIApiDeploymentName}`;\n    }\n    return baseURL;\n}\n", "import { APIConnectionTimeoutError, APIUserAbortError, } from \"openai\";\nimport { convertToOpenAIFunction, convertToOpenAITool, } from \"@langchain/core/utils/function_calling\";\nimport { isInteropZodSchema } from \"@langchain/core/utils/types\";\nimport { toJsonSchema } from \"@langchain/core/utils/json_schema\";\nimport { addLangChainErrorFields } from \"./errors.js\";\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function wrapOpenAIClientError(e) {\n    let error;\n    if (e.constructor.name === APIConnectionTimeoutError.name) {\n        error = new Error(e.message);\n        error.name = \"TimeoutError\";\n    }\n    else if (e.constructor.name === APIUserAbortError.name) {\n        error = new Error(e.message);\n        error.name = \"AbortError\";\n    }\n    else if (e.status === 400 && e.message.includes(\"tool_calls\")) {\n        error = addLangChainErrorFields(e, \"INVALID_TOOL_RESULTS\");\n    }\n    else if (e.status === 401) {\n        error = addLangChainErrorFields(e, \"MODEL_AUTHENTICATION\");\n    }\n    else if (e.status === 429) {\n        error = addLangChainErrorFields(e, \"MODEL_RATE_LIMIT\");\n    }\n    else if (e.status === 404) {\n        error = addLangChainErrorFields(e, \"MODEL_NOT_FOUND\");\n    }\n    else {\n        error = e;\n    }\n    return error;\n}\nexport { convertToOpenAIFunction as formatToOpenAIFunction, convertToOpenAITool as formatToOpenAITool, };\nexport function formatToOpenAIAssistantTool(tool) {\n    return {\n        type: \"function\",\n        function: {\n            name: tool.name,\n            description: tool.description,\n            parameters: isInteropZodSchema(tool.schema)\n                ? toJsonSchema(tool.schema)\n                : tool.schema,\n        },\n    };\n}\nexport function formatToOpenAIToolChoice(toolChoice) {\n    if (!toolChoice) {\n        return undefined;\n    }\n    else if (toolChoice === \"any\" || toolChoice === \"required\") {\n        return \"required\";\n    }\n    else if (toolChoice === \"auto\") {\n        return \"auto\";\n    }\n    else if (toolChoice === \"none\") {\n        return \"none\";\n    }\n    else if (typeof toolChoice === \"string\") {\n        return {\n            type: \"function\",\n            function: {\n                name: toolChoice,\n            },\n        };\n    }\n    else {\n        return toolChoice;\n    }\n}\n", "export * from '../dist/utils/function_calling.js'", "/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-param-reassign */\nexport function addLangChainErrorFields(error, lc_error_code) {\n    error.lc_error_code = lc_error_code;\n    error.message = `${error.message}\\n\\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${lc_error_code}/\\n`;\n    return error;\n}\n", "function isAnyOfProp(prop) {\n    return (prop.anyOf !== undefined &&\n        Array.isArray(prop.anyOf));\n}\n// When OpenAI use functions in the prompt, they format them as TypeScript definitions rather than OpenAPI JSON schemas.\n// This function converts the JSON schemas into TypeScript definitions.\nexport function formatFunctionDefinitions(functions) {\n    const lines = [\"namespace functions {\", \"\"];\n    for (const f of functions) {\n        if (f.description) {\n            lines.push(`// ${f.description}`);\n        }\n        if (Object.keys(f.parameters.properties ?? {}).length > 0) {\n            lines.push(`type ${f.name} = (_: {`);\n            lines.push(formatObjectProperties(f.parameters, 0));\n            lines.push(\"}) => any;\");\n        }\n        else {\n            lines.push(`type ${f.name} = () => any;`);\n        }\n        lines.push(\"\");\n    }\n    lines.push(\"} // namespace functions\");\n    return lines.join(\"\\n\");\n}\n// Format just the properties of an object (not including the surrounding braces)\nfunction formatObjectProperties(obj, indent) {\n    const lines = [];\n    for (const [name, param] of Object.entries(obj.properties ?? {})) {\n        if (param.description && indent < 2) {\n            lines.push(`// ${param.description}`);\n        }\n        if (obj.required?.includes(name)) {\n            lines.push(`${name}: ${formatType(param, indent)},`);\n        }\n        else {\n            lines.push(`${name}?: ${formatType(param, indent)},`);\n        }\n    }\n    return lines.map((line) => \" \".repeat(indent) + line).join(\"\\n\");\n}\n// Format a single property type\nfunction formatType(param, indent) {\n    if (isAnyOfProp(param)) {\n        return param.anyOf.map((v) => formatType(v, indent)).join(\" | \");\n    }\n    switch (param.type) {\n        case \"string\":\n            if (param.enum) {\n                return param.enum.map((v) => `\"${v}\"`).join(\" | \");\n            }\n            return \"string\";\n        case \"number\":\n            if (param.enum) {\n                return param.enum.map((v) => `${v}`).join(\" | \");\n            }\n            return \"number\";\n        case \"integer\":\n            if (param.enum) {\n                return param.enum.map((v) => `${v}`).join(\" | \");\n            }\n            return \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"null\":\n            return \"null\";\n        case \"object\":\n            return [\"{\", formatObjectProperties(param, indent + 2), \"}\"].join(\"\\n\");\n        case \"array\":\n            if (param.items) {\n                return `${formatType(param.items, indent)}[]`;\n            }\n            return \"any[]\";\n        default:\n            return \"\";\n    }\n}\n", "import { isLangChainTool } from \"@langchain/core/utils/function_calling\";\nimport { formatToOpenAITool } from \"./openai.js\";\n/**\n * Formats a tool in either OpenAI format, or LangChain structured tool format\n * into an OpenAI tool format. If the tool is already in OpenAI format, return without\n * any changes. If it is in LangChain structured tool format, convert it to OpenAI tool format\n * using OpenAI's `zodFunction` util, falling back to `convertToOpenAIFunction` if the parameters\n * returned from the `zodFunction` util are not defined.\n *\n * @param {BindToolsInput} tool The tool to convert to an OpenAI tool.\n * @param {Object} [fields] Additional fields to add to the OpenAI tool.\n * @returns {ToolDefinition} The inputted tool in OpenAI tool format.\n */\nexport function _convertToOpenAITool(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntool, fields) {\n    let toolDef;\n    if (isLangChainTool(tool)) {\n        toolDef = formatToOpenAITool(tool);\n    }\n    else {\n        toolDef = tool;\n    }\n    if (fields?.strict !== undefined) {\n        toolDef.function.strict = fields.strict;\n    }\n    return toolDef;\n}\n", "import { AzureOpenAI as AzureOpenAIClient } from \"openai\";\nimport { getEnv, getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { ChatOpenAI, } from \"../chat_models.js\";\nimport { getEndpoint } from \"../utils/azure.js\";\nimport { normalizeHeaders } from \"../utils/headers.js\";\n/**\n * Azure OpenAI chat model integration.\n *\n * Setup:\n * Install `@langchain/openai` and set the following environment variables:\n *\n * ```bash\n * npm install @langchain/openai\n * export AZURE_OPENAI_API_KEY=\"your-api-key\"\n * export AZURE_OPENAI_API_DEPLOYMENT_NAME=\"your-deployment-name\"\n * export AZURE_OPENAI_API_VERSION=\"your-version\"\n * export AZURE_OPENAI_BASE_PATH=\"your-base-path\"\n * ```\n *\n * ## [Constructor args](https://api.js.langchain.com/classes/langchain_openai.AzureChatOpenAI.html#constructor)\n *\n * ## [Runtime args](https://api.js.langchain.com/interfaces/langchain_openai.ChatOpenAICallOptions.html)\n *\n * Runtime args can be passed as the second argument to any of the base runnable methods `.invoke`. `.stream`, `.batch`, etc.\n * They can also be passed via `.withConfig`, or the second arg in `.bindTools`, like shown in the examples below:\n *\n * ```typescript\n * // When calling `.withConfig`, call options should be passed via the first argument\n * const llmWithArgsBound = llm.withConfig({\n *   stop: [\"\\n\"],\n *   tools: [...],\n * });\n *\n * // When calling `.bindTools`, call options should be passed via the second argument\n * const llmWithTools = llm.bindTools(\n *   [...],\n *   {\n *     tool_choice: \"auto\",\n *   }\n * );\n * ```\n *\n * ## Examples\n *\n * <details open>\n * <summary><strong>Instantiate</strong></summary>\n *\n * ```typescript\n * import { AzureChatOpenAI } from '@langchain/openai';\n *\n * const llm = new AzureChatOpenAI({\n *   azureOpenAIApiKey: process.env.AZURE_OPENAI_API_KEY, // In Node.js defaults to process.env.AZURE_OPENAI_API_KEY\n *   azureOpenAIApiInstanceName: process.env.AZURE_OPENAI_API_INSTANCE_NAME, // In Node.js defaults to process.env.AZURE_OPENAI_API_INSTANCE_NAME\n *   azureOpenAIApiDeploymentName: process.env.AZURE_OPENAI_API_DEPLOYMENT_NAME, // In Node.js defaults to process.env.AZURE_OPENAI_API_DEPLOYMENT_NAME\n *   azureOpenAIApiVersion: process.env.AZURE_OPENAI_API_VERSION, // In Node.js defaults to process.env.AZURE_OPENAI_API_VERSION\n *   temperature: 0,\n *   maxTokens: undefined,\n *   timeout: undefined,\n *   maxRetries: 2,\n *   // apiKey: \"...\",\n *   // baseUrl: \"...\",\n *   // other params...\n * });\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Invoking</strong></summary>\n *\n * ```typescript\n * const input = `Translate \"I love programming\" into French.`;\n *\n * // Models also accept a list of chat messages or a formatted prompt\n * const result = await llm.invoke(input);\n * console.log(result);\n * ```\n *\n * ```txt\n * AIMessage {\n *   \"id\": \"chatcmpl-9u4Mpu44CbPjwYFkTbeoZgvzB00Tz\",\n *   \"content\": \"J'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"tokenUsage\": {\n *       \"completionTokens\": 5,\n *       \"promptTokens\": 28,\n *       \"totalTokens\": 33\n *     },\n *     \"finish_reason\": \"stop\",\n *     \"system_fingerprint\": \"fp_3aa7262c27\"\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Streaming Chunks</strong></summary>\n *\n * ```typescript\n * for await (const chunk of await llm.stream(input)) {\n *   console.log(chunk);\n * }\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"chatcmpl-9u4NWB7yUeHCKdLr6jP3HpaOYHTqs\",\n *   \"content\": \"\"\n * }\n * AIMessageChunk {\n *   \"content\": \"J\"\n * }\n * AIMessageChunk {\n *   \"content\": \"'adore\"\n * }\n * AIMessageChunk {\n *   \"content\": \" la\"\n * }\n * AIMessageChunk {\n *   \"content\": \" programmation\",,\n * }\n * AIMessageChunk {\n *   \"content\": \".\",,\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"response_metadata\": {\n *     \"finish_reason\": \"stop\",\n *     \"system_fingerprint\": \"fp_c9aa9c0491\"\n *   },\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Aggregate Streamed Chunks</strong></summary>\n *\n * ```typescript\n * import { AIMessageChunk } from '@langchain/core/messages';\n * import { concat } from '@langchain/core/utils/stream';\n *\n * const stream = await llm.stream(input);\n * let full: AIMessageChunk | undefined;\n * for await (const chunk of stream) {\n *   full = !full ? chunk : concat(full, chunk);\n * }\n * console.log(full);\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"chatcmpl-9u4PnX6Fy7OmK46DASy0bH6cxn5Xu\",\n *   \"content\": \"J'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"prompt\": 0,\n *     \"completion\": 0,\n *     \"finish_reason\": \"stop\",\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Bind tools</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const GetWeather = {\n *   name: \"GetWeather\",\n *   description: \"Get the current weather in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const GetPopulation = {\n *   name: \"GetPopulation\",\n *   description: \"Get the current population in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const llmWithTools = llm.bindTools([GetWeather, GetPopulation]);\n * const aiMsg = await llmWithTools.invoke(\n *   \"Which city is hotter today and which is bigger: LA or NY?\"\n * );\n * console.log(aiMsg.tool_calls);\n * ```\n *\n * ```txt\n * [\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call',\n *     id: 'call_uPU4FiFzoKAtMxfmPnfQL6UK'\n *   },\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call',\n *     id: 'call_UNkEwuQsHrGYqgDQuH9nPAtX'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call',\n *     id: 'call_kL3OXxaq9OjIKqRTpvjaCH14'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call',\n *     id: 'call_s9KQB1UWj45LLGaEnjz0179q'\n *   }\n * ]\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Structured Output</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const Joke = z.object({\n *   setup: z.string().describe(\"The setup of the joke\"),\n *   punchline: z.string().describe(\"The punchline to the joke\"),\n *   rating: z.number().nullable().describe(\"How funny the joke is, from 1 to 10\")\n * }).describe('Joke to tell user.');\n *\n * const structuredLlm = llm.withStructuredOutput(Joke, { name: \"Joke\" });\n * const jokeResult = await structuredLlm.invoke(\"Tell me a joke about cats\");\n * console.log(jokeResult);\n * ```\n *\n * ```txt\n * {\n *   setup: 'Why was the cat sitting on the computer?',\n *   punchline: 'Because it wanted to keep an eye on the mouse!',\n *   rating: 7\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>JSON Object Response Format</strong></summary>\n *\n * ```typescript\n * const jsonLlm = llm.withConfig({ response_format: { type: \"json_object\" } });\n * const jsonLlmAiMsg = await jsonLlm.invoke(\n *   \"Return a JSON object with key 'randomInts' and a value of 10 random ints in [0-99]\"\n * );\n * console.log(jsonLlmAiMsg.content);\n * ```\n *\n * ```txt\n * {\n *   \"randomInts\": [23, 87, 45, 12, 78, 34, 56, 90, 11, 67]\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Multimodal</strong></summary>\n *\n * ```typescript\n * import { HumanMessage } from '@langchain/core/messages';\n *\n * const imageUrl = \"https://example.com/image.jpg\";\n * const imageData = await fetch(imageUrl).then(res => res.arrayBuffer());\n * const base64Image = Buffer.from(imageData).toString('base64');\n *\n * const message = new HumanMessage({\n *   content: [\n *     { type: \"text\", text: \"describe the weather in this image\" },\n *     {\n *       type: \"image_url\",\n *       image_url: { url: `data:image/jpeg;base64,${base64Image}` },\n *     },\n *   ]\n * });\n *\n * const imageDescriptionAiMsg = await llm.invoke([message]);\n * console.log(imageDescriptionAiMsg.content);\n * ```\n *\n * ```txt\n * The weather in the image appears to be clear and sunny. The sky is mostly blue with a few scattered white clouds, indicating fair weather. The bright sunlight is casting shadows on the green, grassy hill, suggesting it is a pleasant day with good visibility. There are no signs of rain or stormy conditions.\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Usage Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForMetadata = await llm.invoke(input);\n * console.log(aiMsgForMetadata.usage_metadata);\n * ```\n *\n * ```txt\n * { input_tokens: 28, output_tokens: 5, total_tokens: 33 }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Logprobs</strong></summary>\n *\n * ```typescript\n * const logprobsLlm = new ChatOpenAI({ logprobs: true });\n * const aiMsgForLogprobs = await logprobsLlm.invoke(input);\n * console.log(aiMsgForLogprobs.response_metadata.logprobs);\n * ```\n *\n * ```txt\n * {\n *   content: [\n *     {\n *       token: 'J',\n *       logprob: -0.000050616763,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: \"'\",\n *       logprob: -0.01868736,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: 'ad',\n *       logprob: -0.0000030545007,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     { token: 'ore', logprob: 0, bytes: [Array], top_logprobs: [] },\n *     {\n *       token: ' la',\n *       logprob: -0.515404,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: ' programm',\n *       logprob: -0.0000118755715,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     { token: 'ation', logprob: 0, bytes: [Array], top_logprobs: [] },\n *     {\n *       token: '.',\n *       logprob: -0.0000037697225,\n *       bytes: [Array],\n *       top_logprobs: []\n *     }\n *   ],\n *   refusal: null\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Response Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForResponseMetadata = await llm.invoke(input);\n * console.log(aiMsgForResponseMetadata.response_metadata);\n * ```\n *\n * ```txt\n * {\n *   tokenUsage: { completionTokens: 5, promptTokens: 28, totalTokens: 33 },\n *   finish_reason: 'stop',\n *   system_fingerprint: 'fp_3aa7262c27'\n * }\n * ```\n * </details>\n */\nexport class AzureChatOpenAI extends ChatOpenAI {\n    _llmType() {\n        return \"azure_openai\";\n    }\n    get lc_aliases() {\n        return {\n            ...super.lc_aliases,\n            openAIApiKey: \"openai_api_key\",\n            openAIApiVersion: \"openai_api_version\",\n            openAIBasePath: \"openai_api_base\",\n            deploymentName: \"deployment_name\",\n            azureOpenAIEndpoint: \"azure_endpoint\",\n            azureOpenAIApiVersion: \"openai_api_version\",\n            azureOpenAIBasePath: \"openai_api_base\",\n            azureOpenAIApiDeploymentName: \"deployment_name\",\n        };\n    }\n    get lc_secrets() {\n        return {\n            ...super.lc_secrets,\n            azureOpenAIApiKey: \"AZURE_OPENAI_API_KEY\",\n        };\n    }\n    get lc_serializable_keys() {\n        return [\n            ...super.lc_serializable_keys,\n            \"azureOpenAIApiKey\",\n            \"azureOpenAIApiVersion\",\n            \"azureOpenAIBasePath\",\n            \"azureOpenAIEndpoint\",\n            \"azureOpenAIApiInstanceName\",\n            \"azureOpenAIApiDeploymentName\",\n            \"deploymentName\",\n            \"openAIApiKey\",\n            \"openAIApiVersion\",\n        ];\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureADTokenProvider\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIEndpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.azureOpenAIApiKey =\n            fields?.azureOpenAIApiKey ??\n                fields?.openAIApiKey ??\n                fields?.apiKey ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_KEY\");\n        this.azureOpenAIApiInstanceName =\n            fields?.azureOpenAIApiInstanceName ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiDeploymentName =\n            fields?.azureOpenAIApiDeploymentName ??\n                fields?.deploymentName ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\");\n        this.azureOpenAIApiVersion =\n            fields?.azureOpenAIApiVersion ??\n                fields?.openAIApiVersion ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath =\n            fields?.azureOpenAIBasePath ??\n                getEnvironmentVariable(\"AZURE_OPENAI_BASE_PATH\");\n        this.azureOpenAIEndpoint =\n            fields?.azureOpenAIEndpoint ??\n                getEnvironmentVariable(\"AZURE_OPENAI_ENDPOINT\");\n        this.azureADTokenProvider = fields?.azureADTokenProvider;\n        if (!this.azureOpenAIApiKey && !this.apiKey && !this.azureADTokenProvider) {\n            throw new Error(\"Azure OpenAI API key or Token Provider not found\");\n        }\n    }\n    getLsParams(options) {\n        const params = super.getLsParams(options);\n        params.ls_provider = \"azure\";\n        return params;\n    }\n    _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                azureADTokenProvider: this.azureADTokenProvider,\n                baseURL: this.clientConfig.baseURL,\n                azureOpenAIEndpoint: this.azureOpenAIEndpoint,\n            };\n            const endpoint = getEndpoint(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0,\n            };\n            if (!this.azureADTokenProvider) {\n                params.apiKey = openAIEndpointConfig.azureOpenAIApiKey;\n            }\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            let env = getEnv();\n            if (env === \"node\" || env === \"deno\") {\n                env = `(${env}/${process.version}; ${process.platform}; ${process.arch})`;\n            }\n            const defaultHeaders = normalizeHeaders(params.defaultHeaders);\n            params.defaultHeaders = {\n                ...params.defaultHeaders,\n                \"User-Agent\": defaultHeaders[\"User-Agent\"]\n                    ? `langchainjs-azure-openai/2.0.0 (${env})${defaultHeaders[\"User-Agent\"]}`\n                    : `langchainjs-azure-openai/2.0.0 (${env})`,\n            };\n            this.client = new AzureOpenAIClient({\n                apiVersion: this.azureOpenAIApiVersion,\n                azureADTokenProvider: this.azureADTokenProvider,\n                deployment: this.azureOpenAIApiDeploymentName,\n                ...params,\n            });\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options,\n        };\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers,\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query,\n            };\n        }\n        return requestOptions;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const json = super.toJSON();\n        function isRecord(obj) {\n            return typeof obj === \"object\" && obj != null;\n        }\n        if (isRecord(json) && isRecord(json.kwargs)) {\n            delete json.kwargs.azure_openai_base_path;\n            delete json.kwargs.azure_openai_api_deployment_name;\n            delete json.kwargs.azure_openai_api_key;\n            delete json.kwargs.azure_openai_api_version;\n            delete json.kwargs.azure_open_ai_base_path;\n            if (!json.kwargs.azure_endpoint && this.azureOpenAIEndpoint) {\n                json.kwargs.azure_endpoint = this.azureOpenAIEndpoint;\n            }\n            if (!json.kwargs.azure_endpoint && this.azureOpenAIBasePath) {\n                const parts = this.azureOpenAIBasePath.split(\"/openai/deployments/\");\n                if (parts.length === 2 && parts[0].startsWith(\"http\")) {\n                    const [endpoint] = parts;\n                    json.kwargs.azure_endpoint = endpoint;\n                }\n            }\n            if (!json.kwargs.azure_endpoint && this.azureOpenAIApiInstanceName) {\n                json.kwargs.azure_endpoint = `https://${this.azureOpenAIApiInstanceName}.openai.azure.com/`;\n            }\n            if (!json.kwargs.deployment_name && this.azureOpenAIApiDeploymentName) {\n                json.kwargs.deployment_name = this.azureOpenAIApiDeploymentName;\n            }\n            if (!json.kwargs.deployment_name && this.azureOpenAIBasePath) {\n                const parts = this.azureOpenAIBasePath.split(\"/openai/deployments/\");\n                if (parts.length === 2) {\n                    const [, deployment] = parts;\n                    json.kwargs.deployment_name = deployment;\n                }\n            }\n            if (json.kwargs.azure_endpoint &&\n                json.kwargs.deployment_name &&\n                json.kwargs.openai_api_base) {\n                delete json.kwargs.openai_api_base;\n            }\n            if (json.kwargs.azure_openai_api_instance_name &&\n                json.kwargs.azure_endpoint) {\n                delete json.kwargs.azure_openai_api_instance_name;\n            }\n        }\n        return json;\n    }\n    withStructuredOutput(outputSchema, config) {\n        const ensuredConfig = { ...config };\n        // Not all Azure gpt-4o deployments models support jsonSchema yet\n        if (this.model.startsWith(\"gpt-4o\")) {\n            if (ensuredConfig?.method === undefined) {\n                ensuredConfig.method = \"functionCalling\";\n            }\n        }\n        return super.withStructuredOutput(outputSchema, ensuredConfig);\n    }\n}\n", "const iife = (fn) => fn();\nexport function isHeaders(headers) {\n    return (typeof Headers !== \"undefined\" &&\n        headers !== null &&\n        typeof headers === \"object\" &&\n        Object.prototype.toString.call(headers) === \"[object Headers]\");\n}\nexport function normalizeHeaders(headers) {\n    const output = iife(() => {\n        // If headers is a Headers instance\n        if (isHeaders(headers)) {\n            return headers;\n        }\n        // If headers is an array of [key, value] pairs\n        else if (Array.isArray(headers)) {\n            return new Headers(headers);\n        }\n        // If headers is a NullableHeaders-like object (has 'values' property that is a Headers)\n        else if (typeof headers === \"object\" &&\n            headers !== null &&\n            \"values\" in headers &&\n            isHeaders(headers.values)) {\n            return headers.values;\n        }\n        // If headers is a plain object\n        else if (typeof headers === \"object\" && headers !== null) {\n            const entries = Object.entries(headers)\n                .filter(([, v]) => typeof v === \"string\")\n                .map(([k, v]) => [k, v]);\n            return new Headers(entries);\n        }\n        return new Headers();\n    });\n    return Object.fromEntries(output.entries());\n}\n", "import { OpenAI as OpenAIClient } from \"openai\";\nimport { calculateMaxTokens } from \"@langchain/core/language_models/base\";\nimport { GenerationChunk } from \"@langchain/core/outputs\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { BaseLLM, } from \"@langchain/core/language_models/llms\";\nimport { chunkArray } from \"@langchain/core/utils/chunk_array\";\nimport { getEndpoint } from \"./utils/azure.js\";\nimport { wrapOpenAIClientError } from \"./utils/openai.js\";\n/**\n * Wrapper around OpenAI large language models.\n *\n * To use you should have the `openai` package installed, with the\n * `OPENAI_API_KEY` environment variable set.\n *\n * To use with Azure, import the `AzureOpenAI` class.\n *\n * @remarks\n * Any parameters that are valid to be passed to {@link\n * https://platform.openai.com/docs/api-reference/completions/create |\n * `openai.createCompletion`} can be passed through {@link modelKwargs}, even\n * if not explicitly available on this class.\n * @example\n * ```typescript\n * const model = new OpenAI({\n *   modelName: \"gpt-4\",\n *   temperature: 0.7,\n *   maxTokens: 1000,\n *   maxRetries: 5,\n * });\n *\n * const res = await model.invoke(\n *   \"Question: What would be a good company name for a company that makes colorful socks?\\nAnswer:\"\n * );\n * console.log({ res });\n * ```\n */\nexport class OpenAI extends BaseLLM {\n    static lc_name() {\n        return \"OpenAI\";\n    }\n    get callKeys() {\n        return [...super.callKeys, \"options\"];\n    }\n    get lc_secrets() {\n        return {\n            openAIApiKey: \"OPENAI_API_KEY\",\n            apiKey: \"OPENAI_API_KEY\",\n            organization: \"OPENAI_ORGANIZATION\",\n        };\n    }\n    get lc_aliases() {\n        return {\n            modelName: \"model\",\n            openAIApiKey: \"openai_api_key\",\n            apiKey: \"openai_api_key\",\n        };\n    }\n    constructor(fields) {\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"frequencyPenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"presencePenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"bestOf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"logitBias\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gpt-3.5-turbo-instruct\"\n        });\n        /** @deprecated Use \"model\" instead */\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"batchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 20\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stopSequences\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"openAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.openAIApiKey =\n            fields?.apiKey ??\n                fields?.openAIApiKey ??\n                getEnvironmentVariable(\"OPENAI_API_KEY\");\n        this.apiKey = this.openAIApiKey;\n        this.organization =\n            fields?.configuration?.organization ??\n                getEnvironmentVariable(\"OPENAI_ORGANIZATION\");\n        this.model = fields?.model ?? fields?.modelName ?? this.model;\n        if ((this.model?.startsWith(\"gpt-3.5-turbo\") ||\n            this.model?.startsWith(\"gpt-4\") ||\n            this.model?.startsWith(\"o1\")) &&\n            !this.model?.includes(\"-instruct\")) {\n            throw new Error([\n                `Your chosen OpenAI model, \"${this.model}\", is a chat model and not a text-in/text-out LLM.`,\n                `Passing it into the \"OpenAI\" class is no longer supported.`,\n                `Please use the \"ChatOpenAI\" class instead.`,\n                \"\",\n                `See this page for more information:`,\n                \"|\",\n                `└> https://js.langchain.com/docs/integrations/chat/openai`,\n            ].join(\"\\n\"));\n        }\n        this.modelName = this.model;\n        this.modelKwargs = fields?.modelKwargs ?? {};\n        this.batchSize = fields?.batchSize ?? this.batchSize;\n        this.timeout = fields?.timeout;\n        this.temperature = fields?.temperature ?? this.temperature;\n        this.maxTokens = fields?.maxTokens ?? this.maxTokens;\n        this.topP = fields?.topP ?? this.topP;\n        this.frequencyPenalty = fields?.frequencyPenalty ?? this.frequencyPenalty;\n        this.presencePenalty = fields?.presencePenalty ?? this.presencePenalty;\n        this.n = fields?.n ?? this.n;\n        this.bestOf = fields?.bestOf ?? this.bestOf;\n        this.logitBias = fields?.logitBias;\n        this.stop = fields?.stopSequences ?? fields?.stop;\n        this.stopSequences = this.stop;\n        this.user = fields?.user;\n        this.streaming = fields?.streaming ?? false;\n        if (this.streaming && this.bestOf && this.bestOf > 1) {\n            throw new Error(\"Cannot stream results when bestOf > 1\");\n        }\n        this.clientConfig = {\n            apiKey: this.apiKey,\n            organization: this.organization,\n            dangerouslyAllowBrowser: true,\n            ...fields?.configuration,\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */\n    invocationParams(options) {\n        return {\n            model: this.model,\n            temperature: this.temperature,\n            max_tokens: this.maxTokens,\n            top_p: this.topP,\n            frequency_penalty: this.frequencyPenalty,\n            presence_penalty: this.presencePenalty,\n            n: this.n,\n            best_of: this.bestOf,\n            logit_bias: this.logitBias,\n            stop: options?.stop ?? this.stopSequences,\n            user: this.user,\n            stream: this.streaming,\n            ...this.modelKwargs,\n        };\n    }\n    /** @ignore */\n    _identifyingParams() {\n        return {\n            model_name: this.model,\n            ...this.invocationParams(),\n            ...this.clientConfig,\n        };\n    }\n    /**\n     * Get the identifying parameters for the model\n     */\n    identifyingParams() {\n        return this._identifyingParams();\n    }\n    /**\n     * Call out to OpenAI's endpoint with k unique prompts\n     *\n     * @param [prompts] - The prompts to pass into the model.\n     * @param [options] - Optional list of stop words to use when generating.\n     * @param [runManager] - Optional callback manager to use when generating.\n     *\n     * @returns The full LLM output.\n     *\n     * @example\n     * ```ts\n     * import { OpenAI } from \"langchain/llms/openai\";\n     * const openai = new OpenAI();\n     * const response = await openai.generate([\"Tell me a joke.\"]);\n     * ```\n     */\n    async _generate(prompts, options, runManager) {\n        const subPrompts = chunkArray(prompts, this.batchSize);\n        const choices = [];\n        const tokenUsage = {};\n        const params = this.invocationParams(options);\n        if (params.max_tokens === -1) {\n            if (prompts.length !== 1) {\n                throw new Error(\"max_tokens set to -1 not supported for multiple inputs\");\n            }\n            params.max_tokens = await calculateMaxTokens({\n                prompt: prompts[0],\n                // Cast here to allow for other models that may not fit the union\n                modelName: this.model,\n            });\n        }\n        for (let i = 0; i < subPrompts.length; i += 1) {\n            const data = params.stream\n                ? await (async () => {\n                    const choices = [];\n                    let response;\n                    const stream = await this.completionWithRetry({\n                        ...params,\n                        stream: true,\n                        prompt: subPrompts[i],\n                    }, options);\n                    for await (const message of stream) {\n                        // on the first message set the response properties\n                        if (!response) {\n                            response = {\n                                id: message.id,\n                                object: message.object,\n                                created: message.created,\n                                model: message.model,\n                            };\n                        }\n                        // on all messages, update choice\n                        for (const part of message.choices) {\n                            if (!choices[part.index]) {\n                                choices[part.index] = part;\n                            }\n                            else {\n                                const choice = choices[part.index];\n                                choice.text += part.text;\n                                choice.finish_reason = part.finish_reason;\n                                choice.logprobs = part.logprobs;\n                            }\n                            void runManager?.handleLLMNewToken(part.text, {\n                                prompt: Math.floor(part.index / this.n),\n                                completion: part.index % this.n,\n                            });\n                        }\n                    }\n                    if (options.signal?.aborted) {\n                        throw new Error(\"AbortError\");\n                    }\n                    return { ...response, choices };\n                })()\n                : await this.completionWithRetry({\n                    ...params,\n                    stream: false,\n                    prompt: subPrompts[i],\n                }, {\n                    signal: options.signal,\n                    ...options.options,\n                });\n            choices.push(...data.choices);\n            const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens, } = data.usage\n                ? data.usage\n                : {\n                    completion_tokens: undefined,\n                    prompt_tokens: undefined,\n                    total_tokens: undefined,\n                };\n            if (completionTokens) {\n                tokenUsage.completionTokens =\n                    (tokenUsage.completionTokens ?? 0) + completionTokens;\n            }\n            if (promptTokens) {\n                tokenUsage.promptTokens = (tokenUsage.promptTokens ?? 0) + promptTokens;\n            }\n            if (totalTokens) {\n                tokenUsage.totalTokens = (tokenUsage.totalTokens ?? 0) + totalTokens;\n            }\n        }\n        const generations = chunkArray(choices, this.n).map((promptChoices) => promptChoices.map((choice) => ({\n            text: choice.text ?? \"\",\n            generationInfo: {\n                finishReason: choice.finish_reason,\n                logprobs: choice.logprobs,\n            },\n        })));\n        return {\n            generations,\n            llmOutput: { tokenUsage },\n        };\n    }\n    // TODO(jacoblee): Refactor with _generate(..., {stream: true}) implementation?\n    async *_streamResponseChunks(input, options, runManager) {\n        const params = {\n            ...this.invocationParams(options),\n            prompt: input,\n            stream: true,\n        };\n        const stream = await this.completionWithRetry(params, options);\n        for await (const data of stream) {\n            const choice = data?.choices[0];\n            if (!choice) {\n                continue;\n            }\n            const chunk = new GenerationChunk({\n                text: choice.text,\n                generationInfo: {\n                    finishReason: choice.finish_reason,\n                },\n            });\n            yield chunk;\n            // eslint-disable-next-line no-void\n            void runManager?.handleLLMNewToken(chunk.text ?? \"\");\n        }\n        if (options.signal?.aborted) {\n            throw new Error(\"AbortError\");\n        }\n    }\n    async completionWithRetry(request, options) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async () => {\n            try {\n                const res = await this.client.completions.create(request, requestOptions);\n                return res;\n            }\n            catch (e) {\n                const error = wrapOpenAIClientError(e);\n                throw error;\n            }\n        });\n    }\n    /**\n     * Calls the OpenAI API with retry logic in case of failures.\n     * @param request The request to send to the OpenAI API.\n     * @param options Optional configuration for the API call.\n     * @returns The response from the OpenAI API.\n     */\n    _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                baseURL: this.clientConfig.baseURL,\n            };\n            const endpoint = getEndpoint(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0,\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new OpenAIClient(params);\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options,\n        };\n        return requestOptions;\n    }\n    _llmType() {\n        return \"openai\";\n    }\n}\n", "export * from '../dist/language_models/llms.js'", "export * from '../dist/utils/chunk_array.js'", "import { AzureOpenAI as AzureOpenAIClient } from \"openai\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { OpenAI } from \"../llms.js\";\nimport { getEndpoint } from \"../utils/azure.js\";\nimport { normalizeHeaders } from \"../utils/headers.js\";\nexport class AzureOpenAI extends OpenAI {\n    get lc_aliases() {\n        return {\n            ...super.lc_aliases,\n            openAIApiKey: \"openai_api_key\",\n            openAIApiVersion: \"openai_api_version\",\n            openAIBasePath: \"openai_api_base\",\n            deploymentName: \"deployment_name\",\n            azureOpenAIEndpoint: \"azure_endpoint\",\n            azureOpenAIApiVersion: \"openai_api_version\",\n            azureOpenAIBasePath: \"openai_api_base\",\n            azureOpenAIApiDeploymentName: \"deployment_name\",\n        };\n    }\n    get lc_secrets() {\n        return {\n            ...super.lc_secrets,\n            azureOpenAIApiKey: \"AZURE_OPENAI_API_KEY\",\n        };\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureADTokenProvider\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIEndpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.azureOpenAIApiDeploymentName =\n            (fields?.azureOpenAIApiCompletionsDeploymentName ||\n                fields?.azureOpenAIApiDeploymentName) ??\n                (getEnvironmentVariable(\"AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME\") ||\n                    getEnvironmentVariable(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\"));\n        this.azureOpenAIApiKey =\n            fields?.azureOpenAIApiKey ??\n                fields?.openAIApiKey ??\n                fields?.apiKey ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_KEY\");\n        this.azureOpenAIApiInstanceName =\n            fields?.azureOpenAIApiInstanceName ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiVersion =\n            fields?.azureOpenAIApiVersion ??\n                fields?.openAIApiVersion ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath =\n            fields?.azureOpenAIBasePath ??\n                getEnvironmentVariable(\"AZURE_OPENAI_BASE_PATH\");\n        this.azureOpenAIEndpoint =\n            fields?.azureOpenAIEndpoint ??\n                getEnvironmentVariable(\"AZURE_OPENAI_ENDPOINT\");\n        this.azureADTokenProvider = fields?.azureADTokenProvider;\n        if (!this.azureOpenAIApiKey && !this.apiKey && !this.azureADTokenProvider) {\n            throw new Error(\"Azure OpenAI API key or Token Provider not found\");\n        }\n    }\n    _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                azureADTokenProvider: this.azureADTokenProvider,\n                baseURL: this.clientConfig.baseURL,\n            };\n            const endpoint = getEndpoint(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0,\n            };\n            if (!this.azureADTokenProvider) {\n                params.apiKey = openAIEndpointConfig.azureOpenAIApiKey;\n            }\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            const defaultHeaders = normalizeHeaders(params.defaultHeaders);\n            params.defaultHeaders = {\n                ...params.defaultHeaders,\n                \"User-Agent\": defaultHeaders[\"User-Agent\"]\n                    ? `${defaultHeaders[\"User-Agent\"]}: langchainjs-azure-openai-v2`\n                    : `langchainjs-azure-openai-v2`,\n            };\n            this.client = new AzureOpenAIClient({\n                apiVersion: this.azureOpenAIApiVersion,\n                azureADTokenProvider: this.azureADTokenProvider,\n                ...params,\n            });\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options,\n        };\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers,\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query,\n            };\n        }\n        return requestOptions;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const json = super.toJSON();\n        function isRecord(obj) {\n            return typeof obj === \"object\" && obj != null;\n        }\n        if (isRecord(json) && isRecord(json.kwargs)) {\n            delete json.kwargs.azure_openai_base_path;\n            delete json.kwargs.azure_openai_api_deployment_name;\n            delete json.kwargs.azure_openai_api_key;\n            delete json.kwargs.azure_openai_api_version;\n            delete json.kwargs.azure_open_ai_base_path;\n        }\n        return json;\n    }\n}\n", "import { AzureOpenAI as AzureOpenAIClient, } from \"openai\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { OpenAIEmbeddings } from \"../embeddings.js\";\nimport { getEndpoint } from \"../utils/azure.js\";\nimport { wrapOpenAIClientError } from \"../utils/openai.js\";\nimport { normalizeHeaders } from \"../utils/headers.js\";\nexport class AzureOpenAIEmbeddings extends OpenAIEmbeddings {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureADTokenProvider\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.batchSize = fields?.batchSize ?? 1;\n        this.azureOpenAIApiKey =\n            fields?.azureOpenAIApiKey ??\n                fields?.apiKey ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_KEY\");\n        this.azureOpenAIApiVersion =\n            fields?.azureOpenAIApiVersion ??\n                fields?.openAIApiVersion ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath =\n            fields?.azureOpenAIBasePath ??\n                getEnvironmentVariable(\"AZURE_OPENAI_BASE_PATH\");\n        this.azureOpenAIApiInstanceName =\n            fields?.azureOpenAIApiInstanceName ??\n                getEnvironmentVariable(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiDeploymentName =\n            (fields?.azureOpenAIApiEmbeddingsDeploymentName ||\n                fields?.azureOpenAIApiDeploymentName) ??\n                (getEnvironmentVariable(\"AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME\") ||\n                    getEnvironmentVariable(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\"));\n        this.azureADTokenProvider = fields?.azureADTokenProvider;\n    }\n    async embeddingWithRetry(request) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                azureADTokenProvider: this.azureADTokenProvider,\n                baseURL: this.clientConfig.baseURL,\n            };\n            const endpoint = getEndpoint(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0,\n            };\n            if (!this.azureADTokenProvider) {\n                params.apiKey = openAIEndpointConfig.azureOpenAIApiKey;\n            }\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            const defaultHeaders = normalizeHeaders(params.defaultHeaders);\n            params.defaultHeaders = {\n                ...params.defaultHeaders,\n                \"User-Agent\": defaultHeaders[\"User-Agent\"]\n                    ? `${defaultHeaders[\"User-Agent\"]}: langchainjs-azure-openai-v2`\n                    : `langchainjs-azure-openai-v2`,\n            };\n            this.client = new AzureOpenAIClient({\n                apiVersion: this.azureOpenAIApiVersion,\n                azureADTokenProvider: this.azureADTokenProvider,\n                deployment: this.azureOpenAIApiDeploymentName,\n                ...params,\n            });\n        }\n        const requestOptions = {};\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers,\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query,\n            };\n        }\n        return this.caller.call(async () => {\n            try {\n                const res = await this.client.embeddings.create(request, requestOptions);\n                return res;\n            }\n            catch (e) {\n                const error = wrapOpenAIClientError(e);\n                throw error;\n            }\n        });\n    }\n}\n", "import { OpenAI as OpenAIClient } from \"openai\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { Embeddings } from \"@langchain/core/embeddings\";\nimport { chunkArray } from \"@langchain/core/utils/chunk_array\";\nimport { getEndpoint } from \"./utils/azure.js\";\nimport { wrapOpenAIClientError } from \"./utils/openai.js\";\n/**\n * Class for generating embeddings using the OpenAI API.\n *\n * To use with Azure, import the `AzureOpenAIEmbeddings` class.\n *\n * @example\n * ```typescript\n * // Embed a query using OpenAIEmbeddings to generate embeddings for a given text\n * const model = new OpenAIEmbeddings();\n * const res = await model.embedQuery(\n *   \"What would be a good company name for a company that makes colorful socks?\",\n * );\n * console.log({ res });\n *\n * ```\n */\nexport class OpenAIEmbeddings extends Embeddings {\n    constructor(fields) {\n        const fieldsWithDefaults = { maxConcurrency: 2, ...fields };\n        super(fieldsWithDefaults);\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"text-embedding-ada-002\"\n        });\n        /** @deprecated Use \"model\" instead */\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"batchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 512\n        });\n        // TODO: Update to `false` on next minor release (see: https://github.com/langchain-ai/langchainjs/pull/3612)\n        Object.defineProperty(this, \"stripNewLines\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * The number of dimensions the resulting output embeddings should have.\n         * Only supported in `text-embedding-3` and later models.\n         */\n        Object.defineProperty(this, \"dimensions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = fieldsWithDefaults?.apiKey ??\n            fieldsWithDefaults?.openAIApiKey ??\n            getEnvironmentVariable(\"OPENAI_API_KEY\");\n        this.organization =\n            fieldsWithDefaults?.configuration?.organization ??\n                getEnvironmentVariable(\"OPENAI_ORGANIZATION\");\n        this.model =\n            fieldsWithDefaults?.model ?? fieldsWithDefaults?.modelName ?? this.model;\n        this.modelName = this.model;\n        this.batchSize = fieldsWithDefaults?.batchSize ?? this.batchSize;\n        this.stripNewLines =\n            fieldsWithDefaults?.stripNewLines ?? this.stripNewLines;\n        this.timeout = fieldsWithDefaults?.timeout;\n        this.dimensions = fieldsWithDefaults?.dimensions;\n        this.clientConfig = {\n            apiKey,\n            organization: this.organization,\n            dangerouslyAllowBrowser: true,\n            ...fields?.configuration,\n        };\n    }\n    /**\n     * Method to generate embeddings for an array of documents. Splits the\n     * documents into batches and makes requests to the OpenAI API to generate\n     * embeddings.\n     * @param texts Array of documents to generate embeddings for.\n     * @returns Promise that resolves to a 2D array of embeddings for each document.\n     */\n    async embedDocuments(texts) {\n        const batches = chunkArray(this.stripNewLines ? texts.map((t) => t.replace(/\\n/g, \" \")) : texts, this.batchSize);\n        const batchRequests = batches.map((batch) => {\n            const params = {\n                model: this.model,\n                input: batch,\n            };\n            if (this.dimensions) {\n                params.dimensions = this.dimensions;\n            }\n            return this.embeddingWithRetry(params);\n        });\n        const batchResponses = await Promise.all(batchRequests);\n        const embeddings = [];\n        for (let i = 0; i < batchResponses.length; i += 1) {\n            const batch = batches[i];\n            const { data: batchResponse } = batchResponses[i];\n            for (let j = 0; j < batch.length; j += 1) {\n                embeddings.push(batchResponse[j].embedding);\n            }\n        }\n        return embeddings;\n    }\n    /**\n     * Method to generate an embedding for a single document. Calls the\n     * embeddingWithRetry method with the document as the input.\n     * @param text Document to generate an embedding for.\n     * @returns Promise that resolves to an embedding for the document.\n     */\n    async embedQuery(text) {\n        const params = {\n            model: this.model,\n            input: this.stripNewLines ? text.replace(/\\n/g, \" \") : text,\n        };\n        if (this.dimensions) {\n            params.dimensions = this.dimensions;\n        }\n        const { data } = await this.embeddingWithRetry(params);\n        return data[0].embedding;\n    }\n    /**\n     * Private method to make a request to the OpenAI API to generate\n     * embeddings. Handles the retry logic and returns the response from the\n     * API.\n     * @param request Request to send to the OpenAI API.\n     * @returns Promise that resolves to the response from the API.\n     */\n    async embeddingWithRetry(request) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                baseURL: this.clientConfig.baseURL,\n            };\n            const endpoint = getEndpoint(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0,\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new OpenAIClient(params);\n        }\n        const requestOptions = {};\n        return this.caller.call(async () => {\n            try {\n                const res = await this.client.embeddings.create(request, requestOptions);\n                return res;\n            }\n            catch (e) {\n                const error = wrapOpenAIClientError(e);\n                throw error;\n            }\n        });\n    }\n}\n", "export * from './dist/embeddings.js'", "export {};\n", "export * from \"./dalle.js\";\n", "/* eslint-disable no-param-reassign */\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { OpenAI as OpenAIClient } from \"openai\";\nimport { Tool } from \"@langchain/core/tools\";\n/**\n * A tool for generating images with Open AIs Dall-E 2 or 3 API.\n */\nexport class DallEAPIWrapper extends Tool {\n    static lc_name() {\n        return \"DallEAPIWrapper\";\n    }\n    constructor(fields) {\n        // Shim for new base tool param name\n        if (fields?.responseFormat !== undefined &&\n            [\"url\", \"b64_json\"].includes(fields.responseFormat)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            fields.dallEResponseFormat = fields.responseFormat;\n            fields.responseFormat = \"content\";\n        }\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"dalle_api_wrapper\"\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description.\"\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"dall-e-3\"\n        });\n        Object.defineProperty(this, \"style\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"vivid\"\n        });\n        Object.defineProperty(this, \"quality\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"standard\"\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"size\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"1024x1024\"\n        });\n        Object.defineProperty(this, \"dallEResponseFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"url\"\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const openAIApiKey = fields?.apiKey ??\n            fields?.openAIApiKey ??\n            getEnvironmentVariable(\"OPENAI_API_KEY\");\n        const organization = fields?.organization ?? getEnvironmentVariable(\"OPENAI_ORGANIZATION\");\n        const clientConfig = {\n            apiKey: openAIApiKey,\n            organization,\n            dangerouslyAllowBrowser: true,\n            baseURL: fields?.baseUrl,\n        };\n        this.client = new OpenAIClient(clientConfig);\n        this.model = fields?.model ?? fields?.modelName ?? this.model;\n        this.style = fields?.style ?? this.style;\n        this.quality = fields?.quality ?? this.quality;\n        this.n = fields?.n ?? this.n;\n        this.size = fields?.size ?? this.size;\n        this.dallEResponseFormat =\n            fields?.dallEResponseFormat ?? this.dallEResponseFormat;\n        this.user = fields?.user;\n    }\n    /**\n     * Processes the API response if multiple images are generated.\n     * Returns a list of MessageContentImageUrl objects. If the response\n     * format is `url`, then the `image_url` field will contain the URL.\n     * If it is `b64_json`, then the `image_url` field will contain an object\n     * with a `url` field with the base64 encoded image.\n     *\n     * @param {OpenAIClient.Images.ImagesResponse[]} response The API response\n     * @returns {MessageContentImageUrl[]}\n     */\n    processMultipleGeneratedUrls(response) {\n        if (this.dallEResponseFormat === \"url\") {\n            return response.flatMap((res) => {\n                const imageUrlContent = res.data\n                    ?.flatMap((item) => {\n                    if (!item.url)\n                        return [];\n                    return {\n                        type: \"image_url\",\n                        image_url: item.url,\n                    };\n                })\n                    .filter((item) => item !== undefined &&\n                    item.type === \"image_url\" &&\n                    typeof item.image_url === \"string\" &&\n                    item.image_url !== undefined) ?? [];\n                return imageUrlContent;\n            });\n        }\n        else {\n            return response.flatMap((res) => {\n                const b64Content = res.data\n                    ?.flatMap((item) => {\n                    if (!item.b64_json)\n                        return [];\n                    return {\n                        type: \"image_url\",\n                        image_url: {\n                            url: item.b64_json,\n                        },\n                    };\n                })\n                    .filter((item) => item !== undefined &&\n                    item.type === \"image_url\" &&\n                    typeof item.image_url === \"object\" &&\n                    \"url\" in item.image_url &&\n                    typeof item.image_url.url === \"string\" &&\n                    item.image_url.url !== undefined) ?? [];\n                return b64Content;\n            });\n        }\n    }\n    /** @ignore */\n    async _call(input) {\n        const generateImageFields = {\n            model: this.model,\n            prompt: input,\n            n: 1,\n            size: this.size,\n            response_format: this.dallEResponseFormat,\n            style: this.style,\n            quality: this.quality,\n            user: this.user,\n        };\n        if (this.n > 1) {\n            const results = await Promise.all(Array.from({ length: this.n }).map(() => this.client.images.generate(generateImageFields)));\n            return this.processMultipleGeneratedUrls(results);\n        }\n        const response = await this.client.images.generate(generateImageFields);\n        let data = \"\";\n        if (this.dallEResponseFormat === \"url\") {\n            [data] =\n                response.data\n                    ?.map((item) => item.url)\n                    .filter((url) => url !== \"undefined\") ?? [];\n        }\n        else {\n            [data] =\n                response.data\n                    ?.map((item) => item.b64_json)\n                    .filter((b64_json) => b64_json !== \"undefined\") ??\n                    [];\n        }\n        return data;\n    }\n}\nObject.defineProperty(DallEAPIWrapper, \"toolName\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"dalle_api_wrapper\"\n});\n", "export * from './dist/tools/index.js'", "import { _convertMessagesToOpenAIParams } from \"../chat_models.js\";\n/**\n * Convert a formatted LangChain prompt (e.g. pulled from the hub) into\n * a format expected by OpenAI's JS SDK.\n *\n * Requires the \"@langchain/openai\" package to be installed in addition\n * to the OpenAI SDK.\n *\n * @example\n * ```ts\n * import { convertPromptToOpenAI } from \"langsmith/utils/hub/openai\";\n * import { pull } from \"langchain/hub\";\n *\n * import OpenAI from 'openai';\n *\n * const prompt = await pull(\"jacob/joke-generator\");\n * const formattedPrompt = await prompt.invoke({\n *   topic: \"cats\",\n * });\n *\n * const { messages } = convertPromptToOpenAI(formattedPrompt);\n *\n * const openAIClient = new OpenAI();\n *\n * const openaiResponse = await openAIClient.chat.completions.create({\n *   model: \"gpt-4o\",\n *   messages,\n * });\n * ```\n * @param formattedPrompt\n * @returns A partial OpenAI payload.\n */\nexport function convertPromptToOpenAI(formattedPrompt) {\n    const messages = formattedPrompt.toChatMessages();\n    return {\n        messages: _convertMessagesToOpenAIParams(messages),\n    };\n}\n", "export { postgresqlOperationDeparser, postgresqlSchemaDeparser, } from './deparser/postgresql/index.js';\nexport { buildSchemaDiff, columnRelatedDiffItemSchema, schemaDiffItemsSchema, tableRelatedDiffItemSchema, } from './diff/index.js';\nexport { applyPatchOperations, operationsSchema } from './operation/index.js';\nexport { aColumn, aForeignKeyConstraint, aSchema, aTable, aUniqueConstraint, columnSchema, foreignKeyConstraintSchema, mergeSchemas, schemaSchema, } from './schema/index.js';\nexport { constraintsToRelationships, } from './utils/constraintsToRelationships.js';\nexport { isPrimaryKey } from './utils/isPrimaryKey.js';\n", "export { postgresqlOperationDeparser } from './operationDeparser.js';\nexport { postgresqlSchemaDeparser } from './schemaDeparser.js';\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { isAddColumnOperation, isRemoveColumnOperation, isRenameColumnOperation, } from '../../operation/schema/column.js';\nimport { isAddConstraintOperation, isRemoveConstraintOperation, } from '../../operation/schema/constraint.js';\nimport { isAddIndexOperation, isRemoveIndexOperation, } from '../../operation/schema/indexOperations.js';\nimport { isAddTableOperation, isRemoveTableOperation, isReplaceTableNameOperation, } from '../../operation/schema/table.js';\nimport { generateAddColumnStatement, generateAddConstraintStatement, generateCreateIndexStatement, generateCreateTableStatement, generateRemoveColumnStatement, generateRemoveConstraintStatement, generateRemoveIndexStatement, generateRemoveTableStatement, generateRenameColumnStatement, generateRenameTableStatement, } from './utils.js';\n/**\n * Extract table name from operation path\n */\nfunction extractTableNameFromPath(path) {\n    const match = path.match(PATH_PATTERNS.TABLE_BASE);\n    return match?.[1] || null;\n}\n/**\n * Extract table name from table name operation path\n */\nfunction extractTableNameFromNamePath(path) {\n    const match = path.match(PATH_PATTERNS.TABLE_NAME);\n    return match?.[1] || null;\n}\n/**\n * Extract table name and column name from column operation path\n */\nfunction extractTableAndColumnNameFromPath(path) {\n    const match = path.match(PATH_PATTERNS.COLUMN_BASE);\n    if (!match || !match[1] || !match[2]) {\n        return null;\n    }\n    return {\n        tableName: match[1],\n        columnName: match[2],\n    };\n}\n/**\n * Extract table name and column name from column name operation path\n */\nfunction extractTableAndColumnNameFromNamePath(path) {\n    const match = path.match(PATH_PATTERNS.COLUMN_NAME);\n    if (!match || !match[1] || !match[2]) {\n        return null;\n    }\n    return {\n        tableName: match[1],\n        columnName: match[2],\n    };\n}\n/**\n * Extract table name and index name from index operation path\n */\nfunction extractTableAndIndexNameFromPath(path) {\n    const match = path.match(PATH_PATTERNS.INDEX_BASE);\n    if (!match || !match[1] || !match[2]) {\n        return null;\n    }\n    return {\n        tableName: match[1],\n        indexName: match[2],\n    };\n}\n/**\n * Extract table name and constraint name from constraint operation path\n */\nfunction extractTableAndConstraintNameFromPath(path) {\n    const match = path.match(PATH_PATTERNS.CONSTRAINT_BASE);\n    if (!match || !match[1] || !match[2]) {\n        return null;\n    }\n    return {\n        tableName: match[1],\n        constraintName: match[2],\n    };\n}\n/**\n * Generate CREATE TABLE DDL from table creation operation\n */\nfunction generateCreateTableFromOperation(operation) {\n    const tableName = extractTableNameFromPath(operation.path);\n    if (!tableName) {\n        throw new Error(`Invalid table path: ${operation.path}`);\n    }\n    const table = operation.value;\n    const ddlStatements = [];\n    // 1. Generate CREATE TABLE statement (includes comments)\n    ddlStatements.push(generateCreateTableStatement(table));\n    // 2. Generate ADD CONSTRAINT statements\n    for (const constraint of Object.values(table.constraints)) {\n        ddlStatements.push(generateAddConstraintStatement(table.name, constraint));\n    }\n    return ddlStatements.join('\\n\\n');\n}\n/**\n * Generate ADD COLUMN DDL from column creation operation\n */\nfunction generateAddColumnFromOperation(operation) {\n    const pathInfo = extractTableAndColumnNameFromPath(operation.path);\n    if (!pathInfo) {\n        throw new Error(`Invalid column path: ${operation.path}`);\n    }\n    return generateAddColumnStatement(pathInfo.tableName, operation.value);\n}\n/**\n * Generate DROP COLUMN DDL from column removal operation\n */\nfunction generateRemoveColumnFromOperation(operation) {\n    const pathInfo = extractTableAndColumnNameFromPath(operation.path);\n    if (!pathInfo) {\n        throw new Error(`Invalid column path: ${operation.path}`);\n    }\n    return generateRemoveColumnStatement(pathInfo.tableName, pathInfo.columnName);\n}\n/**\n * Generate RENAME COLUMN DDL from column rename operation\n */\nfunction generateRenameColumnFromOperation(operation) {\n    const pathInfo = extractTableAndColumnNameFromNamePath(operation.path);\n    if (!pathInfo) {\n        throw new Error(`Invalid column name path: ${operation.path}`);\n    }\n    return generateRenameColumnStatement(pathInfo.tableName, pathInfo.columnName, operation.value);\n}\n/**\n * Generate DROP TABLE DDL from table removal operation\n */\nfunction generateRemoveTableFromOperation(operation) {\n    const tableName = extractTableNameFromPath(operation.path);\n    if (!tableName) {\n        throw new Error(`Invalid table path: ${operation.path}`);\n    }\n    return generateRemoveTableStatement(tableName);\n}\n/**\n * Generate RENAME TABLE DDL from table rename operation\n */\nfunction generateRenameTableFromOperation(operation) {\n    const tableName = extractTableNameFromNamePath(operation.path);\n    if (!tableName) {\n        throw new Error(`Invalid table name path: ${operation.path}`);\n    }\n    return generateRenameTableStatement(tableName, operation.value);\n}\n/**\n * Generate CREATE INDEX DDL from index creation operation\n */\nfunction generateCreateIndexFromOperation(operation) {\n    const pathInfo = extractTableAndIndexNameFromPath(operation.path);\n    if (!pathInfo) {\n        throw new Error(`Invalid index path: ${operation.path}`);\n    }\n    return generateCreateIndexStatement(pathInfo.tableName, operation.value);\n}\n/**\n * Generate DROP INDEX DDL from index removal operation\n */\nfunction generateRemoveIndexFromOperation(operation) {\n    const pathInfo = extractTableAndIndexNameFromPath(operation.path);\n    if (!pathInfo) {\n        throw new Error(`Invalid index path: ${operation.path}`);\n    }\n    return generateRemoveIndexStatement(pathInfo.indexName);\n}\n/**\n * Generate ADD CONSTRAINT DDL from constraint creation operation\n */\nfunction generateAddConstraintFromOperation(operation) {\n    const pathInfo = extractTableAndConstraintNameFromPath(operation.path);\n    if (!pathInfo) {\n        throw new Error(`Invalid constraint path: ${operation.path}`);\n    }\n    return generateAddConstraintStatement(pathInfo.tableName, operation.value);\n}\n/**\n * Generate DROP CONSTRAINT DDL from constraint removal operation\n */\nfunction generateRemoveConstraintFromOperation(operation) {\n    const pathInfo = extractTableAndConstraintNameFromPath(operation.path);\n    if (!pathInfo) {\n        throw new Error(`Invalid constraint path: ${operation.path}`);\n    }\n    return generateRemoveConstraintStatement(pathInfo.tableName, pathInfo.constraintName);\n}\nexport const postgresqlOperationDeparser = (operation) => {\n    const errors = [];\n    if (isAddTableOperation(operation)) {\n        const value = generateCreateTableFromOperation(operation);\n        return { value, errors };\n    }\n    if (isRemoveTableOperation(operation)) {\n        const value = generateRemoveTableFromOperation(operation);\n        return { value, errors };\n    }\n    if (isReplaceTableNameOperation(operation)) {\n        const value = generateRenameTableFromOperation(operation);\n        return { value, errors };\n    }\n    if (isAddColumnOperation(operation)) {\n        const value = generateAddColumnFromOperation(operation);\n        return { value, errors };\n    }\n    if (isRemoveColumnOperation(operation)) {\n        const value = generateRemoveColumnFromOperation(operation);\n        return { value, errors };\n    }\n    if (isRenameColumnOperation(operation)) {\n        const value = generateRenameColumnFromOperation(operation);\n        return { value, errors };\n    }\n    if (isAddIndexOperation(operation)) {\n        const value = generateCreateIndexFromOperation(operation);\n        return { value, errors };\n    }\n    if (isRemoveIndexOperation(operation)) {\n        const value = generateRemoveIndexFromOperation(operation);\n        return { value, errors };\n    }\n    if (isAddConstraintOperation(operation)) {\n        const value = generateAddConstraintFromOperation(operation);\n        return { value, errors };\n    }\n    if (isRemoveConstraintOperation(operation)) {\n        const value = generateRemoveConstraintFromOperation(operation);\n        return { value, errors };\n    }\n    return {\n        value: '',\n        errors: [\n            {\n                message: `Unsupported operation: ${operation.op} at path ${operation.path}`,\n            },\n        ],\n    };\n};\n", "export const PATH_PATTERNS = {\n    TABLE_BASE: /^\\/tables\\/([^/]+)$/,\n    TABLE_NAME: /^\\/tables\\/([^/]+)\\/name$/,\n    TABLE_COMMENT: /^\\/tables\\/([^/]+)\\/comment$/,\n    COLUMN_BASE: /^\\/tables\\/([^/]+)\\/columns\\/([^/]+)$/,\n    COLUMN_NAME: /^\\/tables\\/([^/]+)\\/columns\\/([^/]+)\\/name$/,\n    COLUMN_COMMENT: /^\\/tables\\/([^/]+)\\/columns\\/([^/]+)\\/comment$/,\n    COLUMN_DEFAULT: /^\\/tables\\/([^/]+)\\/columns\\/([^/]+)\\/default$/,\n    COLUMN_CHECK: /^\\/tables\\/([^/]+)\\/columns\\/([^/]+)\\/check$/,\n    COLUMN_NOT_NULL: /^\\/tables\\/([^/]+)\\/columns\\/([^/]+)\\/notNull$/,\n    INDEX_BASE: /^\\/tables\\/([^/]+)\\/indexes\\/([^/]+)$/,\n    INDEX_NAME: /^\\/tables\\/([^/]+)\\/indexes\\/([^/]+)\\/name$/,\n    INDEX_UNIQUE: /^\\/tables\\/([^/]+)\\/indexes\\/([^/]+)\\/unique$/,\n    INDEX_COLUMNS: /^\\/tables\\/([^/]+)\\/indexes\\/([^/]+)\\/columns$/,\n    INDEX_TYPE: /^\\/tables\\/([^/]+)\\/indexes\\/([^/]+)\\/type$/,\n    CONSTRAINT_BASE: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)$/,\n    CONSTRAINT_NAME: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)\\/name$/,\n    CONSTRAINT_TYPE: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)\\/type$/,\n    CONSTRAINT_COLUMN_NAME: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)\\/columnName$/,\n    CONSTRAINT_TARGET_TABLE_NAME: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)\\/targetTableName$/,\n    CONSTRAINT_TARGET_COLUMN_NAME: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)\\/targetColumnName$/,\n    CONSTRAINT_UPDATE_CONSTRAINT: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)\\/updateConstraint$/,\n    CONSTRAINT_DELETE_CONSTRAINT: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)\\/deleteConstraint$/,\n    CONSTRAINT_DETAIL: /^\\/tables\\/([^/]+)\\/constraints\\/([^/]+)\\/detail$/,\n};\n", "import * as v from 'valibot';\nimport { columnSchema } from '../../schema/index.js';\nimport { PATH_PATTERNS } from '../constants.js';\nconst columnPathSchema = v.pipe(v.string(), v.regex(PATH_PATTERNS.COLUMN_BASE));\nconst columnNamePathSchema = v.pipe(v.string(), v.regex(PATH_PATTERNS.COLUMN_NAME));\n// Add column operation\nconst addColumnOperationSchema = v.object({\n    op: v.literal('add'),\n    path: columnPathSchema,\n    value: columnSchema,\n});\nexport const isAddColumnOperation = (operation) => {\n    return v.safeParse(addColumnOperationSchema, operation).success;\n};\n// Remove column operation\nconst removeColumnOperationSchema = v.object({\n    op: v.literal('remove'),\n    path: columnPathSchema,\n});\nexport const isRemoveColumnOperation = (operation) => {\n    return v.safeParse(removeColumnOperationSchema, operation).success;\n};\n// Rename column operation (replace operation for column name)\nconst renameColumnOperationSchema = v.object({\n    op: v.literal('replace'),\n    path: columnNamePathSchema,\n    value: v.string(),\n});\nexport const isRenameColumnOperation = (operation) => {\n    return v.safeParse(renameColumnOperationSchema, operation).success;\n};\n// Export all column operations\nexport const columnOperations = [\n    addColumnOperationSchema,\n    removeColumnOperationSchema,\n    renameColumnOperationSchema,\n];\n", "// src/storages/globalConfig/globalConfig.ts\nvar store;\nfunction setGlobalConfig(config2) {\n  store = { ...store, ...config2 };\n}\n// @__NO_SIDE_EFFECTS__\nfunction getGlobalConfig(config2) {\n  return {\n    lang: config2?.lang ?? store?.lang,\n    message: config2?.message,\n    abortEarly: config2?.abortEarly ?? store?.abortEarly,\n    abortPipeEarly: config2?.abortPipeEarly ?? store?.abortPipeEarly\n  };\n}\nfunction deleteGlobalConfig() {\n  store = void 0;\n}\n\n// src/storages/globalMessage/globalMessage.ts\nvar store2;\nfunction setGlobalMessage(message2, lang) {\n  if (!store2) store2 = /* @__PURE__ */ new Map();\n  store2.set(lang, message2);\n}\n// @__NO_SIDE_EFFECTS__\nfunction getGlobalMessage(lang) {\n  return store2?.get(lang);\n}\nfunction deleteGlobalMessage(lang) {\n  store2?.delete(lang);\n}\n\n// src/storages/schemaMessage/schemaMessage.ts\nvar store3;\nfunction setSchemaMessage(message2, lang) {\n  if (!store3) store3 = /* @__PURE__ */ new Map();\n  store3.set(lang, message2);\n}\n// @__NO_SIDE_EFFECTS__\nfunction getSchemaMessage(lang) {\n  return store3?.get(lang);\n}\nfunction deleteSchemaMessage(lang) {\n  store3?.delete(lang);\n}\n\n// src/storages/specificMessage/specificMessage.ts\nvar store4;\nfunction setSpecificMessage(reference, message2, lang) {\n  if (!store4) store4 = /* @__PURE__ */ new Map();\n  if (!store4.get(reference)) store4.set(reference, /* @__PURE__ */ new Map());\n  store4.get(reference).set(lang, message2);\n}\n// @__NO_SIDE_EFFECTS__\nfunction getSpecificMessage(reference, lang) {\n  return store4?.get(reference)?.get(lang);\n}\nfunction deleteSpecificMessage(reference, lang) {\n  store4?.get(reference)?.delete(lang);\n}\n\n// src/utils/_stringify/_stringify.ts\n// @__NO_SIDE_EFFECTS__\nfunction _stringify(input) {\n  const type = typeof input;\n  if (type === \"string\") {\n    return `\"${input}\"`;\n  }\n  if (type === \"number\" || type === \"bigint\" || type === \"boolean\") {\n    return `${input}`;\n  }\n  if (type === \"object\" || type === \"function\") {\n    return (input && Object.getPrototypeOf(input)?.constructor?.name) ?? \"null\";\n  }\n  return type;\n}\n\n// src/utils/_addIssue/_addIssue.ts\nfunction _addIssue(context, label, dataset, config2, other) {\n  const input = other && \"input\" in other ? other.input : dataset.value;\n  const expected = other?.expected ?? context.expects ?? null;\n  const received = other?.received ?? _stringify(input);\n  const issue = {\n    kind: context.kind,\n    type: context.type,\n    input,\n    expected,\n    received,\n    message: `Invalid ${label}: ${expected ? `Expected ${expected} but r` : \"R\"}eceived ${received}`,\n    requirement: context.requirement,\n    path: other?.path,\n    issues: other?.issues,\n    lang: config2.lang,\n    abortEarly: config2.abortEarly,\n    abortPipeEarly: config2.abortPipeEarly\n  };\n  const isSchema = context.kind === \"schema\";\n  const message2 = other?.message ?? context.message ?? getSpecificMessage(context.reference, issue.lang) ?? (isSchema ? getSchemaMessage(issue.lang) : null) ?? config2.message ?? getGlobalMessage(issue.lang);\n  if (message2 !== void 0) {\n    issue.message = typeof message2 === \"function\" ? (\n      // @ts-expect-error\n      message2(issue)\n    ) : message2;\n  }\n  if (isSchema) {\n    dataset.typed = false;\n  }\n  if (dataset.issues) {\n    dataset.issues.push(issue);\n  } else {\n    dataset.issues = [issue];\n  }\n}\n\n// src/utils/_getByteCount/_getByteCount.ts\nvar textEncoder;\n// @__NO_SIDE_EFFECTS__\nfunction _getByteCount(input) {\n  if (!textEncoder) {\n    textEncoder = new TextEncoder();\n  }\n  return textEncoder.encode(input).length;\n}\n\n// src/utils/_getGraphemeCount/_getGraphemeCount.ts\nvar segmenter;\n// @__NO_SIDE_EFFECTS__\nfunction _getGraphemeCount(input) {\n  if (!segmenter) {\n    segmenter = new Intl.Segmenter();\n  }\n  const segments = segmenter.segment(input);\n  let count = 0;\n  for (const _ of segments) {\n    count++;\n  }\n  return count;\n}\n\n// src/utils/_getLastMetadata/_getLastMetadata.ts\n// @__NO_SIDE_EFFECTS__\nfunction _getLastMetadata(schema, type) {\n  if (\"pipe\" in schema) {\n    const nestedSchemas = [];\n    for (let index = schema.pipe.length - 1; index >= 0; index--) {\n      const item = schema.pipe[index];\n      if (item.kind === \"schema\" && \"pipe\" in item) {\n        nestedSchemas.push(item);\n      } else if (item.kind === \"metadata\" && item.type === type) {\n        return item[type];\n      }\n    }\n    for (const nestedSchema of nestedSchemas) {\n      const result = /* @__PURE__ */ _getLastMetadata(nestedSchema, type);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n  }\n}\n\n// src/utils/_getStandardProps/_getStandardProps.ts\n// @__NO_SIDE_EFFECTS__\nfunction _getStandardProps(context) {\n  return {\n    version: 1,\n    vendor: \"valibot\",\n    validate(value2) {\n      return context[\"~run\"]({ value: value2 }, getGlobalConfig());\n    }\n  };\n}\n\n// src/utils/_getWordCount/_getWordCount.ts\nvar store5;\n// @__NO_SIDE_EFFECTS__\nfunction _getWordCount(locales, input) {\n  if (!store5) {\n    store5 = /* @__PURE__ */ new Map();\n  }\n  if (!store5.get(locales)) {\n    store5.set(locales, new Intl.Segmenter(locales, { granularity: \"word\" }));\n  }\n  const segments = store5.get(locales).segment(input);\n  let count = 0;\n  for (const segment of segments) {\n    if (segment.isWordLike) {\n      count++;\n    }\n  }\n  return count;\n}\n\n// src/utils/_isLuhnAlgo/_isLuhnAlgo.ts\nvar NON_DIGIT_REGEX = /\\D/gu;\n// @__NO_SIDE_EFFECTS__\nfunction _isLuhnAlgo(input) {\n  const number2 = input.replace(NON_DIGIT_REGEX, \"\");\n  let length2 = number2.length;\n  let bit = 1;\n  let sum = 0;\n  while (length2) {\n    const value2 = +number2[--length2];\n    bit ^= 1;\n    sum += bit ? [0, 2, 4, 6, 8, 1, 3, 5, 7, 9][value2] : value2;\n  }\n  return sum % 10 === 0;\n}\n\n// src/utils/_isValidObjectKey/_isValidObjectKey.ts\n// @__NO_SIDE_EFFECTS__\nfunction _isValidObjectKey(object2, key) {\n  return Object.hasOwn(object2, key) && key !== \"__proto__\" && key !== \"prototype\" && key !== \"constructor\";\n}\n\n// src/utils/_joinExpects/_joinExpects.ts\n// @__NO_SIDE_EFFECTS__\nfunction _joinExpects(values2, separator) {\n  const list = [...new Set(values2)];\n  if (list.length > 1) {\n    return `(${list.join(` ${separator} `)})`;\n  }\n  return list[0] ?? \"never\";\n}\n\n// src/utils/entriesFromList/entriesFromList.ts\n// @__NO_SIDE_EFFECTS__\nfunction entriesFromList(list, schema) {\n  const entries2 = {};\n  for (const key of list) {\n    entries2[key] = schema;\n  }\n  return entries2;\n}\n\n// src/utils/entriesFromObjects/entriesFromObjects.ts\n// @__NO_SIDE_EFFECTS__\nfunction entriesFromObjects(schemas) {\n  const entries2 = {};\n  for (const schema of schemas) {\n    Object.assign(entries2, schema.entries);\n  }\n  return entries2;\n}\n\n// src/utils/getDotPath/getDotPath.ts\n// @__NO_SIDE_EFFECTS__\nfunction getDotPath(issue) {\n  if (issue.path) {\n    let key = \"\";\n    for (const item of issue.path) {\n      if (typeof item.key === \"string\" || typeof item.key === \"number\") {\n        if (key) {\n          key += `.${item.key}`;\n        } else {\n          key += item.key;\n        }\n      } else {\n        return null;\n      }\n    }\n    return key;\n  }\n  return null;\n}\n\n// src/utils/isOfKind/isOfKind.ts\n// @__NO_SIDE_EFFECTS__\nfunction isOfKind(kind, object2) {\n  return object2.kind === kind;\n}\n\n// src/utils/isOfType/isOfType.ts\n// @__NO_SIDE_EFFECTS__\nfunction isOfType(type, object2) {\n  return object2.type === type;\n}\n\n// src/utils/isValiError/isValiError.ts\n// @__NO_SIDE_EFFECTS__\nfunction isValiError(error) {\n  return error instanceof ValiError;\n}\n\n// src/utils/ValiError/ValiError.ts\nvar ValiError = class extends Error {\n  /**\n   * Creates a Valibot error with useful information.\n   *\n   * @param issues The error issues.\n   */\n  constructor(issues) {\n    super(issues[0].message);\n    this.name = \"ValiError\";\n    this.issues = issues;\n  }\n};\n\n// src/actions/args/args.ts\n// @__NO_SIDE_EFFECTS__\nfunction args(schema) {\n  return {\n    kind: \"transformation\",\n    type: \"args\",\n    reference: args,\n    async: false,\n    schema,\n    \"~run\"(dataset, config2) {\n      const func = dataset.value;\n      dataset.value = (...args_) => {\n        const argsDataset = this.schema[\"~run\"]({ value: args_ }, config2);\n        if (argsDataset.issues) {\n          throw new ValiError(argsDataset.issues);\n        }\n        return func(...argsDataset.value);\n      };\n      return dataset;\n    }\n  };\n}\n\n// src/actions/args/argsAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction argsAsync(schema) {\n  return {\n    kind: \"transformation\",\n    type: \"args\",\n    reference: argsAsync,\n    async: false,\n    schema,\n    \"~run\"(dataset, config2) {\n      const func = dataset.value;\n      dataset.value = async (...args2) => {\n        const argsDataset = await schema[\"~run\"]({ value: args2 }, config2);\n        if (argsDataset.issues) {\n          throw new ValiError(argsDataset.issues);\n        }\n        return func(...argsDataset.value);\n      };\n      return dataset;\n    }\n  };\n}\n\n// src/actions/await/awaitAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction awaitAsync() {\n  return {\n    kind: \"transformation\",\n    type: \"await\",\n    reference: awaitAsync,\n    async: true,\n    async \"~run\"(dataset) {\n      dataset.value = await dataset.value;\n      return dataset;\n    }\n  };\n}\n\n// src/regex.ts\nvar BASE64_REGEX = /^(?:[\\da-z+/]{4})*(?:[\\da-z+/]{2}==|[\\da-z+/]{3}=)?$/iu;\nvar BIC_REGEX = /^[A-Z]{6}(?!00)[\\dA-Z]{2}(?:[\\dA-Z]{3})?$/u;\nvar CUID2_REGEX = /^[a-z][\\da-z]*$/u;\nvar DECIMAL_REGEX = /^[+-]?(?:\\d*\\.)?\\d+$/u;\nvar DIGITS_REGEX = /^\\d+$/u;\nvar EMAIL_REGEX = /^[\\w+-]+(?:\\.[\\w+-]+)*@[\\da-z]+(?:[.-][\\da-z]+)*\\.[a-z]{2,}$/iu;\nvar EMOJI_REGEX = (\n  // eslint-disable-next-line redos-detector/no-unsafe-regex, regexp/no-dupe-disjunctions -- false positives\n  /^(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}[\\u{E0061}-\\u{E007A}]{2}[\\u{E0030}-\\u{E0039}\\u{E0061}-\\u{E007A}]{1,3}\\u{E007F}|(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation})(?:\\u200D(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}))*)+$/u\n);\nvar HEXADECIMAL_REGEX = /^(?:0[hx])?[\\da-fA-F]+$/u;\nvar HEX_COLOR_REGEX = /^#(?:[\\da-fA-F]{3,4}|[\\da-fA-F]{6}|[\\da-fA-F]{8})$/u;\nvar IMEI_REGEX = /^\\d{15}$|^\\d{2}-\\d{6}-\\d{6}-\\d$/u;\nvar IPV4_REGEX = (\n  // eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive\n  /^(?:(?:[1-9]|1\\d|2[0-4])?\\d|25[0-5])(?:\\.(?:(?:[1-9]|1\\d|2[0-4])?\\d|25[0-5])){3}$/u\n);\nvar IPV6_REGEX = /^(?:(?:[\\da-f]{1,4}:){7}[\\da-f]{1,4}|(?:[\\da-f]{1,4}:){1,7}:|(?:[\\da-f]{1,4}:){1,6}:[\\da-f]{1,4}|(?:[\\da-f]{1,4}:){1,5}(?::[\\da-f]{1,4}){1,2}|(?:[\\da-f]{1,4}:){1,4}(?::[\\da-f]{1,4}){1,3}|(?:[\\da-f]{1,4}:){1,3}(?::[\\da-f]{1,4}){1,4}|(?:[\\da-f]{1,4}:){1,2}(?::[\\da-f]{1,4}){1,5}|[\\da-f]{1,4}:(?::[\\da-f]{1,4}){1,6}|:(?:(?::[\\da-f]{1,4}){1,7}|:)|fe80:(?::[\\da-f]{0,4}){0,4}%[\\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)\\.){3}(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)|(?:[\\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)\\.){3}(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d))$/iu;\nvar IP_REGEX = /^(?:(?:[1-9]|1\\d|2[0-4])?\\d|25[0-5])(?:\\.(?:(?:[1-9]|1\\d|2[0-4])?\\d|25[0-5])){3}$|^(?:(?:[\\da-f]{1,4}:){7}[\\da-f]{1,4}|(?:[\\da-f]{1,4}:){1,7}:|(?:[\\da-f]{1,4}:){1,6}:[\\da-f]{1,4}|(?:[\\da-f]{1,4}:){1,5}(?::[\\da-f]{1,4}){1,2}|(?:[\\da-f]{1,4}:){1,4}(?::[\\da-f]{1,4}){1,3}|(?:[\\da-f]{1,4}:){1,3}(?::[\\da-f]{1,4}){1,4}|(?:[\\da-f]{1,4}:){1,2}(?::[\\da-f]{1,4}){1,5}|[\\da-f]{1,4}:(?::[\\da-f]{1,4}){1,6}|:(?:(?::[\\da-f]{1,4}){1,7}|:)|fe80:(?::[\\da-f]{0,4}){0,4}%[\\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)\\.){3}(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)|(?:[\\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)\\.){3}(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d))$/iu;\nvar ISO_DATE_REGEX = /^\\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\\d|0[1-9]|3[01])$/u;\nvar ISO_DATE_TIME_REGEX = /^\\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\\d|0[1-9]|3[01])[T ](?:0\\d|1\\d|2[0-3]):[0-5]\\d$/u;\nvar ISO_TIME_REGEX = /^(?:0\\d|1\\d|2[0-3]):[0-5]\\d$/u;\nvar ISO_TIME_SECOND_REGEX = /^(?:0\\d|1\\d|2[0-3])(?::[0-5]\\d){2}$/u;\nvar ISO_TIMESTAMP_REGEX = /^\\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\\d|0[1-9]|3[01])[T ](?:0\\d|1\\d|2[0-3])(?::[0-5]\\d){2}(?:\\.\\d{1,9})?(?:Z|[+-](?:0\\d|1\\d|2[0-3])(?::?[0-5]\\d)?)$/u;\nvar ISO_WEEK_REGEX = /^\\d{4}-W(?:0[1-9]|[1-4]\\d|5[0-3])$/u;\nvar MAC48_REGEX = /^(?:[\\da-f]{2}:){5}[\\da-f]{2}$|^(?:[\\da-f]{2}-){5}[\\da-f]{2}$|^(?:[\\da-f]{4}\\.){2}[\\da-f]{4}$/iu;\nvar MAC64_REGEX = /^(?:[\\da-f]{2}:){7}[\\da-f]{2}$|^(?:[\\da-f]{2}-){7}[\\da-f]{2}$|^(?:[\\da-f]{4}\\.){3}[\\da-f]{4}$|^(?:[\\da-f]{4}:){3}[\\da-f]{4}$/iu;\nvar MAC_REGEX = /^(?:[\\da-f]{2}:){5}[\\da-f]{2}$|^(?:[\\da-f]{2}-){5}[\\da-f]{2}$|^(?:[\\da-f]{4}\\.){2}[\\da-f]{4}$|^(?:[\\da-f]{2}:){7}[\\da-f]{2}$|^(?:[\\da-f]{2}-){7}[\\da-f]{2}$|^(?:[\\da-f]{4}\\.){3}[\\da-f]{4}$|^(?:[\\da-f]{4}:){3}[\\da-f]{4}$/iu;\nvar NANO_ID_REGEX = /^[\\w-]+$/u;\nvar OCTAL_REGEX = /^(?:0o)?[0-7]+$/u;\nvar RFC_EMAIL_REGEX = (\n  // eslint-disable-next-line regexp/prefer-w, no-useless-escape, regexp/no-useless-escape, regexp/require-unicode-regexp\n  /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/\n);\nvar SLUG_REGEX = /^[\\da-z]+(?:[-_][\\da-z]+)*$/u;\nvar ULID_REGEX = /^[\\da-hjkmnp-tv-zA-HJKMNP-TV-Z]{26}$/u;\nvar UUID_REGEX = /^[\\da-f]{8}(?:-[\\da-f]{4}){3}-[\\da-f]{12}$/iu;\n\n// src/actions/base64/base64.ts\n// @__NO_SIDE_EFFECTS__\nfunction base64(message2) {\n  return {\n    kind: \"validation\",\n    type: \"base64\",\n    reference: base64,\n    async: false,\n    expects: null,\n    requirement: BASE64_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"Base64\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/bic/bic.ts\n// @__NO_SIDE_EFFECTS__\nfunction bic(message2) {\n  return {\n    kind: \"validation\",\n    type: \"bic\",\n    reference: bic,\n    async: false,\n    expects: null,\n    requirement: BIC_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"BIC\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/brand/brand.ts\n// @__NO_SIDE_EFFECTS__\nfunction brand(name) {\n  return {\n    kind: \"transformation\",\n    type: \"brand\",\n    reference: brand,\n    async: false,\n    name,\n    \"~run\"(dataset) {\n      return dataset;\n    }\n  };\n}\n\n// src/actions/bytes/bytes.ts\n// @__NO_SIDE_EFFECTS__\nfunction bytes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"bytes\",\n    reference: bytes,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const length2 = _getByteCount(dataset.value);\n        if (length2 !== this.requirement) {\n          _addIssue(this, \"bytes\", dataset, config2, {\n            received: `${length2}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/check/check.ts\n// @__NO_SIDE_EFFECTS__\nfunction check(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"check\",\n    reference: check,\n    async: false,\n    expects: null,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"input\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/check/checkAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction checkAsync(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"check\",\n    reference: checkAsync,\n    async: true,\n    expects: null,\n    requirement,\n    message: message2,\n    async \"~run\"(dataset, config2) {\n      if (dataset.typed && !await this.requirement(dataset.value)) {\n        _addIssue(this, \"input\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/checkItems/checkItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction checkItems(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"check_items\",\n    reference: checkItems,\n    async: false,\n    expects: null,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        for (let index = 0; index < dataset.value.length; index++) {\n          const item = dataset.value[index];\n          if (!this.requirement(item, index, dataset.value)) {\n            _addIssue(this, \"item\", dataset, config2, {\n              input: item,\n              path: [\n                {\n                  type: \"array\",\n                  origin: \"value\",\n                  input: dataset.value,\n                  key: index,\n                  value: item\n                }\n              ]\n            });\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/checkItems/checkItemsAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction checkItemsAsync(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"check_items\",\n    reference: checkItemsAsync,\n    async: true,\n    expects: null,\n    requirement,\n    message: message2,\n    async \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const requirementResults = await Promise.all(\n          dataset.value.map(this.requirement)\n        );\n        for (let index = 0; index < dataset.value.length; index++) {\n          if (!requirementResults[index]) {\n            const item = dataset.value[index];\n            _addIssue(this, \"item\", dataset, config2, {\n              input: item,\n              path: [\n                {\n                  type: \"array\",\n                  origin: \"value\",\n                  input: dataset.value,\n                  key: index,\n                  value: item\n                }\n              ]\n            });\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/creditCard/creditCard.ts\nvar CREDIT_CARD_REGEX = /^(?:\\d{14,19}|\\d{4}(?: \\d{3,6}){2,4}|\\d{4}(?:-\\d{3,6}){2,4})$/u;\nvar SANITIZE_REGEX = /[- ]/gu;\nvar PROVIDER_REGEX_LIST = [\n  // American Express\n  /^3[47]\\d{13}$/u,\n  // Diners Club\n  /^3(?:0[0-5]|[68]\\d)\\d{11,13}$/u,\n  // Discover\n  /^6(?:011|5\\d{2})\\d{12,15}$/u,\n  // JCB\n  /^(?:2131|1800|35\\d{3})\\d{11}$/u,\n  // Mastercard\n  // eslint-disable-next-line redos-detector/no-unsafe-regex\n  /^5[1-5]\\d{2}|(?:222\\d|22[3-9]\\d|2[3-6]\\d{2}|27[01]\\d|2720)\\d{12}$/u,\n  // UnionPay\n  /^(?:6[27]\\d{14,17}|81\\d{14,17})$/u,\n  // Visa\n  /^4\\d{12}(?:\\d{3,6})?$/u\n];\n// @__NO_SIDE_EFFECTS__\nfunction creditCard(message2) {\n  return {\n    kind: \"validation\",\n    type: \"credit_card\",\n    reference: creditCard,\n    async: false,\n    expects: null,\n    requirement(input) {\n      let sanitized;\n      return CREDIT_CARD_REGEX.test(input) && // Remove any hyphens and blanks\n      (sanitized = input.replace(SANITIZE_REGEX, \"\")) && // Check if it matches a provider\n      PROVIDER_REGEX_LIST.some((regex2) => regex2.test(sanitized)) && // Check if passes luhn algorithm\n      _isLuhnAlgo(sanitized);\n    },\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"credit card\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/cuid2/cuid2.ts\n// @__NO_SIDE_EFFECTS__\nfunction cuid2(message2) {\n  return {\n    kind: \"validation\",\n    type: \"cuid2\",\n    reference: cuid2,\n    async: false,\n    expects: null,\n    requirement: CUID2_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"Cuid2\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/decimal/decimal.ts\n// @__NO_SIDE_EFFECTS__\nfunction decimal(message2) {\n  return {\n    kind: \"validation\",\n    type: \"decimal\",\n    reference: decimal,\n    async: false,\n    expects: null,\n    requirement: DECIMAL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"decimal\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/description/description.ts\n// @__NO_SIDE_EFFECTS__\nfunction description(description_) {\n  return {\n    kind: \"metadata\",\n    type: \"description\",\n    reference: description,\n    description: description_\n  };\n}\n\n// src/actions/digits/digits.ts\n// @__NO_SIDE_EFFECTS__\nfunction digits(message2) {\n  return {\n    kind: \"validation\",\n    type: \"digits\",\n    reference: digits,\n    async: false,\n    expects: null,\n    requirement: DIGITS_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"digits\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/email/email.ts\n// @__NO_SIDE_EFFECTS__\nfunction email(message2) {\n  return {\n    kind: \"validation\",\n    type: \"email\",\n    reference: email,\n    expects: null,\n    async: false,\n    requirement: EMAIL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"email\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/emoji/emoji.ts\n// @__NO_SIDE_EFFECTS__\nfunction emoji(message2) {\n  return {\n    kind: \"validation\",\n    type: \"emoji\",\n    reference: emoji,\n    async: false,\n    expects: null,\n    requirement: EMOJI_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"emoji\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/empty/empty.ts\n// @__NO_SIDE_EFFECTS__\nfunction empty(message2) {\n  return {\n    kind: \"validation\",\n    type: \"empty\",\n    reference: empty,\n    async: false,\n    expects: \"0\",\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length > 0) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/endsWith/endsWith.ts\n// @__NO_SIDE_EFFECTS__\nfunction endsWith(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"ends_with\",\n    reference: endsWith,\n    async: false,\n    expects: `\"${requirement}\"`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.endsWith(this.requirement)) {\n        _addIssue(this, \"end\", dataset, config2, {\n          received: `\"${dataset.value.slice(-this.requirement.length)}\"`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/entries/entries.ts\n// @__NO_SIDE_EFFECTS__\nfunction entries(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"entries\",\n    reference: entries,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (!dataset.typed) return dataset;\n      const count = Object.keys(dataset.value).length;\n      if (dataset.typed && count !== this.requirement) {\n        _addIssue(this, \"entries\", dataset, config2, {\n          received: `${count}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/everyItem/everyItem.ts\n// @__NO_SIDE_EFFECTS__\nfunction everyItem(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"every_item\",\n    reference: everyItem,\n    async: false,\n    expects: null,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.every(this.requirement)) {\n        _addIssue(this, \"item\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/excludes/excludes.ts\n// @__NO_SIDE_EFFECTS__\nfunction excludes(requirement, message2) {\n  const received = _stringify(requirement);\n  return {\n    kind: \"validation\",\n    type: \"excludes\",\n    reference: excludes,\n    async: false,\n    expects: `!${received}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.includes(this.requirement)) {\n        _addIssue(this, \"content\", dataset, config2, { received });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/filterItems/filterItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction filterItems(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"filter_items\",\n    reference: filterItems,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.filter(this.operation);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/findItem/findItem.ts\n// @__NO_SIDE_EFFECTS__\nfunction findItem(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"find_item\",\n    reference: findItem,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.find(this.operation);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/finite/finite.ts\n// @__NO_SIDE_EFFECTS__\nfunction finite(message2) {\n  return {\n    kind: \"validation\",\n    type: \"finite\",\n    reference: finite,\n    async: false,\n    expects: null,\n    requirement: Number.isFinite,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"finite\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/flavor/flavor.ts\n// @__NO_SIDE_EFFECTS__\nfunction flavor(name) {\n  return {\n    kind: \"transformation\",\n    type: \"flavor\",\n    reference: flavor,\n    async: false,\n    name,\n    \"~run\"(dataset) {\n      return dataset;\n    }\n  };\n}\n\n// src/actions/graphemes/graphemes.ts\n// @__NO_SIDE_EFFECTS__\nfunction graphemes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"graphemes\",\n    reference: graphemes,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getGraphemeCount(dataset.value);\n        if (count !== this.requirement) {\n          _addIssue(this, \"graphemes\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/gtValue/gtValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction gtValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"gt_value\",\n    reference: gtValue,\n    async: false,\n    expects: `>${requirement instanceof Date ? requirement.toJSON() : _stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(dataset.value > this.requirement)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/hash/hash.ts\nvar HASH_LENGTHS = {\n  md4: 32,\n  md5: 32,\n  sha1: 40,\n  sha256: 64,\n  sha384: 96,\n  sha512: 128,\n  ripemd128: 32,\n  ripemd160: 40,\n  tiger128: 32,\n  tiger160: 40,\n  tiger192: 48,\n  crc32: 8,\n  crc32b: 8,\n  adler32: 8\n};\n// @__NO_SIDE_EFFECTS__\nfunction hash(types, message2) {\n  return {\n    kind: \"validation\",\n    type: \"hash\",\n    reference: hash,\n    expects: null,\n    async: false,\n    requirement: RegExp(\n      types.map((type) => `^[a-f0-9]{${HASH_LENGTHS[type]}}$`).join(\"|\"),\n      \"iu\"\n    ),\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"hash\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/hexadecimal/hexadecimal.ts\n// @__NO_SIDE_EFFECTS__\nfunction hexadecimal(message2) {\n  return {\n    kind: \"validation\",\n    type: \"hexadecimal\",\n    reference: hexadecimal,\n    async: false,\n    expects: null,\n    requirement: HEXADECIMAL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"hexadecimal\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/hexColor/hexColor.ts\n// @__NO_SIDE_EFFECTS__\nfunction hexColor(message2) {\n  return {\n    kind: \"validation\",\n    type: \"hex_color\",\n    reference: hexColor,\n    async: false,\n    expects: null,\n    requirement: HEX_COLOR_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"hex color\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/imei/imei.ts\n// @__NO_SIDE_EFFECTS__\nfunction imei(message2) {\n  return {\n    kind: \"validation\",\n    type: \"imei\",\n    reference: imei,\n    async: false,\n    expects: null,\n    requirement(input) {\n      return IMEI_REGEX.test(input) && _isLuhnAlgo(input);\n    },\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"IMEI\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/includes/includes.ts\n// @__NO_SIDE_EFFECTS__\nfunction includes(requirement, message2) {\n  const expects = _stringify(requirement);\n  return {\n    kind: \"validation\",\n    type: \"includes\",\n    reference: includes,\n    async: false,\n    expects,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.includes(this.requirement)) {\n        _addIssue(this, \"content\", dataset, config2, {\n          received: `!${expects}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/integer/integer.ts\n// @__NO_SIDE_EFFECTS__\nfunction integer(message2) {\n  return {\n    kind: \"validation\",\n    type: \"integer\",\n    reference: integer,\n    async: false,\n    expects: null,\n    requirement: Number.isInteger,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"integer\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ip/ip.ts\n// @__NO_SIDE_EFFECTS__\nfunction ip(message2) {\n  return {\n    kind: \"validation\",\n    type: \"ip\",\n    reference: ip,\n    async: false,\n    expects: null,\n    requirement: IP_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"IP\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ipv4/ipv4.ts\n// @__NO_SIDE_EFFECTS__\nfunction ipv4(message2) {\n  return {\n    kind: \"validation\",\n    type: \"ipv4\",\n    reference: ipv4,\n    async: false,\n    expects: null,\n    requirement: IPV4_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"IPv4\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ipv6/ipv6.ts\n// @__NO_SIDE_EFFECTS__\nfunction ipv6(message2) {\n  return {\n    kind: \"validation\",\n    type: \"ipv6\",\n    reference: ipv6,\n    async: false,\n    expects: null,\n    requirement: IPV6_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"IPv6\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoDate/isoDate.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoDate(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_date\",\n    reference: isoDate,\n    async: false,\n    expects: null,\n    requirement: ISO_DATE_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"date\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoDateTime/isoDateTime.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoDateTime(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_date_time\",\n    reference: isoDateTime,\n    async: false,\n    expects: null,\n    requirement: ISO_DATE_TIME_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"date-time\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoTime/isoTime.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoTime(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_time\",\n    reference: isoTime,\n    async: false,\n    expects: null,\n    requirement: ISO_TIME_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"time\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoTimeSecond/isoTimeSecond.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoTimeSecond(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_time_second\",\n    reference: isoTimeSecond,\n    async: false,\n    expects: null,\n    requirement: ISO_TIME_SECOND_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"time-second\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoTimestamp/isoTimestamp.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoTimestamp(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_timestamp\",\n    reference: isoTimestamp,\n    async: false,\n    expects: null,\n    requirement: ISO_TIMESTAMP_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"timestamp\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoWeek/isoWeek.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoWeek(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_week\",\n    reference: isoWeek,\n    async: false,\n    expects: null,\n    requirement: ISO_WEEK_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"week\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/length/length.ts\n// @__NO_SIDE_EFFECTS__\nfunction length(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"length\",\n    reference: length,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length !== this.requirement) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ltValue/ltValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction ltValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"lt_value\",\n    reference: ltValue,\n    async: false,\n    expects: `<${requirement instanceof Date ? requirement.toJSON() : _stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(dataset.value < this.requirement)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/mac/mac.ts\n// @__NO_SIDE_EFFECTS__\nfunction mac(message2) {\n  return {\n    kind: \"validation\",\n    type: \"mac\",\n    reference: mac,\n    async: false,\n    expects: null,\n    requirement: MAC_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"MAC\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/mac48/mac48.ts\n// @__NO_SIDE_EFFECTS__\nfunction mac48(message2) {\n  return {\n    kind: \"validation\",\n    type: \"mac48\",\n    reference: mac48,\n    async: false,\n    expects: null,\n    requirement: MAC48_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"48-bit MAC\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/mac64/mac64.ts\n// @__NO_SIDE_EFFECTS__\nfunction mac64(message2) {\n  return {\n    kind: \"validation\",\n    type: \"mac64\",\n    reference: mac64,\n    async: false,\n    expects: null,\n    requirement: MAC64_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"64-bit MAC\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/mapItems/mapItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction mapItems(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"map_items\",\n    reference: mapItems,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.map(this.operation);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxBytes/maxBytes.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxBytes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_bytes\",\n    reference: maxBytes,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const length2 = _getByteCount(dataset.value);\n        if (length2 > this.requirement) {\n          _addIssue(this, \"bytes\", dataset, config2, {\n            received: `${length2}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxEntries/maxEntries.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxEntries(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_entries\",\n    reference: maxEntries,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (!dataset.typed) return dataset;\n      const count = Object.keys(dataset.value).length;\n      if (dataset.typed && count > this.requirement) {\n        _addIssue(this, \"entries\", dataset, config2, {\n          received: `${count}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxGraphemes/maxGraphemes.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxGraphemes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_graphemes\",\n    reference: maxGraphemes,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getGraphemeCount(dataset.value);\n        if (count > this.requirement) {\n          _addIssue(this, \"graphemes\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxLength/maxLength.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxLength(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_length\",\n    reference: maxLength,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length > this.requirement) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxSize/maxSize.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxSize(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_size\",\n    reference: maxSize,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.size > this.requirement) {\n        _addIssue(this, \"size\", dataset, config2, {\n          received: `${dataset.value.size}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxValue/maxValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_value\",\n    reference: maxValue,\n    async: false,\n    expects: `<=${requirement instanceof Date ? requirement.toJSON() : _stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(dataset.value <= this.requirement)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxWords/maxWords.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxWords(locales, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_words\",\n    reference: maxWords,\n    async: false,\n    expects: `<=${requirement}`,\n    locales,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getWordCount(this.locales, dataset.value);\n        if (count > this.requirement) {\n          _addIssue(this, \"words\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/metadata/metadata.ts\n// @__NO_SIDE_EFFECTS__\nfunction metadata(metadata_) {\n  return {\n    kind: \"metadata\",\n    type: \"metadata\",\n    reference: metadata,\n    metadata: metadata_\n  };\n}\n\n// src/actions/mimeType/mimeType.ts\n// @__NO_SIDE_EFFECTS__\nfunction mimeType(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"mime_type\",\n    reference: mimeType,\n    async: false,\n    expects: _joinExpects(\n      requirement.map((option) => `\"${option}\"`),\n      \"|\"\n    ),\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.includes(dataset.value.type)) {\n        _addIssue(this, \"MIME type\", dataset, config2, {\n          received: `\"${dataset.value.type}\"`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minBytes/minBytes.ts\n// @__NO_SIDE_EFFECTS__\nfunction minBytes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_bytes\",\n    reference: minBytes,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const length2 = _getByteCount(dataset.value);\n        if (length2 < this.requirement) {\n          _addIssue(this, \"bytes\", dataset, config2, {\n            received: `${length2}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minEntries/minEntries.ts\n// @__NO_SIDE_EFFECTS__\nfunction minEntries(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_entries\",\n    reference: minEntries,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (!dataset.typed) return dataset;\n      const count = Object.keys(dataset.value).length;\n      if (dataset.typed && count < this.requirement) {\n        _addIssue(this, \"entries\", dataset, config2, {\n          received: `${count}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minGraphemes/minGraphemes.ts\n// @__NO_SIDE_EFFECTS__\nfunction minGraphemes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_graphemes\",\n    reference: minGraphemes,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getGraphemeCount(dataset.value);\n        if (count < this.requirement) {\n          _addIssue(this, \"graphemes\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minLength/minLength.ts\n// @__NO_SIDE_EFFECTS__\nfunction minLength(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_length\",\n    reference: minLength,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length < this.requirement) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minSize/minSize.ts\n// @__NO_SIDE_EFFECTS__\nfunction minSize(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_size\",\n    reference: minSize,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.size < this.requirement) {\n        _addIssue(this, \"size\", dataset, config2, {\n          received: `${dataset.value.size}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minValue/minValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction minValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_value\",\n    reference: minValue,\n    async: false,\n    expects: `>=${requirement instanceof Date ? requirement.toJSON() : _stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(dataset.value >= this.requirement)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minWords/minWords.ts\n// @__NO_SIDE_EFFECTS__\nfunction minWords(locales, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_words\",\n    reference: minWords,\n    async: false,\n    expects: `>=${requirement}`,\n    locales,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getWordCount(this.locales, dataset.value);\n        if (count < this.requirement) {\n          _addIssue(this, \"words\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/multipleOf/multipleOf.ts\n// @__NO_SIDE_EFFECTS__\nfunction multipleOf(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"multiple_of\",\n    reference: multipleOf,\n    async: false,\n    expects: `%${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value % this.requirement != 0) {\n        _addIssue(this, \"multiple\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/nanoid/nanoid.ts\n// @__NO_SIDE_EFFECTS__\nfunction nanoid(message2) {\n  return {\n    kind: \"validation\",\n    type: \"nanoid\",\n    reference: nanoid,\n    async: false,\n    expects: null,\n    requirement: NANO_ID_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"Nano ID\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/nonEmpty/nonEmpty.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonEmpty(message2) {\n  return {\n    kind: \"validation\",\n    type: \"non_empty\",\n    reference: nonEmpty,\n    async: false,\n    expects: \"!0\",\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length === 0) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: \"0\"\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/normalize/normalize.ts\n// @__NO_SIDE_EFFECTS__\nfunction normalize(form) {\n  return {\n    kind: \"transformation\",\n    type: \"normalize\",\n    reference: normalize,\n    async: false,\n    form,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.normalize(this.form);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notBytes/notBytes.ts\n// @__NO_SIDE_EFFECTS__\nfunction notBytes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_bytes\",\n    reference: notBytes,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const length2 = _getByteCount(dataset.value);\n        if (length2 === this.requirement) {\n          _addIssue(this, \"bytes\", dataset, config2, {\n            received: `${length2}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notEntries/notEntries.ts\n// @__NO_SIDE_EFFECTS__\nfunction notEntries(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_entries\",\n    reference: notEntries,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (!dataset.typed) return dataset;\n      const count = Object.keys(dataset.value).length;\n      if (dataset.typed && count === this.requirement) {\n        _addIssue(this, \"entries\", dataset, config2, {\n          received: `${count}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notGraphemes/notGraphemes.ts\n// @__NO_SIDE_EFFECTS__\nfunction notGraphemes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_graphemes\",\n    reference: notGraphemes,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getGraphemeCount(dataset.value);\n        if (count === this.requirement) {\n          _addIssue(this, \"graphemes\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notLength/notLength.ts\n// @__NO_SIDE_EFFECTS__\nfunction notLength(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_length\",\n    reference: notLength,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length === this.requirement) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notSize/notSize.ts\n// @__NO_SIDE_EFFECTS__\nfunction notSize(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_size\",\n    reference: notSize,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.size === this.requirement) {\n        _addIssue(this, \"size\", dataset, config2, {\n          received: `${dataset.value.size}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notValue/notValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction notValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_value\",\n    reference: notValue,\n    async: false,\n    expects: requirement instanceof Date ? `!${requirement.toJSON()}` : `!${_stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && this.requirement <= dataset.value && this.requirement >= dataset.value) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notValues/notValues.ts\n// @__NO_SIDE_EFFECTS__\nfunction notValues(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_values\",\n    reference: notValues,\n    async: false,\n    expects: `!${_joinExpects(\n      requirement.map(\n        (value2) => value2 instanceof Date ? value2.toJSON() : _stringify(value2)\n      ),\n      \"|\"\n    )}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && this.requirement.some(\n        (value2) => value2 <= dataset.value && value2 >= dataset.value\n      )) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notWords/notWords.ts\n// @__NO_SIDE_EFFECTS__\nfunction notWords(locales, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_words\",\n    reference: notWords,\n    async: false,\n    expects: `!${requirement}`,\n    locales,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getWordCount(this.locales, dataset.value);\n        if (count === this.requirement) {\n          _addIssue(this, \"words\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/octal/octal.ts\n// @__NO_SIDE_EFFECTS__\nfunction octal(message2) {\n  return {\n    kind: \"validation\",\n    type: \"octal\",\n    reference: octal,\n    async: false,\n    expects: null,\n    requirement: OCTAL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"octal\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/parseJson/parseJson.ts\n// @__NO_SIDE_EFFECTS__\nfunction parseJson(config2, message2) {\n  return {\n    kind: \"transformation\",\n    type: \"parse_json\",\n    reference: parseJson,\n    config: config2,\n    message: message2,\n    async: false,\n    \"~run\"(dataset, config3) {\n      try {\n        dataset.value = JSON.parse(dataset.value, this.config?.reviver);\n      } catch (error) {\n        if (error instanceof Error) {\n          _addIssue(this, \"JSON\", dataset, config3, {\n            received: `\"${error.message}\"`\n          });\n          dataset.typed = false;\n        } else {\n          throw error;\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/partialCheck/utils/_isPartiallyTyped/_isPartiallyTyped.ts\n// @__NO_SIDE_EFFECTS__\nfunction _isPartiallyTyped(dataset, paths) {\n  if (dataset.issues) {\n    for (const path of paths) {\n      for (const issue of dataset.issues) {\n        let typed = false;\n        const bound = Math.min(path.length, issue.path?.length ?? 0);\n        for (let index = 0; index < bound; index++) {\n          if (\n            // @ts-expect-error\n            path[index] !== issue.path[index].key && // @ts-expect-error\n            (path[index] !== \"$\" || issue.path[index].type !== \"array\")\n          ) {\n            typed = true;\n            break;\n          }\n        }\n        if (!typed) {\n          return false;\n        }\n      }\n    }\n  }\n  return true;\n}\n\n// src/actions/partialCheck/partialCheck.ts\n// @__NO_SIDE_EFFECTS__\nfunction partialCheck(paths, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"partial_check\",\n    reference: partialCheck,\n    async: false,\n    expects: null,\n    paths,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if ((dataset.typed || _isPartiallyTyped(dataset, paths)) && // @ts-expect-error\n      !this.requirement(dataset.value)) {\n        _addIssue(this, \"input\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/partialCheck/partialCheckAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction partialCheckAsync(paths, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"partial_check\",\n    reference: partialCheckAsync,\n    async: true,\n    expects: null,\n    paths,\n    requirement,\n    message: message2,\n    async \"~run\"(dataset, config2) {\n      if ((dataset.typed || _isPartiallyTyped(dataset, paths)) && // @ts-expect-error\n      !await this.requirement(dataset.value)) {\n        _addIssue(this, \"input\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rawCheck/rawCheck.ts\n// @__NO_SIDE_EFFECTS__\nfunction rawCheck(action) {\n  return {\n    kind: \"validation\",\n    type: \"raw_check\",\n    reference: rawCheck,\n    async: false,\n    expects: null,\n    \"~run\"(dataset, config2) {\n      action({\n        dataset,\n        config: config2,\n        addIssue: (info) => _addIssue(this, info?.label ?? \"input\", dataset, config2, info)\n      });\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rawCheck/rawCheckAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction rawCheckAsync(action) {\n  return {\n    kind: \"validation\",\n    type: \"raw_check\",\n    reference: rawCheckAsync,\n    async: true,\n    expects: null,\n    async \"~run\"(dataset, config2) {\n      await action({\n        dataset,\n        config: config2,\n        addIssue: (info) => _addIssue(this, info?.label ?? \"input\", dataset, config2, info)\n      });\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rawTransform/rawTransform.ts\n// @__NO_SIDE_EFFECTS__\nfunction rawTransform(action) {\n  return {\n    kind: \"transformation\",\n    type: \"raw_transform\",\n    reference: rawTransform,\n    async: false,\n    \"~run\"(dataset, config2) {\n      const output = action({\n        dataset,\n        config: config2,\n        addIssue: (info) => _addIssue(this, info?.label ?? \"input\", dataset, config2, info),\n        NEVER: null\n      });\n      if (dataset.issues) {\n        dataset.typed = false;\n      } else {\n        dataset.value = output;\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rawTransform/rawTransformAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction rawTransformAsync(action) {\n  return {\n    kind: \"transformation\",\n    type: \"raw_transform\",\n    reference: rawTransformAsync,\n    async: true,\n    async \"~run\"(dataset, config2) {\n      const output = await action({\n        dataset,\n        config: config2,\n        addIssue: (info) => _addIssue(this, info?.label ?? \"input\", dataset, config2, info),\n        NEVER: null\n      });\n      if (dataset.issues) {\n        dataset.typed = false;\n      } else {\n        dataset.value = output;\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/readonly/readonly.ts\n// @__NO_SIDE_EFFECTS__\nfunction readonly() {\n  return {\n    kind: \"transformation\",\n    type: \"readonly\",\n    reference: readonly,\n    async: false,\n    \"~run\"(dataset) {\n      return dataset;\n    }\n  };\n}\n\n// src/actions/reduceItems/reduceItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction reduceItems(operation, initial) {\n  return {\n    kind: \"transformation\",\n    type: \"reduce_items\",\n    reference: reduceItems,\n    async: false,\n    operation,\n    initial,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.reduce(this.operation, this.initial);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/regex/regex.ts\n// @__NO_SIDE_EFFECTS__\nfunction regex(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"regex\",\n    reference: regex,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"format\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/returns/returns.ts\n// @__NO_SIDE_EFFECTS__\nfunction returns(schema) {\n  return {\n    kind: \"transformation\",\n    type: \"returns\",\n    reference: returns,\n    async: false,\n    schema,\n    \"~run\"(dataset, config2) {\n      const func = dataset.value;\n      dataset.value = (...args_) => {\n        const returnsDataset = this.schema[\"~run\"](\n          { value: func(...args_) },\n          config2\n        );\n        if (returnsDataset.issues) {\n          throw new ValiError(returnsDataset.issues);\n        }\n        return returnsDataset.value;\n      };\n      return dataset;\n    }\n  };\n}\n\n// src/actions/returns/returnsAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction returnsAsync(schema) {\n  return {\n    kind: \"transformation\",\n    type: \"returns\",\n    reference: returnsAsync,\n    async: false,\n    schema,\n    \"~run\"(dataset, config2) {\n      const func = dataset.value;\n      dataset.value = async (...args_) => {\n        const returnsDataset = await this.schema[\"~run\"](\n          { value: await func(...args_) },\n          config2\n        );\n        if (returnsDataset.issues) {\n          throw new ValiError(returnsDataset.issues);\n        }\n        return returnsDataset.value;\n      };\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rfcEmail/rfcEmail.ts\n// @__NO_SIDE_EFFECTS__\nfunction rfcEmail(message2) {\n  return {\n    kind: \"validation\",\n    type: \"rfc_email\",\n    reference: rfcEmail,\n    expects: null,\n    async: false,\n    requirement: RFC_EMAIL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"email\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/safeInteger/safeInteger.ts\n// @__NO_SIDE_EFFECTS__\nfunction safeInteger(message2) {\n  return {\n    kind: \"validation\",\n    type: \"safe_integer\",\n    reference: safeInteger,\n    async: false,\n    expects: null,\n    requirement: Number.isSafeInteger,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"safe integer\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/size/size.ts\n// @__NO_SIDE_EFFECTS__\nfunction size(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"size\",\n    reference: size,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.size !== this.requirement) {\n        _addIssue(this, \"size\", dataset, config2, {\n          received: `${dataset.value.size}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/slug/slug.ts\n// @__NO_SIDE_EFFECTS__\nfunction slug(message2) {\n  return {\n    kind: \"validation\",\n    type: \"slug\",\n    reference: slug,\n    async: false,\n    expects: null,\n    requirement: SLUG_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"slug\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/someItem/someItem.ts\n// @__NO_SIDE_EFFECTS__\nfunction someItem(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"some_item\",\n    reference: someItem,\n    async: false,\n    expects: null,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.some(this.requirement)) {\n        _addIssue(this, \"item\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/sortItems/sortItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction sortItems(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"sort_items\",\n    reference: sortItems,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.sort(this.operation);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/startsWith/startsWith.ts\n// @__NO_SIDE_EFFECTS__\nfunction startsWith(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"starts_with\",\n    reference: startsWith,\n    async: false,\n    expects: `\"${requirement}\"`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.startsWith(this.requirement)) {\n        _addIssue(this, \"start\", dataset, config2, {\n          received: `\"${dataset.value.slice(0, this.requirement.length)}\"`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/stringifyJson/stringifyJson.ts\n// @__NO_SIDE_EFFECTS__\nfunction stringifyJson(config2, message2) {\n  return {\n    kind: \"transformation\",\n    type: \"stringify_json\",\n    reference: stringifyJson,\n    message: message2,\n    config: config2,\n    async: false,\n    \"~run\"(dataset, config3) {\n      try {\n        const output = JSON.stringify(\n          dataset.value,\n          // @ts-expect-error\n          this.config?.replacer,\n          this.config?.space\n        );\n        if (output === void 0) {\n          _addIssue(this, \"JSON\", dataset, config3);\n          dataset.typed = false;\n        }\n        dataset.value = output;\n      } catch (error) {\n        if (error instanceof Error) {\n          _addIssue(this, \"JSON\", dataset, config3, {\n            received: `\"${error.message}\"`\n          });\n          dataset.typed = false;\n        } else {\n          throw error;\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/title/title.ts\n// @__NO_SIDE_EFFECTS__\nfunction title(title_) {\n  return {\n    kind: \"metadata\",\n    type: \"title\",\n    reference: title,\n    title: title_\n  };\n}\n\n// src/actions/toLowerCase/toLowerCase.ts\n// @__NO_SIDE_EFFECTS__\nfunction toLowerCase() {\n  return {\n    kind: \"transformation\",\n    type: \"to_lower_case\",\n    reference: toLowerCase,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.toLowerCase();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/toMaxValue/toMaxValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction toMaxValue(requirement) {\n  return {\n    kind: \"transformation\",\n    type: \"to_max_value\",\n    reference: toMaxValue,\n    async: false,\n    requirement,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value > this.requirement ? this.requirement : dataset.value;\n      return dataset;\n    }\n  };\n}\n\n// src/actions/toMinValue/toMinValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction toMinValue(requirement) {\n  return {\n    kind: \"transformation\",\n    type: \"to_min_value\",\n    reference: toMinValue,\n    async: false,\n    requirement,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value < this.requirement ? this.requirement : dataset.value;\n      return dataset;\n    }\n  };\n}\n\n// src/actions/toUpperCase/toUpperCase.ts\n// @__NO_SIDE_EFFECTS__\nfunction toUpperCase() {\n  return {\n    kind: \"transformation\",\n    type: \"to_upper_case\",\n    reference: toUpperCase,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.toUpperCase();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/transform/transform.ts\n// @__NO_SIDE_EFFECTS__\nfunction transform(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"transform\",\n    reference: transform,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = this.operation(dataset.value);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/transform/transformAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction transformAsync(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"transform\",\n    reference: transformAsync,\n    async: true,\n    operation,\n    async \"~run\"(dataset) {\n      dataset.value = await this.operation(dataset.value);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/trim/trim.ts\n// @__NO_SIDE_EFFECTS__\nfunction trim() {\n  return {\n    kind: \"transformation\",\n    type: \"trim\",\n    reference: trim,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.trim();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/trimEnd/trimEnd.ts\n// @__NO_SIDE_EFFECTS__\nfunction trimEnd() {\n  return {\n    kind: \"transformation\",\n    type: \"trim_end\",\n    reference: trimEnd,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.trimEnd();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/trimStart/trimStart.ts\n// @__NO_SIDE_EFFECTS__\nfunction trimStart() {\n  return {\n    kind: \"transformation\",\n    type: \"trim_start\",\n    reference: trimStart,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.trimStart();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ulid/ulid.ts\n// @__NO_SIDE_EFFECTS__\nfunction ulid(message2) {\n  return {\n    kind: \"validation\",\n    type: \"ulid\",\n    reference: ulid,\n    async: false,\n    expects: null,\n    requirement: ULID_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"ULID\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/url/url.ts\n// @__NO_SIDE_EFFECTS__\nfunction url(message2) {\n  return {\n    kind: \"validation\",\n    type: \"url\",\n    reference: url,\n    async: false,\n    expects: null,\n    requirement(input) {\n      try {\n        new URL(input);\n        return true;\n      } catch {\n        return false;\n      }\n    },\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"URL\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/uuid/uuid.ts\n// @__NO_SIDE_EFFECTS__\nfunction uuid(message2) {\n  return {\n    kind: \"validation\",\n    type: \"uuid\",\n    reference: uuid,\n    async: false,\n    expects: null,\n    requirement: UUID_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"UUID\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/value/value.ts\n// @__NO_SIDE_EFFECTS__\nfunction value(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"value\",\n    reference: value,\n    async: false,\n    expects: requirement instanceof Date ? requirement.toJSON() : _stringify(requirement),\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(this.requirement <= dataset.value && this.requirement >= dataset.value)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/values/values.ts\n// @__NO_SIDE_EFFECTS__\nfunction values(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"values\",\n    reference: values,\n    async: false,\n    expects: `${_joinExpects(\n      requirement.map(\n        (value2) => value2 instanceof Date ? value2.toJSON() : _stringify(value2)\n      ),\n      \"|\"\n    )}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.some(\n        (value2) => value2 <= dataset.value && value2 >= dataset.value\n      )) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/words/words.ts\n// @__NO_SIDE_EFFECTS__\nfunction words(locales, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"words\",\n    reference: words,\n    async: false,\n    expects: `${requirement}`,\n    locales,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getWordCount(this.locales, dataset.value);\n        if (count !== this.requirement) {\n          _addIssue(this, \"words\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/assert/assert.ts\nfunction assert(schema, input) {\n  const issues = schema[\"~run\"]({ value: input }, { abortEarly: true }).issues;\n  if (issues) {\n    throw new ValiError(issues);\n  }\n}\n\n// src/methods/config/config.ts\n// @__NO_SIDE_EFFECTS__\nfunction config(schema, config2) {\n  return {\n    ...schema,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config_) {\n      return schema[\"~run\"](dataset, { ...config_, ...config2 });\n    }\n  };\n}\n\n// src/methods/getFallback/getFallback.ts\n// @__NO_SIDE_EFFECTS__\nfunction getFallback(schema, dataset, config2) {\n  return typeof schema.fallback === \"function\" ? (\n    // @ts-expect-error\n    schema.fallback(dataset, config2)\n  ) : (\n    // @ts-expect-error\n    schema.fallback\n  );\n}\n\n// src/methods/fallback/fallback.ts\n// @__NO_SIDE_EFFECTS__\nfunction fallback(schema, fallback2) {\n  return {\n    ...schema,\n    fallback: fallback2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const outputDataset = schema[\"~run\"](dataset, config2);\n      return outputDataset.issues ? { typed: true, value: getFallback(this, outputDataset, config2) } : outputDataset;\n    }\n  };\n}\n\n// src/methods/fallback/fallbackAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction fallbackAsync(schema, fallback2) {\n  return {\n    ...schema,\n    fallback: fallback2,\n    async: true,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const outputDataset = await schema[\"~run\"](dataset, config2);\n      return outputDataset.issues ? {\n        typed: true,\n        value: await getFallback(this, outputDataset, config2)\n      } : outputDataset;\n    }\n  };\n}\n\n// src/methods/flatten/flatten.ts\n// @__NO_SIDE_EFFECTS__\nfunction flatten(issues) {\n  const flatErrors = {};\n  for (const issue of issues) {\n    if (issue.path) {\n      const dotPath = getDotPath(issue);\n      if (dotPath) {\n        if (!flatErrors.nested) {\n          flatErrors.nested = {};\n        }\n        if (flatErrors.nested[dotPath]) {\n          flatErrors.nested[dotPath].push(issue.message);\n        } else {\n          flatErrors.nested[dotPath] = [issue.message];\n        }\n      } else {\n        if (flatErrors.other) {\n          flatErrors.other.push(issue.message);\n        } else {\n          flatErrors.other = [issue.message];\n        }\n      }\n    } else {\n      if (flatErrors.root) {\n        flatErrors.root.push(issue.message);\n      } else {\n        flatErrors.root = [issue.message];\n      }\n    }\n  }\n  return flatErrors;\n}\n\n// src/methods/forward/forward.ts\n// @__NO_SIDE_EFFECTS__\nfunction forward(action, path) {\n  return {\n    ...action,\n    \"~run\"(dataset, config2) {\n      const prevIssues = dataset.issues && [...dataset.issues];\n      dataset = action[\"~run\"](dataset, config2);\n      if (dataset.issues) {\n        for (const issue of dataset.issues) {\n          if (!prevIssues?.includes(issue)) {\n            let pathInput = dataset.value;\n            for (const key of path) {\n              const pathValue = pathInput[key];\n              const pathItem = {\n                type: \"unknown\",\n                origin: \"value\",\n                input: pathInput,\n                key,\n                value: pathValue\n              };\n              if (issue.path) {\n                issue.path.push(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              if (!pathValue) {\n                break;\n              }\n              pathInput = pathValue;\n            }\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/forward/forwardAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction forwardAsync(action, path) {\n  return {\n    ...action,\n    async: true,\n    async \"~run\"(dataset, config2) {\n      const prevIssues = dataset.issues && [...dataset.issues];\n      dataset = await action[\"~run\"](dataset, config2);\n      if (dataset.issues) {\n        for (const issue of dataset.issues) {\n          if (!prevIssues?.includes(issue)) {\n            let pathInput = dataset.value;\n            for (const key of path) {\n              const pathValue = pathInput[key];\n              const pathItem = {\n                type: \"unknown\",\n                origin: \"value\",\n                input: pathInput,\n                key,\n                value: pathValue\n              };\n              if (issue.path) {\n                issue.path.push(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              if (!pathValue) {\n                break;\n              }\n              pathInput = pathValue;\n            }\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/getDefault/getDefault.ts\n// @__NO_SIDE_EFFECTS__\nfunction getDefault(schema, dataset, config2) {\n  return typeof schema.default === \"function\" ? (\n    // @ts-expect-error\n    schema.default(dataset, config2)\n  ) : (\n    // @ts-expect-error\n    schema.default\n  );\n}\n\n// src/methods/getDefaults/getDefaults.ts\n// @__NO_SIDE_EFFECTS__\nfunction getDefaults(schema) {\n  if (\"entries\" in schema) {\n    const object2 = {};\n    for (const key in schema.entries) {\n      object2[key] = /* @__PURE__ */ getDefaults(schema.entries[key]);\n    }\n    return object2;\n  }\n  if (\"items\" in schema) {\n    return schema.items.map(getDefaults);\n  }\n  return getDefault(schema);\n}\n\n// src/methods/getDefaults/getDefaultsAsync.ts\n// @__NO_SIDE_EFFECTS__\nasync function getDefaultsAsync(schema) {\n  if (\"entries\" in schema) {\n    return Object.fromEntries(\n      await Promise.all(\n        Object.entries(schema.entries).map(async ([key, value2]) => [\n          key,\n          await /* @__PURE__ */ getDefaultsAsync(value2)\n        ])\n      )\n    );\n  }\n  if (\"items\" in schema) {\n    return Promise.all(schema.items.map(getDefaultsAsync));\n  }\n  return getDefault(schema);\n}\n\n// src/methods/getDescription/getDescription.ts\n// @__NO_SIDE_EFFECTS__\nfunction getDescription(schema) {\n  return _getLastMetadata(schema, \"description\");\n}\n\n// src/methods/getFallbacks/getFallbacks.ts\n// @__NO_SIDE_EFFECTS__\nfunction getFallbacks(schema) {\n  if (\"entries\" in schema) {\n    const object2 = {};\n    for (const key in schema.entries) {\n      object2[key] = /* @__PURE__ */ getFallbacks(schema.entries[key]);\n    }\n    return object2;\n  }\n  if (\"items\" in schema) {\n    return schema.items.map(getFallbacks);\n  }\n  return getFallback(schema);\n}\n\n// src/methods/getFallbacks/getFallbacksAsync.ts\n// @__NO_SIDE_EFFECTS__\nasync function getFallbacksAsync(schema) {\n  if (\"entries\" in schema) {\n    return Object.fromEntries(\n      await Promise.all(\n        Object.entries(schema.entries).map(async ([key, value2]) => [\n          key,\n          await /* @__PURE__ */ getFallbacksAsync(value2)\n        ])\n      )\n    );\n  }\n  if (\"items\" in schema) {\n    return Promise.all(schema.items.map(getFallbacksAsync));\n  }\n  return getFallback(schema);\n}\n\n// src/methods/getMetadata/getMetadata.ts\n// @__NO_SIDE_EFFECTS__\nfunction getMetadata(schema) {\n  const result = {};\n  function depthFirstMerge(schema2) {\n    if (\"pipe\" in schema2) {\n      for (const item of schema2.pipe) {\n        if (item.kind === \"schema\" && \"pipe\" in item) {\n          depthFirstMerge(item);\n        } else if (item.kind === \"metadata\" && item.type === \"metadata\") {\n          Object.assign(result, item.metadata);\n        }\n      }\n    }\n  }\n  depthFirstMerge(schema);\n  return result;\n}\n\n// src/methods/getTitle/getTitle.ts\n// @__NO_SIDE_EFFECTS__\nfunction getTitle(schema) {\n  return _getLastMetadata(schema, \"title\");\n}\n\n// src/methods/is/is.ts\n// @__NO_SIDE_EFFECTS__\nfunction is(schema, input) {\n  return !schema[\"~run\"]({ value: input }, { abortEarly: true }).issues;\n}\n\n// src/schemas/any/any.ts\n// @__NO_SIDE_EFFECTS__\nfunction any() {\n  return {\n    kind: \"schema\",\n    type: \"any\",\n    reference: any,\n    expects: \"any\",\n    async: false,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset) {\n      dataset.typed = true;\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/array/array.ts\n// @__NO_SIDE_EFFECTS__\nfunction array(item, message2) {\n  return {\n    kind: \"schema\",\n    type: \"array\",\n    reference: array,\n    expects: \"Array\",\n    async: false,\n    item,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < input.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.item[\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/array/arrayAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction arrayAsync(item, message2) {\n  return {\n    kind: \"schema\",\n    type: \"array\",\n    reference: arrayAsync,\n    expects: \"Array\",\n    async: true,\n    item,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const itemDatasets = await Promise.all(\n          input.map((value2) => this.item[\"~run\"]({ value: value2 }, config2))\n        );\n        for (let key = 0; key < itemDatasets.length; key++) {\n          const itemDataset = itemDatasets[key];\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: input[key]\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/bigint/bigint.ts\n// @__NO_SIDE_EFFECTS__\nfunction bigint(message2) {\n  return {\n    kind: \"schema\",\n    type: \"bigint\",\n    reference: bigint,\n    expects: \"bigint\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"bigint\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/blob/blob.ts\n// @__NO_SIDE_EFFECTS__\nfunction blob(message2) {\n  return {\n    kind: \"schema\",\n    type: \"blob\",\n    reference: blob,\n    expects: \"Blob\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof Blob) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/boolean/boolean.ts\n// @__NO_SIDE_EFFECTS__\nfunction boolean(message2) {\n  return {\n    kind: \"schema\",\n    type: \"boolean\",\n    reference: boolean,\n    expects: \"boolean\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"boolean\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/custom/custom.ts\n// @__NO_SIDE_EFFECTS__\nfunction custom(check2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"custom\",\n    reference: custom,\n    expects: \"unknown\",\n    async: false,\n    check: check2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (this.check(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/custom/customAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction customAsync(check2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"custom\",\n    reference: customAsync,\n    expects: \"unknown\",\n    async: true,\n    check: check2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (await this.check(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/date/date.ts\n// @__NO_SIDE_EFFECTS__\nfunction date(message2) {\n  return {\n    kind: \"schema\",\n    type: \"date\",\n    reference: date,\n    expects: \"Date\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof Date) {\n        if (!isNaN(dataset.value)) {\n          dataset.typed = true;\n        } else {\n          _addIssue(this, \"type\", dataset, config2, {\n            received: '\"Invalid Date\"'\n          });\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/enum/enum.ts\n// @__NO_SIDE_EFFECTS__\nfunction enum_(enum__, message2) {\n  const options = [];\n  for (const key in enum__) {\n    if (`${+key}` !== key || typeof enum__[key] !== \"string\" || !Object.is(enum__[enum__[key]], +key)) {\n      options.push(enum__[key]);\n    }\n  }\n  return {\n    kind: \"schema\",\n    type: \"enum\",\n    reference: enum_,\n    expects: _joinExpects(options.map(_stringify), \"|\"),\n    async: false,\n    enum: enum__,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (this.options.includes(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/exactOptional/exactOptional.ts\n// @__NO_SIDE_EFFECTS__\nfunction exactOptional(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"exact_optional\",\n    reference: exactOptional,\n    expects: wrapped.expects,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/exactOptional/exactOptionalAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction exactOptionalAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"exact_optional\",\n    reference: exactOptionalAsync,\n    expects: wrapped.expects,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/file/file.ts\n// @__NO_SIDE_EFFECTS__\nfunction file(message2) {\n  return {\n    kind: \"schema\",\n    type: \"file\",\n    reference: file,\n    expects: \"File\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof File) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/function/function.ts\n// @__NO_SIDE_EFFECTS__\nfunction function_(message2) {\n  return {\n    kind: \"schema\",\n    type: \"function\",\n    reference: function_,\n    expects: \"Function\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"function\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/instance/instance.ts\n// @__NO_SIDE_EFFECTS__\nfunction instance(class_, message2) {\n  return {\n    kind: \"schema\",\n    type: \"instance\",\n    reference: instance,\n    expects: class_.name,\n    async: false,\n    class: class_,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof this.class) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/intersect/utils/_merge/_merge.ts\n// @__NO_SIDE_EFFECTS__\nfunction _merge(value1, value2) {\n  if (typeof value1 === typeof value2) {\n    if (value1 === value2 || value1 instanceof Date && value2 instanceof Date && +value1 === +value2) {\n      return { value: value1 };\n    }\n    if (value1 && value2 && value1.constructor === Object && value2.constructor === Object) {\n      for (const key in value2) {\n        if (key in value1) {\n          const dataset = /* @__PURE__ */ _merge(value1[key], value2[key]);\n          if (dataset.issue) {\n            return dataset;\n          }\n          value1[key] = dataset.value;\n        } else {\n          value1[key] = value2[key];\n        }\n      }\n      return { value: value1 };\n    }\n    if (Array.isArray(value1) && Array.isArray(value2)) {\n      if (value1.length === value2.length) {\n        for (let index = 0; index < value1.length; index++) {\n          const dataset = /* @__PURE__ */ _merge(value1[index], value2[index]);\n          if (dataset.issue) {\n            return dataset;\n          }\n          value1[index] = dataset.value;\n        }\n        return { value: value1 };\n      }\n    }\n  }\n  return { issue: true };\n}\n\n// src/schemas/intersect/intersect.ts\n// @__NO_SIDE_EFFECTS__\nfunction intersect(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"intersect\",\n    reference: intersect,\n    expects: _joinExpects(\n      options.map((option) => option.expects),\n      \"&\"\n    ),\n    async: false,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (this.options.length) {\n        const input = dataset.value;\n        let outputs;\n        dataset.typed = true;\n        for (const schema of this.options) {\n          const optionDataset = schema[\"~run\"]({ value: input }, config2);\n          if (optionDataset.issues) {\n            if (dataset.issues) {\n              dataset.issues.push(...optionDataset.issues);\n            } else {\n              dataset.issues = optionDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!optionDataset.typed) {\n            dataset.typed = false;\n          }\n          if (dataset.typed) {\n            if (outputs) {\n              outputs.push(optionDataset.value);\n            } else {\n              outputs = [optionDataset.value];\n            }\n          }\n        }\n        if (dataset.typed) {\n          dataset.value = outputs[0];\n          for (let index = 1; index < outputs.length; index++) {\n            const mergeDataset = _merge(dataset.value, outputs[index]);\n            if (mergeDataset.issue) {\n              _addIssue(this, \"type\", dataset, config2, {\n                received: \"unknown\"\n              });\n              break;\n            }\n            dataset.value = mergeDataset.value;\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/intersect/intersectAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction intersectAsync(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"intersect\",\n    reference: intersectAsync,\n    expects: _joinExpects(\n      options.map((option) => option.expects),\n      \"&\"\n    ),\n    async: true,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (this.options.length) {\n        const input = dataset.value;\n        let outputs;\n        dataset.typed = true;\n        const optionDatasets = await Promise.all(\n          this.options.map((schema) => schema[\"~run\"]({ value: input }, config2))\n        );\n        for (const optionDataset of optionDatasets) {\n          if (optionDataset.issues) {\n            if (dataset.issues) {\n              dataset.issues.push(...optionDataset.issues);\n            } else {\n              dataset.issues = optionDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!optionDataset.typed) {\n            dataset.typed = false;\n          }\n          if (dataset.typed) {\n            if (outputs) {\n              outputs.push(optionDataset.value);\n            } else {\n              outputs = [optionDataset.value];\n            }\n          }\n        }\n        if (dataset.typed) {\n          dataset.value = outputs[0];\n          for (let index = 1; index < outputs.length; index++) {\n            const mergeDataset = _merge(dataset.value, outputs[index]);\n            if (mergeDataset.issue) {\n              _addIssue(this, \"type\", dataset, config2, {\n                received: \"unknown\"\n              });\n              break;\n            }\n            dataset.value = mergeDataset.value;\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/lazy/lazy.ts\n// @__NO_SIDE_EFFECTS__\nfunction lazy(getter) {\n  return {\n    kind: \"schema\",\n    type: \"lazy\",\n    reference: lazy,\n    expects: \"unknown\",\n    async: false,\n    getter,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      return this.getter(dataset.value)[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/lazy/lazyAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction lazyAsync(getter) {\n  return {\n    kind: \"schema\",\n    type: \"lazy\",\n    reference: lazyAsync,\n    expects: \"unknown\",\n    async: true,\n    getter,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      return (await this.getter(dataset.value))[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/literal/literal.ts\n// @__NO_SIDE_EFFECTS__\nfunction literal(literal_, message2) {\n  return {\n    kind: \"schema\",\n    type: \"literal\",\n    reference: literal,\n    expects: _stringify(literal_),\n    async: false,\n    literal: literal_,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === this.literal) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/looseObject/looseObject.ts\n// @__NO_SIDE_EFFECTS__\nfunction looseObject(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"loose_object\",\n    reference: looseObject,\n    expects: \"Object\",\n    async: false,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const key in this.entries) {\n          const valueSchema = this.entries[key];\n          if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n          valueSchema.default !== void 0) {\n            const value2 = key in input ? (\n              // @ts-expect-error\n              input[key]\n            ) : getDefault(valueSchema);\n            const valueDataset = valueSchema[\"~run\"]({ value: value2 }, config2);\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (_isValidObjectKey(input, key) && !(key in this.entries)) {\n              dataset.value[key] = input[key];\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/looseObject/looseObjectAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction looseObjectAsync(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"loose_object\",\n    reference: looseObjectAsync,\n    expects: \"Object\",\n    async: true,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const valueDatasets = await Promise.all(\n          Object.entries(this.entries).map(async ([key, valueSchema]) => {\n            if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n            valueSchema.default !== void 0) {\n              const value2 = key in input ? (\n                // @ts-expect-error\n                input[key]\n              ) : await getDefault(valueSchema);\n              return [\n                key,\n                value2,\n                valueSchema,\n                await valueSchema[\"~run\"]({ value: value2 }, config2)\n              ];\n            }\n            return [\n              key,\n              // @ts-expect-error\n              input[key],\n              valueSchema,\n              null\n            ];\n          })\n        );\n        for (const [key, value2, valueSchema, valueDataset] of valueDatasets) {\n          if (valueDataset) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = await getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  value: value2\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (_isValidObjectKey(input, key) && !(key in this.entries)) {\n              dataset.value[key] = input[key];\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/looseTuple/looseTuple.ts\n// @__NO_SIDE_EFFECTS__\nfunction looseTuple(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"loose_tuple\",\n    reference: looseTuple,\n    expects: \"Array\",\n    async: false,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < this.items.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.items[key][\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (let key = this.items.length; key < input.length; key++) {\n            dataset.value.push(input[key]);\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/looseTuple/looseTupleAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction looseTupleAsync(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"loose_tuple\",\n    reference: looseTupleAsync,\n    expects: \"Array\",\n    async: true,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const itemDatasets = await Promise.all(\n          this.items.map(async (item, key) => {\n            const value2 = input[key];\n            return [key, value2, await item[\"~run\"]({ value: value2 }, config2)];\n          })\n        );\n        for (const [key, value2, itemDataset] of itemDatasets) {\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (let key = this.items.length; key < input.length; key++) {\n            dataset.value.push(input[key]);\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/map/map.ts\n// @__NO_SIDE_EFFECTS__\nfunction map(key, value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"map\",\n    reference: map,\n    expects: \"Map\",\n    async: false,\n    key,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input instanceof Map) {\n        dataset.typed = true;\n        dataset.value = /* @__PURE__ */ new Map();\n        for (const [inputKey, inputValue] of input) {\n          const keyDataset = this.key[\"~run\"]({ value: inputKey }, config2);\n          if (keyDataset.issues) {\n            const pathItem = {\n              type: \"map\",\n              origin: \"key\",\n              input,\n              key: inputKey,\n              value: inputValue\n            };\n            for (const issue of keyDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = keyDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          const valueDataset = this.value[\"~run\"](\n            { value: inputValue },\n            config2\n          );\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"map\",\n              origin: \"value\",\n              input,\n              key: inputKey,\n              value: inputValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!keyDataset.typed || !valueDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.set(keyDataset.value, valueDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/map/mapAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction mapAsync(key, value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"map\",\n    reference: mapAsync,\n    expects: \"Map\",\n    async: true,\n    key,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input instanceof Map) {\n        dataset.typed = true;\n        dataset.value = /* @__PURE__ */ new Map();\n        const datasets = await Promise.all(\n          [...input].map(\n            ([inputKey, inputValue]) => Promise.all([\n              inputKey,\n              inputValue,\n              this.key[\"~run\"]({ value: inputKey }, config2),\n              this.value[\"~run\"]({ value: inputValue }, config2)\n            ])\n          )\n        );\n        for (const [\n          inputKey,\n          inputValue,\n          keyDataset,\n          valueDataset\n        ] of datasets) {\n          if (keyDataset.issues) {\n            const pathItem = {\n              type: \"map\",\n              origin: \"key\",\n              input,\n              key: inputKey,\n              value: inputValue\n            };\n            for (const issue of keyDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = keyDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"map\",\n              origin: \"value\",\n              input,\n              key: inputKey,\n              value: inputValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!keyDataset.typed || !valueDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.set(keyDataset.value, valueDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nan/nan.ts\n// @__NO_SIDE_EFFECTS__\nfunction nan(message2) {\n  return {\n    kind: \"schema\",\n    type: \"nan\",\n    reference: nan,\n    expects: \"NaN\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (Number.isNaN(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/never/never.ts\n// @__NO_SIDE_EFFECTS__\nfunction never(message2) {\n  return {\n    kind: \"schema\",\n    type: \"never\",\n    reference: never,\n    expects: \"never\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      _addIssue(this, \"type\", dataset, config2);\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonNullable/nonNullable.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonNullable(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_nullable\",\n    reference: nonNullable,\n    expects: \"!null\",\n    async: false,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value !== null) {\n        dataset = this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === null) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonNullable/nonNullableAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonNullableAsync(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_nullable\",\n    reference: nonNullableAsync,\n    expects: \"!null\",\n    async: true,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value !== null) {\n        dataset = await this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === null) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonNullish/nonNullish.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonNullish(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_nullish\",\n    reference: nonNullish,\n    expects: \"(!null & !undefined)\",\n    async: false,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (!(dataset.value === null || dataset.value === void 0)) {\n        dataset = this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === null || dataset.value === void 0) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonNullish/nonNullishAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonNullishAsync(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_nullish\",\n    reference: nonNullishAsync,\n    expects: \"(!null & !undefined)\",\n    async: true,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (!(dataset.value === null || dataset.value === void 0)) {\n        dataset = await this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === null || dataset.value === void 0) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonOptional/nonOptional.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonOptional(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_optional\",\n    reference: nonOptional,\n    expects: \"!undefined\",\n    async: false,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value !== void 0) {\n        dataset = this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === void 0) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonOptional/nonOptionalAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonOptionalAsync(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_optional\",\n    reference: nonOptionalAsync,\n    expects: \"!undefined\",\n    async: true,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value !== void 0) {\n        dataset = await this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === void 0) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/null/null.ts\n// @__NO_SIDE_EFFECTS__\nfunction null_(message2) {\n  return {\n    kind: \"schema\",\n    type: \"null\",\n    reference: null_,\n    expects: \"null\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === null) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nullable/nullable.ts\n// @__NO_SIDE_EFFECTS__\nfunction nullable(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"nullable\",\n    reference: nullable,\n    expects: `(${wrapped.expects} | null)`,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === null) {\n        if (this.default !== void 0) {\n          dataset.value = getDefault(this, dataset, config2);\n        }\n        if (dataset.value === null) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/nullable/nullableAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nullableAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"nullable\",\n    reference: nullableAsync,\n    expects: `(${wrapped.expects} | null)`,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value === null) {\n        if (this.default !== void 0) {\n          dataset.value = await getDefault(this, dataset, config2);\n        }\n        if (dataset.value === null) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/nullish/nullish.ts\n// @__NO_SIDE_EFFECTS__\nfunction nullish(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"nullish\",\n    reference: nullish,\n    expects: `(${wrapped.expects} | null | undefined)`,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === null || dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = getDefault(this, dataset, config2);\n        }\n        if (dataset.value === null || dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/nullish/nullishAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nullishAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"nullish\",\n    reference: nullishAsync,\n    expects: `(${wrapped.expects} | null | undefined)`,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value === null || dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = await getDefault(this, dataset, config2);\n        }\n        if (dataset.value === null || dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/number/number.ts\n// @__NO_SIDE_EFFECTS__\nfunction number(message2) {\n  return {\n    kind: \"schema\",\n    type: \"number\",\n    reference: number,\n    expects: \"number\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"number\" && !isNaN(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/object/object.ts\n// @__NO_SIDE_EFFECTS__\nfunction object(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"object\",\n    reference: object,\n    expects: \"Object\",\n    async: false,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const key in this.entries) {\n          const valueSchema = this.entries[key];\n          if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n          valueSchema.default !== void 0) {\n            const value2 = key in input ? (\n              // @ts-expect-error\n              input[key]\n            ) : getDefault(valueSchema);\n            const valueDataset = valueSchema[\"~run\"]({ value: value2 }, config2);\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/object/objectAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction objectAsync(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"object\",\n    reference: objectAsync,\n    expects: \"Object\",\n    async: true,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const valueDatasets = await Promise.all(\n          Object.entries(this.entries).map(async ([key, valueSchema]) => {\n            if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n            valueSchema.default !== void 0) {\n              const value2 = key in input ? (\n                // @ts-expect-error\n                input[key]\n              ) : await getDefault(valueSchema);\n              return [\n                key,\n                value2,\n                valueSchema,\n                await valueSchema[\"~run\"]({ value: value2 }, config2)\n              ];\n            }\n            return [\n              key,\n              // @ts-expect-error\n              input[key],\n              valueSchema,\n              null\n            ];\n          })\n        );\n        for (const [key, value2, valueSchema, valueDataset] of valueDatasets) {\n          if (valueDataset) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = await getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  value: value2\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/objectWithRest/objectWithRest.ts\n// @__NO_SIDE_EFFECTS__\nfunction objectWithRest(entries2, rest, message2) {\n  return {\n    kind: \"schema\",\n    type: \"object_with_rest\",\n    reference: objectWithRest,\n    expects: \"Object\",\n    async: false,\n    entries: entries2,\n    rest,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const key in this.entries) {\n          const valueSchema = this.entries[key];\n          if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n          valueSchema.default !== void 0) {\n            const value2 = key in input ? (\n              // @ts-expect-error\n              input[key]\n            ) : getDefault(valueSchema);\n            const valueDataset = valueSchema[\"~run\"]({ value: value2 }, config2);\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (_isValidObjectKey(input, key) && !(key in this.entries)) {\n              const valueDataset = this.rest[\"~run\"](\n                // @ts-expect-error\n                { value: input[key] },\n                config2\n              );\n              if (valueDataset.issues) {\n                const pathItem = {\n                  type: \"object\",\n                  origin: \"value\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                };\n                for (const issue of valueDataset.issues) {\n                  if (issue.path) {\n                    issue.path.unshift(pathItem);\n                  } else {\n                    issue.path = [pathItem];\n                  }\n                  dataset.issues?.push(issue);\n                }\n                if (!dataset.issues) {\n                  dataset.issues = valueDataset.issues;\n                }\n                if (config2.abortEarly) {\n                  dataset.typed = false;\n                  break;\n                }\n              }\n              if (!valueDataset.typed) {\n                dataset.typed = false;\n              }\n              dataset.value[key] = valueDataset.value;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/objectWithRest/objectWithRestAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction objectWithRestAsync(entries2, rest, message2) {\n  return {\n    kind: \"schema\",\n    type: \"object_with_rest\",\n    reference: objectWithRestAsync,\n    expects: \"Object\",\n    async: true,\n    entries: entries2,\n    rest,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const [normalDatasets, restDatasets] = await Promise.all([\n          // If key is present or its an optional schema with a default value,\n          // parse input of key or default value asynchronously\n          Promise.all(\n            Object.entries(this.entries).map(async ([key, valueSchema]) => {\n              if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n              valueSchema.default !== void 0) {\n                const value2 = key in input ? (\n                  // @ts-expect-error\n                  input[key]\n                ) : await getDefault(valueSchema);\n                return [\n                  key,\n                  value2,\n                  valueSchema,\n                  await valueSchema[\"~run\"]({ value: value2 }, config2)\n                ];\n              }\n              return [\n                key,\n                // @ts-expect-error\n                input[key],\n                valueSchema,\n                null\n              ];\n            })\n          ),\n          // Parse other entries with rest schema asynchronously\n          // Hint: We exclude specific keys for security reasons\n          Promise.all(\n            Object.entries(input).filter(\n              ([key]) => _isValidObjectKey(input, key) && !(key in this.entries)\n            ).map(\n              async ([key, value2]) => [\n                key,\n                value2,\n                await this.rest[\"~run\"]({ value: value2 }, config2)\n              ]\n            )\n          )\n        ]);\n        for (const [key, value2, valueSchema, valueDataset] of normalDatasets) {\n          if (valueDataset) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = await getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  value: value2\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const [key, value2, valueDataset] of restDatasets) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/optional/optional.ts\n// @__NO_SIDE_EFFECTS__\nfunction optional(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"optional\",\n    reference: optional,\n    expects: `(${wrapped.expects} | undefined)`,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = getDefault(this, dataset, config2);\n        }\n        if (dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/optional/optionalAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction optionalAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"optional\",\n    reference: optionalAsync,\n    expects: `(${wrapped.expects} | undefined)`,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = await getDefault(this, dataset, config2);\n        }\n        if (dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/picklist/picklist.ts\n// @__NO_SIDE_EFFECTS__\nfunction picklist(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"picklist\",\n    reference: picklist,\n    expects: _joinExpects(options.map(_stringify), \"|\"),\n    async: false,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (this.options.includes(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/promise/promise.ts\n// @__NO_SIDE_EFFECTS__\nfunction promise(message2) {\n  return {\n    kind: \"schema\",\n    type: \"promise\",\n    reference: promise,\n    expects: \"Promise\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof Promise) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/record/record.ts\n// @__NO_SIDE_EFFECTS__\nfunction record(key, value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"record\",\n    reference: record,\n    expects: \"Object\",\n    async: false,\n    key,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const entryKey in input) {\n          if (_isValidObjectKey(input, entryKey)) {\n            const entryValue = input[entryKey];\n            const keyDataset = this.key[\"~run\"]({ value: entryKey }, config2);\n            if (keyDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"key\",\n                input,\n                key: entryKey,\n                value: entryValue\n              };\n              for (const issue of keyDataset.issues) {\n                issue.path = [pathItem];\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = keyDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            const valueDataset = this.value[\"~run\"](\n              { value: entryValue },\n              config2\n            );\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key: entryKey,\n                value: entryValue\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!keyDataset.typed || !valueDataset.typed) {\n              dataset.typed = false;\n            }\n            if (keyDataset.typed) {\n              dataset.value[keyDataset.value] = valueDataset.value;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/record/recordAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction recordAsync(key, value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"record\",\n    reference: recordAsync,\n    expects: \"Object\",\n    async: true,\n    key,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const datasets = await Promise.all(\n          Object.entries(input).filter(([key2]) => _isValidObjectKey(input, key2)).map(\n            ([entryKey, entryValue]) => Promise.all([\n              entryKey,\n              entryValue,\n              this.key[\"~run\"]({ value: entryKey }, config2),\n              this.value[\"~run\"]({ value: entryValue }, config2)\n            ])\n          )\n        );\n        for (const [\n          entryKey,\n          entryValue,\n          keyDataset,\n          valueDataset\n        ] of datasets) {\n          if (keyDataset.issues) {\n            const pathItem = {\n              type: \"object\",\n              origin: \"key\",\n              input,\n              key: entryKey,\n              value: entryValue\n            };\n            for (const issue of keyDataset.issues) {\n              issue.path = [pathItem];\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = keyDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"object\",\n              origin: \"value\",\n              input,\n              key: entryKey,\n              value: entryValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!keyDataset.typed || !valueDataset.typed) {\n            dataset.typed = false;\n          }\n          if (keyDataset.typed) {\n            dataset.value[keyDataset.value] = valueDataset.value;\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/set/set.ts\n// @__NO_SIDE_EFFECTS__\nfunction set(value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"set\",\n    reference: set,\n    expects: \"Set\",\n    async: false,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input instanceof Set) {\n        dataset.typed = true;\n        dataset.value = /* @__PURE__ */ new Set();\n        for (const inputValue of input) {\n          const valueDataset = this.value[\"~run\"](\n            { value: inputValue },\n            config2\n          );\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"set\",\n              origin: \"value\",\n              input,\n              key: null,\n              value: inputValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!valueDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.add(valueDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/set/setAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction setAsync(value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"set\",\n    reference: setAsync,\n    expects: \"Set\",\n    async: true,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input instanceof Set) {\n        dataset.typed = true;\n        dataset.value = /* @__PURE__ */ new Set();\n        const valueDatasets = await Promise.all(\n          [...input].map(\n            async (inputValue) => [\n              inputValue,\n              await this.value[\"~run\"]({ value: inputValue }, config2)\n            ]\n          )\n        );\n        for (const [inputValue, valueDataset] of valueDatasets) {\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"set\",\n              origin: \"value\",\n              input,\n              key: null,\n              value: inputValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!valueDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.add(valueDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/strictObject/strictObject.ts\n// @__NO_SIDE_EFFECTS__\nfunction strictObject(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"strict_object\",\n    reference: strictObject,\n    expects: \"Object\",\n    async: false,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const key in this.entries) {\n          const valueSchema = this.entries[key];\n          if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n          valueSchema.default !== void 0) {\n            const value2 = key in input ? (\n              // @ts-expect-error\n              input[key]\n            ) : getDefault(valueSchema);\n            const valueDataset = valueSchema[\"~run\"]({ value: value2 }, config2);\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (!(key in this.entries)) {\n              _addIssue(this, \"key\", dataset, config2, {\n                input: key,\n                expected: \"never\",\n                path: [\n                  {\n                    type: \"object\",\n                    origin: \"key\",\n                    input,\n                    key,\n                    // @ts-expect-error\n                    value: input[key]\n                  }\n                ]\n              });\n              break;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/strictObject/strictObjectAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction strictObjectAsync(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"strict_object\",\n    reference: strictObjectAsync,\n    expects: \"Object\",\n    async: true,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const valueDatasets = await Promise.all(\n          Object.entries(this.entries).map(async ([key, valueSchema]) => {\n            if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n            valueSchema.default !== void 0) {\n              const value2 = key in input ? (\n                // @ts-expect-error\n                input[key]\n              ) : await getDefault(valueSchema);\n              return [\n                key,\n                value2,\n                valueSchema,\n                await valueSchema[\"~run\"]({ value: value2 }, config2)\n              ];\n            }\n            return [\n              key,\n              // @ts-expect-error\n              input[key],\n              valueSchema,\n              null\n            ];\n          })\n        );\n        for (const [key, value2, valueSchema, valueDataset] of valueDatasets) {\n          if (valueDataset) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = await getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  value: value2\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (!(key in this.entries)) {\n              _addIssue(this, \"key\", dataset, config2, {\n                input: key,\n                expected: \"never\",\n                path: [\n                  {\n                    type: \"object\",\n                    origin: \"key\",\n                    input,\n                    key,\n                    // @ts-expect-error\n                    value: input[key]\n                  }\n                ]\n              });\n              break;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/strictTuple/strictTuple.ts\n// @__NO_SIDE_EFFECTS__\nfunction strictTuple(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"strict_tuple\",\n    reference: strictTuple,\n    expects: \"Array\",\n    async: false,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < this.items.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.items[key][\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!(dataset.issues && config2.abortEarly) && this.items.length < input.length) {\n          _addIssue(this, \"type\", dataset, config2, {\n            input: input[this.items.length],\n            expected: \"never\",\n            path: [\n              {\n                type: \"array\",\n                origin: \"value\",\n                input,\n                key: this.items.length,\n                value: input[this.items.length]\n              }\n            ]\n          });\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/strictTuple/strictTupleAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction strictTupleAsync(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"strict_tuple\",\n    reference: strictTupleAsync,\n    expects: \"Array\",\n    async: true,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const itemDatasets = await Promise.all(\n          this.items.map(async (item, key) => {\n            const value2 = input[key];\n            return [key, value2, await item[\"~run\"]({ value: value2 }, config2)];\n          })\n        );\n        for (const [key, value2, itemDataset] of itemDatasets) {\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!(dataset.issues && config2.abortEarly) && this.items.length < input.length) {\n          _addIssue(this, \"type\", dataset, config2, {\n            input: input[this.items.length],\n            expected: \"never\",\n            path: [\n              {\n                type: \"array\",\n                origin: \"value\",\n                input,\n                key: this.items.length,\n                value: input[this.items.length]\n              }\n            ]\n          });\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/string/string.ts\n// @__NO_SIDE_EFFECTS__\nfunction string(message2) {\n  return {\n    kind: \"schema\",\n    type: \"string\",\n    reference: string,\n    expects: \"string\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"string\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/symbol/symbol.ts\n// @__NO_SIDE_EFFECTS__\nfunction symbol(message2) {\n  return {\n    kind: \"schema\",\n    type: \"symbol\",\n    reference: symbol,\n    expects: \"symbol\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"symbol\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/tuple/tuple.ts\n// @__NO_SIDE_EFFECTS__\nfunction tuple(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"tuple\",\n    reference: tuple,\n    expects: \"Array\",\n    async: false,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < this.items.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.items[key][\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/tuple/tupleAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction tupleAsync(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"tuple\",\n    reference: tupleAsync,\n    expects: \"Array\",\n    async: true,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const itemDatasets = await Promise.all(\n          this.items.map(async (item, key) => {\n            const value2 = input[key];\n            return [key, value2, await item[\"~run\"]({ value: value2 }, config2)];\n          })\n        );\n        for (const [key, value2, itemDataset] of itemDatasets) {\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/tupleWithRest/tupleWithRest.ts\n// @__NO_SIDE_EFFECTS__\nfunction tupleWithRest(items, rest, message2) {\n  return {\n    kind: \"schema\",\n    type: \"tuple_with_rest\",\n    reference: tupleWithRest,\n    expects: \"Array\",\n    async: false,\n    items,\n    rest,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < this.items.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.items[key][\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (let key = this.items.length; key < input.length; key++) {\n            const value2 = input[key];\n            const itemDataset = this.rest[\"~run\"]({ value: value2 }, config2);\n            if (itemDataset.issues) {\n              const pathItem = {\n                type: \"array\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of itemDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = itemDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!itemDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value.push(itemDataset.value);\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/tupleWithRest/tupleWithRestAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction tupleWithRestAsync(items, rest, message2) {\n  return {\n    kind: \"schema\",\n    type: \"tuple_with_rest\",\n    reference: tupleWithRestAsync,\n    expects: \"Array\",\n    async: true,\n    items,\n    rest,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const [normalDatasets, restDatasets] = await Promise.all([\n          // Parse schema of each normal item\n          Promise.all(\n            this.items.map(async (item, key) => {\n              const value2 = input[key];\n              return [\n                key,\n                value2,\n                await item[\"~run\"]({ value: value2 }, config2)\n              ];\n            })\n          ),\n          // Parse other items with rest schema\n          Promise.all(\n            input.slice(this.items.length).map(async (value2, key) => {\n              return [\n                key + this.items.length,\n                value2,\n                await this.rest[\"~run\"]({ value: value2 }, config2)\n              ];\n            })\n          )\n        ]);\n        for (const [key, value2, itemDataset] of normalDatasets) {\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const [key, value2, itemDataset] of restDatasets) {\n            if (itemDataset.issues) {\n              const pathItem = {\n                type: \"array\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of itemDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = itemDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!itemDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value.push(itemDataset.value);\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/undefined/undefined.ts\n// @__NO_SIDE_EFFECTS__\nfunction undefined_(message2) {\n  return {\n    kind: \"schema\",\n    type: \"undefined\",\n    reference: undefined_,\n    expects: \"undefined\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/undefinedable/undefinedable.ts\n// @__NO_SIDE_EFFECTS__\nfunction undefinedable(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"undefinedable\",\n    reference: undefinedable,\n    expects: `(${wrapped.expects} | undefined)`,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = getDefault(this, dataset, config2);\n        }\n        if (dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/undefinedable/undefinedableAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction undefinedableAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"undefinedable\",\n    reference: undefinedableAsync,\n    expects: `(${wrapped.expects} | undefined)`,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = await getDefault(this, dataset, config2);\n        }\n        if (dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/union/utils/_subIssues/_subIssues.ts\n// @__NO_SIDE_EFFECTS__\nfunction _subIssues(datasets) {\n  let issues;\n  if (datasets) {\n    for (const dataset of datasets) {\n      if (issues) {\n        issues.push(...dataset.issues);\n      } else {\n        issues = dataset.issues;\n      }\n    }\n  }\n  return issues;\n}\n\n// src/schemas/union/union.ts\n// @__NO_SIDE_EFFECTS__\nfunction union(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"union\",\n    reference: union,\n    expects: _joinExpects(\n      options.map((option) => option.expects),\n      \"|\"\n    ),\n    async: false,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      let validDataset;\n      let typedDatasets;\n      let untypedDatasets;\n      for (const schema of this.options) {\n        const optionDataset = schema[\"~run\"]({ value: dataset.value }, config2);\n        if (optionDataset.typed) {\n          if (optionDataset.issues) {\n            if (typedDatasets) {\n              typedDatasets.push(optionDataset);\n            } else {\n              typedDatasets = [optionDataset];\n            }\n          } else {\n            validDataset = optionDataset;\n            break;\n          }\n        } else {\n          if (untypedDatasets) {\n            untypedDatasets.push(optionDataset);\n          } else {\n            untypedDatasets = [optionDataset];\n          }\n        }\n      }\n      if (validDataset) {\n        return validDataset;\n      }\n      if (typedDatasets) {\n        if (typedDatasets.length === 1) {\n          return typedDatasets[0];\n        }\n        _addIssue(this, \"type\", dataset, config2, {\n          issues: _subIssues(typedDatasets)\n        });\n        dataset.typed = true;\n      } else if (untypedDatasets?.length === 1) {\n        return untypedDatasets[0];\n      } else {\n        _addIssue(this, \"type\", dataset, config2, {\n          issues: _subIssues(untypedDatasets)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/union/unionAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction unionAsync(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"union\",\n    reference: unionAsync,\n    expects: _joinExpects(\n      options.map((option) => option.expects),\n      \"|\"\n    ),\n    async: true,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      let validDataset;\n      let typedDatasets;\n      let untypedDatasets;\n      for (const schema of this.options) {\n        const optionDataset = await schema[\"~run\"](\n          { value: dataset.value },\n          config2\n        );\n        if (optionDataset.typed) {\n          if (optionDataset.issues) {\n            if (typedDatasets) {\n              typedDatasets.push(optionDataset);\n            } else {\n              typedDatasets = [optionDataset];\n            }\n          } else {\n            validDataset = optionDataset;\n            break;\n          }\n        } else {\n          if (untypedDatasets) {\n            untypedDatasets.push(optionDataset);\n          } else {\n            untypedDatasets = [optionDataset];\n          }\n        }\n      }\n      if (validDataset) {\n        return validDataset;\n      }\n      if (typedDatasets) {\n        if (typedDatasets.length === 1) {\n          return typedDatasets[0];\n        }\n        _addIssue(this, \"type\", dataset, config2, {\n          issues: _subIssues(typedDatasets)\n        });\n        dataset.typed = true;\n      } else if (untypedDatasets?.length === 1) {\n        return untypedDatasets[0];\n      } else {\n        _addIssue(this, \"type\", dataset, config2, {\n          issues: _subIssues(untypedDatasets)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/unknown/unknown.ts\n// @__NO_SIDE_EFFECTS__\nfunction unknown() {\n  return {\n    kind: \"schema\",\n    type: \"unknown\",\n    reference: unknown,\n    expects: \"unknown\",\n    async: false,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset) {\n      dataset.typed = true;\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/variant/variant.ts\n// @__NO_SIDE_EFFECTS__\nfunction variant(key, options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"variant\",\n    reference: variant,\n    expects: \"Object\",\n    async: false,\n    key,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        let outputDataset;\n        let maxDiscriminatorPriority = 0;\n        let invalidDiscriminatorKey = this.key;\n        let expectedDiscriminators = [];\n        const parseOptions = (variant2, allKeys) => {\n          for (const schema of variant2.options) {\n            if (schema.type === \"variant\") {\n              parseOptions(schema, new Set(allKeys).add(schema.key));\n            } else {\n              let keysAreValid = true;\n              let currentPriority = 0;\n              for (const currentKey of allKeys) {\n                const discriminatorSchema = schema.entries[currentKey];\n                if (currentKey in input ? discriminatorSchema[\"~run\"](\n                  // @ts-expect-error\n                  { typed: false, value: input[currentKey] },\n                  { abortEarly: true }\n                ).issues : discriminatorSchema.type !== \"exact_optional\" && discriminatorSchema.type !== \"optional\" && discriminatorSchema.type !== \"nullish\") {\n                  keysAreValid = false;\n                  if (invalidDiscriminatorKey !== currentKey && (maxDiscriminatorPriority < currentPriority || maxDiscriminatorPriority === currentPriority && currentKey in input && !(invalidDiscriminatorKey in input))) {\n                    maxDiscriminatorPriority = currentPriority;\n                    invalidDiscriminatorKey = currentKey;\n                    expectedDiscriminators = [];\n                  }\n                  if (invalidDiscriminatorKey === currentKey) {\n                    expectedDiscriminators.push(\n                      schema.entries[currentKey].expects\n                    );\n                  }\n                  break;\n                }\n                currentPriority++;\n              }\n              if (keysAreValid) {\n                const optionDataset = schema[\"~run\"]({ value: input }, config2);\n                if (!outputDataset || !outputDataset.typed && optionDataset.typed) {\n                  outputDataset = optionDataset;\n                }\n              }\n            }\n            if (outputDataset && !outputDataset.issues) {\n              break;\n            }\n          }\n        };\n        parseOptions(this, /* @__PURE__ */ new Set([this.key]));\n        if (outputDataset) {\n          return outputDataset;\n        }\n        _addIssue(this, \"type\", dataset, config2, {\n          // @ts-expect-error\n          input: input[invalidDiscriminatorKey],\n          expected: _joinExpects(expectedDiscriminators, \"|\"),\n          path: [\n            {\n              type: \"object\",\n              origin: \"value\",\n              input,\n              key: invalidDiscriminatorKey,\n              // @ts-expect-error\n              value: input[invalidDiscriminatorKey]\n            }\n          ]\n        });\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/variant/variantAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction variantAsync(key, options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"variant\",\n    reference: variantAsync,\n    expects: \"Object\",\n    async: true,\n    key,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        let outputDataset;\n        let maxDiscriminatorPriority = 0;\n        let invalidDiscriminatorKey = this.key;\n        let expectedDiscriminators = [];\n        const parseOptions = async (variant2, allKeys) => {\n          for (const schema of variant2.options) {\n            if (schema.type === \"variant\") {\n              await parseOptions(schema, new Set(allKeys).add(schema.key));\n            } else {\n              let keysAreValid = true;\n              let currentPriority = 0;\n              for (const currentKey of allKeys) {\n                const discriminatorSchema = schema.entries[currentKey];\n                if (currentKey in input ? (await discriminatorSchema[\"~run\"](\n                  // @ts-expect-error\n                  { typed: false, value: input[currentKey] },\n                  { abortEarly: true }\n                )).issues : discriminatorSchema.type !== \"exact_optional\" && discriminatorSchema.type !== \"optional\" && discriminatorSchema.type !== \"nullish\") {\n                  keysAreValid = false;\n                  if (invalidDiscriminatorKey !== currentKey && (maxDiscriminatorPriority < currentPriority || maxDiscriminatorPriority === currentPriority && currentKey in input && !(invalidDiscriminatorKey in input))) {\n                    maxDiscriminatorPriority = currentPriority;\n                    invalidDiscriminatorKey = currentKey;\n                    expectedDiscriminators = [];\n                  }\n                  if (invalidDiscriminatorKey === currentKey) {\n                    expectedDiscriminators.push(\n                      schema.entries[currentKey].expects\n                    );\n                  }\n                  break;\n                }\n                currentPriority++;\n              }\n              if (keysAreValid) {\n                const optionDataset = await schema[\"~run\"](\n                  { value: input },\n                  config2\n                );\n                if (!outputDataset || !outputDataset.typed && optionDataset.typed) {\n                  outputDataset = optionDataset;\n                }\n              }\n            }\n            if (outputDataset && !outputDataset.issues) {\n              break;\n            }\n          }\n        };\n        await parseOptions(this, /* @__PURE__ */ new Set([this.key]));\n        if (outputDataset) {\n          return outputDataset;\n        }\n        _addIssue(this, \"type\", dataset, config2, {\n          // @ts-expect-error\n          input: input[invalidDiscriminatorKey],\n          expected: _joinExpects(expectedDiscriminators, \"|\"),\n          path: [\n            {\n              type: \"object\",\n              origin: \"value\",\n              input,\n              key: invalidDiscriminatorKey,\n              // @ts-expect-error\n              value: input[invalidDiscriminatorKey]\n            }\n          ]\n        });\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/void/void.ts\n// @__NO_SIDE_EFFECTS__\nfunction void_(message2) {\n  return {\n    kind: \"schema\",\n    type: \"void\",\n    reference: void_,\n    expects: \"void\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/keyof/keyof.ts\n// @__NO_SIDE_EFFECTS__\nfunction keyof(schema, message2) {\n  return picklist(Object.keys(schema.entries), message2);\n}\n\n// src/methods/message/message.ts\n// @__NO_SIDE_EFFECTS__\nfunction message(schema, message_) {\n  return {\n    ...schema,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      return schema[\"~run\"](dataset, { ...config2, message: message_ });\n    }\n  };\n}\n\n// src/methods/omit/omit.ts\n// @__NO_SIDE_EFFECTS__\nfunction omit(schema, keys) {\n  const entries2 = {\n    ...schema.entries\n  };\n  for (const key of keys) {\n    delete entries2[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/parse/parse.ts\nfunction parse(schema, input, config2) {\n  const dataset = schema[\"~run\"]({ value: input }, getGlobalConfig(config2));\n  if (dataset.issues) {\n    throw new ValiError(dataset.issues);\n  }\n  return dataset.value;\n}\n\n// src/methods/parse/parseAsync.ts\nasync function parseAsync(schema, input, config2) {\n  const dataset = await schema[\"~run\"](\n    { value: input },\n    getGlobalConfig(config2)\n  );\n  if (dataset.issues) {\n    throw new ValiError(dataset.issues);\n  }\n  return dataset.value;\n}\n\n// src/methods/parser/parser.ts\n// @__NO_SIDE_EFFECTS__\nfunction parser(schema, config2) {\n  const func = (input) => parse(schema, input, config2);\n  func.schema = schema;\n  func.config = config2;\n  return func;\n}\n\n// src/methods/parser/parserAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction parserAsync(schema, config2) {\n  const func = (input) => parseAsync(schema, input, config2);\n  func.schema = schema;\n  func.config = config2;\n  return func;\n}\n\n// src/methods/partial/partial.ts\n// @__NO_SIDE_EFFECTS__\nfunction partial(schema, keys) {\n  const entries2 = {};\n  for (const key in schema.entries) {\n    entries2[key] = !keys || keys.includes(key) ? optional(schema.entries[key]) : schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/partial/partialAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction partialAsync(schema, keys) {\n  const entries2 = {};\n  for (const key in schema.entries) {\n    entries2[key] = !keys || keys.includes(key) ? optionalAsync(schema.entries[key]) : schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/pick/pick.ts\n// @__NO_SIDE_EFFECTS__\nfunction pick(schema, keys) {\n  const entries2 = {};\n  for (const key of keys) {\n    entries2[key] = schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/pipe/pipe.ts\n// @__NO_SIDE_EFFECTS__\nfunction pipe(...pipe2) {\n  return {\n    ...pipe2[0],\n    pipe: pipe2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      for (const item of pipe2) {\n        if (item.kind !== \"metadata\") {\n          if (dataset.issues && (item.kind === \"schema\" || item.kind === \"transformation\")) {\n            dataset.typed = false;\n            break;\n          }\n          if (!dataset.issues || !config2.abortEarly && !config2.abortPipeEarly) {\n            dataset = item[\"~run\"](dataset, config2);\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/pipe/pipeAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction pipeAsync(...pipe2) {\n  return {\n    ...pipe2[0],\n    pipe: pipe2,\n    async: true,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      for (const item of pipe2) {\n        if (item.kind !== \"metadata\") {\n          if (dataset.issues && (item.kind === \"schema\" || item.kind === \"transformation\")) {\n            dataset.typed = false;\n            break;\n          }\n          if (!dataset.issues || !config2.abortEarly && !config2.abortPipeEarly) {\n            dataset = await item[\"~run\"](dataset, config2);\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/required/required.ts\n// @__NO_SIDE_EFFECTS__\nfunction required(schema, arg2, arg3) {\n  const keys = Array.isArray(arg2) ? arg2 : void 0;\n  const message2 = Array.isArray(arg2) ? arg3 : arg2;\n  const entries2 = {};\n  for (const key in schema.entries) {\n    entries2[key] = !keys || keys.includes(key) ? nonOptional(schema.entries[key], message2) : schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/required/requiredAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction requiredAsync(schema, arg2, arg3) {\n  const keys = Array.isArray(arg2) ? arg2 : void 0;\n  const message2 = Array.isArray(arg2) ? arg3 : arg2;\n  const entries2 = {};\n  for (const key in schema.entries) {\n    entries2[key] = !keys || keys.includes(key) ? nonOptionalAsync(schema.entries[key], message2) : schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/safeParse/safeParse.ts\n// @__NO_SIDE_EFFECTS__\nfunction safeParse(schema, input, config2) {\n  const dataset = schema[\"~run\"]({ value: input }, getGlobalConfig(config2));\n  return {\n    typed: dataset.typed,\n    success: !dataset.issues,\n    output: dataset.value,\n    issues: dataset.issues\n  };\n}\n\n// src/methods/safeParse/safeParseAsync.ts\n// @__NO_SIDE_EFFECTS__\nasync function safeParseAsync(schema, input, config2) {\n  const dataset = await schema[\"~run\"](\n    { value: input },\n    getGlobalConfig(config2)\n  );\n  return {\n    typed: dataset.typed,\n    success: !dataset.issues,\n    output: dataset.value,\n    issues: dataset.issues\n  };\n}\n\n// src/methods/safeParser/safeParser.ts\n// @__NO_SIDE_EFFECTS__\nfunction safeParser(schema, config2) {\n  const func = (input) => safeParse(schema, input, config2);\n  func.schema = schema;\n  func.config = config2;\n  return func;\n}\n\n// src/methods/safeParser/safeParserAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction safeParserAsync(schema, config2) {\n  const func = (input) => safeParseAsync(schema, input, config2);\n  func.schema = schema;\n  func.config = config2;\n  return func;\n}\n\n// src/methods/summarize/summarize.ts\n// @__NO_SIDE_EFFECTS__\nfunction summarize(issues) {\n  let summary = \"\";\n  for (const issue of issues) {\n    if (summary) {\n      summary += \"\\n\";\n    }\n    summary += `\\xD7 ${issue.message}`;\n    const dotPath = getDotPath(issue);\n    if (dotPath) {\n      summary += `\n  \\u2192 at ${dotPath}`;\n    }\n  }\n  return summary;\n}\n\n// src/methods/unwrap/unwrap.ts\n// @__NO_SIDE_EFFECTS__\nfunction unwrap(schema) {\n  return schema.wrapped;\n}\nexport {\n  BASE64_REGEX,\n  BIC_REGEX,\n  CUID2_REGEX,\n  DECIMAL_REGEX,\n  DIGITS_REGEX,\n  EMAIL_REGEX,\n  EMOJI_REGEX,\n  HEXADECIMAL_REGEX,\n  HEX_COLOR_REGEX,\n  IMEI_REGEX,\n  IPV4_REGEX,\n  IPV6_REGEX,\n  IP_REGEX,\n  ISO_DATE_REGEX,\n  ISO_DATE_TIME_REGEX,\n  ISO_TIMESTAMP_REGEX,\n  ISO_TIME_REGEX,\n  ISO_TIME_SECOND_REGEX,\n  ISO_WEEK_REGEX,\n  MAC48_REGEX,\n  MAC64_REGEX,\n  MAC_REGEX,\n  NANO_ID_REGEX,\n  OCTAL_REGEX,\n  RFC_EMAIL_REGEX,\n  SLUG_REGEX,\n  ULID_REGEX,\n  UUID_REGEX,\n  ValiError,\n  _addIssue,\n  _getByteCount,\n  _getGraphemeCount,\n  _getLastMetadata,\n  _getStandardProps,\n  _getWordCount,\n  _isLuhnAlgo,\n  _isValidObjectKey,\n  _joinExpects,\n  _stringify,\n  any,\n  args,\n  argsAsync,\n  array,\n  arrayAsync,\n  assert,\n  awaitAsync,\n  base64,\n  bic,\n  bigint,\n  blob,\n  boolean,\n  brand,\n  bytes,\n  check,\n  checkAsync,\n  checkItems,\n  checkItemsAsync,\n  config,\n  creditCard,\n  cuid2,\n  custom,\n  customAsync,\n  date,\n  decimal,\n  deleteGlobalConfig,\n  deleteGlobalMessage,\n  deleteSchemaMessage,\n  deleteSpecificMessage,\n  description,\n  digits,\n  email,\n  emoji,\n  empty,\n  endsWith,\n  entries,\n  entriesFromList,\n  entriesFromObjects,\n  enum_ as enum,\n  enum_,\n  everyItem,\n  exactOptional,\n  exactOptionalAsync,\n  excludes,\n  fallback,\n  fallbackAsync,\n  file,\n  filterItems,\n  findItem,\n  finite,\n  flatten,\n  flavor,\n  forward,\n  forwardAsync,\n  function_ as function,\n  function_,\n  getDefault,\n  getDefaults,\n  getDefaultsAsync,\n  getDescription,\n  getDotPath,\n  getFallback,\n  getFallbacks,\n  getFallbacksAsync,\n  getGlobalConfig,\n  getGlobalMessage,\n  getMetadata,\n  getSchemaMessage,\n  getSpecificMessage,\n  getTitle,\n  graphemes,\n  gtValue,\n  hash,\n  hexColor,\n  hexadecimal,\n  imei,\n  includes,\n  instance,\n  integer,\n  intersect,\n  intersectAsync,\n  ip,\n  ipv4,\n  ipv6,\n  is,\n  isOfKind,\n  isOfType,\n  isValiError,\n  isoDate,\n  isoDateTime,\n  isoTime,\n  isoTimeSecond,\n  isoTimestamp,\n  isoWeek,\n  keyof,\n  lazy,\n  lazyAsync,\n  length,\n  literal,\n  looseObject,\n  looseObjectAsync,\n  looseTuple,\n  looseTupleAsync,\n  ltValue,\n  mac,\n  mac48,\n  mac64,\n  map,\n  mapAsync,\n  mapItems,\n  maxBytes,\n  maxEntries,\n  maxGraphemes,\n  maxLength,\n  maxSize,\n  maxValue,\n  maxWords,\n  message,\n  metadata,\n  mimeType,\n  minBytes,\n  minEntries,\n  minGraphemes,\n  minLength,\n  minSize,\n  minValue,\n  minWords,\n  multipleOf,\n  nan,\n  nanoid,\n  never,\n  nonEmpty,\n  nonNullable,\n  nonNullableAsync,\n  nonNullish,\n  nonNullishAsync,\n  nonOptional,\n  nonOptionalAsync,\n  normalize,\n  notBytes,\n  notEntries,\n  notGraphemes,\n  notLength,\n  notSize,\n  notValue,\n  notValues,\n  notWords,\n  null_ as null,\n  null_,\n  nullable,\n  nullableAsync,\n  nullish,\n  nullishAsync,\n  number,\n  object,\n  objectAsync,\n  objectWithRest,\n  objectWithRestAsync,\n  octal,\n  omit,\n  optional,\n  optionalAsync,\n  parse,\n  parseAsync,\n  parseJson,\n  parser,\n  parserAsync,\n  partial,\n  partialAsync,\n  partialCheck,\n  partialCheckAsync,\n  pick,\n  picklist,\n  pipe,\n  pipeAsync,\n  promise,\n  rawCheck,\n  rawCheckAsync,\n  rawTransform,\n  rawTransformAsync,\n  readonly,\n  record,\n  recordAsync,\n  reduceItems,\n  regex,\n  required,\n  requiredAsync,\n  returns,\n  returnsAsync,\n  rfcEmail,\n  safeInteger,\n  safeParse,\n  safeParseAsync,\n  safeParser,\n  safeParserAsync,\n  set,\n  setAsync,\n  setGlobalConfig,\n  setGlobalMessage,\n  setSchemaMessage,\n  setSpecificMessage,\n  size,\n  slug,\n  someItem,\n  sortItems,\n  startsWith,\n  strictObject,\n  strictObjectAsync,\n  strictTuple,\n  strictTupleAsync,\n  string,\n  stringifyJson,\n  summarize,\n  symbol,\n  title,\n  toLowerCase,\n  toMaxValue,\n  toMinValue,\n  toUpperCase,\n  transform,\n  transformAsync,\n  trim,\n  trimEnd,\n  trimStart,\n  tuple,\n  tupleAsync,\n  tupleWithRest,\n  tupleWithRestAsync,\n  ulid,\n  undefined_ as undefined,\n  undefined_,\n  undefinedable,\n  undefinedableAsync,\n  union,\n  unionAsync,\n  unknown,\n  unwrap,\n  url,\n  uuid,\n  value,\n  values,\n  variant,\n  variantAsync,\n  void_ as void,\n  void_,\n  words\n};\n", "export { aCheckConstraint, aColumn, aForeignKeyConstraint, anIndex, aPrimaryKeyConstraint, aSchema, aTable, aUniqueConstraint, } from './factories.js';\nexport { mergeSchemas } from './mergeSchema.js';\nexport { checkConstraintDetailSchema, columnCheckSchema, columnDefaultSchema, columnNameSchema, columnNotNullSchema, columnSchema, commentSchema, constraintNameSchema, constraintSchema, foreignKeyConstraintReferenceOptionSchema, foreignKeyConstraintSchema, indexColumnsSchema, indexNameSchema, indexSchema, indexTypeSchema, indexUniqueSchema, schemaSchema, tableNameSchema, tableSchema, } from './schema.js';\n", "export const aColumn = (override) => ({\n    name: 'id',\n    type: 'varchar',\n    default: null,\n    check: null,\n    comment: null,\n    notNull: false,\n    ...override,\n});\nexport const aTable = (override) => ({\n    name: 'users',\n    comment: null,\n    ...override,\n    indexes: {\n        ...override?.indexes,\n    },\n    columns: {\n        ...override?.columns,\n    },\n    constraints: {\n        ...override?.constraints,\n    },\n});\nexport const anIndex = (override) => ({\n    name: '',\n    unique: false,\n    columns: [],\n    type: '',\n    ...override,\n});\nexport const aPrimaryKeyConstraint = (override) => ({\n    type: 'PRIMARY KEY',\n    name: '',\n    columnNames: [],\n    ...override,\n});\nexport const aForeignKeyConstraint = (override) => ({\n    type: 'FOREIGN KEY',\n    name: '',\n    columnName: '',\n    targetTableName: '',\n    targetColumnName: '',\n    updateConstraint: 'NO_ACTION',\n    deleteConstraint: 'NO_ACTION',\n    ...override,\n});\nexport const aUniqueConstraint = (override) => ({\n    type: 'UNIQUE',\n    name: '',\n    columnNames: [],\n    ...override,\n});\nexport const aCheckConstraint = (override) => ({\n    type: 'CHECK',\n    name: '',\n    detail: '',\n    ...override,\n});\nconst tables = (override) => {\n    return (override ?? {\n        users: aTable({ name: 'users' }),\n    });\n};\nexport const aSchema = (override) => ({\n    tables: tables(override?.tables),\n});\n", "const getRemovedColumns = (beforeColumns, afterColumns) => {\n    const removedColumns = {};\n    for (const colName in beforeColumns) {\n        if (!(colName in afterColumns) && beforeColumns[colName]) {\n            removedColumns[colName] = beforeColumns[colName];\n        }\n    }\n    return removedColumns;\n};\nconst mergeTable = (beforeTable, afterTable) => {\n    if (!afterTable && beforeTable) {\n        // If only beforeTable exists, return it as is\n        return beforeTable;\n    }\n    if (!afterTable) {\n        throw new Error('Both beforeTable and afterTable are undefined');\n    }\n    const mergedTable = { ...afterTable };\n    if (beforeTable) {\n        const removedColumns = getRemovedColumns(beforeTable.columns, afterTable.columns);\n        mergedTable.columns = {\n            ...(mergedTable.columns || {}),\n            ...removedColumns,\n        };\n    }\n    return mergedTable;\n};\nconst mergeTables = (beforeTables, afterTables) => {\n    const mergedTables = {};\n    const allTableNames = new Set([\n        ...Object.keys(beforeTables),\n        ...Object.keys(afterTables),\n    ]);\n    allTableNames.forEach((tableName) => {\n        const beforeTable = beforeTables[tableName];\n        const afterTable = afterTables[tableName];\n        if (afterTable || beforeTable) {\n            mergedTables[tableName] = mergeTable(beforeTable, afterTable);\n        }\n    });\n    return mergedTables;\n};\nexport function mergeSchemas(before, after) {\n    return {\n        tables: mergeTables(before.tables, after.tables),\n    };\n}\n", "import * as v from 'valibot';\n// Export these schema definitions\nexport const columnNameSchema = v.string();\nexport const columnDefaultSchema = v.nullable(v.union([v.string(), v.number(), v.boolean()]));\nexport const columnCheckSchema = v.nullable(v.string());\nexport const columnNotNullSchema = v.boolean();\nexport const tableNameSchema = v.string();\nexport const commentSchema = v.nullable(v.string());\nexport const constraintNameSchema = v.string();\nexport const columnSchema = v.object({\n    name: columnNameSchema,\n    type: v.string(),\n    default: columnDefaultSchema,\n    check: columnCheckSchema,\n    notNull: columnNotNullSchema,\n    comment: commentSchema,\n});\nconst columnsSchema = v.record(columnNameSchema, columnSchema);\nexport const indexNameSchema = v.string();\nexport const indexUniqueSchema = v.boolean();\nexport const indexColumnsSchema = v.array(v.string());\nexport const indexTypeSchema = v.string();\nexport const indexSchema = v.object({\n    name: indexNameSchema,\n    unique: indexUniqueSchema,\n    columns: indexColumnsSchema,\n    type: indexTypeSchema,\n});\nconst indexesSchema = v.record(indexNameSchema, indexSchema);\nexport const foreignKeyConstraintReferenceOptionSchema = v.picklist([\n    'CASCADE',\n    'RESTRICT',\n    'SET_NULL',\n    'SET_DEFAULT',\n    'NO_ACTION',\n]);\nconst primaryKeyConstraintSchema = v.object({\n    type: v.literal('PRIMARY KEY'),\n    name: constraintNameSchema,\n    columnNames: v.array(columnNameSchema),\n});\nexport const foreignKeyConstraintSchema = v.object({\n    type: v.literal('FOREIGN KEY'),\n    name: constraintNameSchema,\n    columnName: columnNameSchema,\n    targetTableName: tableNameSchema,\n    targetColumnName: columnNameSchema,\n    updateConstraint: foreignKeyConstraintReferenceOptionSchema,\n    deleteConstraint: foreignKeyConstraintReferenceOptionSchema,\n});\nconst uniqueConstraintSchema = v.object({\n    type: v.literal('UNIQUE'),\n    name: constraintNameSchema,\n    columnNames: v.array(columnNameSchema),\n});\nexport const checkConstraintDetailSchema = v.string();\nconst checkConstraintSchema = v.object({\n    type: v.literal('CHECK'),\n    name: constraintNameSchema,\n    detail: checkConstraintDetailSchema,\n});\nexport const constraintSchema = v.union([\n    primaryKeyConstraintSchema,\n    foreignKeyConstraintSchema,\n    uniqueConstraintSchema,\n    checkConstraintSchema,\n]);\nconst constraintsSchema = v.record(constraintNameSchema, constraintSchema);\nexport const tableSchema = v.object({\n    name: tableNameSchema,\n    columns: columnsSchema,\n    comment: commentSchema,\n    indexes: indexesSchema,\n    constraints: constraintsSchema,\n});\nconst tablesSchema = v.record(tableNameSchema, tableSchema);\n// Schema definition for the entire database structure\nexport const schemaSchema = v.object({\n    tables: tablesSchema,\n});\n", "import * as v from 'valibot';\nimport { constraintSchema } from '../../schema/index.js';\nimport { PATH_PATTERNS } from '../constants.js';\nconst constraintPathSchema = v.pipe(v.string(), v.regex(PATH_PATTERNS.CONSTRAINT_BASE));\nconst addConstraintOperationSchema = v.object({\n    op: v.literal('add'),\n    path: constraintPathSchema,\n    value: constraintSchema,\n});\nexport const isAddConstraintOperation = (operation) => {\n    return v.safeParse(addConstraintOperationSchema, operation).success;\n};\nconst removeConstraintOperationSchema = v.object({\n    op: v.literal('remove'),\n    path: constraintPathSchema,\n});\nexport const isRemoveConstraintOperation = (operation) => {\n    return v.safeParse(removeConstraintOperationSchema, operation).success;\n};\nexport const constraintOperations = [\n    addConstraintOperationSchema,\n    removeConstraintOperationSchema,\n];\n", "import * as v from 'valibot';\nimport { indexSchema } from '../../schema/index.js';\nimport { PATH_PATTERNS } from '../constants.js';\nconst indexPathSchema = v.pipe(v.string(), v.regex(PATH_PATTERNS.INDEX_BASE));\n// Add index operation\nconst addIndexOperationSchema = v.object({\n    op: v.literal('add'),\n    path: indexPathSchema,\n    value: indexSchema,\n});\nexport const isAddIndexOperation = (operation) => {\n    return v.safeParse(addIndexOperationSchema, operation).success;\n};\n// Remove index operation\nconst removeIndexOperationSchema = v.object({\n    op: v.literal('remove'),\n    path: indexPathSchema,\n});\nexport const isRemoveIndexOperation = (operation) => {\n    return v.safeParse(removeIndexOperationSchema, operation).success;\n};\n// Export all index operations\nexport const indexOperations = [\n    addIndexOperationSchema,\n    removeIndexOperationSchema,\n];\n", "import * as v from 'valibot';\nimport { tableSchema } from '../../schema/index.js';\nimport { PATH_PATTERNS } from '../constants.js';\nconst tablePathSchema = v.pipe(v.string(), v.regex(PATH_PATTERNS.TABLE_BASE));\nconst tableNamePathSchema = v.pipe(v.string(), v.regex(PATH_PATTERNS.TABLE_NAME));\nconst addTableOperationSchema = v.object({\n    op: v.literal('add'),\n    path: tablePathSchema,\n    value: tableSchema,\n});\nconst removeTableOperationSchema = v.object({\n    op: v.literal('remove'),\n    path: tablePathSchema,\n});\nconst replaceTableNameOperationSchema = v.object({\n    op: v.literal('replace'),\n    path: tableNamePathSchema,\n    value: v.string(),\n});\nexport const isAddTableOperation = (operation) => {\n    return v.safeParse(addTableOperationSchema, operation).success;\n};\nexport const isRemoveTableOperation = (operation) => {\n    return v.safeParse(removeTableOperationSchema, operation).success;\n};\nexport const isReplaceTableNameOperation = (operation) => {\n    return v.safeParse(replaceTableNameOperationSchema, operation).success;\n};\nexport const tableOperations = [\n    addTableOperationSchema,\n    removeTableOperationSchema,\n    replaceTableNameOperationSchema,\n];\n", "/**\n * Generate column definition as DDL string\n */\nfunction generateColumnDefinition(column, isPrimaryKey = false) {\n    let definition = `${escapeIdentifier(column.name)} ${column.type}`;\n    // Add constraints (following PostgreSQL common order)\n    // Don't add NOT NULL if this will be a PRIMARY KEY\n    if (column.notNull && !isPrimaryKey) {\n        definition += ' NOT NULL';\n    }\n    if (column.default !== null) {\n        definition += ` DEFAULT ${formatDefaultValue(column.default)}`;\n    }\n    return definition;\n}\n/**\n * Format default value to proper SQL format\n */\nfunction formatDefaultValue(value) {\n    if (typeof value === 'string') {\n        // Check if it's a PostgreSQL function call (e.g., gen_random_uuid(), now(), current_timestamp())\n        if (isPostgreSQLFunction(value)) {\n            return value; // Don't quote function calls\n        }\n        // Wrap string literals in single quotes\n        return `'${value.replace(/'/g, \"''\")}'`; // SQL escape\n    }\n    if (typeof value === 'boolean') {\n        // Boolean values are TRUE/FALSE in PostgreSQL\n        return value.toString().toUpperCase();\n    }\n    // Numbers as-is\n    return value.toString();\n}\n/**\n * Check if a string represents a PostgreSQL function call\n */\nfunction isPostgreSQLFunction(value) {\n    const trimmedValue = value.trim();\n    // Match PostgreSQL function patterns:\n    // - Function name: starts with letter or underscore, followed by letters, numbers, underscores\n    // - Optional whitespace before opening parenthesis\n    // - Must have opening parenthesis (function calls always have parentheses)\n    // Examples: gen_random_uuid(), now(), current_timestamp(), extract(epoch from now())\n    const functionPattern = /^[a-zA-Z_][a-zA-Z0-9_]*\\s*\\(/;\n    // PostgreSQL functions that can be used without parentheses\n    // (The regex pattern above handles functions with parentheses)\n    const commonFunctions = ['current_timestamp', 'current_date', 'current_time'];\n    // Check if it matches the general function pattern\n    if (functionPattern.test(trimmedValue)) {\n        return true;\n    }\n    // Check for common functions that might have specific patterns\n    return commonFunctions.some((func) => trimmedValue.toLowerCase().startsWith(func.toLowerCase()));\n}\n/**\n * Escape SQL strings\n */\nfunction escapeString(str) {\n    return str.replace(/'/g, \"''\");\n}\n/**\n * Escape SQL identifiers (table names, column names) for PostgreSQL\n * Wraps identifier in double quotes and escapes internal double quotes\n */\nfunction escapeIdentifier(identifier) {\n    // Escape double quotes by doubling them and wrap in double quotes\n    return `\"${identifier.replace(/\"/g, '\"\"')}\"`;\n}\n/**\n * Generate ADD COLUMN statement for a column\n */\nexport function generateAddColumnStatement(tableName, column) {\n    const columnDefinition = generateColumnDefinition(column);\n    let ddl = `ALTER TABLE ${escapeIdentifier(tableName)} ADD COLUMN ${columnDefinition};`;\n    // Add column comment if exists\n    if (column.comment) {\n        ddl += `\\n\\nCOMMENT ON COLUMN ${escapeIdentifier(tableName)}.${escapeIdentifier(column.name)} IS '${escapeString(column.comment)}';`;\n    }\n    return ddl;\n}\n/**\n * Generate CREATE TABLE statement for a table\n */\nexport function generateCreateTableStatement(table) {\n    const tableName = table.name;\n    // Generate column definitions\n    const columnDefinitions = Object.values(table.columns).map((column) => {\n        const definition = generateColumnDefinition(column, false);\n        return definition;\n    });\n    // Basic CREATE TABLE statement\n    let ddl = `CREATE TABLE ${escapeIdentifier(tableName)} (\\n  ${columnDefinitions.join(',\\n  ')}\\n);`;\n    // Add table comment\n    if (table.comment) {\n        ddl += `\\n\\nCOMMENT ON TABLE ${escapeIdentifier(tableName)} IS '${escapeString(table.comment)}';`;\n    }\n    // Add column comments\n    const columnComments = generateColumnComments(tableName, table);\n    if (columnComments) {\n        ddl += `\\n${columnComments}`;\n    }\n    return ddl;\n}\n/**\n * Generate COMMENT statements for columns\n */\nfunction generateColumnComments(tableName, table) {\n    const comments = [];\n    for (const column of Object.values(table.columns)) {\n        if (column.comment) {\n            comments.push(`COMMENT ON COLUMN ${escapeIdentifier(tableName)}.${escapeIdentifier(column.name)} IS '${escapeString(column.comment)}';`);\n        }\n    }\n    return comments.join('\\n');\n}\n/**\n * Generate DROP COLUMN statement for a column\n */\nexport function generateRemoveColumnStatement(tableName, columnName) {\n    return `ALTER TABLE ${escapeIdentifier(tableName)} DROP COLUMN ${escapeIdentifier(columnName)};`;\n}\n/**\n * Generate RENAME COLUMN statement for a column\n */\nexport function generateRenameColumnStatement(tableName, oldColumnName, newColumnName) {\n    return `ALTER TABLE ${escapeIdentifier(tableName)} RENAME COLUMN ${escapeIdentifier(oldColumnName)} TO ${escapeIdentifier(newColumnName)};`;\n}\n/**\n * Generate DROP TABLE statement\n */\nexport function generateRemoveTableStatement(tableName) {\n    return `DROP TABLE ${escapeIdentifier(tableName)};`;\n}\n/**\n * Generate RENAME TABLE statement\n */\nexport function generateRenameTableStatement(oldTableName, newTableName) {\n    return `ALTER TABLE ${escapeIdentifier(oldTableName)} RENAME TO ${escapeIdentifier(newTableName)};`;\n}\n/**\n * Generate CREATE INDEX statement for an index\n */\nexport function generateCreateIndexStatement(tableName, index) {\n    const uniqueKeyword = index.unique ? ' UNIQUE' : '';\n    const indexMethod = index.type ? ` USING ${index.type}` : '';\n    const columnList = index.columns\n        .map((col) => escapeIdentifier(col))\n        .join(', ');\n    return `CREATE${uniqueKeyword} INDEX ${escapeIdentifier(index.name)} ON ${escapeIdentifier(tableName)}${indexMethod} (${columnList});`;\n}\n/**\n * Generate DROP INDEX statement\n */\nexport function generateRemoveIndexStatement(indexName) {\n    return `DROP INDEX ${escapeIdentifier(indexName)};`;\n}\n/**\n * Generate ADD CONSTRAINT statement for a constraint\n */\nexport function generateAddConstraintStatement(tableName, constraint) {\n    const constraintName = escapeIdentifier(constraint.name);\n    const tableNameEscaped = escapeIdentifier(tableName);\n    switch (constraint.type) {\n        case 'PRIMARY KEY':\n            return `ALTER TABLE ${tableNameEscaped} ADD CONSTRAINT ${constraintName} PRIMARY KEY (${constraint.columnNames.map(escapeIdentifier).join(', ')});`;\n        case 'FOREIGN KEY':\n            // TODO: Consider changing the internal representation of foreign key constraints\n            // from underscore format (SET_NULL, SET_DEFAULT, NO_ACTION) to space format\n            // (SET NULL, SET DEFAULT, NO ACTION) to match PostgreSQL syntax directly.\n            // This would be a breaking change requiring updates to all parsers and tests.\n            return `ALTER TABLE ${tableNameEscaped} ADD CONSTRAINT ${constraintName} FOREIGN KEY (${escapeIdentifier(constraint.columnName)}) REFERENCES ${escapeIdentifier(constraint.targetTableName)} (${escapeIdentifier(constraint.targetColumnName)}) ON UPDATE ${constraint.updateConstraint.replace('_', ' ')} ON DELETE ${constraint.deleteConstraint.replace('_', ' ')};`;\n        case 'UNIQUE':\n            return `ALTER TABLE ${tableNameEscaped} ADD CONSTRAINT ${constraintName} UNIQUE (${constraint.columnNames.map(escapeIdentifier).join(', ')});`;\n        case 'CHECK':\n            return `ALTER TABLE ${tableNameEscaped} ADD CONSTRAINT ${constraintName} CHECK (${constraint.detail});`;\n        default:\n            return constraint;\n    }\n}\n/**\n * Generate DROP CONSTRAINT statement\n */\nexport function generateRemoveConstraintStatement(tableName, constraintName) {\n    return `ALTER TABLE ${escapeIdentifier(tableName)} DROP CONSTRAINT ${escapeIdentifier(constraintName)};`;\n}\n", "import { generateAddConstraintStatement, generateCreateIndexStatement, generateCreateTableStatement, } from './utils.js';\nexport const postgresqlSchemaDeparser = (schema) => {\n    const ddlStatements = [];\n    const errors = [];\n    // 1. Generate CREATE TABLE statements for each table\n    for (const table of Object.values(schema.tables)) {\n        const createTableDDL = generateCreateTableStatement(table);\n        ddlStatements.push(createTableDDL);\n    }\n    // 2. Generate CREATE INDEX statements for all tables\n    for (const table of Object.values(schema.tables)) {\n        const indexes = Object.values(table.indexes);\n        for (const index of indexes) {\n            const createIndexDDL = generateCreateIndexStatement(table.name, index);\n            ddlStatements.push(createIndexDDL);\n        }\n    }\n    // 3. Generate ADD CONSTRAINT statements for all tables\n    // Note: Foreign key constraints are added last to ensure referenced tables exist\n    const foreignKeyStatements = [];\n    for (const table of Object.values(schema.tables)) {\n        const constraints = Object.values(table.constraints);\n        for (const constraint of constraints) {\n            const addConstraintDDL = generateAddConstraintStatement(table.name, constraint);\n            // Separate foreign key constraints to add them last\n            if (constraint.type === 'FOREIGN KEY') {\n                foreignKeyStatements.push(addConstraintDDL);\n            }\n            else {\n                ddlStatements.push(addConstraintDDL);\n            }\n        }\n    }\n    // Add foreign key constraints at the end\n    ddlStatements.push(...foreignKeyStatements);\n    // Combine all DDL statements\n    const combinedDDL = ddlStatements.join('\\n\\n');\n    return {\n        value: combinedDDL,\n        errors,\n    };\n};\n", "export { buildSchemaDiff } from './buildSchemaDiff.js';\nexport { columnRelatedDiffItemSchema, schemaDiffItemsSchema, tableRelatedDiffItemSchema, } from './types.js';\n", "import pkg from 'fast-json-patch';\nconst { compare } = pkg; // see https://github.com/Starcounter-Jack/JSON-Patch/issues/310\nimport { buildColumnCheckDiffItem } from './columns/buildColumnCheckDiffItem.js';\nimport { buildColumnCommentDiffItem } from './columns/buildColumnCommentDiffItem.js';\nimport { buildColumnDefaultDiffItem } from './columns/buildColumnDefaultDiffItem.js';\nimport { buildColumnDiffItem } from './columns/buildColumnDiffItem.js';\nimport { buildColumnNameDiffItem } from './columns/buildColumnNameDiffItem.js';\nimport { buildColumnNotNullDiffItem } from './columns/buildColumnNotNullDiffItem.js';\nimport { buildConstraintColumnNameDiffItem } from './constraints/buildConstraintColumnNameDiffItem.js';\nimport { buildConstraintDeleteConstraintDiffItem } from './constraints/buildConstraintDeleteConstraintDiffItem.js';\nimport { buildConstraintDetailDiffItem } from './constraints/buildConstraintDetailDiffItem.js';\nimport { buildConstraintDiffItem } from './constraints/buildConstraintDiffItem.js';\nimport { buildConstraintNameDiffItem } from './constraints/buildConstraintNameDiffItem.js';\nimport { buildConstraintTargetColumnNameDiffItem } from './constraints/buildConstraintTargetColumnNameDiffItem.js';\nimport { buildConstraintTargetTableNameDiffItem } from './constraints/buildConstraintTargetTableNameDiffItem.js';\nimport { buildConstraintUpdateConstraintDiffItem } from './constraints/buildConstraintUpdateConstraintDiffItem.js';\nimport { buildIndexColumnsDiffItem } from './indexes/buildIndexColumnsDiffItem.js';\nimport { buildIndexDiffItem } from './indexes/buildIndexDiffItem.js';\nimport { buildIndexNameDiffItem } from './indexes/buildIndexNameDiffItem.js';\nimport { buildIndexTypeDiffItem } from './indexes/buildIndexTypeDiffItem.js';\nimport { buildIndexUniqueDiffItem } from './indexes/buildIndexUniqueDiffItem.js';\nimport { buildTableCommentDiffItem } from './tables/buildTableCommentDiffItem.js';\nimport { buildTableDiffItem } from './tables/buildTableDiffItem.js';\nimport { buildTableNameDiffItem } from './tables/buildTableNameDiffItem.js';\nfunction buildTableRelatedDiffItems(tableId, before, after, operations) {\n    const items = [];\n    const tableDiffItem = buildTableDiffItem(tableId, before, after, operations);\n    if (tableDiffItem) {\n        items.push(tableDiffItem);\n    }\n    const tableNameDiffItem = buildTableNameDiffItem(tableId, before, after, operations);\n    if (tableNameDiffItem) {\n        items.push(tableNameDiffItem);\n    }\n    const tableCommentDiffItem = buildTableCommentDiffItem(tableId, before, after, operations);\n    if (tableCommentDiffItem) {\n        items.push(tableCommentDiffItem);\n    }\n    return items;\n}\nfunction buildColumnRelatedDiffItems(tableId, columnId, before, after, operations) {\n    const items = [];\n    const columnDiffItem = buildColumnDiffItem(tableId, columnId, before, after, operations);\n    if (columnDiffItem) {\n        items.push(columnDiffItem);\n    }\n    const columnNameDiffItem = buildColumnNameDiffItem(tableId, columnId, before, after, operations);\n    if (columnNameDiffItem) {\n        items.push(columnNameDiffItem);\n    }\n    const columnCommentDiffItem = buildColumnCommentDiffItem(tableId, columnId, before, after, operations);\n    if (columnCommentDiffItem) {\n        items.push(columnCommentDiffItem);\n    }\n    const columnDefaultDiffItem = buildColumnDefaultDiffItem(tableId, columnId, before, after, operations);\n    if (columnDefaultDiffItem) {\n        items.push(columnDefaultDiffItem);\n    }\n    const columnCheckDiffItem = buildColumnCheckDiffItem(tableId, columnId, before, after, operations);\n    if (columnCheckDiffItem) {\n        items.push(columnCheckDiffItem);\n    }\n    const columnNotNullDiffItem = buildColumnNotNullDiffItem(tableId, columnId, before, after, operations);\n    if (columnNotNullDiffItem) {\n        items.push(columnNotNullDiffItem);\n    }\n    return items;\n}\nfunction buildIndexRelatedDiffItems(tableId, indexId, before, after, operations) {\n    const items = [];\n    const indexDiffItem = buildIndexDiffItem(tableId, indexId, before, after, operations);\n    if (indexDiffItem) {\n        items.push(indexDiffItem);\n    }\n    const indexNameDiffItem = buildIndexNameDiffItem(tableId, indexId, before, after, operations);\n    if (indexNameDiffItem) {\n        items.push(indexNameDiffItem);\n    }\n    const indexUniqueDiffItem = buildIndexUniqueDiffItem(tableId, indexId, before, after, operations);\n    if (indexUniqueDiffItem) {\n        items.push(indexUniqueDiffItem);\n    }\n    const indexColumnsDiffItem = buildIndexColumnsDiffItem(tableId, indexId, before, after, operations);\n    if (indexColumnsDiffItem) {\n        items.push(indexColumnsDiffItem);\n    }\n    const indexTypeDiffItem = buildIndexTypeDiffItem(tableId, indexId, before, after, operations);\n    if (indexTypeDiffItem) {\n        items.push(indexTypeDiffItem);\n    }\n    return items;\n}\nfunction buildConstraintRelatedDiffItems(tableId, constraintId, before, after, operations) {\n    const items = [];\n    const constraintDiffItem = buildConstraintDiffItem(tableId, constraintId, before, after, operations);\n    if (constraintDiffItem) {\n        items.push(constraintDiffItem);\n    }\n    const constraintNameDiffItem = buildConstraintNameDiffItem(tableId, constraintId, before, after, operations);\n    if (constraintNameDiffItem) {\n        items.push(constraintNameDiffItem);\n    }\n    const constraintColumnNameDiffItem = buildConstraintColumnNameDiffItem(tableId, constraintId, before, after, operations);\n    if (constraintColumnNameDiffItem) {\n        items.push(constraintColumnNameDiffItem);\n    }\n    const constraintTargetTableNameDiffItem = buildConstraintTargetTableNameDiffItem(tableId, constraintId, before, after, operations);\n    if (constraintTargetTableNameDiffItem) {\n        items.push(constraintTargetTableNameDiffItem);\n    }\n    const constraintTargetColumnNameDiffItem = buildConstraintTargetColumnNameDiffItem(tableId, constraintId, before, after, operations);\n    if (constraintTargetColumnNameDiffItem) {\n        items.push(constraintTargetColumnNameDiffItem);\n    }\n    const constraintUpdateConstraintDiffItem = buildConstraintUpdateConstraintDiffItem(tableId, constraintId, before, after, operations);\n    if (constraintUpdateConstraintDiffItem) {\n        items.push(constraintUpdateConstraintDiffItem);\n    }\n    const constraintDeleteConstraintDiffItem = buildConstraintDeleteConstraintDiffItem(tableId, constraintId, before, after, operations);\n    if (constraintDeleteConstraintDiffItem) {\n        items.push(constraintDeleteConstraintDiffItem);\n    }\n    const constraintDetailDiffItem = buildConstraintDetailDiffItem(tableId, constraintId, before, after, operations);\n    if (constraintDetailDiffItem) {\n        items.push(constraintDetailDiffItem);\n    }\n    return items;\n}\nexport function buildSchemaDiff(before, after) {\n    const items = [];\n    const operations = compare(before, after);\n    const allTables = Object.values({ ...before.tables, ...after.tables });\n    for (const table of allTables) {\n        const tableId = table.name;\n        const tableDiffItems = buildTableRelatedDiffItems(tableId, before, after, operations);\n        items.push(...tableDiffItems);\n        const beforeColumns = before.tables[tableId]?.columns || {};\n        const afterColumns = after.tables[tableId]?.columns || {};\n        const allColumnIds = new Set([\n            ...Object.keys(beforeColumns),\n            ...Object.keys(afterColumns),\n        ]);\n        for (const columnId of allColumnIds) {\n            const columnDiffItems = buildColumnRelatedDiffItems(tableId, columnId, before, after, operations);\n            items.push(...columnDiffItems);\n        }\n        const beforeIndexes = before.tables[tableId]?.indexes || {};\n        const afterIndexes = after.tables[tableId]?.indexes || {};\n        const allIndexIds = new Set([\n            ...Object.keys(beforeIndexes),\n            ...Object.keys(afterIndexes),\n        ]);\n        for (const indexId of allIndexIds) {\n            const indexDiffItems = buildIndexRelatedDiffItems(tableId, indexId, before, after, operations);\n            items.push(...indexDiffItems);\n        }\n        const beforeConstraints = before.tables[tableId]?.constraints || {};\n        const afterConstraints = after.tables[tableId]?.constraints || {};\n        const allConstraintIds = new Set([\n            ...Object.keys(beforeConstraints),\n            ...Object.keys(afterConstraints),\n        ]);\n        for (const constraintId of allConstraintIds) {\n            const constraintDiffItems = buildConstraintRelatedDiffItems(tableId, constraintId, before, after, operations);\n            items.push(...constraintDiffItems);\n        }\n    }\n    return items;\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildColumnCheckDiffItem(tableId, columnId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        columnId,\n        operations,\n        pathRegExp: PATH_PATTERNS.COLUMN_CHECK,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.columns[columnId]?.check\n        : after.tables[tableId]?.columns[columnId]?.check;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'column-check',\n        status,\n        data,\n        tableId,\n        columnId,\n    };\n}\n", "export function getChangeStatus({ tableId, columnId, indexId, constraintId, operations, pathRegExp, }) {\n    const filteredOperations = operations.filter(({ path }) => {\n        const match = path.match(pathRegExp);\n        if (columnId) {\n            return match?.[1] === tableId && match?.[2] === columnId;\n        }\n        if (indexId) {\n            return match?.[1] === tableId && match?.[2] === indexId;\n        }\n        if (constraintId) {\n            return match?.[1] === tableId && match?.[2] === constraintId;\n        }\n        return match && match[1] === tableId;\n    });\n    if (filteredOperations.length === 0)\n        return 'unchanged';\n    if (filteredOperations.some((op) => op.op === 'replace')) {\n        return 'modified';\n    }\n    const hasAddOperation = filteredOperations.some((op) => op.op === 'add');\n    const hasRemoveOperation = filteredOperations.some((op) => op.op === 'remove');\n    // Return 'modified' if both add and remove operations exist\n    if (hasAddOperation && hasRemoveOperation) {\n        return 'modified';\n    }\n    if (hasAddOperation)\n        return 'added';\n    if (hasRemoveOperation)\n        return 'removed';\n    return 'unchanged';\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildColumnCommentDiffItem(tableId, columnId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        columnId,\n        operations,\n        pathRegExp: PATH_PATTERNS.COLUMN_COMMENT,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.columns[columnId]?.comment\n        : after.tables[tableId]?.columns[columnId]?.comment;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'column-comment',\n        status,\n        data,\n        tableId,\n        columnId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildColumnDefaultDiffItem(tableId, columnId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        columnId,\n        operations,\n        pathRegExp: PATH_PATTERNS.COLUMN_DEFAULT,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.columns[columnId]?.default\n        : after.tables[tableId]?.columns[columnId]?.default;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'column-default',\n        status,\n        data,\n        tableId,\n        columnId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildColumnDiffItem(tableId, columnId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        columnId,\n        operations,\n        pathRegExp: PATH_PATTERNS.COLUMN_BASE,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.columns[columnId]\n        : after.tables[tableId]?.columns[columnId];\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'column',\n        status,\n        data,\n        tableId,\n        columnId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildColumnNameDiffItem(tableId, columnId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        columnId,\n        operations,\n        pathRegExp: PATH_PATTERNS.COLUMN_NAME,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.columns[columnId]?.name\n        : after.tables[tableId]?.columns[columnId]?.name;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'column-name',\n        status,\n        data,\n        tableId,\n        columnId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildColumnNotNullDiffItem(tableId, columnId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        columnId,\n        operations,\n        pathRegExp: PATH_PATTERNS.COLUMN_NOT_NULL,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.columns[columnId]?.notNull\n        : after.tables[tableId]?.columns[columnId]?.notNull;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'column-not-null',\n        status,\n        data,\n        tableId,\n        columnId,\n    };\n}\n", "import { match, P } from 'ts-pattern';\nimport { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildConstraintColumnNameDiffItem(tableId, constraintId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        constraintId,\n        operations,\n        pathRegExp: PATH_PATTERNS.CONSTRAINT_COLUMN_NAME,\n    });\n    const constraint = status === 'removed'\n        ? before.tables[tableId]?.constraints[constraintId]\n        : after.tables[tableId]?.constraints[constraintId];\n    const data = match(constraint)\n        // TODO: Currently only detects changes in the first column of composite constraints\n        .with({ type: 'UNIQUE' }, ({ columnNames }) => columnNames[0])\n        .with({ type: 'FOREIGN KEY' }, ({ columnName }) => columnName)\n        // TODO: Currently only detects changes in the first column of composite constraints\n        .with({ type: 'PRIMARY KEY' }, ({ columnNames }) => columnNames[0])\n        .with({ type: 'CHECK' }, () => undefined)\n        .with(P.nullish, () => undefined)\n        .exhaustive();\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'constraint-column-name',\n        status,\n        data,\n        tableId,\n        constraintId,\n    };\n}\n", "/**\n * Symbols used internally within ts-pattern to construct and discriminate\n * Guard, Not, and Select, and AnonymousSelect patterns\n *\n * Symbols have the advantage of not appearing in auto-complete suggestions in\n * user defined patterns, and eliminate the risk of property\n * overlap between ts-pattern internals and user defined patterns.\n *\n * These symbols have to be visible to tsc for type inference to work, but\n * users should not import them\n * @module\n * @private\n * @internal\n */\n\nexport const matcher = Symbol.for('@ts-pattern/matcher');\nexport type matcher = typeof matcher;\n\nexport const unset = Symbol.for('@ts-pattern/unset');\nexport type unset = typeof unset;\n\nexport const isVariadic = Symbol.for('@ts-pattern/isVariadic');\nexport type isVariadic = typeof isVariadic;\n\n// can't be a symbol because this key has to be enumerable.\nexport const anonymousSelectKey = '@ts-pattern/anonymous-select-key';\nexport type anonymousSelectKey = typeof anonymousSelectKey;\n\nexport const override = Symbol.for('@ts-pattern/override');\nexport type override = typeof override;\n", "/**\n * @module\n * @private\n * @internal\n */\n\nimport * as symbols from './symbols';\nimport { SelectionType } from '../types/FindSelected';\nimport { Pattern, Matcher, MatcherType, AnyMatcher } from '../types/Pattern';\n\n// @internal\nexport const isObject = (value: unknown): value is Object =>\n  Boolean(value && typeof value === 'object');\n\n//   @internal\nexport const isMatcher = (\n  x: unknown\n): x is Matcher<unknown, unknown, MatcherType, SelectionType> => {\n  const pattern = x as Matcher<unknown, unknown, MatcherType, SelectionType>;\n  return pattern && !!pattern[symbols.matcher];\n};\n\n// @internal\nconst isOptionalPattern = (\n  x: unknown\n): x is Matcher<unknown, unknown, 'optional', SelectionType> => {\n  return isMatcher(x) && x[symbols.matcher]().matcherType === 'optional';\n};\n\n// tells us if the value matches a given pattern.\n// @internal\nexport const matchPattern = (\n  pattern: any,\n  value: any,\n  select: (key: string, value: unknown) => void\n): boolean => {\n  if (isMatcher(pattern)) {\n    const matcher = pattern[symbols.matcher]();\n    const { matched, selections } = matcher.match(value);\n    if (matched && selections) {\n      Object.keys(selections).forEach((key) => select(key, selections[key]));\n    }\n    return matched;\n  }\n\n  if (isObject(pattern)) {\n    if (!isObject(value)) return false;\n\n    // Tuple pattern\n    if (Array.isArray(pattern)) {\n      if (!Array.isArray(value)) return false;\n      let startPatterns = [];\n      let endPatterns = [];\n      let variadicPatterns: AnyMatcher[] = [];\n\n      for (const i of pattern.keys()) {\n        const subpattern = pattern[i];\n        if (isMatcher(subpattern) && subpattern[symbols.isVariadic]) {\n          variadicPatterns.push(subpattern);\n        } else if (variadicPatterns.length) {\n          endPatterns.push(subpattern);\n        } else {\n          startPatterns.push(subpattern);\n        }\n      }\n\n      if (variadicPatterns.length) {\n        if (variadicPatterns.length > 1) {\n          throw new Error(\n            `Pattern error: Using \\`...P.array(...)\\` several times in a single pattern is not allowed.`\n          );\n        }\n\n        if (value.length < startPatterns.length + endPatterns.length) {\n          return false;\n        }\n\n        const startValues = value.slice(0, startPatterns.length);\n        const endValues =\n          endPatterns.length === 0 ? [] : value.slice(-endPatterns.length);\n        const middleValues = value.slice(\n          startPatterns.length,\n          endPatterns.length === 0 ? Infinity : -endPatterns.length\n        );\n\n        return (\n          startPatterns.every((subPattern, i) =>\n            matchPattern(subPattern, startValues[i], select)\n          ) &&\n          endPatterns.every((subPattern, i) =>\n            matchPattern(subPattern, endValues[i], select)\n          ) &&\n          (variadicPatterns.length === 0\n            ? true\n            : matchPattern(variadicPatterns[0], middleValues, select))\n        );\n      }\n\n      return pattern.length === value.length\n        ? pattern.every((subPattern, i) =>\n            matchPattern(subPattern, value[i], select)\n          )\n        : false;\n    }\n\n    return Reflect.ownKeys(pattern).every((k): boolean => {\n      const subPattern = pattern[k];\n\n      return (\n        (k in value || isOptionalPattern(subPattern)) &&\n        matchPattern(subPattern, value[k], select)\n      );\n    });\n  }\n\n  return Object.is(value, pattern);\n};\n\n// @internal\nexport const getSelectionKeys = (pattern: any): string[] => {\n  if (isObject(pattern)) {\n    if (isMatcher(pattern)) {\n      return pattern[symbols.matcher]().getSelectionKeys?.() ?? [];\n    }\n    if (Array.isArray(pattern)) return flatMap(pattern, getSelectionKeys);\n    return flatMap(Object.values(pattern), getSelectionKeys);\n  }\n  return [];\n};\n\n// @internal\nexport const flatMap = <a, b>(\n  xs: readonly a[],\n  f: (v: a) => readonly b[]\n): b[] => xs.reduce<b[]>((acc, x) => acc.concat(f(x)), []);\n", "import { MatchedValue, Pattern, UnknownProperties } from './types/Pattern';\nimport * as P from './patterns';\nimport { matchPattern } from './internals/helpers';\nimport { WithDefault } from './types/helpers';\n\n/**\n * This constraint allows using additional properties\n * in object patterns. See \"should allow targetting unknown properties\"\n * unit test in `is-matching.test.ts`.\n */\ntype PatternConstraint<T> = T extends readonly any[]\n  ? P.Pattern<T>\n  : T extends object\n  ? P.Pattern<T> & UnknownProperties\n  : P.Pattern<T>;\n\n/**\n * `isMatching` takes pattern and returns a **type guard** function, cheching if a value matches this pattern.\n *\n * [Read  documentation for `isMatching` on GitHub](https://github.com/gvergnaud/ts-pattern#ismatching)\n *\n * @example\n *  const hasName = isMatching({ name: P.string })\n *\n *  declare let input: unknown\n *\n *  if (hasName(input)) {\n *    // `input` inferred as { name: string }\n *    return input.name\n *  }\n */\nexport function isMatching<const p extends Pattern<unknown>>(\n  pattern: p\n): (value: unknown) => value is P.infer<p>;\n/**\n * `isMatching` takes pattern and a value and checks if the value matches this pattern.\n *\n * [Read  documentation for `isMatching` on GitHub](https://github.com/gvergnaud/ts-pattern#ismatching)\n *\n * @example\n *  declare let input: unknown\n *\n *  if (isMatching({ name: P.string }, input)) {\n *    // `input` inferred as { name: string }\n *    return input.name\n *  }\n */\nexport function isMatching<const T, const P extends PatternConstraint<T>>(\n  pattern: P,\n  value: T\n): value is T & WithDefault<P.narrow<T, P>, P.infer<P>>;\n\nexport function isMatching<const p extends Pattern<any>>(\n  ...args: [pattern: p, value?: any]\n): boolean | ((vale: any) => boolean) {\n  if (args.length === 1) {\n    const [pattern] = args;\n    return (value: any): value is MatchedValue<any, P.infer<p>> =>\n      matchPattern(pattern, value, () => {});\n  }\n  if (args.length === 2) {\n    const [pattern, value] = args;\n    return matchPattern(pattern, value, () => {});\n  }\n\n  throw new Error(\n    `isMatching wasn't given the right number of arguments: expected 1 or 2, received ${args.length}.`\n  );\n}\n", "/**\n * The `P` module contains patterns for primitive types, wildcards and\n * other pattern-matching utilities.\n *\n * @module\n */\n\nimport { matchPattern, getSelectionKeys, flatMap } from './internals/helpers';\nimport * as symbols from './internals/symbols';\nimport { matcher } from './internals/symbols';\nimport { isMatching } from './is-matching';\nimport { ExtractPreciseValue } from './types/ExtractPreciseValue';\nimport { Fn } from './types/helpers';\nimport { InvertPattern } from './types/InvertPattern';\nimport {\n  Pattern,\n  UnknownPattern,\n  OptionalP,\n  ArrayP,\n  MapP,\n  SetP,\n  AndP,\n  OrP,\n  NotP,\n  GuardP,\n  SelectP,\n  AnonymousSelectP,\n  GuardExcludeP,\n  CustomP,\n  Matcher,\n  StringPattern,\n  AnyPattern,\n  NumberPattern,\n  BooleanPattern,\n  BigIntPattern,\n  NullishPattern,\n  SymbolPattern,\n  Chainable,\n  BigIntChainable,\n  NumberChainable,\n  StringChainable,\n  ArrayChainable,\n  Variadic,\n  NonNullablePattern,\n} from './types/Pattern';\n\nexport type {\n  /**\n   * `Pattern<T>` is the type of all patterns\n   * that can match a value of type `T`.\n   */\n  Pattern,\n\n  /**\n   * `unstable_Fn` can be used to created a\n   * a Matchable instance – a custom type that\n   * can be used as a pattern.\n   *\n   * @experimental This feature is unstable.\n   */\n  Fn as unstable_Fn,\n};\n\nexport { matcher };\n\n/**\n * A `Matchable` is an object implementing\n * the Matcher Protocol. It must have a `[P.matcher]: P.Matcher<NarrowFn>`\n * key, which defines how this object should be matched by TS-Pattern.\n *\n * @experimental This feature is unstable.\n *\n * @example\n * ```ts\n * class Some<T> implements P.unstable_Matchable {\n *  [P.matcher](): P.unstable_Matcher<Some<T>>\n * }\n * ```\n */\nexport type unstable_Matchable<\n  narrowedOrFn,\n  input = unknown,\n  pattern = never\n> = CustomP<input, pattern, narrowedOrFn>;\n\n/**\n * A `Matcher` is an object with `match` function, which\n * defines how this object should be matched by TS-Pattern.\n *\n * @experimental This feature is unstable.\n *\n * @example\n * ```ts\n * class Some<T> implements P.unstable_Matchable {\n *  [P.matcher](): P.unstable_Matcher<Some<T>>\n * }\n * ```\n */\nexport type unstable_Matcher<\n  narrowedOrFn,\n  input = unknown,\n  pattern = never\n> = ReturnType<CustomP<input, pattern, narrowedOrFn>[matcher]>;\n\n/**\n * `P.infer<typeof somePattern>` will return the type of the value\n * matched by this pattern.\n *\n * [Read the documentation for `P.infer` on GitHub](https://github.com/gvergnaud/ts-pattern#pinfer)\n *\n * @example\n * const userPattern = { name: P.string }\n * type User = P.infer<typeof userPattern>\n */\nexport type infer<pattern> = InvertPattern<NoInfer<pattern>, unknown>;\n\n/**\n * `P.narrow<Input, Pattern>` will narrow the input type to only keep\n * the set of values that are compatible with the provided pattern type.\n *\n * [Read the documentation for `P.narrow` on GitHub](https://github.com/gvergnaud/ts-pattern#pnarrow)\n *\n * @example\n * type Input = ['a' | 'b' | 'c', 'a' | 'b' | 'c']\n * const Pattern = ['a', P.union('a', 'b')] as const\n *\n * type Narrowed = P.narrow<Input, typeof Pattern>\n * //     ^? ['a', 'a' | 'b']\n */\nexport type narrow<input, pattern> = ExtractPreciseValue<\n  input,\n  InvertPattern<pattern, input>\n>;\n\nfunction chainable<pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): Chainable<pattern> {\n  return Object.assign(pattern, {\n    optional: () => optional(pattern),\n    and: (p2: any) => intersection(pattern, p2),\n    or: (p2: any) => union(pattern, p2),\n    select: (key: any) =>\n      key === undefined ? select(pattern) : select(key, pattern),\n  }) as Chainable<pattern>;\n}\n\nconst variadic = <pattern extends {}>(pattern: pattern): Variadic<pattern> =>\n  Object.assign(pattern, {\n    [Symbol.iterator](): Iterator<pattern, void, undefined> {\n      let i = 0;\n      const variadicPattern = Object.assign(pattern, {\n        [symbols.isVariadic]: true,\n      });\n      const values: IteratorResult<pattern, void>[] = [\n        { value: variadicPattern, done: false },\n        { done: true, value: undefined },\n      ];\n      return {\n        next: () => values[i++] ?? values.at(-1)!,\n      };\n    },\n  });\n\nfunction arrayChainable<pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): ArrayChainable<pattern> {\n  return Object.assign(variadic(pattern), {\n    optional: () => arrayChainable(optional(pattern)),\n    select: (key: any) =>\n      arrayChainable(\n        key === undefined ? select(pattern) : select(key, pattern)\n      ),\n  }) as any;\n}\n\n/**\n * `P.optional(subpattern)` takes a sub pattern and returns a pattern which matches if the\n * key is undefined or if it is defined and the sub pattern matches its value.\n *\n * [Read the documentation for `P.optional` on GitHub](https://github.com/gvergnaud/ts-pattern#poptional-patterns)\n *\n * @example\n *  match(value)\n *   .with({ greeting: P.optional('Hello') }, () => 'will match { greeting?: \"Hello\" }')\n */\nexport function optional<\n  input,\n  const pattern extends unknown extends input ? UnknownPattern : Pattern<input>\n>(pattern: pattern): Chainable<OptionalP<input, pattern>, 'optional'> {\n  return chainable({\n    [matcher]() {\n      return {\n        match: <UnknownInput>(value: UnknownInput | input) => {\n          let selections: Record<string, unknown[]> = {};\n          const selector = (key: string, value: any) => {\n            selections[key] = value;\n          };\n          if (value === undefined) {\n            getSelectionKeys(pattern).forEach((key) =>\n              selector(key, undefined)\n            );\n            return { matched: true, selections };\n          }\n          const matched = matchPattern(pattern, value, selector);\n          return { matched, selections };\n        },\n        getSelectionKeys: () => getSelectionKeys(pattern),\n        matcherType: 'optional',\n      };\n    },\n  });\n}\n\ntype UnwrapArray<xs> = xs extends readonly (infer x)[] ? x : never;\n\ntype UnwrapSet<xs> = xs extends Set<infer x> ? x : never;\n\ntype UnwrapMapKey<xs> = xs extends Map<infer k, any> ? k : never;\n\ntype UnwrapMapValue<xs> = xs extends Map<any, infer v> ? v : never;\n\ntype WithDefault<a, b> = [a] extends [never] ? b : a;\n\n/**\n * `P.array(subpattern)` takes a sub pattern and returns a pattern, which matches\n * arrays if all their elements match the sub pattern.\n *\n * [Read the documentation for `P.array` on GitHub](https://github.com/gvergnaud/ts-pattern#parray-patterns)\n *\n * @example\n *  match(value)\n *   .with({ users: P.array({ name: P.string }) }, () => 'will match { name: string }[]')\n */\nexport function array<input>(): ArrayChainable<ArrayP<input, unknown>>;\nexport function array<\n  input,\n  const pattern extends Pattern<WithDefault<UnwrapArray<input>, unknown>>\n>(pattern: pattern): ArrayChainable<ArrayP<input, pattern>>;\nexport function array(\n  ...args: [pattern?: any]\n): ArrayChainable<ArrayP<any, any>> {\n  return arrayChainable({\n    [matcher]() {\n      return {\n        match: (value: any) => {\n          if (!Array.isArray(value)) return { matched: false };\n\n          if (args.length === 0) return { matched: true };\n\n          const pattern = args[0];\n          let selections: Record<string, unknown[]> = {};\n\n          if (value.length === 0) {\n            getSelectionKeys(pattern).forEach((key) => {\n              selections[key] = [];\n            });\n            return { matched: true, selections };\n          }\n\n          const selector = (key: string, value: unknown) => {\n            selections[key] = (selections[key] || []).concat([value]);\n          };\n\n          const matched = value.every((v) =>\n            matchPattern(pattern, v, selector)\n          );\n\n          return { matched, selections };\n        },\n        getSelectionKeys: () =>\n          args.length === 0 ? [] : getSelectionKeys(args[0]),\n      };\n    },\n  });\n}\n\n/**\n * `P.set(subpattern)` takes a sub pattern and returns a pattern that matches\n * sets if all their elements match the sub pattern.\n *\n * [Read `P.set` documentation on GitHub](https://github.com/gvergnaud/ts-pattern#pset-patterns)\n *\n * @example\n *  match(value)\n *   .with({ users: P.set(P.string) }, () => 'will match Set<string>')\n */\nexport function set<input>(): Chainable<SetP<input, unknown>>;\nexport function set<\n  input,\n  const pattern extends Pattern<WithDefault<UnwrapSet<input>, unknown>>\n>(pattern: pattern): Chainable<SetP<input, pattern>>;\nexport function set<\n  input,\n  const pattern extends Pattern<WithDefault<UnwrapSet<input>, unknown>>\n>(...args: [pattern?: pattern]): Chainable<SetP<input, pattern>> {\n  return chainable({\n    [matcher]() {\n      return {\n        match: <UnknownInput>(value: UnknownInput | input) => {\n          if (!(value instanceof Set)) return { matched: false };\n\n          let selections: Record<string, unknown[]> = {};\n\n          if (value.size === 0) {\n            return { matched: true, selections };\n          }\n\n          if (args.length === 0) return { matched: true };\n\n          const selector = (key: string, value: unknown) => {\n            selections[key] = (selections[key] || []).concat([value]);\n          };\n\n          const pattern = args[0];\n\n          const matched = setEvery(value, (v) =>\n            matchPattern(pattern, v, selector)\n          );\n\n          return { matched, selections };\n        },\n        getSelectionKeys: () =>\n          args.length === 0 ? [] : getSelectionKeys(args[0]),\n      };\n    },\n  });\n}\n\nconst setEvery = <T>(set: Set<T>, predicate: (value: T) => boolean) => {\n  for (const value of set) {\n    if (predicate(value)) continue;\n    return false;\n  }\n  return true;\n};\n\n/**\n * `P.map(keyPattern, valuePattern)` takes a subpattern to match against the\n * key, a subpattern to match against the value and returns a pattern that\n * matches on maps where all elements inside the map match those two\n * subpatterns.\n *\n * [Read `P.map` documentation on GitHub](https://github.com/gvergnaud/ts-pattern#pmap-patterns)\n *\n * @example\n *  match(value)\n *   .with({ users: P.map(P.map(P.string, P.number)) }, (map) => `map's type is Map<string, number>`)\n */\nexport function map<input>(): Chainable<MapP<input, unknown, unknown>>;\nexport function map<\n  input,\n  const pkey extends Pattern<WithDefault<UnwrapMapKey<input>, unknown>>,\n  const pvalue extends Pattern<WithDefault<UnwrapMapValue<input>, unknown>>\n>(patternKey: pkey, patternValue: pvalue): Chainable<MapP<input, pkey, pvalue>>;\nexport function map<\n  input,\n  const pkey extends Pattern<WithDefault<UnwrapMapKey<input>, unknown>>,\n  const pvalue extends Pattern<WithDefault<UnwrapMapValue<input>, unknown>>\n>(\n  ...args: [patternKey?: pkey, patternValue?: pvalue]\n): Chainable<MapP<input, pkey, pvalue>> {\n  return chainable({\n    [matcher]() {\n      return {\n        match: <UnknownInput>(value: UnknownInput | input) => {\n          if (!(value instanceof Map)) return { matched: false };\n\n          let selections: Record<string, unknown[]> = {};\n\n          if (value.size === 0) {\n            return { matched: true, selections };\n          }\n\n          const selector = (key: string, value: unknown) => {\n            selections[key] = (selections[key] || []).concat([value]);\n          };\n\n          if (args.length === 0) return { matched: true };\n          if (args.length === 1) {\n            throw new Error(\n              `\\`P.map\\` wasn\\'t given enough arguments. Expected (key, value), received ${args[0]?.toString()}`\n            );\n          }\n          const [patternKey, patternValue] = args;\n\n          const matched = mapEvery(value, (v, k) => {\n            const keyMatch = matchPattern(patternKey, k, selector);\n            const valueMatch = matchPattern(patternValue, v, selector);\n            return keyMatch && valueMatch;\n          });\n\n          return { matched, selections };\n        },\n        getSelectionKeys: () =>\n          args.length === 0\n            ? []\n            : [...getSelectionKeys(args[0]), ...getSelectionKeys(args[1])],\n      };\n    },\n  });\n}\n\nconst mapEvery = <K, T>(\n  map: Map<K, T>,\n  predicate: (value: T, key: K) => boolean\n) => {\n  for (const [key, value] of map.entries()) {\n    if (predicate(value, key)) continue;\n    return false;\n  }\n  return true;\n};\n\n/**\n * `P.intersection(...patterns)` returns a pattern which matches\n * only if **every** patterns provided in parameter match the input.\n *\n * [Read the documentation for `P.intersection` on GitHub](https://github.com/gvergnaud/ts-pattern#pintersection-patterns)\n *\n * @example\n *  match(value)\n *   .with(\n *     {\n *       user: P.intersection(\n *         { firstname: P.string },\n *         { lastname: P.string },\n *         { age: P.when(age => age > 21) }\n *       )\n *     },\n *     ({ user }) => 'will match { firstname: string, lastname: string, age: number } if age > 21'\n *   )\n */\nexport function intersection<\n  input,\n  const patterns extends readonly [Pattern<input>, ...Pattern<input>[]]\n>(...patterns: patterns): Chainable<AndP<input, patterns>> {\n  return chainable({\n    [matcher]: () => ({\n      match: (value) => {\n        let selections: Record<string, unknown[]> = {};\n        const selector = (key: string, value: any) => {\n          selections[key] = value;\n        };\n        const matched = (patterns as readonly UnknownPattern[]).every((p) =>\n          matchPattern(p, value, selector)\n        );\n        return { matched, selections };\n      },\n      getSelectionKeys: () =>\n        flatMap(patterns as readonly UnknownPattern[], getSelectionKeys),\n      matcherType: 'and',\n    }),\n  });\n}\n\n/**\n * `P.union(...patterns)` returns a pattern which matches\n * if **at least one** of the patterns provided in parameter match the input.\n *\n * [Read the documentation for `P.union` on GitHub](https://github.com/gvergnaud/ts-pattern#punion-patterns)\n *\n * @example\n *  match(value)\n *   .with(\n *     { type: P.union('a', 'b', 'c') },\n *     ({ type }) => 'will match { type: \"a\" | \"b\" | \"c\" }'\n *   )\n */\nexport function union<\n  input,\n  const patterns extends readonly [Pattern<input>, ...Pattern<input>[]]\n>(...patterns: patterns): Chainable<OrP<input, patterns>> {\n  return chainable({\n    [matcher]: () => ({\n      match: <UnknownInput>(value: UnknownInput | input) => {\n        let selections: Record<string, unknown[]> = {};\n        const selector = (key: string, value: any) => {\n          selections[key] = value;\n        };\n        flatMap(\n          patterns as readonly UnknownPattern[],\n          getSelectionKeys\n        ).forEach((key) => selector(key, undefined));\n        const matched = (patterns as readonly UnknownPattern[]).some((p) =>\n          matchPattern(p, value, selector)\n        );\n        return { matched, selections };\n      },\n      getSelectionKeys: () =>\n        flatMap(patterns as readonly UnknownPattern[], getSelectionKeys),\n      matcherType: 'or',\n    }),\n  });\n}\n\n/**\n * `P.not(pattern)` returns a pattern which matches if the sub pattern\n * doesn't match.\n *\n * [Read the documentation for `P.not` on GitHub](https://github.com/gvergnaud/ts-pattern#pnot-patterns)\n *\n * @example\n *  match<{ a: string | number }>(value)\n *   .with({ a: P.not(P.string) }, (x) => 'will match { a: number }'\n *   )\n */\n\nexport function not<\n  input,\n  const pattern extends Pattern<input> | UnknownPattern\n>(pattern: pattern): Chainable<NotP<input, pattern>> {\n  return chainable({\n    [matcher]: () => ({\n      match: <UnknownInput>(value: UnknownInput | input) => ({\n        matched: !matchPattern(pattern, value, () => {}),\n      }),\n      getSelectionKeys: () => [],\n      matcherType: 'not',\n    }),\n  });\n}\n\n/**\n * `P.when((value) => boolean)` returns a pattern which matches\n * if the predicate returns true for the current input.\n *\n * [Read the documentation for `P.when` on GitHub](https://github.com/gvergnaud/ts-pattern#pwhen-patterns)\n *\n * @example\n *  match<{ age: number }>(value)\n *   .with({ age: P.when(age => age > 21) }, (x) => 'will match if value.age > 21'\n *   )\n */\nexport function when<input, predicate extends (value: input) => unknown>(\n  predicate: predicate\n): GuardP<\n  input,\n  predicate extends (value: any) => value is infer narrowed ? narrowed : never\n>;\nexport function when<input, narrowed extends input, excluded>(\n  predicate: (input: input) => input is narrowed\n): GuardExcludeP<input, narrowed, excluded>;\nexport function when<input, predicate extends (value: input) => unknown>(\n  predicate: predicate\n): GuardP<\n  input,\n  predicate extends (value: any) => value is infer narrowed ? narrowed : never\n> {\n  return {\n    [matcher]: () => ({\n      match: <UnknownInput>(value: UnknownInput | input) => ({\n        matched: Boolean(predicate(value as input)),\n      }),\n    }),\n  };\n}\n\n/**\n * `P.select()` is a pattern which will always match,\n * and will inject the selected piece of input in the handler function.\n *\n * [Read the documentation for `P.select` on GitHub](https://github.com/gvergnaud/ts-pattern#pselect-patterns)\n *\n * @example\n *  match<{ age: number }>(value)\n *   .with({ age: P.select() }, (age) => 'age: number'\n *   )\n */\nexport function select(): Chainable<AnonymousSelectP, 'select' | 'or' | 'and'>;\nexport function select<\n  input,\n  const patternOrKey extends\n    | string\n    | (unknown extends input ? UnknownPattern : Pattern<input>)\n>(\n  patternOrKey: patternOrKey\n): patternOrKey extends string\n  ? Chainable<SelectP<patternOrKey, 'select' | 'or' | 'and'>>\n  : Chainable<\n      SelectP<symbols.anonymousSelectKey, input, patternOrKey>,\n      'select' | 'or' | 'and'\n    >;\nexport function select<\n  input,\n  const pattern extends unknown extends input ? UnknownPattern : Pattern<input>,\n  const k extends string\n>(\n  key: k,\n  pattern: pattern\n): Chainable<SelectP<k, input, pattern>, 'select' | 'or' | 'and'>;\nexport function select(\n  ...args: [keyOrPattern?: unknown | string, pattern?: unknown]\n): Chainable<SelectP<string>, 'select' | 'or' | 'and'> {\n  const key: string | undefined =\n    typeof args[0] === 'string' ? args[0] : undefined;\n  const pattern: unknown =\n    args.length === 2\n      ? args[1]\n      : typeof args[0] === 'string'\n      ? undefined\n      : args[0];\n  return chainable({\n    [matcher]() {\n      return {\n        match: (value) => {\n          let selections: Record<string, unknown> = {\n            [key ?? symbols.anonymousSelectKey]: value,\n          };\n          const selector = (key: string, value: any) => {\n            selections[key] = value;\n          };\n          return {\n            matched:\n              pattern === undefined\n                ? true\n                : matchPattern(pattern, value, selector),\n            selections: selections,\n          };\n        },\n        getSelectionKeys: () =>\n          [key ?? symbols.anonymousSelectKey].concat(\n            pattern === undefined ? [] : getSelectionKeys(pattern)\n          ),\n      };\n    },\n  });\n}\n\nfunction isUnknown(x: unknown): x is unknown {\n  return true;\n}\n\nfunction isNumber<T>(x: T | number): x is number {\n  return typeof x === 'number';\n}\n\nfunction isString<T>(x: T | string): x is string {\n  return typeof x === 'string';\n}\n\nfunction isBoolean<T>(x: T | boolean): x is boolean {\n  return typeof x === 'boolean';\n}\n\nfunction isBigInt<T>(x: T | bigint): x is bigint {\n  return typeof x === 'bigint';\n}\n\nfunction isSymbol<T>(x: T | symbol): x is symbol {\n  return typeof x === 'symbol';\n}\n\nfunction isNullish<T>(x: T | null | undefined): x is null | undefined {\n  return x === null || x === undefined;\n}\n\nfunction isNonNullable(x: unknown): x is {} {\n  return x !== null && x !== undefined;\n}\n\ntype AnyConstructor = abstract new (...args: any[]) => any;\n\nfunction isInstanceOf<T extends AnyConstructor>(classConstructor: T) {\n  return (val: unknown): val is InstanceType<T> =>\n    val instanceof classConstructor;\n}\n\n/**\n * `P.any` is a wildcard pattern, matching **any value**.\n *\n * [Read the documentation for `P.any` on GitHub](https://github.com/gvergnaud/ts-pattern#p_-wildcard)\n *\n * @example\n *  match(value)\n *   .with(P.any, () => 'will always match')\n */\nexport const any: AnyPattern = chainable(when(isUnknown));\n\n/**\n * `P._` is a wildcard pattern, matching **any value**.\n * It's an alias to `P.any`.\n *\n * [Read the documentation for `P._` on GitHub](https://github.com/gvergnaud/ts-pattern#p_-wildcard)\n *\n * @example\n *  match(value)\n *   .with(P._, () => 'will always match')\n */\nexport const _ = any;\n\n/**\n * `P.string.startsWith(start)` is a pattern, matching **strings** starting with `start`.\n *\n * [Read the documentation for `P.string.startsWith` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringstartsWith)\n *\n * @example\n *  match(value)\n *   .with(P.string.startsWith('A'), () => 'value starts with an A')\n */\n\nconst startsWith = <input, const start extends string>(\n  start: start\n): GuardP<input, `${start}${string}`> =>\n  when((value) => isString(value) && value.startsWith(start));\n\n/**\n * `P.string.endsWith(end)` is a pattern, matching **strings** ending with `end`.\n *\n * [Read the documentation for `P.string.endsWith` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringendsWith)\n *\n * @example\n *  match(value)\n *   .with(P.string.endsWith('!'), () => 'value ends with an !')\n */\nconst endsWith = <input, const end extends string>(\n  end: end\n): GuardP<input, `${string}${end}`> =>\n  when((value) => isString(value) && value.endsWith(end));\n\n/**\n * `P.string.minLength(min)` is a pattern, matching **strings** with at least `min` characters.\n *\n * [Read the documentation for `P.string.minLength` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringminLength)\n *\n * @example\n *  match(value)\n *   .with(P.string.minLength(10), () => 'string with more length >= 10')\n */\nconst minLength = <const min extends number>(min: min) =>\n  when((value) => isString(value) && value.length >= min);\n\n/**\n * `P.string.length(len)` is a pattern, matching **strings** with exactly `len` characters.\n *\n * [Read the documentation for `P.string.length` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringlength)\n *\n * @example\n *  match(value)\n *   .with(P.string.length(10), () => 'strings with length === 10')\n */\nconst length = <const len extends number>(len: len) =>\n  when((value) => isString(value) && value.length === len);\n\n/**\n * `P.string.maxLength(max)` is a pattern, matching **strings** with at most `max` characters.\n *\n * [Read the documentation for `P.string.maxLength` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringmaxLength)\n *\n * @example\n *  match(value)\n *   .with(P.string.maxLength(10), () => 'string with more length <= 10')\n */\nconst maxLength = <const max extends number>(max: max) =>\n  when((value) => isString(value) && value.length <= max);\n\n/**\n * `P.string.includes(substr)` is a pattern, matching **strings** containing `substr`.\n *\n * [Read the documentation for `P.string.includes` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringincludes)\n *\n * @example\n *  match(value)\n *   .with(P.string.includes('http'), () => 'value contains http')\n */\nconst includes = <input, const substr extends string>(\n  substr: substr\n): GuardExcludeP<input, string, never> =>\n  when((value) => isString(value) && value.includes(substr));\n\n/**\n * `P.string.regex(expr)` is a pattern, matching **strings** that `expr` regular expression.\n *\n * [Read the documentation for `P.string.regex` on GitHub](https://github.com/gvergnaud/ts-pattern#pstringregex)\n *\n * @example\n *  match(value)\n *   .with(P.string.regex(/^https?:\\/\\//), () => 'url')\n */\nconst regex = <input, const expr extends string | RegExp>(\n  expr: expr\n): GuardExcludeP<input, string, never> =>\n  when((value) => isString(value) && Boolean(value.match(expr)));\n\nconst stringChainable = <pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): StringChainable<pattern> =>\n  Object.assign(chainable(pattern), {\n    startsWith: (str: string) =>\n      stringChainable(intersection(pattern, startsWith(str))),\n    endsWith: (str: string) =>\n      stringChainable(intersection(pattern, endsWith(str))),\n    minLength: (min: number) =>\n      stringChainable(intersection(pattern, minLength(min))),\n    length: (len: number) =>\n      stringChainable(intersection(pattern, length(len))),\n    maxLength: (max: number) =>\n      stringChainable(intersection(pattern, maxLength(max))),\n    includes: (str: string) =>\n      stringChainable(intersection(pattern, includes(str))),\n    regex: (str: string) => stringChainable(intersection(pattern, regex(str))),\n  }) as any;\n\n/**\n * `P.string` is a wildcard pattern, matching any **string**.\n *\n * [Read the documentation for `P.string` on GitHub](https://github.com/gvergnaud/ts-pattern#pstring-wildcard)\n *\n * @example\n *  match(value)\n *   .with(P.string, () => 'will match on strings')\n */\nexport const string: StringPattern = stringChainable(when(isString));\n\n/**\n * `P.number.between(min, max)` matches **numbers** between `min` and `max`,\n * equal to min or equal to max.\n *\n * [Read the documentation for `P.number.between` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberbetween)\n *\n * @example\n *  match(value)\n *   .with(P.number.between(0, 10), () => '0 <= numbers <= 10')\n */\nconst between = <input, const min extends number, const max extends number>(\n  min: min,\n  max: max\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && min <= value && max >= value);\n\n/**\n * `P.number.lt(max)` matches **numbers** smaller than `max`.\n *\n * [Read the documentation for `P.number.lt` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberlt)\n *\n * @example\n *  match(value)\n *   .with(P.number.lt(10), () => 'numbers < 10')\n */\nconst lt = <input, const max extends number>(\n  max: max\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value < max);\n\n/**\n * `P.number.gt(min)` matches **numbers** greater than `min`.\n *\n * [Read the documentation for `P.number.gt` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumbergt)\n *\n * @example\n *  match(value)\n *   .with(P.number.gt(10), () => 'numbers > 10')\n */\nconst gt = <input, const min extends number>(\n  min: min\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value > min);\n\n/**\n * `P.number.lte(max)` matches **numbers** smaller than or equal to `max`.\n *\n * [Read the documentation for `P.number.lte` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberlte)\n *\n * @example\n *  match(value)\n *   .with(P.number.lte(10), () => 'numbers <= 10')\n */\nconst lte = <input, const max extends number>(\n  max: max\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value <= max);\n\n/**\n * `P.number.gte(min)` matches **numbers** greater than or equal to `min`.\n *\n * [Read the documentation for `P.number.gte` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumbergte)\n *\n * @example\n *  match(value)\n *   .with(P.number.gte(10), () => 'numbers >= 10')\n */\nconst gte = <input, const min extends number>(\n  min: min\n): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value >= min);\n\n/**\n * `P.number.int()` matches **integer** numbers.\n *\n * [Read the documentation for `P.number.int()` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberint)\n *\n * @example\n *  match(value)\n *   .with(P.number.int(), () => 'an integer')\n */\nconst int = <input>(): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && Number.isInteger(value));\n\n/**\n * `P.number.finite` matches **finite numbers**.\n *\n * [Read the documentation for `P.number.finite` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberfinite)\n *\n * @example\n *  match(value)\n *   .with(P.number.finite, () => 'not Infinity')\n */\nconst finite = <input>(): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && Number.isFinite(value));\n\n/**\n * `P.number.positive()` matches **positive** numbers.\n *\n * [Read the documentation for `P.number.positive()` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberpositive)\n *\n * @example\n *  match(value)\n *   .with(P.number.positive(), () => 'number > 0')\n */\nconst positive = <input>(): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value > 0);\n\n/**\n * `P.number.negative()` matches **negative** numbers.\n *\n * [Read the documentation for `P.number.negative()` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumbernegative)\n *\n * @example\n *  match(value)\n *   .with(P.number.negative(), () => 'number < 0')\n */\nconst negative = <input>(): GuardExcludeP<input, number, never> =>\n  when((value) => isNumber(value) && value < 0);\n\nconst numberChainable = <pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): NumberChainable<pattern> =>\n  Object.assign(chainable(pattern), {\n    between: (min: number, max: number) =>\n      numberChainable(intersection(pattern, between(min, max))),\n    lt: (max: number) => numberChainable(intersection(pattern, lt(max))),\n    gt: (min: number) => numberChainable(intersection(pattern, gt(min))),\n    lte: (max: number) => numberChainable(intersection(pattern, lte(max))),\n    gte: (min: number) => numberChainable(intersection(pattern, gte(min))),\n    int: () => numberChainable(intersection(pattern, int())),\n    finite: () => numberChainable(intersection(pattern, finite())),\n    positive: () => numberChainable(intersection(pattern, positive())),\n    negative: () => numberChainable(intersection(pattern, negative())),\n  }) as any;\n\n/**\n * `P.number` is a wildcard pattern, matching any **number**.\n *\n * [Read the documentation for `P.number` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumber-wildcard)\n *\n * @example\n *  match(value)\n *   .with(P.number, () => 'will match on numbers')\n */\nexport const number: NumberPattern = numberChainable(when(isNumber));\n\n/**\n * `P.bigint.between(min, max)` matches **bigint** between `min` and `max`,\n * equal to min or equal to max.\n *\n * [Read the documentation for `P.bigint.between` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberbetween)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.between(0, 10), () => '0 <= bigints <= 10')\n */\nconst betweenBigInt = <\n  input,\n  const min extends bigint,\n  const max extends bigint\n>(\n  min: min,\n  max: max\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && min <= value && max >= value);\n\n/**\n * `P.bigint.lt(max)` matches **bigint** smaller than `max`.\n *\n * [Read the documentation for `P.bigint.lt` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberlt)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.lt(10), () => 'bigints < 10')\n */\nconst ltBigInt = <input, const max extends bigint>(\n  max: max\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value < max);\n\n/**\n * `P.bigint.gt(min)` matches **bigint** greater than `min`.\n *\n * [Read the documentation for `P.bigint.gt` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumbergt)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.gt(10), () => 'bigints > 10')\n */\nconst gtBigInt = <input, const min extends bigint>(\n  min: min\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value > min);\n\n/**\n * `P.bigint.lte(max)` matches **bigint** smaller than or equal to `max`.\n *\n * [Read the documentation for `P.bigint.lte` on GitHub](https://github.com/gvergnaud/ts-pattern#pnumberlte)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.lte(10), () => 'bigints <= 10')\n */\nconst lteBigInt = <input, const max extends bigint>(\n  max: max\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value <= max);\n\n/**\n * `P.bigint.gte(min)` matches **bigint** greater than or equal to `min`.\n *\n * [Read the documentation for `P.bigint.gte` on GitHub](https://github.com/gvergnaud/ts-pattern#pbigintgte)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.gte(10), () => 'bigints >= 10')\n */\nconst gteBigInt = <input, const min extends bigint>(\n  min: min\n): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value >= min);\n\n/**\n * `P.bigint.positive()` matches **positive** bigints.\n *\n * [Read the documentation for `P.bigint.positive()` on GitHub](https://github.com/gvergnaud/ts-pattern#pbigintpositive)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.positive(), () => 'bigint > 0')\n */\nconst positiveBigInt = <input>(): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value > 0);\n\n/**\n * `P.bigint.negative()` matches **negative** bigints.\n *\n * [Read the documentation for `P.bigint.negative()` on GitHub](https://github.com/gvergnaud/ts-pattern#pbigintnegative)\n *\n * @example\n *  match(value)\n *   .with(P.bigint.negative(), () => 'bigint < 0')\n */\nconst negativeBigInt = <input>(): GuardExcludeP<input, bigint, never> =>\n  when((value) => isBigInt(value) && value < 0);\n\nconst bigintChainable = <pattern extends Matcher<any, any, any, any, any>>(\n  pattern: pattern\n): BigIntChainable<pattern> =>\n  Object.assign(chainable(pattern), {\n    between: (min: bigint, max: bigint) =>\n      bigintChainable(intersection(pattern, betweenBigInt(min, max))),\n    lt: (max: bigint) => bigintChainable(intersection(pattern, ltBigInt(max))),\n    gt: (min: bigint) => bigintChainable(intersection(pattern, gtBigInt(min))),\n    lte: (max: bigint) =>\n      bigintChainable(intersection(pattern, lteBigInt(max))),\n    gte: (min: bigint) =>\n      bigintChainable(intersection(pattern, gteBigInt(min))),\n    positive: () => bigintChainable(intersection(pattern, positiveBigInt())),\n    negative: () => bigintChainable(intersection(pattern, negativeBigInt())),\n  }) as any;\n\n/**\n * `P.bigint` is a wildcard pattern, matching any **bigint**.\n *\n * [Read the documentation for `P.bigint` on GitHub](https://github.com/gvergnaud/ts-pattern#number-wildcard)\n *\n * @example\n *   .with(P.bigint, () => 'will match on bigints')\n */\nexport const bigint: BigIntPattern = bigintChainable(when(isBigInt));\n\n/**\n * `P.boolean` is a wildcard pattern, matching any **boolean**.\n *\n * [Read the documentation for `P.boolean` on GitHub](https://github.com/gvergnaud/ts-pattern#boolean-wildcard)\n *\n * @example\n *   .with(P.boolean, () => 'will match on booleans')\n */\nexport const boolean: BooleanPattern = chainable(when(isBoolean));\n\n/**\n * `P.symbol` is a wildcard pattern, matching any **symbol**.\n *\n * [Read the documentation for `P.symbol` on GitHub](https://github.com/gvergnaud/ts-pattern#symbol-wildcard)\n *\n * @example\n *   .with(P.symbol, () => 'will match on symbols')\n */\nexport const symbol: SymbolPattern = chainable(when(isSymbol));\n\n/**\n * `P.nullish` is a wildcard pattern, matching **null** or **undefined**.\n *\n * [Read the documentation for `P.nullish` on GitHub](https://github.com/gvergnaud/ts-pattern#nullish-wildcard)\n *\n * @example\n *   .with(P.nullish, (x) => `${x} is null or undefined`)\n */\nexport const nullish: NullishPattern = chainable(when(isNullish));\n\n/**\n * `P.nonNullable` is a wildcard pattern, matching everything except **null** or **undefined**.\n *\n * [Read the documentation for `P.nonNullable` on GitHub](https://github.com/gvergnaud/ts-pattern#nonNullable-wildcard)\n *\n * @example\n *   .with(P.nonNullable, (x) => `${x} isn't null nor undefined`)\n */\nexport const nonNullable: NonNullablePattern = chainable(when(isNonNullable));\n\n/**\n * `P.instanceOf(SomeClass)` is a pattern matching instances of a given class.\n *\n * [Read the documentation for `P.instanceOf` on GitHub](https://github.com/gvergnaud/ts-pattern#pinstanceof-patterns)\n *\n *  @example\n *   .with(P.instanceOf(SomeClass), () => 'will match on SomeClass instances')\n */\nexport function instanceOf<T extends AnyConstructor>(\n  classConstructor: T\n): Chainable<GuardP<unknown, InstanceType<T>>> {\n  return chainable(when(isInstanceOf(classConstructor)));\n}\n\n/**\n * `P.shape(somePattern)` lets you call methods like `.optional()`, `.and`, `.or` and `.select()`\n * On structural patterns, like objects and arrays.\n *\n * [Read the documentation for `P.shape` on GitHub](https://github.com/gvergnaud/ts-pattern#pshape-patterns)\n *\n *  @example\n *   .with(\n *     {\n *       state: P.shape({ status: \"success\" }).optional().select()\n *     },\n *     (state) => 'match the success state, or undefined.'\n *   )\n */\nexport function shape<input, const pattern extends Pattern<input>>(\n  pattern: pattern\n): Chainable<GuardP<input, InvertPattern<pattern, input>>>;\nexport function shape(pattern: UnknownPattern) {\n  return chainable(when(isMatching(pattern)));\n}\n", "/**\n * Error when the given input value does not match any included pattern\n * and .exhaustive() was specified\n */\nexport class NonExhaustiveError extends Error {\n  constructor(public input: unknown) {\n    let displayedValue;\n    try {\n      displayedValue = JSON.stringify(input);\n    } catch (e) {\n      displayedValue = input;\n    }\n    super(`Pattern matching error: no pattern matches value ${displayedValue}`);\n  }\n}\n", "import { Pattern } from './types/Pattern';\nimport { Match } from './types/Match';\nimport * as symbols from './internals/symbols';\nimport { matchPattern } from './internals/helpers';\nimport { NonExhaustiveError } from './errors';\n\ntype MatchState<output> =\n  | { matched: true; value: output }\n  | { matched: false; value: undefined };\n\nconst unmatched: MatchState<never> = {\n  matched: false,\n  value: undefined,\n};\n\n/**\n * `match` creates a **pattern matching expression**.\n *  * Use `.with(pattern, handler)` to pattern match on the input.\n *  * Use `.exhaustive()` or `.otherwise(() => defaultValue)` to end the expression and get the result.\n *\n * [Read the documentation for `match` on GitHub](https://github.com/gvergnaud/ts-pattern#match)\n *\n * @example\n *  declare let input: \"A\" | \"B\";\n *\n *  return match(input)\n *    .with(\"A\", () => \"It's an A!\")\n *    .with(\"B\", () => \"It's a B!\")\n *    .exhaustive();\n *\n */\nexport function match<const input, output = symbols.unset>(\n  value: input\n): Match<input, output> {\n  return new MatchExpression(value, unmatched) as any;\n}\n\n/**\n * This class represents a match expression. It follows the\n * builder pattern, we chain methods to add features to the expression\n * until we call `.exhaustive`, `.otherwise` or the unsafe `.run`\n * method to execute it.\n *\n * The types of this class aren't public, the public type definition\n * can be found in src/types/Match.ts.\n */\nclass MatchExpression<input, output> {\n  constructor(private input: input, private state: MatchState<output>) {}\n\n  with(...args: any[]): MatchExpression<input, output> {\n    if (this.state.matched) return this;\n\n    const handler: (selection: unknown, value: input) => output =\n      args[args.length - 1];\n\n    const patterns: Pattern<input>[] = [args[0]];\n    let predicate: ((value: input) => unknown) | undefined = undefined;\n\n    if (args.length === 3 && typeof args[1] === 'function') {\n      // case with guard as second argument\n      predicate = args[1];\n    } else if (args.length > 2) {\n      // case with several patterns\n      patterns.push(...args.slice(1, args.length - 1));\n    }\n\n    let hasSelections = false;\n    let selected: Record<string, unknown> = {};\n    const select = (key: string, value: unknown) => {\n      hasSelections = true;\n      selected[key] = value;\n    };\n\n    const matched =\n      patterns.some((pattern) => matchPattern(pattern, this.input, select)) &&\n      (predicate ? Boolean(predicate(this.input)) : true);\n\n    const selections = hasSelections\n      ? symbols.anonymousSelectKey in selected\n        ? selected[symbols.anonymousSelectKey]\n        : selected\n      : this.input;\n\n    const state = matched\n      ? {\n          matched: true as const,\n          value: handler(selections, this.input),\n        }\n      : unmatched;\n\n    return new MatchExpression(this.input, state);\n  }\n\n  when(\n    predicate: (value: input) => unknown,\n    handler: (selection: input, value: input) => output\n  ): MatchExpression<input, output> {\n    if (this.state.matched) return this;\n\n    const matched = Boolean(predicate(this.input));\n\n    return new MatchExpression<input, output>(\n      this.input,\n      matched\n        ? { matched: true, value: handler(this.input, this.input) }\n        : unmatched\n    );\n  }\n\n  otherwise(handler: (value: input) => output): output {\n    if (this.state.matched) return this.state.value;\n    return handler(this.input);\n  }\n\n  exhaustive(unexpectedValueHandler = defaultCatcher): output {\n    if (this.state.matched) return this.state.value;\n    return unexpectedValueHandler(this.input);\n  }\n\n  run(): output {\n    return this.exhaustive();\n  }\n\n  returnType() {\n    return this;\n  }\n}\n\nfunction defaultCatcher(input: unknown): never {\n  throw new NonExhaustiveError(input);\n}\n", "import { match, P } from 'ts-pattern';\nimport { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildConstraintDeleteConstraintDiffItem(tableId, constraintId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        constraintId,\n        operations,\n        pathRegExp: PATH_PATTERNS.CONSTRAINT_DELETE_CONSTRAINT,\n    });\n    const constraint = status === 'removed'\n        ? before.tables[tableId]?.constraints[constraintId]\n        : after.tables[tableId]?.constraints[constraintId];\n    const data = match(constraint)\n        .with({ type: 'UNIQUE' }, () => undefined)\n        .with({ type: 'FOREIGN KEY' }, ({ deleteConstraint }) => deleteConstraint)\n        .with({ type: 'PRIMARY KEY' }, () => undefined)\n        .with({ type: 'CHECK' }, () => undefined)\n        .with(P.nullish, () => undefined)\n        .exhaustive();\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'constraint-delete-constraint',\n        status,\n        data,\n        tableId,\n        constraintId,\n    };\n}\n", "import { match, P } from 'ts-pattern';\nimport { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildConstraintDetailDiffItem(tableId, constraintId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        constraintId,\n        operations,\n        pathRegExp: PATH_PATTERNS.CONSTRAINT_DETAIL,\n    });\n    const constraint = status === 'removed'\n        ? before.tables[tableId]?.constraints[constraintId]\n        : after.tables[tableId]?.constraints[constraintId];\n    const data = match(constraint)\n        .with({ type: 'UNIQUE' }, () => undefined)\n        .with({ type: 'FOREIGN KEY' }, () => undefined)\n        .with({ type: 'PRIMARY KEY' }, () => undefined)\n        .with({ type: 'CHECK' }, ({ detail }) => detail)\n        .with(P.nullish, () => undefined)\n        .exhaustive();\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'constraint-detail',\n        status,\n        data,\n        tableId,\n        constraintId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildConstraintDiffItem(tableId, constraintId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        constraintId,\n        operations,\n        pathRegExp: PATH_PATTERNS.CONSTRAINT_BASE,\n    });\n    const data = status === 'removed'\n        ? before.tables[tableId]?.constraints[constraintId]\n        : after.tables[tableId]?.constraints[constraintId];\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'constraint',\n        status,\n        data,\n        tableId,\n        constraintId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildConstraintNameDiffItem(tableId, constraintId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        constraintId,\n        operations,\n        pathRegExp: PATH_PATTERNS.CONSTRAINT_NAME,\n    });\n    const data = status === 'removed'\n        ? before.tables[tableId]?.constraints[constraintId]?.name\n        : after.tables[tableId]?.constraints[constraintId]?.name;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'constraint-name',\n        status,\n        data,\n        tableId,\n        constraintId,\n    };\n}\n", "import { match, P } from 'ts-pattern';\nimport { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildConstraintTargetColumnNameDiffItem(tableId, constraintId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        constraintId,\n        operations,\n        pathRegExp: PATH_PATTERNS.CONSTRAINT_TARGET_COLUMN_NAME,\n    });\n    const constraint = status === 'removed'\n        ? before.tables[tableId]?.constraints[constraintId]\n        : after.tables[tableId]?.constraints[constraintId];\n    const data = match(constraint)\n        .with({ type: 'UNIQUE' }, () => undefined)\n        .with({ type: 'FOREIGN KEY' }, ({ targetColumnName }) => targetColumnName)\n        .with({ type: 'PRIMARY KEY' }, () => undefined)\n        .with({ type: 'CHECK' }, () => undefined)\n        .with(P.nullish, () => undefined)\n        .exhaustive();\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'constraint-target-column-name',\n        status,\n        data,\n        tableId,\n        constraintId,\n    };\n}\n", "import { match, P } from 'ts-pattern';\nimport { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildConstraintTargetTableNameDiffItem(tableId, constraintId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        constraintId,\n        operations,\n        pathRegExp: PATH_PATTERNS.CONSTRAINT_TARGET_TABLE_NAME,\n    });\n    const constraint = status === 'removed'\n        ? before.tables[tableId]?.constraints[constraintId]\n        : after.tables[tableId]?.constraints[constraintId];\n    const data = match(constraint)\n        .with({ type: 'UNIQUE' }, () => undefined)\n        .with({ type: 'FOREIGN KEY' }, ({ targetTableName }) => targetTableName)\n        .with({ type: 'PRIMARY KEY' }, () => undefined)\n        .with({ type: 'CHECK' }, () => undefined)\n        .with(P.nullish, () => undefined)\n        .exhaustive();\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'constraint-target-table-name',\n        status,\n        data,\n        tableId,\n        constraintId,\n    };\n}\n", "import { match, P } from 'ts-pattern';\nimport { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildConstraintUpdateConstraintDiffItem(tableId, constraintId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        constraintId,\n        operations,\n        pathRegExp: PATH_PATTERNS.CONSTRAINT_UPDATE_CONSTRAINT,\n    });\n    const constraint = status === 'removed'\n        ? before.tables[tableId]?.constraints[constraintId]\n        : after.tables[tableId]?.constraints[constraintId];\n    const data = match(constraint)\n        .with({ type: 'UNIQUE' }, () => undefined)\n        .with({ type: 'FOREIGN KEY' }, ({ updateConstraint }) => updateConstraint)\n        .with({ type: 'PRIMARY KEY' }, () => undefined)\n        .with({ type: 'CHECK' }, () => undefined)\n        .with(P.nullish, () => undefined)\n        .exhaustive();\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'constraint-update-constraint',\n        status,\n        data,\n        tableId,\n        constraintId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildIndexColumnsDiffItem(tableId, indexId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        indexId,\n        operations,\n        pathRegExp: PATH_PATTERNS.INDEX_COLUMNS,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.indexes[indexId]?.columns\n        : after.tables[tableId]?.indexes[indexId]?.columns;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'index-columns',\n        status,\n        data,\n        tableId,\n        indexId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildIndexDiffItem(tableId, indexId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        indexId,\n        operations,\n        pathRegExp: PATH_PATTERNS.INDEX_BASE,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.indexes[indexId]\n        : after.tables[tableId]?.indexes[indexId];\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'index',\n        status,\n        data,\n        tableId,\n        indexId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildIndexNameDiffItem(tableId, indexId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        indexId,\n        operations,\n        pathRegExp: PATH_PATTERNS.INDEX_NAME,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.indexes[indexId]?.name\n        : after.tables[tableId]?.indexes[indexId]?.name;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'index-name',\n        status,\n        data,\n        tableId,\n        indexId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildIndexTypeDiffItem(tableId, indexId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        indexId,\n        operations,\n        pathRegExp: PATH_PATTERNS.INDEX_TYPE,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.indexes[indexId]?.type\n        : after.tables[tableId]?.indexes[indexId]?.type;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'index-type',\n        status,\n        data,\n        tableId,\n        indexId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildIndexUniqueDiffItem(tableId, indexId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        indexId,\n        operations,\n        pathRegExp: PATH_PATTERNS.INDEX_UNIQUE,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.indexes[indexId]?.unique\n        : after.tables[tableId]?.indexes[indexId]?.unique;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'index-unique',\n        status,\n        data,\n        tableId,\n        indexId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildTableCommentDiffItem(tableId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        operations,\n        pathRegExp: PATH_PATTERNS.TABLE_COMMENT,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.comment\n        : after.tables[tableId]?.comment;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'table-comment',\n        status,\n        data,\n        tableId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildTableDiffItem(tableId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        operations,\n        pathRegExp: PATH_PATTERNS.TABLE_BASE,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed' ? before.tables[tableId] : after.tables[tableId];\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'table',\n        status,\n        data,\n        tableId,\n    };\n}\n", "import { PATH_PATTERNS } from '../../operation/constants.js';\nimport { getChangeStatus } from '../utils/getChangeStatus.js';\nexport function buildTableNameDiffItem(tableId, before, after, operations) {\n    const status = getChangeStatus({\n        tableId,\n        operations,\n        pathRegExp: PATH_PATTERNS.TABLE_NAME,\n    });\n    if (status === 'unchanged')\n        return null;\n    const data = status === 'removed'\n        ? before.tables[tableId]?.name\n        : after.tables[tableId]?.name;\n    if (data === undefined)\n        return null;\n    return {\n        kind: 'table-name',\n        status,\n        data,\n        tableId,\n    };\n}\n", "import { array, literal, object, picklist, string, union, } from 'valibot';\nimport { checkConstraintDetailSchema, columnCheckSchema, columnDefaultSchema, columnNameSchema, columnNotNullSchema, columnSchema, commentSchema, constraintNameSchema, constraintSchema, foreignKeyConstraintReferenceOptionSchema, indexColumnsSchema, indexNameSchema, indexSchema, indexTypeSchema, indexUniqueSchema, tableNameSchema, tableSchema, } from '../schema/index.js';\nconst changeStatusSchema = picklist([\n    'added',\n    'removed',\n    'modified',\n    'unchanged',\n]);\nconst baseSchemaDiffItemSchema = object({\n    status: changeStatusSchema,\n    tableId: string(),\n});\nconst tableDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('table'),\n    data: tableSchema,\n});\nconst tableNameDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('table-name'),\n    data: tableNameSchema,\n});\nconst tableCommentDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('table-comment'),\n    data: commentSchema,\n});\nconst columnDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('column'),\n    data: columnSchema,\n    columnId: string(),\n});\nconst columnNameDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('column-name'),\n    data: columnNameSchema,\n    columnId: string(),\n});\nconst columnCommentDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('column-comment'),\n    data: commentSchema,\n    columnId: string(),\n});\nconst columnDefaultDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('column-default'),\n    data: columnDefaultSchema,\n    columnId: string(),\n});\nconst columnCheckDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('column-check'),\n    data: columnCheckSchema,\n    columnId: string(),\n});\nconst columnNotNullDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('column-not-null'),\n    data: columnNotNullSchema,\n    columnId: string(),\n});\nconst indexDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('index'),\n    data: indexSchema,\n    indexId: string(),\n});\nconst indexNameDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('index-name'),\n    data: indexNameSchema,\n    indexId: string(),\n});\nconst indexUniqueDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('index-unique'),\n    data: indexUniqueSchema,\n    indexId: string(),\n});\nconst indexColumnsDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('index-columns'),\n    data: indexColumnsSchema,\n    indexId: string(),\n});\nconst indexTypeDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('index-type'),\n    data: indexTypeSchema,\n    indexId: string(),\n});\nconst constraintDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('constraint'),\n    data: constraintSchema,\n    constraintId: string(),\n});\nconst constraintNameDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('constraint-name'),\n    data: constraintNameSchema,\n    constraintId: string(),\n});\nconst constraintColumnNameDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('constraint-column-name'),\n    data: columnNameSchema,\n    constraintId: string(),\n});\nconst constraintTargetTableNameDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('constraint-target-table-name'),\n    data: tableNameSchema,\n    constraintId: string(),\n});\nconst constraintTargetColumnNameDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('constraint-target-column-name'),\n    data: columnNameSchema,\n    constraintId: string(),\n});\nconst constraintUpdateConstraintDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('constraint-update-constraint'),\n    data: foreignKeyConstraintReferenceOptionSchema,\n    constraintId: string(),\n});\nconst constraintDeleteConstraintDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('constraint-delete-constraint'),\n    data: foreignKeyConstraintReferenceOptionSchema,\n    constraintId: string(),\n});\nconst constraintDetailDiffItemSchema = object({\n    ...baseSchemaDiffItemSchema.entries,\n    kind: literal('constraint-detail'),\n    data: checkConstraintDetailSchema,\n    constraintId: string(),\n});\nexport const tableRelatedDiffItemSchema = union([\n    tableDiffItemSchema,\n    tableNameDiffItemSchema,\n    tableCommentDiffItemSchema,\n]);\nexport const columnRelatedDiffItemSchema = union([\n    columnDiffItemSchema,\n    columnNameDiffItemSchema,\n    columnCommentDiffItemSchema,\n    columnDefaultDiffItemSchema,\n    columnCheckDiffItemSchema,\n    columnNotNullDiffItemSchema,\n]);\nconst indexRelatedDiffItemSchema = union([\n    indexDiffItemSchema,\n    indexNameDiffItemSchema,\n    indexUniqueDiffItemSchema,\n    indexColumnsDiffItemSchema,\n    indexTypeDiffItemSchema,\n]);\nconst constraintRelatedDiffItemSchema = union([\n    constraintDiffItemSchema,\n    constraintNameDiffItemSchema,\n    constraintColumnNameDiffItemSchema,\n    constraintTargetTableNameDiffItemSchema,\n    constraintTargetColumnNameDiffItemSchema,\n    constraintUpdateConstraintDiffItemSchema,\n    constraintDeleteConstraintDiffItemSchema,\n    constraintDetailDiffItemSchema,\n]);\nconst schemaDiffItemSchema = union([\n    tableRelatedDiffItemSchema,\n    columnRelatedDiffItemSchema,\n    indexRelatedDiffItemSchema,\n    constraintRelatedDiffItemSchema,\n]);\nexport const schemaDiffItemsSchema = array(schemaDiffItemSchema);\n", "export { applyPatchOperations } from './applyPatchOperations.js';\nexport { operationsSchema } from './schema/index.js';\n", "import pkg from 'fast-json-patch';\nconst { applyPatch } = pkg; // see https://github.com/Starcounter-Jack/JSON-Patch/issues/310\nexport function applyPatchOperations(target, operations) {\n    applyPatch(target, operations, true, true);\n}\n", "import * as v from 'valibot';\nimport { columnOperations } from './column.js';\nimport { constraintOperations } from './constraint.js';\nimport { indexOperations } from './indexOperations.js';\nimport { tableOperations } from './table.js';\nconst addOperationSchema = v.object({\n    op: v.literal('add'),\n    path: v.string(),\n    value: v.any(),\n});\nconst removeOperationSchema = v.object({\n    op: v.literal('remove'),\n    path: v.string(),\n});\nconst replaceOperationSchema = v.object({\n    op: v.literal('replace'),\n    path: v.string(),\n    value: v.any(),\n});\nconst moveOperationSchema = v.object({\n    op: v.literal('move'),\n    from: v.string(),\n    path: v.string(),\n});\nconst copyOperationSchema = v.object({\n    op: v.literal('copy'),\n    from: v.string(),\n    path: v.string(),\n});\nconst testOperationSchema = v.object({\n    op: v.literal('test'),\n    path: v.string(),\n    value: v.any(),\n});\nconst operationSchema = v.union([\n    ...tableOperations,\n    ...columnOperations,\n    ...indexOperations,\n    ...constraintOperations,\n    addOperationSchema,\n    removeOperationSchema,\n    replaceOperationSchema,\n    moveOperationSchema,\n    copyOperationSchema,\n    testOperationSchema,\n]);\nexport const operationsSchema = v.array(operationSchema);\n", "import * as v from 'valibot';\nimport { foreignKeyConstraintSchema } from '../schema/index.js';\n/**\n * Convert foreign key constraints to relationships for UI display\n * @param tables - The tables object containing constraints\n * @returns Relationships derived from foreign key constraints\n */\nexport const constraintsToRelationships = (tables) => {\n    const relationships = {};\n    for (const table of Object.values(tables)) {\n        for (const constraint of Object.values(table.constraints)) {\n            const result = v.safeParse(foreignKeyConstraintSchema, constraint);\n            if (!result.success) {\n                continue;\n            }\n            const foreignKeyConstraint = result.output;\n            const cardinality = determineCardinality(tables, table.name, foreignKeyConstraint.columnName);\n            relationships[constraint.name] = {\n                name: constraint.name,\n                primaryTableName: foreignKeyConstraint.targetTableName,\n                primaryColumnName: foreignKeyConstraint.targetColumnName,\n                foreignTableName: table.name,\n                foreignColumnName: foreignKeyConstraint.columnName,\n                cardinality,\n                updateConstraint: foreignKeyConstraint.updateConstraint,\n                deleteConstraint: foreignKeyConstraint.deleteConstraint,\n            };\n        }\n    }\n    return relationships;\n};\n/**\n * Determine the cardinality of a relationship based on column constraints\n */\nconst determineCardinality = (tables, tableName, columnName) => {\n    const table = tables[tableName];\n    if (!table) {\n        return 'ONE_TO_MANY';\n    }\n    // Check for UNIQUE constraint in table constraints\n    for (const constraint of Object.values(table.constraints)) {\n        if (constraint.type === 'UNIQUE' &&\n            constraint.columnNames.includes(columnName)) {\n            return 'ONE_TO_ONE';\n        }\n    }\n    return 'ONE_TO_MANY';\n};\n", "export const isPrimaryKey = (columnName, constraints) => {\n    return Object.values(constraints).some((constraint) => constraint.type === 'PRIMARY KEY' &&\n        constraint.columnNames.includes(columnName));\n};\n", "import * as v from \"valibot\";\n\n//#region src/utils/addError.ts\n/**\n* Adds an error message to the errors array.\n*\n* @param errors The array of error messages.\n* @param message The error message to add.\n*\n* @returns The new errors.\n*/\nfunction addError(errors, message) {\n\tif (errors) {\n\t\terrors.push(message);\n\t\treturn errors;\n\t}\n\treturn [message];\n}\n\n//#endregion\n//#region src/utils/handleError.ts\n/**\n* Throws an error or logs a warning based on the configuration.\n*\n* @param message The message to throw or log.\n* @param config The conversion configuration.\n*/\nfunction handleError(message, config) {\n\tswitch (config?.errorMode) {\n\t\tcase \"ignore\": break;\n\t\tcase \"warn\": {\n\t\t\tconsole.warn(message);\n\t\t\tbreak;\n\t\t}\n\t\tdefault: throw new Error(message);\n\t}\n}\n\n//#endregion\n//#region src/converters/convertAction/convertAction.ts\n/**\n* Converts any supported Valibot action to the JSON Schema format.\n*\n* @param jsonSchema The JSON Schema object.\n* @param valibotAction The Valibot action object.\n* @param config The conversion configuration.\n*\n* @returns The converted JSON Schema.\n*/\nfunction convertAction(jsonSchema, valibotAction, config) {\n\tif (config?.ignoreActions?.includes(valibotAction.type)) return jsonSchema;\n\tlet errors;\n\tswitch (valibotAction.type) {\n\t\tcase \"base64\": {\n\t\t\tjsonSchema.contentEncoding = \"base64\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"bic\":\n\t\tcase \"cuid2\":\n\t\tcase \"decimal\":\n\t\tcase \"digits\":\n\t\tcase \"emoji\":\n\t\tcase \"hexadecimal\":\n\t\tcase \"hex_color\":\n\t\tcase \"nanoid\":\n\t\tcase \"octal\":\n\t\tcase \"ulid\": {\n\t\t\tjsonSchema.pattern = valibotAction.requirement.source;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"description\": {\n\t\t\tjsonSchema.description = valibotAction.description;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"email\": {\n\t\t\tjsonSchema.format = \"email\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"empty\": {\n\t\t\tif (jsonSchema.type === \"array\") jsonSchema.maxItems = 0;\n\t\t\telse {\n\t\t\t\tif (jsonSchema.type !== \"string\") errors = addError(errors, `The \"${valibotAction.type}\" action is not supported on type \"${jsonSchema.type}\".`);\n\t\t\t\tjsonSchema.maxLength = 0;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase \"entries\": {\n\t\t\tjsonSchema.minProperties = valibotAction.requirement;\n\t\t\tjsonSchema.maxProperties = valibotAction.requirement;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"integer\": {\n\t\t\tjsonSchema.type = \"integer\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"ipv4\": {\n\t\t\tjsonSchema.format = \"ipv4\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"ipv6\": {\n\t\t\tjsonSchema.format = \"ipv6\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"iso_date\": {\n\t\t\tjsonSchema.format = \"date\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"iso_date_time\":\n\t\tcase \"iso_timestamp\": {\n\t\t\tjsonSchema.format = \"date-time\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"iso_time\": {\n\t\t\tjsonSchema.format = \"time\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"length\": {\n\t\t\tif (jsonSchema.type === \"array\") {\n\t\t\t\tjsonSchema.minItems = valibotAction.requirement;\n\t\t\t\tjsonSchema.maxItems = valibotAction.requirement;\n\t\t\t} else {\n\t\t\t\tif (jsonSchema.type !== \"string\") errors = addError(errors, `The \"${valibotAction.type}\" action is not supported on type \"${jsonSchema.type}\".`);\n\t\t\t\tjsonSchema.minLength = valibotAction.requirement;\n\t\t\t\tjsonSchema.maxLength = valibotAction.requirement;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase \"max_entries\": {\n\t\t\tjsonSchema.maxProperties = valibotAction.requirement;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"max_length\": {\n\t\t\tif (jsonSchema.type === \"array\") jsonSchema.maxItems = valibotAction.requirement;\n\t\t\telse {\n\t\t\t\tif (jsonSchema.type !== \"string\") errors = addError(errors, `The \"${valibotAction.type}\" action is not supported on type \"${jsonSchema.type}\".`);\n\t\t\t\tjsonSchema.maxLength = valibotAction.requirement;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase \"max_value\": {\n\t\t\tif (jsonSchema.type !== \"number\") errors = addError(errors, `The \"max_value\" action is not supported on type \"${jsonSchema.type}\".`);\n\t\t\tjsonSchema.maximum = valibotAction.requirement;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"metadata\": {\n\t\t\tif (typeof valibotAction.metadata.title === \"string\") jsonSchema.title = valibotAction.metadata.title;\n\t\t\tif (typeof valibotAction.metadata.description === \"string\") jsonSchema.description = valibotAction.metadata.description;\n\t\t\tif (Array.isArray(valibotAction.metadata.examples)) jsonSchema.examples = valibotAction.metadata.examples;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"min_entries\": {\n\t\t\tjsonSchema.minProperties = valibotAction.requirement;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"min_length\": {\n\t\t\tif (jsonSchema.type === \"array\") jsonSchema.minItems = valibotAction.requirement;\n\t\t\telse {\n\t\t\t\tif (jsonSchema.type !== \"string\") errors = addError(errors, `The \"${valibotAction.type}\" action is not supported on type \"${jsonSchema.type}\".`);\n\t\t\t\tjsonSchema.minLength = valibotAction.requirement;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase \"min_value\": {\n\t\t\tif (jsonSchema.type !== \"number\") errors = addError(errors, `The \"min_value\" action is not supported on type \"${jsonSchema.type}\".`);\n\t\t\tjsonSchema.minimum = valibotAction.requirement;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"multiple_of\": {\n\t\t\tjsonSchema.multipleOf = valibotAction.requirement;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"non_empty\": {\n\t\t\tif (jsonSchema.type === \"array\") jsonSchema.minItems = 1;\n\t\t\telse {\n\t\t\t\tif (jsonSchema.type !== \"string\") errors = addError(errors, `The \"${valibotAction.type}\" action is not supported on type \"${jsonSchema.type}\".`);\n\t\t\t\tjsonSchema.minLength = 1;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase \"regex\": {\n\t\t\tif (valibotAction.requirement.flags) errors = addError(errors, \"RegExp flags are not supported by JSON Schema.\");\n\t\t\tjsonSchema.pattern = valibotAction.requirement.source;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"title\": {\n\t\t\tjsonSchema.title = valibotAction.title;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"url\": {\n\t\t\tjsonSchema.format = \"uri\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"uuid\": {\n\t\t\tjsonSchema.format = \"uuid\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"value\": {\n\t\t\tjsonSchema.const = valibotAction.requirement;\n\t\t\tbreak;\n\t\t}\n\t\tdefault: errors = addError(errors, `The \"${valibotAction.type}\" action cannot be converted to JSON Schema.`);\n\t}\n\tif (config?.overrideAction) {\n\t\tconst actionOverride = config.overrideAction({\n\t\t\tvalibotAction,\n\t\t\tjsonSchema,\n\t\t\terrors\n\t\t});\n\t\tif (actionOverride) return { ...actionOverride };\n\t}\n\tif (errors) for (const message of errors) handleError(message, config);\n\treturn jsonSchema;\n}\n\n//#endregion\n//#region src/converters/convertSchema/convertSchema.ts\n/**\n* Flattens a Valibot pipe by recursively expanding nested pipes.\n*\n* @param pipe The pipeline to flatten.\n*\n* @returns A flat pipeline.\n*/\nfunction flattenPipe(pipe) {\n\treturn pipe.flatMap((item) => \"pipe\" in item ? flattenPipe(item.pipe) : item);\n}\nlet refCount = 0;\n/**\n* Converts any supported Valibot schema to the JSON Schema format.\n*\n* @param jsonSchema The JSON Schema object.\n* @param valibotSchema The Valibot schema object.\n* @param config The conversion configuration.\n* @param context The conversion context.\n* @param skipRef Whether to skip using a reference.\n*\n* @returns The converted JSON Schema.\n*/\nfunction convertSchema(jsonSchema, valibotSchema, config, context, skipRef = false) {\n\tif (!skipRef) {\n\t\tconst referenceId = context.referenceMap.get(valibotSchema);\n\t\tif (referenceId) {\n\t\t\tjsonSchema.$ref = `#/$defs/${referenceId}`;\n\t\t\tif (config?.overrideRef) {\n\t\t\t\tconst refOverride = config.overrideRef({\n\t\t\t\t\t...context,\n\t\t\t\t\treferenceId,\n\t\t\t\t\tvalibotSchema,\n\t\t\t\t\tjsonSchema\n\t\t\t\t});\n\t\t\t\tif (refOverride) jsonSchema.$ref = refOverride;\n\t\t\t}\n\t\t\treturn jsonSchema;\n\t\t}\n\t}\n\tif (\"pipe\" in valibotSchema) {\n\t\tconst flatPipe = flattenPipe(valibotSchema.pipe);\n\t\tlet startIndex = 0;\n\t\tlet stopIndex = flatPipe.length - 1;\n\t\tif (config?.typeMode === \"input\") {\n\t\t\tconst inputStopIndex = flatPipe.slice(1).findIndex((item) => item.kind === \"schema\" || item.kind === \"transformation\" && (item.type === \"find_item\" || item.type === \"parse_json\" || item.type === \"raw_transform\" || item.type === \"reduce_items\" || item.type === \"stringify_json\" || item.type === \"transform\"));\n\t\t\tif (inputStopIndex !== -1) stopIndex = inputStopIndex;\n\t\t} else if (config?.typeMode === \"output\") {\n\t\t\tconst outputStartIndex = flatPipe.findLastIndex((item) => item.kind === \"schema\");\n\t\t\tif (outputStartIndex !== -1) startIndex = outputStartIndex;\n\t\t}\n\t\tfor (let index = startIndex; index <= stopIndex; index++) {\n\t\t\tconst valibotPipeItem = flatPipe[index];\n\t\t\tif (valibotPipeItem.kind === \"schema\") {\n\t\t\t\tif (index > startIndex) handleError(\"Set the \\\"typeMode\\\" config to \\\"input\\\" or \\\"output\\\" to convert pipelines with multiple schemas.\", config);\n\t\t\t\tjsonSchema = convertSchema(jsonSchema, valibotPipeItem, config, context, true);\n\t\t\t} else jsonSchema = convertAction(jsonSchema, valibotPipeItem, config);\n\t\t}\n\t\treturn jsonSchema;\n\t}\n\tlet errors;\n\tswitch (valibotSchema.type) {\n\t\tcase \"boolean\": {\n\t\t\tjsonSchema.type = \"boolean\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"null\": {\n\t\t\tjsonSchema.type = \"null\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"number\": {\n\t\t\tjsonSchema.type = \"number\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"string\": {\n\t\t\tjsonSchema.type = \"string\";\n\t\t\tbreak;\n\t\t}\n\t\tcase \"array\": {\n\t\t\tjsonSchema.type = \"array\";\n\t\t\tjsonSchema.items = convertSchema({}, valibotSchema.item, config, context);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"tuple\":\n\t\tcase \"tuple_with_rest\":\n\t\tcase \"loose_tuple\":\n\t\tcase \"strict_tuple\": {\n\t\t\tjsonSchema.type = \"array\";\n\t\t\tjsonSchema.items = [];\n\t\t\tjsonSchema.minItems = valibotSchema.items.length;\n\t\t\tfor (const item of valibotSchema.items) jsonSchema.items.push(convertSchema({}, item, config, context));\n\t\t\tif (valibotSchema.type === \"tuple_with_rest\") jsonSchema.additionalItems = convertSchema({}, valibotSchema.rest, config, context);\n\t\t\telse if (valibotSchema.type === \"strict_tuple\") jsonSchema.additionalItems = false;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"object\":\n\t\tcase \"object_with_rest\":\n\t\tcase \"loose_object\":\n\t\tcase \"strict_object\": {\n\t\t\tjsonSchema.type = \"object\";\n\t\t\tjsonSchema.properties = {};\n\t\t\tjsonSchema.required = [];\n\t\t\tfor (const key in valibotSchema.entries) {\n\t\t\t\tconst entry = valibotSchema.entries[key];\n\t\t\t\tjsonSchema.properties[key] = convertSchema({}, entry, config, context);\n\t\t\t\tif (entry.type !== \"nullish\" && entry.type !== \"optional\") jsonSchema.required.push(key);\n\t\t\t}\n\t\t\tif (valibotSchema.type === \"object_with_rest\") jsonSchema.additionalProperties = convertSchema({}, valibotSchema.rest, config, context);\n\t\t\telse if (valibotSchema.type === \"strict_object\") jsonSchema.additionalProperties = false;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"record\": {\n\t\t\tif (\"pipe\" in valibotSchema.key) errors = addError(errors, \"The \\\"record\\\" schema with a schema for the key that contains a \\\"pipe\\\" cannot be converted to JSON Schema.\");\n\t\t\tif (valibotSchema.key.type !== \"string\") errors = addError(errors, `The \"record\" schema with the \"${valibotSchema.key.type}\" schema for the key cannot be converted to JSON Schema.`);\n\t\t\tjsonSchema.type = \"object\";\n\t\t\tjsonSchema.additionalProperties = convertSchema({}, valibotSchema.value, config, context);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"any\":\n\t\tcase \"unknown\": break;\n\t\tcase \"nullable\":\n\t\tcase \"nullish\": {\n\t\t\tjsonSchema.anyOf = [convertSchema({}, valibotSchema.wrapped, config, context), { type: \"null\" }];\n\t\t\tif (valibotSchema.default !== void 0) jsonSchema.default = v.getDefault(valibotSchema);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"exact_optional\":\n\t\tcase \"optional\":\n\t\tcase \"undefinedable\": {\n\t\t\tjsonSchema = convertSchema(jsonSchema, valibotSchema.wrapped, config, context);\n\t\t\tif (valibotSchema.default !== void 0) jsonSchema.default = v.getDefault(valibotSchema);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"literal\": {\n\t\t\tif (typeof valibotSchema.literal !== \"boolean\" && typeof valibotSchema.literal !== \"number\" && typeof valibotSchema.literal !== \"string\") errors = addError(errors, \"The value of the \\\"literal\\\" schema is not JSON compatible.\");\n\t\t\tjsonSchema.const = valibotSchema.literal;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"enum\": {\n\t\t\tjsonSchema.enum = valibotSchema.options;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"picklist\": {\n\t\t\tif (valibotSchema.options.some((option) => typeof option !== \"number\" && typeof option !== \"string\")) errors = addError(errors, \"An option of the \\\"picklist\\\" schema is not JSON compatible.\");\n\t\t\tjsonSchema.enum = valibotSchema.options;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"union\":\n\t\tcase \"variant\": {\n\t\t\tjsonSchema.anyOf = valibotSchema.options.map((option) => convertSchema({}, option, config, context));\n\t\t\tbreak;\n\t\t}\n\t\tcase \"intersect\": {\n\t\t\tjsonSchema.allOf = valibotSchema.options.map((option) => convertSchema({}, option, config, context));\n\t\t\tbreak;\n\t\t}\n\t\tcase \"lazy\": {\n\t\t\tlet wrappedValibotSchema = context.getterMap.get(valibotSchema.getter);\n\t\t\tif (!wrappedValibotSchema) {\n\t\t\t\twrappedValibotSchema = valibotSchema.getter(void 0);\n\t\t\t\tcontext.getterMap.set(valibotSchema.getter, wrappedValibotSchema);\n\t\t\t}\n\t\t\tlet referenceId = context.referenceMap.get(wrappedValibotSchema);\n\t\t\tif (!referenceId) {\n\t\t\t\treferenceId = `${refCount++}`;\n\t\t\t\tcontext.referenceMap.set(wrappedValibotSchema, referenceId);\n\t\t\t\tcontext.definitions[referenceId] = convertSchema({}, wrappedValibotSchema, config, context, true);\n\t\t\t}\n\t\t\tjsonSchema.$ref = `#/$defs/${referenceId}`;\n\t\t\tif (config?.overrideRef) {\n\t\t\t\tconst refOverride = config.overrideRef({\n\t\t\t\t\t...context,\n\t\t\t\t\treferenceId,\n\t\t\t\t\tvalibotSchema: wrappedValibotSchema,\n\t\t\t\t\tjsonSchema\n\t\t\t\t});\n\t\t\t\tif (refOverride) jsonSchema.$ref = refOverride;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tdefault: errors = addError(errors, `The \"${valibotSchema.type}\" schema cannot be converted to JSON Schema.`);\n\t}\n\tif (config?.overrideSchema) {\n\t\tconst schemaOverride = config.overrideSchema({\n\t\t\t...context,\n\t\t\treferenceId: context.referenceMap.get(valibotSchema),\n\t\t\tvalibotSchema,\n\t\t\tjsonSchema,\n\t\t\terrors\n\t\t});\n\t\tif (schemaOverride) return { ...schemaOverride };\n\t}\n\tif (errors) for (const message of errors) handleError(message, config);\n\treturn jsonSchema;\n}\n\n//#endregion\n//#region src/storages/globalDefs/globalDefs.ts\nlet store;\n/**\n* Adds new definitions to the global schema definitions.\n*\n* @param definitions The schema definitions.\n*\n* @beta\n*/\nfunction addGlobalDefs(definitions) {\n\tstore = {\n\t\t...store ?? {},\n\t\t...definitions\n\t};\n}\n/**\n* Returns the current global schema definitions.\n*\n* @returns The schema definitions.\n*\n* @beta\n*/\nfunction getGlobalDefs() {\n\treturn store;\n}\n\n//#endregion\n//#region src/functions/toJsonSchema/toJsonSchema.ts\n/**\n* Converts a Valibot schema to the JSON Schema format.\n*\n* @param schema The Valibot schema object.\n* @param config The JSON Schema configuration.\n*\n* @returns The converted JSON Schema.\n*/\nfunction toJsonSchema(schema, config) {\n\tconst context = {\n\t\tdefinitions: {},\n\t\treferenceMap: new Map(),\n\t\tgetterMap: new Map()\n\t};\n\tconst definitions = config?.definitions ?? getGlobalDefs();\n\tif (definitions) {\n\t\tfor (const key in definitions) context.referenceMap.set(definitions[key], key);\n\t\tfor (const key in definitions) context.definitions[key] = convertSchema({}, definitions[key], config, context, true);\n\t}\n\tconst jsonSchema = convertSchema({ $schema: \"http://json-schema.org/draft-07/schema#\" }, schema, config, context);\n\tif (context.referenceMap.size) jsonSchema.$defs = context.definitions;\n\treturn jsonSchema;\n}\n\n//#endregion\n//#region src/functions/toJsonSchemaDefs/toJsonSchemaDefs.ts\n/**\n* Converts Valibot schema definitions to JSON Schema definitions.\n*\n* @param definitions The Valibot schema definitions.\n* @param config The JSON Schema configuration.\n*\n* @returns The converted JSON Schema definitions.\n*/\nfunction toJsonSchemaDefs(definitions, config) {\n\tconst context = {\n\t\tdefinitions: {},\n\t\treferenceMap: new Map(),\n\t\tgetterMap: new Map()\n\t};\n\tfor (const key in definitions) context.referenceMap.set(definitions[key], key);\n\tfor (const key in definitions) context.definitions[key] = convertSchema({}, definitions[key], config, context, true);\n\treturn context.definitions;\n}\n\n//#endregion\nexport { addGlobalDefs, getGlobalDefs, toJsonSchema, toJsonSchemaDefs };", "import LangfuseCallbackHandler from 'langfuse-langchain'\n\nexport const createLangfuseHandler = () => {\n  return new LangfuseCallbackHandler({\n    publicKey: process.env['LANGFUSE_PUBLIC_KEY'] || '',\n    secretKey: process.env['LANGFUSE_SECRET_KEY'] || '',\n    baseUrl: process.env['LANGFUSE_BASE_URL'] || 'https://cloud.langfuse.com',\n    environment: process.env['NEXT_PUBLIC_ENV_NAME'] || 'development',\n    // flushAt: 1 ensures events are sent immediately, preventing loss when job processes terminate\n    flushAt: 1,\n  })\n}\n", "export class SimpleEventEmitter {\n  events: { [key: string]: ((...args: any[]) => void)[] } = {};\n\n  constructor() {\n    this.events = {};\n  }\n\n  on(event: string, listener: (...args: any[]) => void): () => void {\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n    this.events[event].push(listener);\n\n    return () => {\n      this.events[event] = this.events[event].filter((x) => x !== listener);\n    };\n  }\n\n  emit(event: string, payload: any): void {\n    for (const listener of this.events[event] || []) {\n      listener(payload);\n    }\n    for (const listener of this.events[\"*\"] || []) {\n      listener(event, payload);\n    }\n  }\n}\n", "import type { LangfusePromptClient } from \"./promptClients\";\n\nexport const DEFAULT_PROMPT_CACHE_TTL_SECONDS = 60;\n\nclass LangfusePromptCacheItem {\n  private _expiry: number;\n\n  constructor(\n    public value: LangfusePromptClient,\n    ttlSeconds: number\n  ) {\n    this._expiry = Date.now() + ttlSeconds * 1000;\n  }\n\n  get isExpired(): boolean {\n    return Date.now() > this._expiry;\n  }\n}\nexport class LangfusePromptCache {\n  private _cache: Map<string, LangfusePromptCacheItem>;\n  private _defaultTtlSeconds: number;\n  private _refreshingKeys: Map<string, Promise<void>>;\n\n  constructor() {\n    this._cache = new Map<string, LangfusePromptCacheItem>();\n    this._defaultTtlSeconds = DEFAULT_PROMPT_CACHE_TTL_SECONDS;\n    this._refreshingKeys = new Map<string, Promise<void>>();\n  }\n\n  public getIncludingExpired(key: string): LangfusePromptCacheItem | null {\n    return this._cache.get(key) ?? null;\n  }\n\n  public set(key: string, value: LangfusePromptClient, ttlSeconds?: number): void {\n    const effectiveTtlSeconds = ttlSeconds ?? this._defaultTtlSeconds;\n    this._cache.set(key, new LangfusePromptCacheItem(value, effectiveTtlSeconds));\n  }\n\n  public addRefreshingPromise(key: string, promise: Promise<any>): void {\n    this._refreshingKeys.set(key, promise);\n    promise\n      .then(() => {\n        this._refreshingKeys.delete(key);\n      })\n      .catch(() => {\n        this._refreshingKeys.delete(key);\n      });\n  }\n\n  public isRefreshing(key: string): boolean {\n    return this._refreshingKeys.has(key);\n  }\n\n  public invalidate(promptName: string): void {\n    console.log(\"invalidating\", promptName, this._cache.keys());\n    for (const key of this._cache.keys()) {\n      if (key.startsWith(promptName)) {\n        this._cache.delete(key);\n      }\n    }\n  }\n}\n", "import { type LangfuseObjectClient } from \"./index\";\nimport { type LangfusePromptClient } from \"./prompts/promptClients\";\nimport { type components, type paths } from \"./openapi/server\";\n\nexport type LangfuseCoreOptions = {\n  // Langfuse API publicKey obtained from the Langfuse UI project settings\n  publicKey?: string;\n  // Langfuse API secretKey obtained from the Langfuse UI project settings\n  secretKey?: string;\n  // Langfuse API baseUrl (https://cloud.langfuse.com by default)\n  baseUrl?: string;\n  // Additional HTTP headers to send with each request\n  additionalHeaders?: Record<string, string>;\n  // The number of events to queue before sending to Langfuse (flushing)\n  flushAt?: number;\n  // The interval in milliseconds between periodic flushes\n  flushInterval?: number;\n  // How many times we will retry HTTP requests\n  fetchRetryCount?: number;\n  // The delay between HTTP request retries\n  fetchRetryDelay?: number;\n  // Timeout in milliseconds for any calls. Defaults to 10 seconds.\n  requestTimeout?: number;\n  // release (version) of the application, defaults to env LANGFUSE_RELEASE\n  release?: string;\n  // integration type of the SDK.\n  sdkIntegration?: string; // DEFAULT, LANGCHAIN, or any other custom value\n  // Enabled switch for the SDK. If disabled, no observability data will be sent to Langfuse. Defaults to true.\n  enabled?: boolean;\n  // Mask function to mask data in the event body\n  mask?: MaskFunction;\n  // Trace sampling rate. Approx. sampleRate % traces will be sent to LF servers\n  sampleRate?: number;\n  // Environment from which traces originate\n  environment?: string;\n  // Project ID to use for the SDK in admin mode. This should never be set by users.\n  _projectId?: string;\n  // Whether to enable local event export. Defaults to false.\n  _isLocalEventExportEnabled?: boolean;\n};\n\nexport enum LangfusePersistedProperty {\n  Props = \"props\",\n  Queue = \"queue\",\n  OptedOut = \"opted_out\",\n}\n\nexport type LangfuseFetchOptions = {\n  method: \"GET\" | \"POST\" | \"PUT\" | \"PATCH\";\n  headers: { [key: string]: string };\n  body?: string | Buffer;\n  signal?: AbortSignal;\n};\n\nexport type LangfuseFetchResponse<T = any> = {\n  status: number;\n  text: () => Promise<string>;\n  json: () => Promise<T>;\n  arrayBuffer: () => Promise<ArrayBuffer>;\n};\n\nexport type LangfuseObject = SingleIngestionEvent[\"type\"];\n\nexport type LangfuseQueueItem = SingleIngestionEvent & {\n  callback?: (err: any) => void;\n};\n\nexport type SingleIngestionEvent =\n  paths[\"/api/public/ingestion\"][\"post\"][\"requestBody\"][\"content\"][\"application/json\"][\"batch\"][number];\n\n// return type of ingestion endpoint defined on 200 status error in fern as 207 is not possible\nexport type IngestionReturnType =\n  paths[\"/api/public/ingestion\"][\"post\"][\"responses\"][207][\"content\"][\"application/json\"];\n\nexport type LangfuseEventProperties = {\n  [key: string]: any;\n};\n\nexport type LangfuseMetadataProperties = {\n  [key: string]: any;\n};\n\n// ASYNC\nexport type CreateLangfuseTraceBody = FixTypes<components[\"schemas\"][\"TraceBody\"]>;\n\nexport type CreateLangfuseEventBody = FixTypes<components[\"schemas\"][\"CreateEventBody\"]>;\n\nexport type CreateLangfuseSpanBody = FixTypes<components[\"schemas\"][\"CreateSpanBody\"]>;\nexport type UpdateLangfuseSpanBody = FixTypes<components[\"schemas\"][\"UpdateSpanBody\"]>;\nexport type EventBody =\n  | CreateLangfuseTraceBody\n  | CreateLangfuseEventBody\n  | CreateLangfuseSpanBody\n  | CreateLangfuseGenerationBody\n  | CreateLangfuseScoreBody\n  | UpdateLangfuseSpanBody\n  | UpdateLangfuseGenerationBody;\n\nexport type Usage = FixTypes<components[\"schemas\"][\"IngestionUsage\"]>;\nexport type UsageDetails = FixTypes<components[\"schemas\"][\"UsageDetails\"]>;\nexport type CreateLangfuseGenerationBody = FixTypes<components[\"schemas\"][\"CreateGenerationBody\"]>;\nexport type UpdateLangfuseGenerationBody = FixTypes<components[\"schemas\"][\"UpdateGenerationBody\"]>;\n\nexport type CreateLangfuseScoreBody = FixTypes<components[\"schemas\"][\"ScoreBody\"]>;\n\n// SYNC\nexport type GetLangfuseTracesQuery = FixTypes<paths[\"/api/public/traces\"][\"get\"][\"parameters\"][\"query\"]>;\nexport type GetLangfuseTracesResponse = FixTypes<\n  paths[\"/api/public/traces\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type GetLangfuseTraceResponse = FixTypes<\n  paths[\"/api/public/traces/{traceId}\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type GetLangfuseObservationsQuery = FixTypes<paths[\"/api/public/observations\"][\"get\"][\"parameters\"][\"query\"]>;\nexport type GetLangfuseObservationsResponse = FixTypes<\n  paths[\"/api/public/observations\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type GetLangfuseObservationResponse = FixTypes<\n  paths[\"/api/public/observations/{observationId}\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type GetLangfuseSessionsQuery = FixTypes<paths[\"/api/public/sessions\"][\"get\"][\"parameters\"][\"query\"]>;\nexport type GetLangfuseSessionsResponse = FixTypes<\n  paths[\"/api/public/sessions\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type GetLangfuseDatasetParams = FixTypes<\n  paths[\"/api/public/v2/datasets/{datasetName}\"][\"get\"][\"parameters\"][\"path\"]\n>;\nexport type GetLangfuseDatasetResponse = FixTypes<\n  paths[\"/api/public/v2/datasets/{datasetName}\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type GetLangfuseDatasetItemsQuery = paths[\"/api/public/dataset-items\"][\"get\"][\"parameters\"][\"query\"];\nexport type GetLangfuseDatasetItemsResponse = FixTypes<\n  paths[\"/api/public/dataset-items\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type CreateLangfuseDatasetRunItemBody = FixTypes<\n  paths[\"/api/public/dataset-run-items\"][\"post\"][\"requestBody\"][\"content\"][\"application/json\"]\n>;\nexport type CreateLangfuseDatasetRunItemResponse = FixTypes<\n  paths[\"/api/public/dataset-run-items\"][\"post\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type CreateLangfuseDatasetBody =\n  paths[\"/api/public/v2/datasets\"][\"post\"][\"requestBody\"][\"content\"][\"application/json\"];\nexport type CreateLangfuseDatasetResponse = FixTypes<\n  paths[\"/api/public/v2/datasets\"][\"post\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type CreateLangfuseDatasetItemBody = FixTypes<\n  paths[\"/api/public/dataset-items\"][\"post\"][\"requestBody\"][\"content\"][\"application/json\"]\n>;\nexport type CreateLangfuseDatasetItemResponse = FixTypes<\n  paths[\"/api/public/dataset-items\"][\"post\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type GetLangfuseDatasetRunParams = FixTypes<\n  paths[\"/api/public/datasets/{datasetName}/runs/{runName}\"][\"get\"][\"parameters\"][\"path\"]\n>;\nexport type GetLangfuseDatasetRunResponse = FixTypes<\n  paths[\"/api/public/datasets/{datasetName}/runs/{runName}\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type GetLangfuseDatasetRunsQuery =\n  paths[\"/api/public/datasets/{datasetName}/runs\"][\"get\"][\"parameters\"][\"query\"];\nexport type GetLangfuseDatasetRunsPath = paths[\"/api/public/datasets/{datasetName}/runs\"][\"get\"][\"parameters\"][\"path\"];\n\nexport type GetLangfuseDatasetRunsResponse = FixTypes<\n  paths[\"/api/public/datasets/{datasetName}/runs\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"]\n>;\nexport type CreateLangfusePromptBody = FixTypes<\n  paths[\"/api/public/v2/prompts\"][\"post\"][\"requestBody\"][\"content\"][\"application/json\"]\n>;\nexport type UpdatePromptBody = FixTypes<\n  paths[\"/api/public/v2/prompts/{name}/versions/{version}\"][\"patch\"][\"requestBody\"][\"content\"][\"application/json\"]\n>;\nexport type CreateLangfusePromptResponse =\n  paths[\"/api/public/v2/prompts\"][\"post\"][\"responses\"][\"200\"][\"content\"][\"application/json\"];\n\nexport type GetLangfusePromptSuccessData =\n  paths[\"/api/public/v2/prompts/{promptName}\"][\"get\"][\"responses\"][\"200\"][\"content\"][\"application/json\"];\n\nexport type GetLangfusePromptFailureData = { message?: string };\nexport type GetLangfusePromptResponse =\n  | {\n      fetchResult: \"success\";\n      data: GetLangfusePromptSuccessData;\n    }\n  | { fetchResult: \"failure\"; data: GetLangfusePromptFailureData };\n\nexport type ChatMessage = FixTypes<components[\"schemas\"][\"ChatMessage\"]>;\nexport type PlaceholderMessage = FixTypes<components[\"schemas\"][\"PlaceholderMessage\"]>;\nexport type ChatMessageWithPlaceholders = FixTypes<components[\"schemas\"][\"ChatMessageWithPlaceholders\"]>;\nexport type ChatPrompt = FixTypes<components[\"schemas\"][\"ChatPrompt\"]> & { type: \"chat\" };\nexport type TextPrompt = FixTypes<components[\"schemas\"][\"TextPrompt\"]> & { type: \"text\" };\n\n// Make ChatPromptClient constructor backwards compatible with normal chat messages (probably no one uses it that way, but still)\nexport type ChatPromptCompat = Omit<ChatPrompt, \"prompt\"> & {\n  prompt: ChatMessage[] | ChatMessageWithPlaceholders[];\n};\n\nexport enum ChatMessageType {\n  ChatMessage = \"chatmessage\",\n  Placeholder = \"placeholder\",\n}\n\nexport type ChatMessageOrPlaceholder = ChatMessage | ({ type: ChatMessageType.Placeholder } & PlaceholderMessage);\n\nexport type LangchainMessagesPlaceholder = {\n  variableName: string;\n  optional?: boolean;\n};\n\n// Media\nexport type GetMediaUploadUrlRequest = FixTypes<components[\"schemas\"][\"GetMediaUploadUrlRequest\"]>;\nexport type GetMediaUploadUrlResponse = FixTypes<components[\"schemas\"][\"GetMediaUploadUrlResponse\"]>;\nexport type MediaContentType = components[\"schemas\"][\"MediaContentType\"];\nexport type PatchMediaBody = FixTypes<components[\"schemas\"][\"PatchMediaBody\"]>;\nexport type GetMediaResponse = FixTypes<components[\"schemas\"][\"GetMediaResponse\"]>;\n\ntype CreateTextPromptRequest = FixTypes<components[\"schemas\"][\"CreateTextPromptRequest\"]>;\ntype CreateChatPromptRequest = FixTypes<components[\"schemas\"][\"CreateChatPromptRequest\"]>;\nexport type CreateTextPromptBody = { type?: \"text\" } & Omit<CreateTextPromptRequest, \"type\"> & { isActive?: boolean }; // isActive is optional for backward compatibility\nexport type CreateChatPromptBody = { type: \"chat\" } & Omit<CreateChatPromptRequest, \"type\"> & { isActive?: boolean }; // isActive is optional for backward compatibility\n\nexport type CreateChatPromptBodyWithPlaceholders = {\n  type: \"chat\";\n} & Omit<CreateChatPromptRequest, \"type\" | \"prompt\"> & {\n    prompt: (ChatMessage | ChatMessageWithPlaceholders)[];\n    isActive?: boolean;\n  };\n\nexport type CreatePromptBody = CreateTextPromptBody | CreateChatPromptBody;\n\nexport type PromptInput = {\n  prompt?: LangfusePromptRecord | LangfusePromptClient;\n};\n\nexport type JsonType = string | number | boolean | null | { [key: string]: JsonType } | Array<JsonType>;\n\ntype OptionalTypes<T> = T extends null | undefined ? T : never;\n\ntype FixTypes<T> = T extends undefined\n  ? undefined\n  : Omit<\n      {\n        [P in keyof T]: P extends\n          | \"startTime\"\n          | \"endTime\"\n          | \"timestamp\"\n          | \"completionStartTime\"\n          | \"createdAt\"\n          | \"updatedAt\"\n          | \"fromTimestamp\"\n          | \"toTimestamp\"\n          | \"fromStartTime\"\n          | \"toStartTime\"\n          ? // Dates instead of strings\n            Date | OptionalTypes<T[P]>\n          : P extends \"metadata\" | \"input\" | \"output\" | \"completion\" | \"expectedOutput\"\n            ? // JSON instead of strings\n              any | OptionalTypes<T[P]>\n            : T[P];\n      },\n      \"externalId\" | \"traceIdType\"\n    >;\n\nexport type DeferRuntime = {\n  langfuseTraces: (\n    traces: {\n      id: string;\n      name: string;\n      url: string;\n    }[]\n  ) => void;\n};\n\n// Datasets\nexport type DatasetItemData = GetLangfuseDatasetItemsResponse[\"data\"][number];\nexport type LinkDatasetItem = (\n  obj: LangfuseObjectClient,\n  runName: string,\n  runArgs?: {\n    description?: string;\n    metadata?: any;\n  }\n) => Promise<{ id: string }>;\nexport type DatasetItem = DatasetItemData & { link: LinkDatasetItem };\n\nexport type MaskFunction = (params: { data: any }) => any;\n\nexport type LangfusePromptRecord = (TextPrompt | ChatPrompt) & { isFallback: boolean };\n", "import mustache from \"mustache\";\n\nimport {\n  type ChatMessage,\n  type ChatMessageOrPlaceholder,\n  ChatMessageType,\n  type ChatPrompt,\n  type ChatPromptCompat,\n  type CreateLangfusePromptResponse,\n  type LangchainMessagesPlaceholder,\n  type TextPrompt,\n  type ChatMessageWithPlaceholders,\n} from \"../types\";\n\nmustache.escape = function (text) {\n  return text;\n};\n\nabstract class BasePromptClient {\n  public readonly name: string;\n  public readonly version: number;\n  public readonly config: unknown;\n  public readonly labels: string[];\n  public readonly tags: string[];\n  public readonly isFallback: boolean;\n  public readonly type: \"text\" | \"chat\";\n  public readonly commitMessage: string | null | undefined;\n\n  constructor(prompt: CreateLangfusePromptResponse, isFallback = false, type: \"text\" | \"chat\") {\n    this.name = prompt.name;\n    this.version = prompt.version;\n    this.config = prompt.config;\n    this.labels = prompt.labels;\n    this.tags = prompt.tags;\n    this.isFallback = isFallback;\n    this.type = type;\n    this.commitMessage = prompt.commitMessage;\n  }\n\n  abstract get prompt(): string | ChatMessageWithPlaceholders[];\n  abstract set prompt(value: string | ChatMessageWithPlaceholders[]);\n\n  abstract compile(\n    variables?: Record<string, string>,\n    placeholders?: Record<string, any>\n  ): string | ChatMessage[] | (ChatMessageOrPlaceholder | any)[];\n\n  public abstract getLangchainPrompt(options?: {\n    placeholders?: Record<string, any>;\n  }): string | ChatMessage[] | ChatMessageOrPlaceholder[] | (ChatMessage | LangchainMessagesPlaceholder | any)[];\n\n  protected _transformToLangchainVariables(content: string): string {\n    const jsonEscapedContent = this.escapeJsonForLangchain(content);\n\n    return jsonEscapedContent.replace(/\\{\\{(\\w+)\\}\\}/g, \"{$1}\");\n  }\n\n  /**\n   * Escapes every curly brace that is part of a JSON object by doubling it.\n   *\n   * A curly brace is considered “JSON-related” when, after skipping any immediate\n   * whitespace, the next non-whitespace character is a single (') or double (\") quote.\n   *\n   * Braces that are already doubled (e.g. `{{variable}}` placeholders) are left untouched.\n   *\n   * @param text - Input string that may contain JSON snippets.\n   * @returns The string with JSON-related braces doubled.\n   */\n  protected escapeJsonForLangchain(text: string): string {\n    const out: string[] = []; // collected characters\n    const stack: boolean[] = []; // true = “this { belongs to JSON”, false = normal “{”\n    let i = 0;\n    const n = text.length;\n\n    while (i < n) {\n      const ch = text[i];\n\n      // ---------- opening brace ----------\n      if (ch === \"{\") {\n        // leave existing “{{ …” untouched\n        if (i + 1 < n && text[i + 1] === \"{\") {\n          out.push(\"{{\");\n          i += 2;\n          continue;\n        }\n\n        // look ahead to find the next non-space character\n        let j = i + 1;\n        while (j < n && /\\s/.test(text[j])) {\n          j++;\n        }\n\n        const isJson = j < n && (text[j] === \"'\" || text[j] === '\"');\n        out.push(isJson ? \"{{\" : \"{\");\n        stack.push(isJson); // remember how this “{” was treated\n        i += 1;\n        continue;\n      }\n\n      // ---------- closing brace ----------\n      if (ch === \"}\") {\n        // leave existing “… }}” untouched\n        if (i + 1 < n && text[i + 1] === \"}\") {\n          out.push(\"}}\");\n          i += 2;\n          continue;\n        }\n\n        const isJson = stack.pop() ?? false;\n        out.push(isJson ? \"}}\" : \"}\");\n        i += 1;\n        continue;\n      }\n\n      // ---------- any other character ----------\n      out.push(ch);\n      i += 1;\n    }\n\n    return out.join(\"\");\n  }\n\n  public abstract toJSON(): string;\n}\n\nexport class TextPromptClient extends BasePromptClient {\n  public readonly promptResponse: TextPrompt;\n  public readonly prompt: string;\n\n  constructor(prompt: TextPrompt, isFallback = false) {\n    super(prompt, isFallback, \"text\");\n    this.promptResponse = prompt;\n    this.prompt = prompt.prompt;\n  }\n\n  compile(variables?: Record<string, string>, _placeholders?: Record<string, any>): string {\n    return mustache.render(this.promptResponse.prompt, variables ?? {});\n  }\n\n  public getLangchainPrompt(_options?: { placeholders?: Record<string, any> }): string {\n    /**\n     * Converts Langfuse prompt into string compatible with Langchain PromptTemplate.\n     *\n     * It specifically adapts the mustache-style double curly braces {{variable}} used in Langfuse\n     * to the single curly brace {variable} format expected by Langchain.\n     *\n     * @returns {string} The string that can be plugged into Langchain's PromptTemplate.\n     */\n    return this._transformToLangchainVariables(this.prompt);\n  }\n\n  public toJSON(): string {\n    return JSON.stringify({\n      name: this.name,\n      prompt: this.prompt,\n      version: this.version,\n      isFallback: this.isFallback,\n      tags: this.tags,\n      labels: this.labels,\n      type: this.type,\n      config: this.config,\n    });\n  }\n}\n\nexport class ChatPromptClient extends BasePromptClient {\n  public readonly promptResponse: ChatPrompt;\n  public readonly prompt: ChatMessageWithPlaceholders[];\n\n  constructor(prompt: ChatPromptCompat, isFallback = false) {\n    const normalizedPrompt = ChatPromptClient.normalizePrompt(prompt.prompt);\n    const typedPrompt: ChatPrompt = {\n      ...prompt,\n      prompt: normalizedPrompt,\n    };\n\n    super(typedPrompt, isFallback, \"chat\");\n    this.promptResponse = typedPrompt;\n    this.prompt = normalizedPrompt;\n  }\n\n  private static normalizePrompt(prompt: ChatMessage[] | ChatMessageWithPlaceholders[]): ChatMessageWithPlaceholders[] {\n    // Convert ChatMessages to ChatMessageWithPlaceholders for backward compatibility\n    return prompt.map((item): ChatMessageWithPlaceholders => {\n      if (\"type\" in item) {\n        // Already has type field (new format)\n        return item as ChatMessageWithPlaceholders;\n      } else {\n        // Plain ChatMessage (legacy format) - add type field\n        return { type: ChatMessageType.ChatMessage, ...item } as ChatMessageWithPlaceholders;\n      }\n    });\n  }\n\n  compile(variables?: Record<string, string>, placeholders?: Record<string, any>): (ChatMessageOrPlaceholder | any)[] {\n    /**\n     * Compiles the chat prompt by replacing placeholders and variables with provided values.\n     *\n     * First fills-in placeholders by from the provided placeholder parameter.\n     * Then compiles variables into the message content.\n     * Unresolved placeholders are included in the output as placeholder objects.\n     * If you only want to fill-in placeholders, pass an empty object for variables.\n     *\n     * @param variables - Key-value pairs for Mustache variable substitution in message content\n     * @param placeholders - Key-value pairs where keys are placeholder names and values can be ChatMessage arrays\n     * @returns Array of ChatMessage objects and placeholder objects with placeholders replaced and variables rendered\n     */\n    const messagesWithPlaceholdersReplaced: (ChatMessageOrPlaceholder | any)[] = [];\n    const placeholderValues = placeholders ?? {};\n\n    for (const item of this.prompt) {\n      if (\"type\" in item && item.type === ChatMessageType.Placeholder) {\n        const placeholderValue = placeholderValues[item.name];\n        if (\n          Array.isArray(placeholderValue) &&\n          placeholderValue.length > 0 &&\n          placeholderValue.every((msg) => typeof msg === \"object\" && \"role\" in msg && \"content\" in msg)\n        ) {\n          messagesWithPlaceholdersReplaced.push(...(placeholderValue as ChatMessage[]));\n        } else if (Array.isArray(placeholderValue) && placeholderValue.length === 0) {\n          // Empty array provided - skip placeholder (don't include it)\n        } else if (placeholderValue !== undefined) {\n          // Non-standard placeholder value format, just stringfiy\n          messagesWithPlaceholdersReplaced.push(JSON.stringify(placeholderValue));\n        } else {\n          // Keep unresolved placeholder in the output\n          messagesWithPlaceholdersReplaced.push(item as { type: ChatMessageType.Placeholder } & typeof item);\n        }\n      } else if (\"role\" in item && \"content\" in item && item.type === ChatMessageType.ChatMessage) {\n        messagesWithPlaceholdersReplaced.push({\n          role: item.role,\n          content: item.content,\n        });\n      }\n    }\n\n    return messagesWithPlaceholdersReplaced.map((item) => {\n      if (typeof item === \"object\" && item !== null && \"role\" in item && \"content\" in item) {\n        return {\n          ...item,\n          content: mustache.render(item.content, variables ?? {}),\n        };\n      } else {\n        // Return placeholder or stringified value as-is\n        return item;\n      }\n    });\n  }\n\n  public getLangchainPrompt(options?: {\n    placeholders?: Record<string, any>;\n  }): (ChatMessage | LangchainMessagesPlaceholder | any)[] {\n    /*\n     * Converts Langfuse prompt into format compatible with Langchain PromptTemplate.\n     *\n     * Fills-in placeholders from provided values and converts unresolved ones to Langchain MessagesPlaceholder objects.\n     * Transforms variables from {{var}} to {var} format for Langchain without rendering them.\n     *\n     * @param options - Configuration object\n     * @param options.placeholders - Key-value pairs where keys are placeholder names and values can be ChatMessage arrays\n     * @returns Array of ChatMessage objects and Langchain MessagesPlaceholder objects with variables transformed for Langchain compatibility.\n     *\n     * @example\n     * ```typescript\n     * const client = new ChatPromptClient(prompt);\n     * client.getLangchainPrompt({ placeholders: { examples: [{ role: \"user\", content: \"Hello\" }] } });\n     * ```\n     */\n    const messagesWithPlaceholdersReplaced: (ChatMessage | LangchainMessagesPlaceholder | any)[] = [];\n    const placeholderValues = options?.placeholders ?? {};\n\n    for (const item of this.prompt) {\n      if (\"type\" in item && item.type === ChatMessageType.Placeholder) {\n        const placeholderValue = placeholderValues[item.name];\n        if (\n          Array.isArray(placeholderValue) &&\n          placeholderValue.length > 0 &&\n          placeholderValue.every((msg) => typeof msg === \"object\" && \"role\" in msg && \"content\" in msg)\n        ) {\n          // Complete placeholder fill-in, replace with it\n          messagesWithPlaceholdersReplaced.push(\n            ...(placeholderValue as ChatMessage[]).map((msg) => {\n              return {\n                role: msg.role,\n                content: this._transformToLangchainVariables(msg.content),\n              };\n            })\n          );\n        } else if (Array.isArray(placeholderValue) && placeholderValue.length === 0) {\n          // Skip empty array placeholder\n        } else if (placeholderValue !== undefined) {\n          // Non-standard placeholder value, just stringify and add directly\n          messagesWithPlaceholdersReplaced.push(JSON.stringify(placeholderValue));\n        } else {\n          // Convert unresolved placeholder to Langchain MessagesPlaceholder\n          messagesWithPlaceholdersReplaced.push({\n            variableName: item.name,\n            optional: false,\n          });\n        }\n      } else if (\"role\" in item && \"content\" in item && item.type === ChatMessageType.ChatMessage) {\n        messagesWithPlaceholdersReplaced.push({\n          role: item.role,\n          content: this._transformToLangchainVariables(item.content),\n        });\n      }\n    }\n\n    return messagesWithPlaceholdersReplaced;\n  }\n\n  public toJSON(): string {\n    return JSON.stringify({\n      name: this.name,\n      prompt: this.promptResponse.prompt.map((item) => {\n        if (\"type\" in item && item.type === ChatMessageType.ChatMessage) {\n          const { type: _, ...messageWithoutType } = item;\n          return messageWithoutType;\n        }\n        return item;\n      }),\n      version: this.version,\n      isFallback: this.isFallback,\n      tags: this.tags,\n      labels: this.labels,\n      type: this.type,\n      config: this.config,\n    });\n  }\n}\n\nexport type LangfusePromptClient = TextPromptClient | ChatPromptClient;\n", "import { type LangfuseCoreOptions } from \"./types\";\n\nexport function assert(truthyValue: any, message: string): void {\n  if (!truthyValue) {\n    throw new Error(message);\n  }\n}\n\nexport function removeTrailingSlash(url: string): string {\n  return url?.replace(/\\/+$/, \"\");\n}\n\nexport interface RetriableOptions {\n  retryCount?: number;\n  retryDelay?: number;\n  retryCheck?: (err: any) => boolean;\n}\n\nexport async function retriable<T>(\n  fn: () => Promise<T>,\n  props: RetriableOptions = {},\n  log: (msg: string) => void\n): Promise<T> {\n  const { retryCount = 3, retryDelay = 5000, retryCheck = () => true } = props;\n  let lastError = null;\n\n  for (let i = 0; i < retryCount + 1; i++) {\n    if (i > 0) {\n      // don't wait when it's the first try\n      await new Promise((resolve) => setTimeout(resolve, retryDelay));\n      log(`Retrying ${i + 1} of ${retryCount + 1}`);\n    }\n\n    try {\n      const res = await fn();\n      return res;\n    } catch (e) {\n      lastError = e;\n      if (!retryCheck(e)) {\n        throw e;\n      }\n      log(`Retriable error: ${JSON.stringify(e)}`);\n    }\n  }\n\n  throw lastError;\n}\n\n// https://stackoverflow.com/a/8809472\nexport function generateUUID(globalThis?: any): string {\n  // Public Domain/MIT\n  let d = new Date().getTime(); //Timestamp\n  let d2 =\n    (globalThis && globalThis.performance && globalThis.performance.now && globalThis.performance.now() * 1000) || 0; //Time in microseconds since page-load or 0 if unsupported\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    let r = Math.random() * 16; //random number between 0 and 16\n    if (d > 0) {\n      //Use timestamp until depleted\n      r = (d + r) % 16 | 0;\n      d = Math.floor(d / 16);\n    } else {\n      //Use microseconds since page-load if supported\n      r = (d2 + r) % 16 | 0;\n      d2 = Math.floor(d2 / 16);\n    }\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\nexport function currentTimestamp(): number {\n  return new Date().getTime();\n}\n\nexport function currentISOTime(): string {\n  return new Date().toISOString();\n}\n\nexport function safeSetTimeout(fn: () => void, timeout: number): any {\n  // NOTE: we use this so rarely that it is totally fine to do `safeSetTimeout(fn, 0)``\n  // rather than setImmediate.\n  const t = setTimeout(fn, timeout) as any;\n  // We unref if available to prevent Node.js hanging on exit\n  t?.unref && t?.unref();\n  return t;\n}\n\nexport function getEnv<T = string>(key: string): T | undefined {\n  if (typeof process !== \"undefined\" && process.env[key]) {\n    return process.env[key] as T;\n  } else if (typeof globalThis !== \"undefined\") {\n    return (globalThis as any)[key];\n  }\n  return;\n}\n\nexport function configLangfuseSDK(params?: LangfuseCoreOptions, secretRequired: boolean = true): LangfuseCoreOptions {\n  const { publicKey, secretKey, ...coreOptions } = params ?? {};\n\n  // check environment variables if values not provided\n  const finalPublicKey = publicKey ?? getEnv(\"LANGFUSE_PUBLIC_KEY\");\n  const finalSecretKey = secretRequired ? secretKey ?? getEnv(\"LANGFUSE_SECRET_KEY\") : undefined;\n  const finalBaseUrl = coreOptions.baseUrl ?? getEnv(\"LANGFUSE_BASEURL\");\n\n  const finalCoreOptions = {\n    ...coreOptions,\n    baseUrl: finalBaseUrl,\n  };\n\n  return {\n    publicKey: finalPublicKey,\n    ...(secretRequired ? { secretKey: finalSecretKey } : undefined),\n    ...finalCoreOptions,\n  };\n}\n\nexport const encodeQueryParams = (params?: { [key: string]: any }): string => {\n  const queryParams = new URLSearchParams();\n  Object.entries(params ?? {}).forEach(([key, value]) => {\n    if (value !== undefined && value !== null) {\n      // check for date\n      if (value instanceof Date) {\n        queryParams.append(key, value.toISOString());\n      } else {\n        queryParams.append(key, value.toString());\n      }\n    }\n  });\n  return queryParams.toString();\n};\n", "import { getEnv } from \"./utils\";\n\nconst common_release_envs = [\n  // Vercel\n  \"VERCEL_GIT_COMMIT_SHA\",\n  \"NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA\",\n  // Netlify\n  \"COMMIT_REF\",\n  // Render\n  \"RENDER_GIT_COMMIT\",\n  // GitLab CI\n  \"CI_COMMIT_SHA\",\n  // CicleCI\n  \"CIRCLE_SHA1\",\n  // Cloudflare pages\n  \"CF_PAGES_COMMIT_SHA\",\n  // AWS Amplify\n  \"REACT_APP_GIT_SHA\",\n  // Heroku\n  \"SOURCE_VERSION\",\n  // Trigger.dev\n  \"TRIGGER_DEPLOYMENT_ID\",\n] as const;\n\nexport function getCommonReleaseEnvs(): string | undefined {\n  for (const key of common_release_envs) {\n    const value = getEnv(key);\n    if (value) {\n      return value;\n    }\n  }\n  return undefined;\n}\n", "import { type LangfuseCore } from \"../index\";\n\nlet fs: any = null;\nlet cryptoModule: any = null;\n\n// Use wrapper to prevent bundlers from trying to resolve the dynamic import\n// Otherwise, the import will be incorrectly resolved as a static import even though it's dynamic\n// Test for browser environment would fail because the import will be incorrectly resolved as a static import and fs and crypto will be unavailable\nconst dynamicImport = (module: string): Promise<any> => {\n  return import(/* webpackIgnore: true */ module);\n};\n\nif (typeof (globalThis as any).Deno !== \"undefined\") {\n  // Deno\n  Promise.all([dynamicImport(\"node:fs\"), dynamicImport(\"node:crypto\")])\n    .then(([importedFs, importedCrypto]) => {\n      fs = importedFs;\n      cryptoModule = importedCrypto;\n    })\n    .catch(); // Errors are handled on runtime\n} else if (typeof process !== \"undefined\" && process.versions?.node) {\n  // Node\n  Promise.all([dynamicImport(\"fs\"), dynamicImport(\"crypto\")])\n    .then(([importedFs, importedCrypto]) => {\n      fs = importedFs;\n      cryptoModule = importedCrypto;\n    })\n    .catch(); // Errors are handled on runtime\n} else if (typeof crypto !== \"undefined\") {\n  // Edge runtime (Cloudflare Workers, Vercel Cloud Function)\n  cryptoModule = crypto;\n}\n\nimport { type MediaContentType } from \"../types\";\n\ninterface ParsedMediaReference {\n  mediaId: string;\n  source: string;\n  contentType: MediaContentType;\n}\n\nexport type LangfuseMediaResolveMediaReferencesParams<T> = {\n  obj: T;\n  langfuseClient: LangfuseCore;\n  resolveWith: \"base64DataUri\";\n  maxDepth?: number;\n};\n\n/**\n * A class for wrapping media objects for upload to Langfuse.\n *\n * This class handles the preparation and formatting of media content for Langfuse,\n * supporting both base64 data URIs and raw content bytes.\n */\nclass LangfuseMedia {\n  obj?: object;\n\n  _contentBytes?: Buffer;\n  _contentType?: MediaContentType;\n  _source?: string;\n  _mediaId?: string;\n\n  constructor(params: {\n    obj?: object;\n    base64DataUri?: string;\n    contentType?: MediaContentType;\n    contentBytes?: Buffer;\n    filePath?: string;\n  }) {\n    const { obj, base64DataUri, contentType, contentBytes, filePath } = params;\n\n    this.obj = obj;\n    this._mediaId = undefined;\n\n    if (base64DataUri) {\n      const [contentBytesParsed, contentTypeParsed] = this.parseBase64DataUri(base64DataUri);\n      this._contentBytes = contentBytesParsed;\n      this._contentType = contentTypeParsed;\n      this._source = \"base64_data_uri\";\n    } else if (contentBytes && contentType) {\n      this._contentBytes = contentBytes;\n      this._contentType = contentType;\n      this._source = \"bytes\";\n    } else if (filePath && contentType) {\n      if (!fs) {\n        throw new Error(\"File system support is not available in this environment\");\n      }\n\n      if (!fs.existsSync(filePath)) {\n        throw new Error(`File at path ${filePath} does not exist`);\n      }\n\n      this._contentBytes = this.readFile(filePath);\n      this._contentType = this._contentBytes ? contentType : undefined;\n      this._source = this._contentBytes ? \"file\" : undefined;\n    } else {\n      console.error(\"base64DataUri, or contentBytes and contentType, or filePath must be provided to LangfuseMedia\");\n    }\n  }\n\n  private readFile(filePath: string): Buffer | undefined {\n    try {\n      if (!fs) {\n        throw new Error(\"File system support is not available in this environment\");\n      }\n\n      return fs.readFileSync(filePath);\n    } catch (error) {\n      console.error(`Error reading file at path ${filePath}`, error);\n      return undefined;\n    }\n  }\n\n  private parseBase64DataUri(data: string): [Buffer | undefined, MediaContentType | undefined] {\n    try {\n      if (!data || typeof data !== \"string\") {\n        throw new Error(\"Data URI is not a string\");\n      }\n\n      if (!data.startsWith(\"data:\")) {\n        throw new Error(\"Data URI does not start with 'data:'\");\n      }\n\n      const [header, actualData] = data.slice(5).split(\",\", 2);\n      if (!header || !actualData) {\n        throw new Error(\"Invalid URI\");\n      }\n\n      const headerParts = header.split(\";\");\n      if (!headerParts.includes(\"base64\")) {\n        throw new Error(\"Data is not base64 encoded\");\n      }\n\n      const contentType = headerParts[0];\n      if (!contentType) {\n        throw new Error(\"Content type is empty\");\n      }\n\n      return [Buffer.from(actualData, \"base64\"), contentType as MediaContentType];\n    } catch (error) {\n      console.error(\"Error parsing base64 data URI\", error);\n      return [undefined, undefined];\n    }\n  }\n\n  get contentLength(): number | undefined {\n    return this._contentBytes?.length;\n  }\n\n  get contentSha256Hash(): string | undefined {\n    if (!this._contentBytes) {\n      return undefined;\n    }\n\n    if (!cryptoModule) {\n      console.error(\"Crypto support is not available in this environment\");\n      return undefined;\n    }\n\n    const sha256Hash = cryptoModule.createHash(\"sha256\").update(this._contentBytes).digest(\"base64\");\n    return sha256Hash;\n  }\n\n  toJSON(): string | undefined {\n    if (!this._contentType || !this._source || !this._mediaId) {\n      return `<Upload handling failed for LangfuseMedia of type ${this._contentType}>`;\n    }\n\n    return `@@@langfuseMedia:type=${this._contentType}|id=${this._mediaId}|source=${this._source}@@@`;\n  }\n\n  /**\n   * Parses a media reference string into a ParsedMediaReference.\n   *\n   * Example reference string:\n   *     \"@@@langfuseMedia:type=image/jpeg|id=some-uuid|source=base64DataUri@@@\"\n   *\n   * @param referenceString - The reference string to parse.\n   * @returns An object with the mediaId, source, and contentType.\n   *\n   * @throws Error if the reference string is invalid or missing required fields.\n   */\n  public static parseReferenceString(referenceString: string): ParsedMediaReference {\n    const prefix = \"@@@langfuseMedia:\";\n    const suffix = \"@@@\";\n\n    if (!referenceString.startsWith(prefix)) {\n      throw new Error(\"Reference string does not start with '@@@langfuseMedia:type='\");\n    }\n\n    if (!referenceString.endsWith(suffix)) {\n      throw new Error(\"Reference string does not end with '@@@'\");\n    }\n\n    const content = referenceString.slice(prefix.length, -suffix.length);\n\n    const pairs = content.split(\"|\");\n    const parsedData: { [key: string]: string } = {};\n\n    for (const pair of pairs) {\n      const [key, value] = pair.split(\"=\", 2);\n      parsedData[key] = value;\n    }\n\n    if (!(\"type\" in parsedData && \"id\" in parsedData && \"source\" in parsedData)) {\n      throw new Error(\"Missing required fields in reference string\");\n    }\n\n    return {\n      mediaId: parsedData[\"id\"],\n      source: parsedData[\"source\"],\n      contentType: parsedData[\"type\"] as MediaContentType,\n    };\n  }\n\n  /**\n   * Replaces the media reference strings in an object with base64 data URIs for the media content.\n   *\n   * This method recursively traverses an object (up to a maximum depth of 10) looking for media reference strings\n   * in the format \"@@@langfuseMedia:...@@@\". When found, it fetches the actual media content using the provided\n   * Langfuse client and replaces the reference string with a base64 data URI.\n   *\n   * If fetching media content fails for a reference string, a warning is logged and the reference string is left unchanged.\n   *\n   * @param params - Configuration object\n   * @param params.obj - The object to process. Can be a primitive value, array, or nested object\n   * @param params.langfuseClient - Langfuse client instance used to fetch media content\n   * @param params.resolveWith - The representation of the media content to replace the media reference string with. Currently only \"base64DataUri\" is supported.\n   * @param params.maxDepth - Optional. Default is 10. The maximum depth to traverse the object.\n   *\n   * @returns A deep copy of the input object with all media references replaced with base64 data URIs where possible\n   *\n   * @example\n   * ```typescript\n   * const obj = {\n   *   image: \"@@@langfuseMedia:type=image/jpeg|id=123|source=bytes@@@\",\n   *   nested: {\n   *     pdf: \"@@@langfuseMedia:type=application/pdf|id=456|source=bytes@@@\"\n   *   }\n   * };\n   *\n   * const result = await LangfuseMedia.resolveMediaReferences({\n   *   obj,\n   *   langfuseClient\n   * });\n   *\n   * // Result:\n   * // {\n   * //   image: \"data:image/jpeg;base64,/9j/4AAQSkZJRg...\",\n   * //   nested: {\n   * //     pdf: \"data:application/pdf;base64,JVBERi0xLjcK...\"\n   * //   }\n   * // }\n   * ```\n   */\n  public static async resolveMediaReferences<T>(params: LangfuseMediaResolveMediaReferencesParams<T>): Promise<T> {\n    const { obj, langfuseClient, maxDepth = 10 } = params;\n\n    async function traverse<T>(obj: T, depth: number): Promise<T> {\n      if (depth > maxDepth) {\n        return obj;\n      }\n\n      // Handle string with potential media references\n      if (typeof obj === \"string\") {\n        const regex = /@@@langfuseMedia:.+?@@@/g;\n        const referenceStringMatches = obj.match(regex);\n        if (!referenceStringMatches) {\n          return obj;\n        }\n\n        let result = obj;\n        const referenceStringToMediaContentMap = new Map<string, string>();\n\n        await Promise.all(\n          referenceStringMatches.map(async (referenceString) => {\n            try {\n              const parsedMediaReference = LangfuseMedia.parseReferenceString(referenceString);\n              const mediaData = await langfuseClient.fetchMedia(parsedMediaReference.mediaId);\n              const mediaContent = await langfuseClient.fetch(mediaData.url, { method: \"GET\", headers: {} });\n              if (mediaContent.status !== 200) {\n                throw new Error(\"Failed to fetch media content\");\n              }\n\n              const base64MediaContent = Buffer.from(await mediaContent.arrayBuffer()).toString(\"base64\");\n              const base64DataUri = `data:${mediaData.contentType};base64,${base64MediaContent}`;\n\n              referenceStringToMediaContentMap.set(referenceString, base64DataUri);\n            } catch (error) {\n              console.warn(\"Error fetching media content for reference string\", referenceString, error);\n              // Do not replace the reference string if there's an error\n            }\n          })\n        );\n\n        for (const [referenceString, base64MediaContent] of referenceStringToMediaContentMap.entries()) {\n          result = result.replaceAll(referenceString, base64MediaContent) as T & string;\n        }\n\n        return result;\n      }\n\n      // Handle arrays\n      if (Array.isArray(obj)) {\n        return Promise.all(obj.map(async (item) => await traverse(item, depth + 1))) as Promise<T>;\n      }\n\n      // Handle objects\n      if (typeof obj === \"object\" && obj !== null) {\n        return Object.fromEntries(\n          await Promise.all(Object.entries(obj).map(async ([key, value]) => [key, await traverse(value, depth + 1)]))\n        );\n      }\n\n      return obj;\n    }\n\n    return traverse(obj, 0);\n  }\n}\n\nexport { LangfuseMedia, type MediaContentType, type ParsedMediaReference };\n", "/**\n * A consistent sampling function that works for arbitrary strings across all JavaScript runtimes.\n */\nexport function isInSample(input: string, sampleRate: number | undefined): boolean {\n  if (sampleRate === undefined) {\n    return true;\n  } else if (sampleRate === 0) {\n    return false;\n  }\n\n  if (sampleRate < 0 || sampleRate > 1 || isNaN(sampleRate)) {\n    console.warn(\"Sample rate must be between 0 and 1. Ignoring setting.\");\n\n    return true;\n  }\n\n  return simpleHash(input) < sampleRate;\n}\n\n/**\n * Simple and consistent string hashing function.\n * Uses character codes and prime numbers for good distribution.\n */\nfunction simpleHash(str: string): number {\n  let hash = 0;\n  const prime = 31;\n\n  for (let i = 0; i < str.length; i++) {\n    // Use rolling multiplication instead of Math.pow\n    hash = (hash * prime + str.charCodeAt(i)) >>> 0;\n  }\n\n  // Use bit operations for better distribution\n  hash = ((hash >>> 16) ^ hash) * 0x45d9f3b;\n  hash = ((hash >>> 16) ^ hash) * 0x45d9f3b;\n  hash = (hash >>> 16) ^ hash;\n\n  return Math.abs(hash) / 0x7fffffff;\n}\n", "import { type LangfusePersistedProperty } from \"./types\";\n\nexport class LangfuseMemoryStorage {\n  private _memoryStorage: { [key: string]: any | undefined } = {};\n\n  getProperty(key: LangfusePersistedProperty): any | undefined {\n    return this._memoryStorage[key];\n  }\n\n  setProperty(key: LangfusePersistedProperty, value: any | null): void {\n    this._memoryStorage[key] = value !== null ? value : undefined;\n  }\n}\n", "import { SimpleEventEmitter } from \"./eventemitter\";\nimport { LangfusePromptCache } from \"./prompts/promptCache\";\nimport { ChatPromptClient, TextPromptClient, type LangfusePromptClient } from \"./prompts/promptClients\";\nimport { getCommonReleaseEnvs } from \"./release-env\";\nimport {\n  ChatMessageType,\n  LangfusePersistedProperty,\n  type ChatMessage,\n  type CreateLangfuseDatasetBody,\n  type CreateLangfuseDatasetItemBody,\n  type CreateLangfuseDatasetItemResponse,\n  type CreateLangfuseDatasetResponse,\n  type CreateLangfuseDatasetRunItemBody,\n  type CreateLangfuseDatasetRunItemResponse,\n  type CreateLangfuseEventBody,\n  type CreateLangfuseGenerationBody,\n  type CreateLangfusePromptBody,\n  type CreateLangfusePromptResponse,\n  type GetMediaUploadUrlRequest,\n  type GetMediaUploadUrlResponse,\n  type PatchMediaBody,\n  type CreateLangfuseScoreBody,\n  type CreateLangfuseSpanBody,\n  type CreateLangfuseTraceBody,\n  type CreateChatPromptBody,\n  type CreateChatPromptBodyWithPlaceholders,\n  type CreateTextPromptBody,\n  type DatasetItem,\n  type DeferRuntime,\n  type EventBody,\n  type GetLangfuseDatasetItemsQuery,\n  type GetLangfuseDatasetItemsResponse,\n  type GetLangfuseDatasetParams,\n  type GetLangfuseDatasetResponse,\n  type GetLangfuseDatasetRunParams,\n  type GetLangfuseDatasetRunResponse,\n  type GetLangfuseDatasetRunsQuery,\n  type GetLangfuseDatasetRunsResponse,\n  type GetLangfuseObservationResponse,\n  type GetLangfuseObservationsQuery,\n  type GetLangfuseObservationsResponse,\n  type GetLangfusePromptResponse,\n  type GetLangfuseSessionsQuery,\n  type GetLangfuseSessionsResponse,\n  type GetLangfuseTraceResponse,\n  type GetLangfuseTracesQuery,\n  type GetLangfuseTracesResponse,\n  type GetMediaResponse,\n  type IngestionReturnType,\n  type LangfuseCoreOptions,\n  type LangfuseFetchOptions,\n  type LangfuseFetchResponse,\n  type LangfuseObject,\n  type LangfuseQueueItem,\n  type MaskFunction,\n  type PlaceholderMessage,\n  type PromptInput,\n  type SingleIngestionEvent,\n  type UpdateLangfuseGenerationBody,\n  type UpdateLangfuseSpanBody,\n  type UpdatePromptBody,\n} from \"./types\";\nimport { LangfuseMedia, type LangfuseMediaResolveMediaReferencesParams } from \"./media/LangfuseMedia\";\nimport {\n  currentISOTime,\n  encodeQueryParams,\n  generateUUID,\n  getEnv,\n  removeTrailingSlash,\n  retriable,\n  safeSetTimeout,\n  type RetriableOptions,\n} from \"./utils\";\nimport { isInSample } from \"./sampling\";\n\nexport * from \"./prompts/promptClients\";\nexport * from \"./media/LangfuseMedia\";\n\nexport { LangfuseMemoryStorage } from \"./storage-memory\";\nexport type { LangfusePromptRecord } from \"./types\";\nexport * as utils from \"./utils\";\nexport type IngestionBody = SingleIngestionEvent[\"body\"];\n\nconst MAX_EVENT_SIZE_BYTES = getEnv(\"LANGFUSE_MAX_EVENT_SIZE_BYTES\")\n  ? Number(getEnv(\"LANGFUSE_MAX_EVENT_SIZE_BYTES\"))\n  : 1_000_000;\nconst MAX_BATCH_SIZE_BYTES = getEnv(\"LANGFUSE_MAX_BATCH_SIZE_BYTES\")\n  ? Number(getEnv(\"LANGFUSE_MAX_BATCH_SIZE_BYTES\"))\n  : 2_500_000;\nconst ENVIRONMENT_PATTERN = /^(?!langfuse)[a-z0-9_-]+$/;\n\nclass LangfuseFetchHttpError extends Error {\n  name = \"LangfuseFetchHttpError\";\n  body: string | undefined;\n\n  constructor(\n    public response: LangfuseFetchResponse,\n    body: string\n  ) {\n    super(\"HTTP error while fetching Langfuse: \" + response.status + \" and body: \" + body);\n  }\n}\n\nclass LangfuseFetchNetworkError extends Error {\n  name = \"LangfuseFetchNetworkError\";\n\n  constructor(public error: unknown) {\n    super(\"Network error while fetching Langfuse\", error instanceof Error ? { cause: error } : {});\n  }\n}\n\nfunction isLangfuseFetchHttpError(error: any): error is LangfuseFetchHttpError {\n  return typeof error === \"object\" && error.name === \"LangfuseFetchHttpError\";\n}\n\nfunction isLangfuseFetchNetworkError(error: any): error is LangfuseFetchNetworkError {\n  return typeof error === \"object\" && error.name === \"LangfuseFetchNetworkError\";\n}\n\nfunction isLangfuseFetchError(err: any): boolean {\n  return isLangfuseFetchHttpError(err) || isLangfuseFetchNetworkError(err);\n}\n\n// Constants for URLs\nconst SUPPORT_URL = \"https://langfuse.com/support\";\nconst API_DOCS_URL = \"https://api.reference.langfuse.com\";\nconst RBAC_DOCS_URL = \"https://langfuse.com/docs/rbac\";\nconst INSTALLATION_DOCS_URL = \"https://langfuse.com/docs/sdk/typescript/guide\";\nconst RATE_LIMITS_URL = \"https://langfuse.com/faq/all/api-limits\";\nconst NPM_PACKAGE_URL = \"https://www.npmjs.com/package/langfuse\";\n\n// Error messages\nconst updatePromptResponse = `Make sure to keep your SDK updated, refer to ${NPM_PACKAGE_URL} for details.`;\nconst defaultServerErrorPrompt = `This is an unusual occurrence and we are monitoring it closely. For help, please contact support: ${SUPPORT_URL}.`;\nconst defaultErrorResponse = `Unexpected error occurred. Please check your request and contact support: ${SUPPORT_URL}.`;\n\n// Error response map\nconst errorResponseByCode = new Map<number, string>([\n  // Internal error category: 5xx errors, 404 error\n  [500, `Internal server error occurred. For help, please contact support: ${SUPPORT_URL}`],\n  [501, `Not implemented. Please check your request and contact support for help: ${SUPPORT_URL}.`],\n  [502, `Bad gateway. ${defaultServerErrorPrompt}`],\n  [503, `Service unavailable. ${defaultServerErrorPrompt}`],\n  [504, `Gateway timeout. ${defaultServerErrorPrompt}`],\n  [404, `Internal error occurred. ${defaultServerErrorPrompt}`],\n\n  // Client error category: 4xx errors, excluding 404\n  [\n    400,\n    `Bad request. Please check your request for any missing or incorrect parameters. Refer to our API docs: ${API_DOCS_URL} for details.`,\n  ],\n  [\n    401,\n    `Unauthorized. Please check your public/private host settings. Refer to our installation and setup guide: ${INSTALLATION_DOCS_URL} for details on SDK configuration.`,\n  ],\n  [403, `Forbidden. Please check your access control settings. Refer to our RBAC docs: ${RBAC_DOCS_URL} for details.`],\n  [429, `Rate limit exceeded. For more information on rate limits please see: ${RATE_LIMITS_URL}`],\n]);\n\n// Returns a user-friendly error message based on the HTTP status code\nfunction getErrorResponseByCode(code: number | undefined): string {\n  if (!code) {\n    return `${defaultErrorResponse} ${updatePromptResponse}`;\n  }\n\n  const errorResponse = errorResponseByCode.get(code) || defaultErrorResponse;\n  return `${code}: ${errorResponse} ${updatePromptResponse}`;\n}\n\nfunction logIngestionError(error: any): void {\n  if (isLangfuseFetchHttpError(error)) {\n    const code = error.response.status;\n    const errorResponse = getErrorResponseByCode(code);\n    console.error(\"[Langfuse SDK]\", errorResponse, `Error details: ${error}`);\n  } else if (isLangfuseFetchNetworkError(error)) {\n    console.error(\"[Langfuse SDK] Network error: \", error);\n  } else {\n    console.error(\"[Langfuse SDK] Unknown error:\", error);\n  }\n}\n\nabstract class LangfuseCoreStateless {\n  // options\n  protected secretKey: string | undefined;\n  protected publicKey: string;\n  baseUrl: string;\n  additionalHeaders: Record<string, string> = {};\n  private flushAt: number;\n  private flushInterval: number;\n  private requestTimeout: number;\n  private removeDebugCallback?: () => void;\n  private debugMode: boolean = false;\n  private pendingEventProcessingPromises: Record<string, Promise<any>> = {};\n  private pendingIngestionPromises: Record<string, Promise<any>> = {};\n  private release: string | undefined;\n  protected sdkIntegration: string;\n  private enabled: boolean;\n  protected isLocalEventExportEnabled: boolean;\n  private localEventExportMap: Map<string, SingleIngestionEvent[]> = new Map();\n  private projectId: string | undefined;\n  private mask: MaskFunction | undefined;\n  private sampleRate: number | undefined;\n  private environment: string | undefined;\n\n  // internal\n  protected _events = new SimpleEventEmitter();\n  protected _flushTimer?: any;\n  protected _retryOptions: RetriableOptions;\n\n  // Abstract methods to be overridden by implementations\n  abstract fetch(url: string, options: LangfuseFetchOptions): Promise<LangfuseFetchResponse>;\n  abstract getLibraryId(): string;\n  abstract getLibraryVersion(): string;\n\n  // This is our abstracted storage. Each implementation should handle its own\n  abstract getPersistedProperty<T>(key: LangfusePersistedProperty): T | undefined;\n  abstract setPersistedProperty<T>(key: LangfusePersistedProperty, value: T | null): void;\n\n  constructor(params: LangfuseCoreOptions) {\n    const { publicKey, secretKey, enabled, _projectId, _isLocalEventExportEnabled, ...options } = params;\n\n    this._events.on(\"error\", (payload) => {\n      console.error(`[Langfuse SDK] ${typeof payload === \"string\" ? payload : JSON.stringify(payload)}`);\n    });\n\n    this.enabled = enabled === false ? false : true;\n    this.publicKey = publicKey ?? \"\";\n    this.secretKey = secretKey;\n    this.baseUrl = removeTrailingSlash(options?.baseUrl || \"https://cloud.langfuse.com\");\n    this.additionalHeaders = options?.additionalHeaders || {};\n    this.flushAt = options?.flushAt ? Math.max(options?.flushAt, 1) : 15;\n    this.flushInterval = options?.flushInterval ?? 10000;\n    this.release = options?.release ?? getEnv(\"LANGFUSE_RELEASE\") ?? getCommonReleaseEnvs() ?? undefined;\n    this.mask = options?.mask;\n    this.sampleRate =\n      options?.sampleRate ?? (getEnv(\"LANGFUSE_SAMPLE_RATE\") ? Number(getEnv(\"LANGFUSE_SAMPLE_RATE\")) : undefined);\n\n    if (this.sampleRate) {\n      this._events.emit(\"debug\", `Langfuse trace sampling enabled with sampleRate ${this.sampleRate}.`);\n    }\n\n    this.environment = options?.environment ?? getEnv(\"LANGFUSE_TRACING_ENVIRONMENT\");\n    if (this.environment && !ENVIRONMENT_PATTERN.test(this.environment)) {\n      this._events.emit(\n        \"error\",\n        `Invalid tracing environment set: ${this.environment} . Environment must match regex ${ENVIRONMENT_PATTERN}. Events will be rejected by Langfuse server.`\n      );\n    }\n\n    this._retryOptions = {\n      retryCount: options?.fetchRetryCount ?? 3,\n      retryDelay: options?.fetchRetryDelay ?? 3000,\n      retryCheck: isLangfuseFetchError,\n    };\n    this.requestTimeout = options?.requestTimeout ?? 5000; // 5 seconds\n\n    this.sdkIntegration = options?.sdkIntegration ?? \"DEFAULT\";\n\n    this.isLocalEventExportEnabled = _isLocalEventExportEnabled ?? false;\n\n    if (this.isLocalEventExportEnabled && !_projectId) {\n      this._events.emit(\n        \"error\",\n        \"Local event export is enabled, but no project ID was provided. Disabling local export.\"\n      );\n      this.isLocalEventExportEnabled = false;\n      return;\n    } else if (!this.isLocalEventExportEnabled && _projectId) {\n      this._events.emit(\n        \"error\",\n        \"Local event export is disabled, but a project ID was provided. Disabling local export.\"\n      );\n      this.isLocalEventExportEnabled = false;\n      return;\n    } else {\n      this.projectId = _projectId;\n    }\n  }\n\n  getSdkIntegration(): string {\n    return this.sdkIntegration;\n  }\n\n  protected getCommonEventProperties(): any {\n    return {\n      $lib: this.getLibraryId(),\n      $lib_version: this.getLibraryVersion(),\n    };\n  }\n\n  on(event: string, cb: (...args: any[]) => void): () => void {\n    return this._events.on(event, cb);\n  }\n\n  debug(enabled: boolean = true): void {\n    this.removeDebugCallback?.();\n\n    this.debugMode = enabled;\n\n    if (enabled) {\n      this.removeDebugCallback = this.on(\"*\", (event, payload) => {\n        // we already have a logger attached to error events\n        if (event === \"error\") {\n          return;\n        }\n\n        console.log(\"[Langfuse Debug]\", event, JSON.stringify(payload));\n      });\n    }\n  }\n\n  /***\n   *** Handlers for each object type\n   ***/\n  protected traceStateless(body: CreateLangfuseTraceBody): string {\n    const { id: bodyId, timestamp: bodyTimestamp, release: bodyRelease, ...rest } = body;\n\n    const id = bodyId ?? generateUUID();\n    const release = bodyRelease ?? this.release;\n\n    const parsedBody: CreateLangfuseTraceBody = {\n      id,\n      release,\n      timestamp: bodyTimestamp ?? new Date(),\n      environment: this.environment,\n      ...rest,\n    };\n    this.enqueue(\"trace-create\", parsedBody);\n    return id;\n  }\n\n  protected eventStateless(body: CreateLangfuseEventBody): string {\n    const { id: bodyId, startTime: bodyStartTime, ...rest } = body;\n\n    const id = bodyId ?? generateUUID();\n\n    const parsedBody: CreateLangfuseEventBody = {\n      id,\n      startTime: bodyStartTime ?? new Date(),\n      environment: this.environment,\n      ...rest,\n    };\n    this.enqueue(\"event-create\", parsedBody);\n    return id;\n  }\n\n  protected spanStateless(body: CreateLangfuseSpanBody): string {\n    const { id: bodyId, startTime: bodyStartTime, ...rest } = body;\n\n    const id = bodyId || generateUUID();\n\n    const parsedBody: CreateLangfuseSpanBody = {\n      id,\n      startTime: bodyStartTime ?? new Date(),\n      environment: this.environment,\n      ...rest,\n    };\n    this.enqueue(\"span-create\", parsedBody);\n    return id;\n  }\n\n  protected generationStateless(\n    body: Omit<CreateLangfuseGenerationBody, \"promptName\" | \"promptVersion\"> & PromptInput\n  ): string {\n    const { id: bodyId, startTime: bodyStartTime, prompt, ...rest } = body;\n    const promptDetails =\n      prompt && !prompt.isFallback ? { promptName: prompt.name, promptVersion: prompt.version } : {};\n\n    const id = bodyId || generateUUID();\n\n    const parsedBody: CreateLangfuseGenerationBody = {\n      id,\n      startTime: bodyStartTime ?? new Date(),\n      environment: this.environment,\n      ...promptDetails,\n      ...rest,\n    };\n\n    this.enqueue(\"generation-create\", parsedBody);\n    return id;\n  }\n\n  protected scoreStateless(body: CreateLangfuseScoreBody): string {\n    const { id: bodyId, ...rest } = body;\n\n    const id = bodyId || generateUUID();\n\n    const parsedBody: CreateLangfuseScoreBody = {\n      id,\n      environment: this.environment,\n      ...rest,\n    };\n    this.enqueue(\"score-create\", parsedBody);\n    return id;\n  }\n\n  protected updateSpanStateless(body: UpdateLangfuseSpanBody): string {\n    this.enqueue(\"span-update\", body);\n    return body.id;\n  }\n\n  protected updateGenerationStateless(\n    body: Omit<UpdateLangfuseGenerationBody, \"promptName\" | \"promptVersion\"> & PromptInput\n  ): string {\n    const { prompt, ...rest } = body;\n    const promptDetails =\n      prompt && !prompt.isFallback ? { promptName: prompt.name, promptVersion: prompt.version } : {};\n\n    const parsedBody: UpdateLangfuseGenerationBody = {\n      ...promptDetails,\n      ...rest,\n    };\n    this.enqueue(\"generation-update\", parsedBody);\n    return body.id;\n  }\n\n  protected async _getDataset(name: GetLangfuseDatasetParams[\"datasetName\"]): Promise<GetLangfuseDatasetResponse> {\n    const encodedName = encodeURIComponent(name);\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/v2/datasets/${encodedName}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n  }\n\n  protected async _getDatasetItems(query: GetLangfuseDatasetItemsQuery): Promise<GetLangfuseDatasetItemsResponse> {\n    const params = new URLSearchParams();\n    Object.entries(query ?? {}).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        params.append(key, value.toString());\n      }\n    });\n\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/dataset-items?${params}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n  }\n\n  protected async _fetchMedia(id: string): Promise<GetMediaResponse> {\n    return this.fetchAndLogErrors(`${this.baseUrl}/api/public/media/${id}`, this._getFetchOptions({ method: \"GET\" }));\n  }\n\n  async fetchTraces(query?: GetLangfuseTracesQuery): Promise<GetLangfuseTracesResponse> {\n    // destructure the response into data and meta to be explicit about the shape of the response and add type-warnings in case the API changes\n    const { data, meta } = await this.fetchAndLogErrors<GetLangfuseTracesResponse>(\n      `${this.baseUrl}/api/public/traces?${encodeQueryParams(query)}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n    return { data, meta };\n  }\n\n  async fetchTrace(traceId: string): Promise<{ data: GetLangfuseTraceResponse }> {\n    const res = await this.fetchAndLogErrors<GetLangfuseTraceResponse>(\n      `${this.baseUrl}/api/public/traces/${traceId}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n    return { data: res };\n  }\n\n  async fetchObservations(query?: GetLangfuseObservationsQuery): Promise<GetLangfuseObservationsResponse> {\n    // destructure the response into data and meta to be explicit about the shape of the response and add type-warnings in case the API changes\n    const { data, meta } = await this.fetchAndLogErrors<GetLangfuseObservationsResponse>(\n      `${this.baseUrl}/api/public/observations?${encodeQueryParams(query)}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n\n    return { data, meta };\n  }\n\n  async fetchObservation(observationId: string): Promise<{ data: GetLangfuseObservationResponse }> {\n    const res = await this.fetchAndLogErrors<GetLangfuseObservationResponse>(\n      `${this.baseUrl}/api/public/observations/${observationId}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n\n    return { data: res };\n  }\n\n  async fetchSessions(query?: GetLangfuseSessionsQuery): Promise<GetLangfuseSessionsResponse> {\n    // destructure the response into data and meta to be explicit about the shape of the response and add type-warnings in case the API changes\n    const { data, meta } = await this.fetchAndLogErrors<GetLangfuseSessionsResponse>(\n      `${this.baseUrl}/api/public/sessions?${encodeQueryParams(query)}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n\n    return { data, meta };\n  }\n\n  async getDatasetRun(params: GetLangfuseDatasetRunParams): Promise<GetLangfuseDatasetRunResponse> {\n    const encodedDatasetName = encodeURIComponent(params.datasetName);\n    const encodedRunName = encodeURIComponent(params.runName);\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/datasets/${encodedDatasetName}/runs/${encodedRunName}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n  }\n\n  async getDatasetRuns(\n    datasetName: string,\n    query?: GetLangfuseDatasetRunsQuery\n  ): Promise<GetLangfuseDatasetRunsResponse> {\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/datasets/${encodeURIComponent(datasetName)}/runs?${encodeQueryParams(query)}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n  }\n\n  async createDatasetRunItem(body: CreateLangfuseDatasetRunItemBody): Promise<CreateLangfuseDatasetRunItemResponse> {\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/dataset-run-items`,\n      this._getFetchOptions({ method: \"POST\", body: JSON.stringify(body) })\n    );\n  }\n\n  /**\n   * Creates a dataset. Upserts the dataset if it already exists.\n   *\n   * @param dataset Can be either a string (name) or an object with name, description and metadata\n   * @returns A promise that resolves to the response of the create operation.\n   */\n  async createDataset(\n    dataset:\n      | string // name\n      | {\n          name: string;\n          description?: string;\n          metadata?: any;\n        }\n  ): Promise<CreateLangfuseDatasetResponse> {\n    const body: CreateLangfuseDatasetBody = typeof dataset === \"string\" ? { name: dataset } : dataset;\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/datasets`,\n      this._getFetchOptions({ method: \"POST\", body: JSON.stringify(body) })\n    );\n  }\n\n  /**\n   * Creates a dataset item. Upserts the item if it already exists.\n   * @param body The body of the dataset item to be created.\n   * @returns A promise that resolves to the response of the create operation.\n   */\n  async createDatasetItem(body: CreateLangfuseDatasetItemBody): Promise<CreateLangfuseDatasetItemResponse> {\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/dataset-items`,\n      this._getFetchOptions({ method: \"POST\", body: JSON.stringify(body) })\n    );\n  }\n\n  async getDatasetItem(id: string): Promise<CreateLangfuseDatasetItemResponse> {\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/dataset-items/${id}`,\n      this._getFetchOptions({ method: \"GET\" })\n    );\n  }\n\n  protected _parsePayload(response: any): any {\n    try {\n      return JSON.parse(response);\n    } catch {\n      return response;\n    }\n  }\n\n  async createPromptStateless(body: CreateLangfusePromptBody): Promise<CreateLangfusePromptResponse> {\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/v2/prompts`,\n      this._getFetchOptions({ method: \"POST\", body: JSON.stringify(body) })\n    );\n  }\n\n  async updatePromptStateless(\n    body: UpdatePromptBody & { name: string; version: number }\n  ): Promise<LangfusePromptClient> {\n    return this.fetchAndLogErrors(\n      `${this.baseUrl}/api/public/v2/prompts/${encodeURIComponent(body.name)}/versions/${encodeURIComponent(body.version)}`,\n      this._getFetchOptions({ method: \"PATCH\", body: JSON.stringify(body) })\n    );\n  }\n\n  async getPromptStateless(\n    name: string,\n    version?: number,\n    label?: string,\n    maxRetries?: number,\n    requestTimeout?: number // this will override the default requestTimeout for fetching prompts. Together with maxRetries, it can be used to fetch prompts fast when the first fetch is slow.\n  ): Promise<GetLangfusePromptResponse> {\n    const encodedName = encodeURIComponent(name);\n    const params = new URLSearchParams();\n\n    // Add parameters only if they are provided\n    if (version && label) {\n      throw new Error(\"Provide either version or label, not both.\");\n    }\n\n    if (version) {\n      params.append(\"version\", version.toString());\n    }\n\n    if (label) {\n      params.append(\"label\", label);\n    }\n\n    const url = `${this.baseUrl}/api/public/v2/prompts/${encodedName}${params.size ? \"?\" + params : \"\"}`;\n\n    const boundedMaxRetries = this._getBoundedMaxRetries({ maxRetries, defaultMaxRetries: 2, maxRetriesUpperBound: 4 });\n    const retryOptions = { ...this._retryOptions, retryCount: boundedMaxRetries, retryDelay: 500 };\n    const retryLogger = (string: string): void =>\n      this._events.emit(\"retry\", string + \", \" + url + \", \" + JSON.stringify(retryOptions));\n\n    return retriable(\n      async () => {\n        const res = await this.fetch(\n          url,\n          this._getFetchOptions({ method: \"GET\", fetchTimeout: requestTimeout ?? this.requestTimeout })\n        ).catch((e) => {\n          if (e.name === \"AbortError\") {\n            throw new LangfuseFetchNetworkError(\"Fetch request timed out\");\n          }\n          throw new LangfuseFetchNetworkError(e);\n        });\n\n        if (res.status >= 500) {\n          throw new LangfuseFetchHttpError(res, await res.text());\n        }\n\n        const data = await res.json();\n\n        return { fetchResult: res.status === 200 ? \"success\" : \"failure\", data };\n      },\n      retryOptions,\n      retryLogger\n    );\n  }\n\n  private _getBoundedMaxRetries(params: {\n    maxRetries?: number;\n    defaultMaxRetries?: number;\n    maxRetriesUpperBound?: number;\n  }): number {\n    const defaultMaxRetries = Math.max(params.defaultMaxRetries ?? 2, 0);\n    const maxRetriesUpperBound = Math.max(params.maxRetriesUpperBound ?? 4, 0);\n\n    if (params.maxRetries === undefined) {\n      return defaultMaxRetries;\n    }\n\n    return Math.min(Math.max(params.maxRetries, 0), maxRetriesUpperBound);\n  }\n\n  /***\n   *** QUEUEING AND FLUSHING\n   ***/\n  protected enqueue(type: LangfuseObject, body: EventBody): void {\n    if (!this.enabled) {\n      return;\n    }\n\n    // Sampling\n    const traceId = this.parseTraceId(type, body);\n    if (!traceId) {\n      this._events.emit(\n        \"warning\",\n        \"Failed to parse traceID for sampling. Please open a Github issue in https://github.com/langfuse/langfuse/issues/new/choose\"\n      );\n    } else if (!isInSample(traceId, this.sampleRate)) {\n      this._events.emit(\"debug\", `Event with trace ID ${traceId} is out of sample. Skipping.`);\n\n      return;\n    }\n\n    const promise = this.processEnqueueEvent(type, body);\n    const promiseId = generateUUID();\n    this.pendingEventProcessingPromises[promiseId] = promise;\n\n    promise\n      .catch((e) => {\n        this._events.emit(\"error\", e);\n      })\n      .finally(() => {\n        delete this.pendingEventProcessingPromises[promiseId];\n      });\n  }\n\n  protected async processEnqueueEvent(type: LangfuseObject, body: EventBody): Promise<void> {\n    this.maskEventBodyInPlace(body);\n    await this.processMediaInEvent(type, body);\n    const finalEventBody = this.truncateEventBody(body, MAX_EVENT_SIZE_BYTES);\n\n    try {\n      JSON.stringify(finalEventBody);\n    } catch (e) {\n      this._events.emit(\"error\", `Event Body for ${type} is not JSON-serializable: ${e}`);\n      return;\n    }\n\n    const queue = this.getPersistedProperty<LangfuseQueueItem[]>(LangfusePersistedProperty.Queue) || [];\n\n    queue.push({\n      id: generateUUID(),\n      type,\n      timestamp: currentISOTime(),\n      body: finalEventBody as any, // TODO: fix typecast. EventBody is not correctly narrowed to the correct type dictated by the 'type' property. This should be part of a larger type cleanup.\n      metadata: undefined,\n    });\n    this.setPersistedProperty<LangfuseQueueItem[]>(LangfusePersistedProperty.Queue, queue);\n\n    this._events.emit(type, finalEventBody);\n\n    // Flush queued events if we meet the flushAt length\n    if (queue.length >= this.flushAt) {\n      this.flush();\n    }\n\n    if (this.flushInterval && !this._flushTimer) {\n      this._flushTimer = safeSetTimeout(() => this.flush(), this.flushInterval);\n    }\n  }\n\n  private maskEventBodyInPlace(body: EventBody): void {\n    if (!this.mask) {\n      return;\n    }\n\n    const maskableKeys = [\"input\", \"output\"] as const;\n\n    for (const key of maskableKeys) {\n      if (key in body) {\n        try {\n          body[key as keyof EventBody] = this.mask({ data: body[key as keyof EventBody] });\n        } catch (e) {\n          this._events.emit(\"error\", `Error masking ${key}: ${e}`);\n          body[key as keyof EventBody] = \"<fully masked due to failed mask function>\";\n        }\n      }\n    }\n  }\n\n  /**\n   * Truncates the event body if its byte size exceeds the specified maximum byte size.\n   * Emits a warning event if truncation occurs.\n   * The fields that may be truncated are: \"input\", \"output\", and \"metadata\".\n   * The fields are truncated in the order of their size, from largest to smallest until the total byte size is within the limit.\n   */\n  protected truncateEventBody(body: EventBody, maxByteSize: number): EventBody {\n    const bodySize = this.getByteSize(body);\n\n    if (bodySize <= maxByteSize) {\n      return body;\n    }\n\n    this._events.emit(\"warning\", `Event Body is too large (${bodySize} bytes) and will be truncated`);\n\n    // Sort keys by size and truncate the largest keys first\n    const keysToCheck = [\"input\", \"output\", \"metadata\"] as const;\n    const keySizes = keysToCheck\n      .map((key) => ({ key, size: key in body ? this.getByteSize(body[key as keyof typeof body]) : 0 }))\n      .sort((a, b) => b.size - a.size);\n\n    let result = { ...body };\n    let currentSize = bodySize;\n\n    for (const { key, size } of keySizes) {\n      if (currentSize > maxByteSize && Object.prototype.hasOwnProperty.call(result, key)) {\n        result = { ...result, [key]: \"<truncated due to size exceeding limit>\" };\n\n        this._events.emit(\"warning\", `Truncated ${key} due to total size exceeding limit`);\n\n        currentSize -= size;\n      }\n    }\n\n    return result;\n  }\n\n  private getByteSize(obj: any): number {\n    const serialized = JSON.stringify(obj);\n\n    // Use TextEncoder if available, otherwise fallback to encodeURIComponent\n    if (typeof TextEncoder !== \"undefined\") {\n      return new TextEncoder().encode(serialized).length;\n    } else {\n      return encodeURIComponent(serialized).replace(/%[A-F\\d]{2}/g, \"U\").length;\n    }\n  }\n\n  protected async processMediaInEvent(type: LangfuseObject, body: EventBody): Promise<void> {\n    if (!body) {\n      return;\n    }\n\n    const traceId = this.parseTraceId(type, body);\n\n    if (!traceId) {\n      this._events.emit(\"warning\", \"traceId is required for media upload\");\n      return;\n    }\n\n    const observationId = (type.includes(\"generation\") || type.includes(\"span\")) && body.id ? body.id : undefined;\n\n    await Promise.all(\n      ([\"input\", \"output\", \"metadata\"] as const).map(async (field) => {\n        if (body[field as keyof EventBody]) {\n          body[field as keyof EventBody] =\n            (await this.findAndProcessMedia({\n              data: body[field as keyof EventBody],\n              traceId,\n              observationId,\n              field,\n            }).catch((e) => {\n              this._events.emit(\"error\", `Error processing multimodal event: ${e}`);\n            })) ?? body[field as keyof EventBody];\n        }\n      })\n    );\n  }\n\n  protected parseTraceId(type: LangfuseObject, body: EventBody): string | null | undefined {\n    return \"traceId\" in body ? body.traceId : type.includes(\"trace\") ? body.id : undefined;\n  }\n\n  protected async findAndProcessMedia({\n    data,\n    traceId,\n    observationId,\n    field,\n  }: {\n    data: any;\n    traceId: string;\n    observationId?: string;\n    field: \"input\" | \"output\" | \"metadata\";\n  }): Promise<any> {\n    const seenObjects = new WeakMap();\n    const maxLevels = 10;\n\n    const processRecursively = async (data: any, level: number): Promise<any> => {\n      if (typeof data === \"string\" && data.startsWith(\"data:\")) {\n        const media = new LangfuseMedia({ base64DataUri: data });\n        await this.processMediaItem({ media, traceId, observationId, field });\n\n        return media;\n      }\n      if (typeof data !== \"object\" || data === null) {\n        return data;\n      }\n\n      // Use WeakMap to detect cycles\n      if (seenObjects.has(data) || level > maxLevels) {\n        return data;\n      }\n\n      seenObjects.set(data, true);\n\n      if (data instanceof LangfuseMedia || Object.prototype.toString.call(data) === \"[object LangfuseMedia]\") {\n        await this.processMediaItem({ media: data, traceId, observationId, field });\n\n        return data;\n      }\n\n      if (Array.isArray(data)) {\n        return await Promise.all(data.map((item) => processRecursively(item, level + 1)));\n      }\n\n      // Parse OpenAI input audio data which is passed as base64 string NOT in the data uri format\n      if (typeof data === \"object\" && data !== null) {\n        if (\"input_audio\" in data && typeof data[\"input_audio\"] === \"object\" && \"data\" in data.input_audio) {\n          const media = new LangfuseMedia({\n            base64DataUri: `data:audio/${data.input_audio[\"format\"] || \"wav\"};base64,${data.input_audio.data}`,\n          });\n\n          await this.processMediaItem({ media, traceId, observationId, field });\n\n          return {\n            ...data,\n            input_audio: {\n              ...data.input_audio,\n              data: media,\n            },\n          };\n        }\n\n        // OpenAI output audio data is passed as base64 string NOT in the data uri format\n        if (\"audio\" in data && typeof data[\"audio\"] === \"object\" && \"data\" in data.audio) {\n          const media = new LangfuseMedia({\n            base64DataUri: `data:audio/${data.audio[\"format\"] || \"wav\"};base64,${data.audio.data}`,\n          });\n\n          await this.processMediaItem({ media, traceId, observationId, field });\n\n          return {\n            ...data,\n            audio: {\n              ...data.audio,\n              data: media,\n            },\n          };\n        }\n\n        // Recursively process nested objects\n        return Object.fromEntries(\n          await Promise.all(\n            Object.entries(data).map(async ([key, value]) => [key, await processRecursively(value, level + 1)])\n          )\n        );\n      }\n\n      return data;\n    };\n\n    return await processRecursively(data, 1);\n  }\n\n  private async processMediaItem({\n    media,\n    traceId,\n    observationId,\n    field,\n  }: {\n    media: LangfuseMedia;\n    traceId: string;\n    observationId?: string;\n    field: string;\n  }): Promise<void> {\n    try {\n      if (!media.contentLength || !media._contentType || !media.contentSha256Hash || !media._contentBytes) {\n        return;\n      }\n\n      const getUploadUrlBody: GetMediaUploadUrlRequest = {\n        contentLength: media.contentLength,\n        traceId,\n        observationId,\n        field,\n        contentType: media._contentType,\n        sha256Hash: media.contentSha256Hash,\n      };\n\n      const fetchResponse = await this.fetch(\n        `${this.baseUrl}/api/public/media`,\n        this._getFetchOptions({\n          method: \"POST\",\n          body: JSON.stringify(getUploadUrlBody),\n        })\n      );\n\n      const uploadUrlResponse = (await fetchResponse.json()) as GetMediaUploadUrlResponse;\n\n      const { uploadUrl, mediaId } = uploadUrlResponse;\n      media._mediaId = mediaId;\n\n      if (uploadUrl) {\n        this._events.emit(\"debug\", `Uploading media ${mediaId}`);\n        const startTime = Date.now();\n\n        const uploadResponse = await this.uploadMediaWithBackoff({\n          uploadUrl,\n          contentBytes: media._contentBytes,\n          contentType: media._contentType,\n          contentSha256Hash: media.contentSha256Hash,\n          maxRetries: 3,\n          baseDelay: 1000,\n        });\n\n        if (!uploadResponse) {\n          throw Error(\"Media upload process failed\");\n        }\n\n        const patchMediaBody: PatchMediaBody = {\n          uploadedAt: new Date().toISOString(),\n          uploadHttpStatus: uploadResponse.status,\n          uploadHttpError: await uploadResponse.text(),\n          uploadTimeMs: Date.now() - startTime,\n        };\n\n        await this.fetch(\n          `${this.baseUrl}/api/public/media/${mediaId}`,\n          this._getFetchOptions({ method: \"PATCH\", body: JSON.stringify(patchMediaBody) })\n        );\n        this._events.emit(\"debug\", `Media upload status reported for ${mediaId}`);\n      } else {\n        this._events.emit(\"debug\", `Media ${mediaId} already uploaded`);\n      }\n    } catch (err) {\n      this._events.emit(\"error\", `Error processing media item: ${err}`);\n    }\n  }\n\n  private async uploadMediaWithBackoff(params: {\n    uploadUrl: string;\n    contentType: string;\n    contentSha256Hash: string;\n    contentBytes: Buffer;\n    maxRetries: number;\n    baseDelay: number;\n  }): Promise<LangfuseFetchResponse | undefined> {\n    const { uploadUrl, contentType, contentSha256Hash, contentBytes, maxRetries, baseDelay } = params;\n\n    for (let attempt = 0; attempt <= maxRetries; attempt++) {\n      try {\n        const uploadResponse = await this.fetch(uploadUrl, {\n          method: \"PUT\",\n          body: contentBytes,\n          headers: {\n            \"Content-Type\": contentType,\n            \"x-amz-checksum-sha256\": contentSha256Hash,\n            \"x-ms-blob-type\": \"BlockBlob\",\n          },\n        });\n\n        if (attempt < maxRetries && uploadResponse.status !== 200 && uploadResponse.status !== 201) {\n          throw new Error(`Upload failed with status ${uploadResponse.status}`);\n        }\n\n        return uploadResponse;\n      } catch (e) {\n        if (attempt === maxRetries) {\n          throw e;\n        }\n\n        const delay = baseDelay * Math.pow(2, attempt);\n        const jitter = Math.random() * 1000;\n\n        await new Promise((resolve) => setTimeout(resolve, delay + jitter));\n      }\n    }\n  }\n\n  /**\n   * Asynchronously flushes all events that are not yet sent to the server.\n   * This function always resolves, even if there were errors when flushing.\n   * Errors are emitted as \"error\" events and the promise resolves.\n   *\n   * @returns {Promise<void>} A promise that resolves when the flushing is completed.\n   */\n  async flushAsync(): Promise<void> {\n    await Promise.all(Object.values(this.pendingEventProcessingPromises)).catch((e) => {\n      logIngestionError(e);\n    });\n\n    return new Promise((resolve, _reject) => {\n      try {\n        this.flush((err, data) => {\n          if (err) {\n            logIngestionError(err);\n            resolve();\n          } else {\n            resolve(data);\n          }\n        });\n        // safeguard against unexpected synchronous errors\n      } catch (e) {\n        console.error(\"[Langfuse SDK] Error while flushing Langfuse\", e);\n      }\n    });\n  }\n\n  // Flushes all events that are not yet sent to the server\n  flush(callback?: (err?: any, data?: any) => void): void {\n    if (this._flushTimer) {\n      clearTimeout(this._flushTimer);\n      this._flushTimer = null;\n    }\n\n    const queue = this.getPersistedProperty<LangfuseQueueItem[]>(LangfusePersistedProperty.Queue) || [];\n\n    if (!queue.length) {\n      return callback?.();\n    }\n\n    const items = queue.splice(0, this.flushAt);\n\n    const { processedItems, remainingItems } = this.processQueueItems(\n      items,\n      MAX_EVENT_SIZE_BYTES,\n      MAX_BATCH_SIZE_BYTES\n    );\n\n    this.setPersistedProperty<LangfuseQueueItem[]>(LangfusePersistedProperty.Queue, [...remainingItems, ...queue]);\n\n    const promiseUUID = generateUUID();\n\n    const done = (err?: any): void => {\n      if (err) {\n        this._events.emit(\"warning\", err);\n      }\n      callback?.(err, items);\n      this._events.emit(\"flush\", items);\n    };\n\n    // If local event export is enabled, we don't send the events to the server, but instead store them in the localEventExportMap\n    if (this.isLocalEventExportEnabled && this.projectId) {\n      if (!this.localEventExportMap.has(this.projectId)) {\n        this.localEventExportMap.set(this.projectId, [...items]);\n      } else {\n        this.localEventExportMap.get(this.projectId)?.push(...items);\n      }\n\n      done();\n      return;\n    }\n\n    const payload = JSON.stringify({\n      batch: processedItems,\n      metadata: {\n        batch_size: processedItems.length,\n        sdk_integration: this.sdkIntegration,\n        sdk_version: this.getLibraryVersion(),\n        sdk_variant: this.getLibraryId(),\n        public_key: this.publicKey,\n        sdk_name: \"langfuse-js\",\n      },\n    }); // implicit conversion also of dates to strings\n\n    const url = `${this.baseUrl}/api/public/ingestion`;\n\n    const fetchOptions = this._getFetchOptions({\n      method: \"POST\",\n      body: payload,\n    });\n\n    const requestPromise = this.fetchWithRetry(url, fetchOptions)\n      .then(() => done())\n      .catch((err) => {\n        done(err);\n      });\n    this.pendingIngestionPromises[promiseUUID] = requestPromise;\n    requestPromise.finally(() => {\n      delete this.pendingIngestionPromises[promiseUUID];\n    });\n  }\n\n  public processQueueItems(\n    queue: LangfuseQueueItem[],\n    MAX_MSG_SIZE: number,\n    BATCH_SIZE_LIMIT: number\n  ): { processedItems: LangfuseQueueItem[]; remainingItems: LangfuseQueueItem[] } {\n    let totalSize = 0;\n    const processedItems: LangfuseQueueItem[] = [];\n    const remainingItems: LangfuseQueueItem[] = [];\n\n    for (let i = 0; i < queue.length; i++) {\n      try {\n        const itemSize = new Blob([JSON.stringify(queue[i])]).size;\n\n        // discard item if it exceeds the maximum size per event\n        if (itemSize > MAX_MSG_SIZE) {\n          console.warn(`Item exceeds size limit (size: ${itemSize}), dropping item.`);\n          continue;\n        }\n\n        // if adding the next item would exceed the batch size limit, stop processing\n        if (totalSize + itemSize >= BATCH_SIZE_LIMIT) {\n          console.debug(`hit batch size limit (size: ${totalSize + itemSize})`);\n          remainingItems.push(...queue.slice(i));\n          console.log(`Remaining items: ${remainingItems.length}`);\n          console.log(`processes items: ${processedItems.length}`);\n          break;\n        }\n\n        // only add the item if it passes both requirements\n        totalSize += itemSize;\n        processedItems.push(queue[i]);\n      } catch (error) {\n        this._events.emit(\"error\", error);\n        remainingItems.push(...queue.slice(i));\n        break;\n      }\n    }\n\n    return { processedItems, remainingItems };\n  }\n\n  _getFetchOptions(p: {\n    method: LangfuseFetchOptions[\"method\"];\n    body?: LangfuseFetchOptions[\"body\"];\n    fetchTimeout?: number;\n  }): LangfuseFetchOptions {\n    const fetchOptions: LangfuseFetchOptions = {\n      method: p.method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-Langfuse-Sdk-Name\": \"langfuse-js\",\n        \"X-Langfuse-Sdk-Version\": this.getLibraryVersion(),\n        \"X-Langfuse-Sdk-Variant\": this.getLibraryId(),\n        \"X-Langfuse-Sdk-Integration\": this.sdkIntegration,\n        \"X-Langfuse-Public-Key\": this.publicKey,\n        ...this.additionalHeaders,\n        ...this.constructAuthorizationHeader(this.publicKey, this.secretKey),\n      },\n      body: p.body,\n      ...(p.fetchTimeout !== undefined ? { signal: AbortSignal.timeout(p.fetchTimeout) } : {}),\n    };\n\n    return fetchOptions;\n  }\n\n  protected constructAuthorizationHeader(\n    publicKey: string,\n    secretKey?: string\n  ): {\n    Authorization: string;\n  } {\n    if (secretKey === undefined) {\n      return { Authorization: \"Bearer \" + publicKey };\n    } else {\n      const encodedCredentials =\n        typeof btoa === \"function\"\n          ? // btoa() is available, the code is running in a browser or edge environment\n            btoa(publicKey + \":\" + secretKey)\n          : // btoa() is not available, the code is running in Node.js\n            Buffer.from(publicKey + \":\" + secretKey).toString(\"base64\");\n\n      return { Authorization: \"Basic \" + encodedCredentials };\n    }\n  }\n\n  private async fetchWithRetry(\n    url: string,\n    options: LangfuseFetchOptions,\n    retryOptions?: RetriableOptions\n  ): Promise<LangfuseFetchResponse> {\n    (AbortSignal as any).timeout ??= function timeout(ms: number) {\n      const ctrl = new AbortController();\n      setTimeout(() => ctrl.abort(), ms);\n      return ctrl.signal;\n    };\n\n    return await retriable(\n      async () => {\n        let res: LangfuseFetchResponse<IngestionReturnType> | null = null;\n        try {\n          res = await this.fetch(url, {\n            signal: AbortSignal.timeout(this.requestTimeout),\n            ...options,\n          });\n        } catch (e) {\n          // fetch will only throw on network errors or on timeouts\n          throw new LangfuseFetchNetworkError(e);\n        }\n\n        if (res.status < 200 || res.status >= 400) {\n          const body = await res.json();\n          throw new LangfuseFetchHttpError(res, JSON.stringify(body));\n        }\n        const returnBody = await res.json();\n        if (res.status === 207 && returnBody.errors.length > 0) {\n          throw new LangfuseFetchHttpError(res, JSON.stringify(returnBody.errors));\n        }\n\n        return res;\n      },\n      { ...this._retryOptions, ...retryOptions },\n      (string) => this._events.emit(\"retry\", string + \", \" + url + \", \" + JSON.stringify(options))\n    );\n  }\n\n  private async fetchAndLogErrors<T>(url: string, options: LangfuseFetchOptions): Promise<T> {\n    const res = await this.fetch(url, options);\n\n    // 429 responses do not have a JSON body, so attempting to execute `json()`\n    // will throw and error before the 429 is logged.\n    const data = res.status === 429 ? await res.text() : await res.json();\n    if (res.status < 200 || res.status >= 400) {\n      logIngestionError(new LangfuseFetchHttpError(res, JSON.stringify(data)));\n    }\n\n    return data;\n  }\n\n  async shutdownAsync(): Promise<void> {\n    clearTimeout(this._flushTimer);\n    try {\n      await this.flushAsync();\n      await Promise.all(\n        Object.values(this.pendingIngestionPromises).map((x) =>\n          x.catch(() => {\n            // ignore errors as we are shutting down and can't deal with them anyways.\n          })\n        )\n      );\n      // flush again in case there are new events that were added while we were waiting for the pending promises to resolve\n      await this.flushAsync();\n    } catch (e) {\n      console.error(\"[Langfuse SDK] Error while shutting down Langfuse\", e);\n    }\n  }\n\n  async _exportLocalEvents(projectId: string): Promise<SingleIngestionEvent[]> {\n    if (this.isLocalEventExportEnabled) {\n      clearTimeout(this._flushTimer);\n      await this.flushAsync();\n\n      const events = this.localEventExportMap.get(projectId) ?? [];\n      this.localEventExportMap.delete(projectId);\n\n      return events;\n    } else {\n      this._events.emit(\"error\", \"Local event exports are disabled, but _exportLocalEvents() was called.\");\n      return [];\n    }\n  }\n\n  shutdown(): void {\n    console.warn(\n      \"shutdown() is deprecated. It does not wait for all events to be processed. Please use shutdownAsync() instead.\"\n    );\n    void this.shutdownAsync();\n  }\n\n  protected async awaitAllQueuedAndPendingRequests(): Promise<void> {\n    clearTimeout(this._flushTimer);\n    await this.flushAsync();\n    await Promise.all(Object.values(this.pendingIngestionPromises));\n  }\n}\n\nexport abstract class LangfuseWebStateless extends LangfuseCoreStateless {\n  constructor(params: Omit<LangfuseCoreOptions, \"secretKey\">) {\n    const { flushAt, flushInterval, publicKey, enabled, ...rest } = params;\n    let isObservabilityEnabled = enabled === false ? false : true;\n\n    if (isObservabilityEnabled && !publicKey) {\n      isObservabilityEnabled = false;\n      console.warn(\n        \"Langfuse public key not passed to constructor and not set as 'LANGFUSE_PUBLIC_KEY' environment variable. No observability data will be sent to Langfuse.\"\n      );\n    }\n\n    super({\n      ...rest,\n      publicKey,\n      flushAt: flushAt ?? 1,\n      flushInterval: flushInterval ?? 0,\n      enabled: isObservabilityEnabled,\n    });\n  }\n\n  async score(body: CreateLangfuseScoreBody): Promise<this> {\n    this.scoreStateless(body);\n    await this.awaitAllQueuedAndPendingRequests();\n    return this;\n  }\n}\n\nexport abstract class LangfuseCore extends LangfuseCoreStateless {\n  private _promptCache: LangfusePromptCache;\n\n  constructor(params: LangfuseCoreOptions) {\n    const { publicKey, secretKey, enabled, _isLocalEventExportEnabled } = params;\n    let isObservabilityEnabled = enabled === false ? false : true;\n\n    if (_isLocalEventExportEnabled) {\n      isObservabilityEnabled = true;\n    } else if (!secretKey) {\n      isObservabilityEnabled = false;\n\n      if (enabled !== false) {\n        console.warn(\n          \"Langfuse secret key was not passed to constructor or not set as 'LANGFUSE_SECRET_KEY' environment variable. No observability data will be sent to Langfuse.\"\n        );\n      }\n    } else if (!publicKey) {\n      isObservabilityEnabled = false;\n\n      if (enabled !== false) {\n        console.warn(\n          \"Langfuse public key was not passed to constructor or not set as 'LANGFUSE_PUBLIC_KEY' environment variable. No observability data will be sent to Langfuse.\"\n        );\n      }\n    }\n\n    super({ ...params, enabled: isObservabilityEnabled });\n    this._promptCache = new LangfusePromptCache();\n  }\n\n  trace(body?: CreateLangfuseTraceBody): LangfuseTraceClient {\n    const id = this.traceStateless(body ?? {});\n    const t = new LangfuseTraceClient(this, id);\n    if (getEnv(\"DEFER\") && body) {\n      try {\n        const deferRuntime = getEnv<DeferRuntime>(\"__deferRuntime\");\n        if (deferRuntime) {\n          deferRuntime.langfuseTraces([\n            {\n              id: id,\n              name: body.name || \"\",\n              url: t.getTraceUrl(),\n            },\n          ]);\n        }\n      } catch {}\n    }\n    return t;\n  }\n\n  span(body: CreateLangfuseSpanBody): LangfuseSpanClient {\n    const traceId = body.traceId || this.traceStateless({ name: body.name });\n    const id = this.spanStateless({ ...body, traceId });\n    return new LangfuseSpanClient(this, id, traceId);\n  }\n\n  generation(\n    body: Omit<CreateLangfuseGenerationBody, \"promptName\" | \"promptVersion\"> & PromptInput\n  ): LangfuseGenerationClient {\n    const traceId = body.traceId || this.traceStateless({ name: body.name });\n    const id = this.generationStateless({ ...body, traceId });\n    return new LangfuseGenerationClient(this, id, traceId);\n  }\n\n  event(body: CreateLangfuseEventBody): LangfuseEventClient {\n    const traceId = body.traceId || this.traceStateless({ name: body.name });\n    const id = this.eventStateless({ ...body, traceId });\n    return new LangfuseEventClient(this, id, traceId);\n  }\n\n  score(body: CreateLangfuseScoreBody): this {\n    this.scoreStateless(body);\n    return this;\n  }\n\n  async getDataset(\n    name: string,\n    options?: {\n      fetchItemsPageSize: number;\n    }\n  ): Promise<{\n    id: string;\n    name: string;\n    description?: string;\n    metadata?: any;\n    projectId: string;\n    items: DatasetItem[];\n  }> {\n    const dataset = await this._getDataset(name);\n    const items: GetLangfuseDatasetItemsResponse[\"data\"] = [];\n\n    let page = 1;\n    while (true) {\n      const itemsResponse = await this._getDatasetItems({\n        datasetName: name,\n        limit: options?.fetchItemsPageSize ?? 50,\n        page,\n      });\n      items.push(...itemsResponse.data);\n      if (itemsResponse.meta.totalPages <= page) {\n        break;\n      }\n      page++;\n    }\n\n    const returnDataset = {\n      ...dataset,\n      description: dataset.description ?? undefined,\n      metadata: dataset.metadata ?? undefined,\n      items: items.map((item) => ({\n        ...item,\n        link: async (\n          obj: LangfuseObjectClient,\n          runName: string,\n          runArgs?: {\n            description?: string;\n            metadata?: any;\n          }\n        ) => {\n          await this.awaitAllQueuedAndPendingRequests();\n          const data = await this.createDatasetRunItem({\n            runName,\n            datasetItemId: item.id,\n            observationId: obj.observationId,\n            traceId: obj.traceId,\n            runDescription: runArgs?.description,\n            metadata: runArgs?.metadata,\n          });\n          return data;\n        },\n      })),\n    };\n\n    return returnDataset;\n  }\n\n  async createPrompt(body: CreateChatPromptBodyWithPlaceholders): Promise<ChatPromptClient>;\n  async createPrompt(body: CreateTextPromptBody): Promise<TextPromptClient>;\n  async createPrompt(body: CreateChatPromptBody): Promise<ChatPromptClient>;\n  async createPrompt(\n    body: CreateTextPromptBody | CreateChatPromptBody | CreateChatPromptBodyWithPlaceholders\n  ): Promise<LangfusePromptClient> {\n    const labels = body.labels ?? [];\n\n    const promptResponse =\n      body.type === \"chat\" // necessary to get types right here\n        ? await this.createPromptStateless({\n            ...body,\n            prompt: body.prompt.map((item) => {\n              if (\"type\" in item && item.type === ChatMessageType.Placeholder) {\n                return { type: ChatMessageType.Placeholder, name: (item as PlaceholderMessage).name };\n              } else {\n                // Handle regular ChatMessage (without type field) from API\n                return { type: ChatMessageType.ChatMessage, ...item };\n              }\n            }),\n            labels: body.isActive ? [...new Set([...labels, \"production\"])] : labels, // backward compatibility for isActive\n          })\n        : await this.createPromptStateless({\n            ...body,\n            type: body.type ?? \"text\",\n            labels: body.isActive ? [...new Set([...labels, \"production\"])] : labels, // backward compatibility for isActive\n          });\n\n    if (promptResponse.type === \"chat\") {\n      return new ChatPromptClient(promptResponse);\n    }\n\n    return new TextPromptClient(promptResponse);\n  }\n\n  async updatePrompt(body: { name: string; version: number; newLabels: string[] }): Promise<LangfusePromptClient> {\n    const newPrompt = await this.updatePromptStateless(body);\n    this._promptCache.invalidate(body.name);\n    return newPrompt;\n  }\n\n  async getPrompt(\n    name: string,\n    version?: number,\n    options?: {\n      label?: string;\n      cacheTtlSeconds?: number;\n      fallback?: string;\n      maxRetries?: number;\n      type?: \"text\";\n      fetchTimeoutMs?: number;\n    }\n  ): Promise<TextPromptClient>;\n  async getPrompt(\n    name: string,\n    version?: number,\n    options?: {\n      label?: string;\n      cacheTtlSeconds?: number;\n      fallback?: ChatMessage[];\n      maxRetries?: number;\n      type: \"chat\";\n      fetchTimeoutMs?: number;\n    }\n  ): Promise<ChatPromptClient>;\n  async getPrompt(\n    name: string,\n    version?: number,\n    options?: {\n      label?: string;\n      cacheTtlSeconds?: number;\n      fallback?: ChatMessage[] | string;\n      maxRetries?: number;\n      type?: \"chat\" | \"text\";\n      fetchTimeoutMs?: number;\n    }\n  ): Promise<LangfusePromptClient> {\n    const cacheKey = this._getPromptCacheKey({ name, version, label: options?.label });\n    const cachedPrompt = this._promptCache.getIncludingExpired(cacheKey);\n    if (!cachedPrompt || options?.cacheTtlSeconds === 0) {\n      try {\n        return await this._fetchPromptAndUpdateCache({\n          name,\n          version,\n          label: options?.label,\n          cacheTtlSeconds: options?.cacheTtlSeconds,\n          maxRetries: options?.maxRetries,\n          fetchTimeout: options?.fetchTimeoutMs,\n        });\n      } catch (err) {\n        if (options?.fallback) {\n          const sharedFallbackParams = {\n            name,\n            version: version ?? 0,\n            labels: options.label ? [options.label] : [],\n            cacheTtlSeconds: options?.cacheTtlSeconds,\n            config: {},\n            tags: [],\n          };\n\n          if (options.type === \"chat\") {\n            return new ChatPromptClient(\n              {\n                ...sharedFallbackParams,\n                type: \"chat\",\n                prompt: (options.fallback as ChatMessage[]).map((msg) => ({\n                  type: ChatMessageType.ChatMessage,\n                  ...msg,\n                })),\n              },\n              true\n            );\n          } else {\n            return new TextPromptClient(\n              {\n                ...sharedFallbackParams,\n                type: \"text\",\n                prompt: options.fallback as string,\n              },\n              true\n            );\n          }\n        }\n\n        throw err;\n      }\n    }\n\n    if (cachedPrompt.isExpired) {\n      // If the cache is not currently being refreshed, start refreshing it and register the promise in the cache\n      if (!this._promptCache.isRefreshing(cacheKey)) {\n        const refreshPromptPromise = this._fetchPromptAndUpdateCache({\n          name,\n          version,\n          label: options?.label,\n          cacheTtlSeconds: options?.cacheTtlSeconds,\n          maxRetries: options?.maxRetries,\n          fetchTimeout: options?.fetchTimeoutMs,\n        }).catch(() => {\n          console.warn(\n            `Failed to refresh prompt cache '${cacheKey}', stale cache will be used until next refresh succeeds.`\n          );\n        });\n        this._promptCache.addRefreshingPromise(cacheKey, refreshPromptPromise);\n      }\n\n      return cachedPrompt.value;\n    }\n\n    return cachedPrompt.value;\n  }\n\n  private _getPromptCacheKey(params: { name: string; version?: number; label?: string }): string {\n    const { name, version, label } = params;\n    const parts = [name];\n\n    if (version !== undefined) {\n      parts.push(\"version:\" + version.toString());\n    } else if (label !== undefined) {\n      parts.push(\"label:\" + label);\n    } else {\n      parts.push(\"label:production\");\n    }\n\n    return parts.join(\"-\");\n  }\n\n  private async _fetchPromptAndUpdateCache(params: {\n    name: string;\n    version?: number;\n    cacheTtlSeconds?: number;\n    label?: string;\n    maxRetries?: number;\n    fetchTimeout?: number;\n  }): Promise<LangfusePromptClient> {\n    const cacheKey = this._getPromptCacheKey(params);\n\n    try {\n      const { name, version, cacheTtlSeconds, label, maxRetries, fetchTimeout } = params;\n\n      const { data, fetchResult } = await this.getPromptStateless(name, version, label, maxRetries, fetchTimeout);\n      if (fetchResult === \"failure\") {\n        throw Error(data.message ?? \"Internal error while fetching prompt\");\n      }\n\n      let prompt: LangfusePromptClient;\n      if (data.type === \"chat\") {\n        prompt = new ChatPromptClient(data);\n      } else {\n        prompt = new TextPromptClient(data);\n      }\n\n      this._promptCache.set(cacheKey, prompt, cacheTtlSeconds);\n\n      return prompt;\n    } catch (error) {\n      console.error(`[Langfuse SDK] Error while fetching prompt '${cacheKey}':`, error);\n\n      throw error;\n    }\n  }\n\n  public async fetchMedia(id: string): Promise<GetMediaResponse> {\n    return await this._fetchMedia(id);\n  }\n\n  /**\n   * Replaces the media reference strings in an object with base64 data URIs for the media content.\n   *\n   * This method recursively traverses an object (up to a maximum depth of 10) looking for media reference strings\n   * in the format \"@@@langfuseMedia:...@@@\". When found, it fetches the actual media content using the provided\n   * Langfuse client and replaces the reference string with a base64 data URI.\n   *\n   * If fetching media content fails for a reference string, a warning is logged and the reference string is left unchanged.\n   *\n   * @param params - Configuration object\n   * @param params.obj - The object to process. Can be a primitive value, array, or nested object\n   * @param params.langfuseClient - Langfuse client instance used to fetch media content\n   * @param params.resolveWith - The representation of the media content to replace the media reference string with. Currently only \"base64DataUri\" is supported.\n   * @param params.maxDepth - Optional. Default is 10. The maximum depth to traverse the object.\n   *\n   * @returns A deep copy of the input object with all media references replaced with base64 data URIs where possible\n   *\n   * @example\n   * ```typescript\n   * const obj = {\n   *   image: \"@@@langfuseMedia:type=image/jpeg|id=123|source=bytes@@@\",\n   *   nested: {\n   *     pdf: \"@@@langfuseMedia:type=application/pdf|id=456|source=bytes@@@\"\n   *   }\n   * };\n   *\n   * const result = await LangfuseMedia.resolveMediaReferences({\n   *   obj,\n   *   langfuseClient\n   * });\n   *\n   * // Result:\n   * // {\n   * //   image: \"data:image/jpeg;base64,/9j/4AAQSkZJRg...\",\n   * //   nested: {\n   * //     pdf: \"data:application/pdf;base64,JVBERi0xLjcK...\"\n   * //   }\n   * // }\n   * ```\n   */\n  public async resolveMediaReferences<T>(\n    params: Omit<LangfuseMediaResolveMediaReferencesParams<T>, \"langfuseClient\">\n  ): Promise<T> {\n    const { obj, ...rest } = params;\n\n    return LangfuseMedia.resolveMediaReferences<T>({ ...rest, langfuseClient: this, obj });\n  }\n  _updateSpan(body: UpdateLangfuseSpanBody): this {\n    this.updateSpanStateless(body);\n    return this;\n  }\n\n  _updateGeneration(body: UpdateLangfuseGenerationBody): this {\n    this.updateGenerationStateless(body);\n    return this;\n  }\n}\n\nexport abstract class LangfuseObjectClient {\n  public readonly client: LangfuseCore;\n  public readonly id: string; // id of item itself\n  public readonly traceId: string; // id of trace, if traceClient this is the same as id\n  public readonly observationId: string | null; // id of observation, if observationClient this is the same as id, if traceClient this is null\n\n  constructor({\n    client,\n    id,\n    traceId,\n    observationId,\n  }: {\n    client: LangfuseCore;\n    id: string;\n    traceId: string;\n    observationId: string | null;\n  }) {\n    this.client = client;\n    this.id = id;\n    this.traceId = traceId;\n    this.observationId = observationId;\n  }\n\n  event(body: Omit<CreateLangfuseEventBody, \"traceId\" | \"parentObservationId\">): LangfuseEventClient {\n    return this.client.event({\n      ...body,\n      traceId: this.traceId,\n      parentObservationId: this.observationId,\n    });\n  }\n\n  span(body: Omit<CreateLangfuseSpanBody, \"traceId\" | \"parentObservationId\">): LangfuseSpanClient {\n    return this.client.span({\n      ...body,\n      traceId: this.traceId,\n      parentObservationId: this.observationId,\n    });\n  }\n\n  generation(\n    body: Omit<CreateLangfuseGenerationBody, \"traceId\" | \"parentObservationId\" | \"promptName\" | \"promptVersion\"> &\n      PromptInput\n  ): LangfuseGenerationClient {\n    return this.client.generation({\n      ...body,\n      traceId: this.traceId,\n      parentObservationId: this.observationId,\n    });\n  }\n\n  score(body: Omit<CreateLangfuseScoreBody, \"traceId\" | \"parentObservationId\">): this {\n    this.client.score({\n      ...body,\n      traceId: this.traceId,\n      observationId: this.observationId,\n    });\n    return this;\n  }\n\n  getTraceUrl(): string {\n    return `${this.client.baseUrl}/trace/${this.traceId}`;\n  }\n}\n\nexport class LangfuseTraceClient extends LangfuseObjectClient {\n  constructor(client: LangfuseCore, traceId: string) {\n    super({ client, id: traceId, traceId, observationId: null });\n  }\n\n  update(body: Omit<CreateLangfuseTraceBody, \"id\">): this {\n    this.client.trace({\n      ...body,\n      id: this.id,\n    });\n    return this;\n  }\n}\n\nabstract class LangfuseObservationClient extends LangfuseObjectClient {\n  constructor(client: LangfuseCore, id: string, traceId: string) {\n    super({ client, id, traceId, observationId: id });\n  }\n}\n\nexport class LangfuseSpanClient extends LangfuseObservationClient {\n  constructor(client: LangfuseCore, id: string, traceId: string) {\n    super(client, id, traceId);\n  }\n\n  update(body: Omit<UpdateLangfuseSpanBody, \"id\" | \"traceId\">): this {\n    this.client._updateSpan({\n      ...body,\n      id: this.id,\n      traceId: this.traceId,\n    });\n    return this;\n  }\n\n  end(body?: Omit<UpdateLangfuseSpanBody, \"id\" | \"endTime\" | \"traceId\">): this {\n    this.client._updateSpan({\n      ...body,\n      id: this.id,\n      traceId: this.traceId,\n      endTime: new Date(),\n    });\n    return this;\n  }\n}\n\nexport class LangfuseGenerationClient extends LangfuseObservationClient {\n  constructor(client: LangfuseCore, id: string, traceId: string) {\n    super(client, id, traceId);\n  }\n\n  update(\n    body: Omit<UpdateLangfuseGenerationBody, \"id\" | \"traceId\" | \"promptName\" | \"promptVersion\"> & PromptInput\n  ): this {\n    this.client._updateGeneration({\n      ...body,\n      id: this.id,\n      traceId: this.traceId,\n    });\n    return this;\n  }\n\n  end(\n    body?: Omit<UpdateLangfuseGenerationBody, \"id\" | \"traceId\" | \"endTime\" | \"promptName\" | \"promptVersion\"> &\n      PromptInput\n  ): this {\n    this.client._updateGeneration({\n      ...body,\n      id: this.id,\n      traceId: this.traceId,\n      endTime: new Date(),\n    });\n    return this;\n  }\n}\n\nexport class LangfuseEventClient extends LangfuseObservationClient {\n  constructor(client: LangfuseCore, id: string, traceId: string) {\n    super(client, id, traceId);\n  }\n}\n\nexport * from \"./types\";\nexport * from \"./openapi/server\";\n", "import { type LangfuseOptions } from \"./types\";\n\nexport type LangfuseStorage = {\n  getItem: (key: string) => string | null | undefined;\n  setItem: (key: string, value: string) => void;\n  removeItem: (key: string) => void;\n  clear: () => void;\n  getAllKeys: () => readonly string[];\n};\n\n// Methods partially borrowed from quirksmode.org/js/cookies.html\nexport const cookieStore: LangfuseStorage = {\n  getItem(key) {\n    try {\n      const nameEQ = key + \"=\";\n      const ca = document.cookie.split(\";\");\n      for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == \" \") {\n          c = c.substring(1, c.length);\n        }\n        if (c.indexOf(nameEQ) === 0) {\n          return decodeURIComponent(c.substring(nameEQ.length, c.length));\n        }\n      }\n    } catch (err) {}\n    return null;\n  },\n\n  setItem(key: string, value: string) {\n    try {\n      const cdomain = \"\",\n        expires = \"\",\n        secure = \"\";\n\n      const new_cookie_val = key + \"=\" + encodeURIComponent(value) + expires + \"; path=/\" + cdomain + secure;\n      document.cookie = new_cookie_val;\n    } catch (err) {\n      return;\n    }\n  },\n\n  removeItem(name) {\n    try {\n      cookieStore.setItem(name, \"\");\n    } catch (err) {\n      return;\n    }\n  },\n  clear() {\n    document.cookie = \"\";\n  },\n  getAllKeys() {\n    const ca = document.cookie.split(\";\");\n    const keys = [];\n\n    for (let i = 0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) == \" \") {\n        c = c.substring(1, c.length);\n      }\n      keys.push(c.split(\"=\")[0]);\n    }\n\n    return keys;\n  },\n};\n\nconst createStorageLike = (store: any): LangfuseStorage => {\n  return {\n    getItem(key) {\n      return store.getItem(key);\n    },\n\n    setItem(key, value) {\n      store.setItem(key, value);\n    },\n\n    removeItem(key) {\n      store.removeItem(key);\n    },\n    clear() {\n      store.clear();\n    },\n    getAllKeys() {\n      const keys = [];\n      for (const key in localStorage) {\n        keys.push(key);\n      }\n      return keys;\n    },\n  };\n};\n\nconst checkStoreIsSupported = (storage: LangfuseStorage, key = \"__mplssupport__\"): boolean => {\n  if (!window) {\n    return false;\n  }\n  try {\n    const val = \"xyz\";\n    storage.setItem(key, val);\n    if (storage.getItem(key) !== val) {\n      return false;\n    }\n    storage.removeItem(key);\n    return true;\n  } catch (err) {\n    return false;\n  }\n};\n\nlet localStore: LangfuseStorage | undefined = undefined;\nlet sessionStore: LangfuseStorage | undefined = undefined;\n\nconst createMemoryStorage = (): LangfuseStorage => {\n  const _cache: { [key: string]: any | undefined } = {};\n\n  const store: LangfuseStorage = {\n    getItem(key) {\n      return _cache[key];\n    },\n\n    setItem(key, value) {\n      _cache[key] = value !== null ? value : undefined;\n    },\n\n    removeItem(key) {\n      delete _cache[key];\n    },\n    clear() {\n      for (const key in _cache) {\n        delete _cache[key];\n      }\n    },\n    getAllKeys() {\n      const keys = [];\n      for (const key in _cache) {\n        keys.push(key);\n      }\n      return keys;\n    },\n  };\n  return store;\n};\n\nexport const getStorage = (type: LangfuseOptions[\"persistence\"], window: Window | undefined): LangfuseStorage => {\n  if (typeof window !== undefined && window) {\n    if (!localStorage) {\n      const _localStore = createStorageLike(window.localStorage);\n      localStore = checkStoreIsSupported(_localStore) ? _localStore : undefined;\n    }\n\n    if (!sessionStore) {\n      const _sessionStore = createStorageLike(window.sessionStorage);\n      sessionStore = checkStoreIsSupported(_sessionStore) ? _sessionStore : undefined;\n    }\n  }\n\n  switch (type) {\n    case \"cookie\":\n      return cookieStore || localStore || sessionStore || createMemoryStorage();\n    case \"localStorage\":\n      return localStore || sessionStore || createMemoryStorage();\n    case \"sessionStorage\":\n      return sessionStore || createMemoryStorage();\n    case \"memory\":\n      return createMemoryStorage();\n    default:\n      return createMemoryStorage();\n  }\n};\n", "/* eslint-disable */\n/* tslint:disable */\n/*\n * ---------------------------------------------------------------\n * ## THIS FILE WAS GENERATED VIA SWAGGER-TYPESCRIPT-API        ##\n * ##                                                           ##\n * ## AUTHOR: acacode                                           ##\n * ## SOURCE: https://github.com/acacode/swagger-typescript-api ##\n * ---------------------------------------------------------------\n */\n\n/** AnnotationQueueStatus */\nexport type ApiAnnotationQueueStatus = \"PENDING\" | \"COMPLETED\";\n\n/** AnnotationQueueObjectType */\nexport type ApiAnnotationQueueObjectType = \"TRACE\" | \"OBSERVATION\";\n\n/** AnnotationQueue */\nexport interface ApiAnnotationQueue {\n  id: string;\n  name: string;\n  description?: string | null;\n  scoreConfigIds: string[];\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n}\n\n/** AnnotationQueueItem */\nexport interface ApiAnnotationQueueItem {\n  id: string;\n  queueId: string;\n  objectId: string;\n  objectType: ApiAnnotationQueueObjectType;\n  status: ApiAnnotationQueueStatus;\n  /** @format date-time */\n  completedAt?: string | null;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n}\n\n/** PaginatedAnnotationQueues */\nexport interface ApiPaginatedAnnotationQueues {\n  data: ApiAnnotationQueue[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** PaginatedAnnotationQueueItems */\nexport interface ApiPaginatedAnnotationQueueItems {\n  data: ApiAnnotationQueueItem[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** CreateAnnotationQueueItemRequest */\nexport interface ApiCreateAnnotationQueueItemRequest {\n  objectId: string;\n  objectType: ApiAnnotationQueueObjectType;\n  /** Defaults to PENDING for new queue items */\n  status?: ApiAnnotationQueueStatus | null;\n}\n\n/** UpdateAnnotationQueueItemRequest */\nexport interface ApiUpdateAnnotationQueueItemRequest {\n  status?: ApiAnnotationQueueStatus | null;\n}\n\n/** DeleteAnnotationQueueItemResponse */\nexport interface ApiDeleteAnnotationQueueItemResponse {\n  success: boolean;\n  message: string;\n}\n\n/** CreateCommentRequest */\nexport interface ApiCreateCommentRequest {\n  /** The id of the project to attach the comment to. */\n  projectId: string;\n  /** The type of the object to attach the comment to (trace, observation, session, prompt). */\n  objectType: string;\n  /** The id of the object to attach the comment to. If this does not reference a valid existing object, an error will be thrown. */\n  objectId: string;\n  /** The content of the comment. May include markdown. Currently limited to 3000 characters. */\n  content: string;\n  /** The id of the user who created the comment. */\n  authorUserId?: string | null;\n}\n\n/** CreateCommentResponse */\nexport interface ApiCreateCommentResponse {\n  /** The id of the created object in Langfuse */\n  id: string;\n}\n\n/** GetCommentsResponse */\nexport interface ApiGetCommentsResponse {\n  data: ApiComment[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** Trace */\nexport interface ApiTrace {\n  /** The unique identifier of a trace */\n  id: string;\n  /**\n   * The timestamp when the trace was created\n   * @format date-time\n   */\n  timestamp: string;\n  /** The name of the trace */\n  name?: string | null;\n  /** The input data of the trace. Can be any JSON. */\n  input?: any;\n  /** The output data of the trace. Can be any JSON. */\n  output?: any;\n  /** The session identifier associated with the trace */\n  sessionId?: string | null;\n  /** The release version of the application when the trace was created */\n  release?: string | null;\n  /** The version of the trace */\n  version?: string | null;\n  /** The user identifier associated with the trace */\n  userId?: string | null;\n  /** The metadata associated with the trace. Can be any JSON. */\n  metadata?: any;\n  /** The tags associated with the trace. Can be an array of strings or null. */\n  tags?: string[] | null;\n  /** Public traces are accessible via url without login */\n  public?: boolean | null;\n  /** The environment from which this trace originated. Can be any lowercase alphanumeric string with hyphens and underscores that does not start with 'langfuse'. */\n  environment?: string | null;\n}\n\n/** TraceWithDetails */\nexport type ApiTraceWithDetails = ApiTrace & {\n  /** Path of trace in Langfuse UI */\n  htmlPath: string;\n  /**\n   * Latency of trace in seconds\n   * @format double\n   */\n  latency: number;\n  /**\n   * Cost of trace in USD\n   * @format double\n   */\n  totalCost: number;\n  /** List of observation ids */\n  observations: string[];\n  /** List of score ids */\n  scores: string[];\n};\n\n/** TraceWithFullDetails */\nexport type ApiTraceWithFullDetails = ApiTrace & {\n  /** Path of trace in Langfuse UI */\n  htmlPath: string;\n  /**\n   * Latency of trace in seconds\n   * @format double\n   */\n  latency: number;\n  /**\n   * Cost of trace in USD\n   * @format double\n   */\n  totalCost: number;\n  /** List of observations */\n  observations: ApiObservationsView[];\n  /** List of scores */\n  scores: ApiScoreV1[];\n};\n\n/** Session */\nexport interface ApiSession {\n  id: string;\n  /** @format date-time */\n  createdAt: string;\n  projectId: string;\n  /** The environment from which this session originated. */\n  environment?: string | null;\n}\n\n/** SessionWithTraces */\nexport type ApiSessionWithTraces = ApiSession & {\n  traces: ApiTrace[];\n};\n\n/** Observation */\nexport interface ApiObservation {\n  /** The unique identifier of the observation */\n  id: string;\n  /** The trace ID associated with the observation */\n  traceId?: string | null;\n  /** The type of the observation */\n  type: string;\n  /** The name of the observation */\n  name?: string | null;\n  /**\n   * The start time of the observation\n   * @format date-time\n   */\n  startTime: string;\n  /**\n   * The end time of the observation.\n   * @format date-time\n   */\n  endTime?: string | null;\n  /**\n   * The completion start time of the observation\n   * @format date-time\n   */\n  completionStartTime?: string | null;\n  /** The model used for the observation */\n  model?: string | null;\n  /** The parameters of the model used for the observation */\n  modelParameters?: Record<string, ApiMapValue>;\n  /** The input data of the observation */\n  input?: any;\n  /** The version of the observation */\n  version?: string | null;\n  /** Additional metadata of the observation */\n  metadata?: any;\n  /** The output data of the observation */\n  output?: any;\n  /** (Deprecated. Use usageDetails and costDetails instead.) The usage data of the observation */\n  usage?: ApiUsage | null;\n  /** The level of the observation */\n  level: ApiObservationLevel;\n  /** The status message of the observation */\n  statusMessage?: string | null;\n  /** The parent observation ID */\n  parentObservationId?: string | null;\n  /** The prompt ID associated with the observation */\n  promptId?: string | null;\n  /** The usage details of the observation. Key is the name of the usage metric, value is the number of units consumed. The total key is the sum of all (non-total) usage metrics or the total value ingested. */\n  usageDetails?: Record<string, number>;\n  /** The cost details of the observation. Key is the name of the cost metric, value is the cost in USD. The total key is the sum of all (non-total) cost metrics or the total value ingested. */\n  costDetails?: Record<string, number>;\n  /** The environment from which this observation originated. Can be any lowercase alphanumeric string with hyphens and underscores that does not start with 'langfuse'. */\n  environment?: string | null;\n}\n\n/** ObservationsView */\nexport type ApiObservationsView = ApiObservation & {\n  /** The name of the prompt associated with the observation */\n  promptName?: string | null;\n  /** The version of the prompt associated with the observation */\n  promptVersion?: number | null;\n  /** The unique identifier of the model */\n  modelId?: string | null;\n  /**\n   * The price of the input in USD\n   * @format double\n   */\n  inputPrice?: number | null;\n  /**\n   * The price of the output in USD.\n   * @format double\n   */\n  outputPrice?: number | null;\n  /**\n   * The total price in USD.\n   * @format double\n   */\n  totalPrice?: number | null;\n  /**\n   * (Deprecated. Use usageDetails and costDetails instead.) The calculated cost of the input in USD\n   * @format double\n   */\n  calculatedInputCost?: number | null;\n  /**\n   * (Deprecated. Use usageDetails and costDetails instead.) The calculated cost of the output in USD\n   * @format double\n   */\n  calculatedOutputCost?: number | null;\n  /**\n   * (Deprecated. Use usageDetails and costDetails instead.) The calculated total cost in USD\n   * @format double\n   */\n  calculatedTotalCost?: number | null;\n  /**\n   * The latency in seconds.\n   * @format double\n   */\n  latency?: number | null;\n  /**\n   * The time to the first token in seconds\n   * @format double\n   */\n  timeToFirstToken?: number | null;\n};\n\n/**\n * Usage\n * (Deprecated. Use usageDetails and costDetails instead.) Standard interface for usage and cost\n */\nexport interface ApiUsage {\n  /** Number of input units (e.g. tokens) */\n  input?: number | null;\n  /** Number of output units (e.g. tokens) */\n  output?: number | null;\n  /** Defaults to input+output if not set */\n  total?: number | null;\n  /** Unit of usage in Langfuse */\n  unit?: ApiModelUsageUnit | null;\n  /**\n   * USD input cost\n   * @format double\n   */\n  inputCost?: number | null;\n  /**\n   * USD output cost\n   * @format double\n   */\n  outputCost?: number | null;\n  /**\n   * USD total cost, defaults to input+output\n   * @format double\n   */\n  totalCost?: number | null;\n}\n\n/**\n * ScoreConfig\n * Configuration for a score\n */\nexport interface ApiScoreConfig {\n  id: string;\n  name: string;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n  projectId: string;\n  dataType: ApiScoreDataType;\n  /** Whether the score config is archived. Defaults to false */\n  isArchived: boolean;\n  /**\n   * Sets minimum value for numerical scores. If not set, the minimum value defaults to -∞\n   * @format double\n   */\n  minValue?: number | null;\n  /**\n   * Sets maximum value for numerical scores. If not set, the maximum value defaults to +∞\n   * @format double\n   */\n  maxValue?: number | null;\n  /** Configures custom categories for categorical scores */\n  categories?: ApiConfigCategory[] | null;\n  description?: string | null;\n}\n\n/** ConfigCategory */\nexport interface ApiConfigCategory {\n  /** @format double */\n  value: number;\n  label: string;\n}\n\n/** BaseScoreV1 */\nexport interface ApiBaseScoreV1 {\n  id: string;\n  traceId: string;\n  name: string;\n  source: ApiScoreSource;\n  observationId?: string | null;\n  /** @format date-time */\n  timestamp: string;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n  authorUserId?: string | null;\n  comment?: string | null;\n  metadata?: any;\n  /** Reference a score config on a score. When set, config and score name must be equal and value must comply to optionally defined numerical range */\n  configId?: string | null;\n  /** Reference an annotation queue on a score. Populated if the score was initially created in an annotation queue. */\n  queueId?: string | null;\n  /** The environment from which this score originated. Can be any lowercase alphanumeric string with hyphens and underscores that does not start with 'langfuse'. */\n  environment?: string | null;\n}\n\n/** NumericScoreV1 */\nexport type ApiNumericScoreV1 = ApiBaseScoreV1 & {\n  /**\n   * The numeric value of the score\n   * @format double\n   */\n  value: number;\n};\n\n/** BooleanScoreV1 */\nexport type ApiBooleanScoreV1 = ApiBaseScoreV1 & {\n  /**\n   * The numeric value of the score. Equals 1 for \"True\" and 0 for \"False\"\n   * @format double\n   */\n  value: number;\n  /** The string representation of the score value. Is inferred from the numeric value and equals \"True\" or \"False\" */\n  stringValue: string;\n};\n\n/** CategoricalScoreV1 */\nexport type ApiCategoricalScoreV1 = ApiBaseScoreV1 & {\n  /**\n   * Only defined if a config is linked. Represents the numeric category mapping of the stringValue\n   * @format double\n   */\n  value?: number | null;\n  /** The string representation of the score value. If no config is linked, can be any string. Otherwise, must map to a config category */\n  stringValue: string;\n};\n\n/** ScoreV1 */\nexport type ApiScoreV1 =\n  | ({\n      dataType: \"NUMERIC\";\n    } & ApiNumericScoreV1)\n  | ({\n      dataType: \"CATEGORICAL\";\n    } & ApiCategoricalScoreV1)\n  | ({\n      dataType: \"BOOLEAN\";\n    } & ApiBooleanScoreV1);\n\n/** BaseScore */\nexport interface ApiBaseScore {\n  id: string;\n  traceId?: string | null;\n  sessionId?: string | null;\n  observationId?: string | null;\n  datasetRunId?: string | null;\n  name: string;\n  source: ApiScoreSource;\n  /** @format date-time */\n  timestamp: string;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n  authorUserId?: string | null;\n  comment?: string | null;\n  metadata?: any;\n  /** Reference a score config on a score. When set, config and score name must be equal and value must comply to optionally defined numerical range */\n  configId?: string | null;\n  /** Reference an annotation queue on a score. Populated if the score was initially created in an annotation queue. */\n  queueId?: string | null;\n  /** The environment from which this score originated. Can be any lowercase alphanumeric string with hyphens and underscores that does not start with 'langfuse'. */\n  environment?: string | null;\n}\n\n/** NumericScore */\nexport type ApiNumericScore = ApiBaseScore & {\n  /**\n   * The numeric value of the score\n   * @format double\n   */\n  value: number;\n};\n\n/** BooleanScore */\nexport type ApiBooleanScore = ApiBaseScore & {\n  /**\n   * The numeric value of the score. Equals 1 for \"True\" and 0 for \"False\"\n   * @format double\n   */\n  value: number;\n  /** The string representation of the score value. Is inferred from the numeric value and equals \"True\" or \"False\" */\n  stringValue: string;\n};\n\n/** CategoricalScore */\nexport type ApiCategoricalScore = ApiBaseScore & {\n  /**\n   * Only defined if a config is linked. Represents the numeric category mapping of the stringValue\n   * @format double\n   */\n  value?: number | null;\n  /** The string representation of the score value. If no config is linked, can be any string. Otherwise, must map to a config category */\n  stringValue: string;\n};\n\n/** Score */\nexport type ApiScore =\n  | ({\n      dataType: \"NUMERIC\";\n    } & ApiNumericScore)\n  | ({\n      dataType: \"CATEGORICAL\";\n    } & ApiCategoricalScore)\n  | ({\n      dataType: \"BOOLEAN\";\n    } & ApiBooleanScore);\n\n/**\n * CreateScoreValue\n * The value of the score. Must be passed as string for categorical scores, and numeric for boolean and numeric scores\n */\nexport type ApiCreateScoreValue = number | string;\n\n/** Comment */\nexport interface ApiComment {\n  id: string;\n  projectId: string;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n  objectType: ApiCommentObjectType;\n  objectId: string;\n  content: string;\n  authorUserId?: string | null;\n}\n\n/** Dataset */\nexport interface ApiDataset {\n  id: string;\n  name: string;\n  description?: string | null;\n  metadata?: any;\n  projectId: string;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n}\n\n/** DatasetItem */\nexport interface ApiDatasetItem {\n  id: string;\n  status: ApiDatasetStatus;\n  input?: any;\n  expectedOutput?: any;\n  metadata?: any;\n  sourceTraceId?: string | null;\n  sourceObservationId?: string | null;\n  datasetId: string;\n  datasetName: string;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n}\n\n/** DatasetRunItem */\nexport interface ApiDatasetRunItem {\n  id: string;\n  datasetRunId: string;\n  datasetRunName: string;\n  datasetItemId: string;\n  traceId: string;\n  observationId?: string | null;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n}\n\n/** DatasetRun */\nexport interface ApiDatasetRun {\n  /** Unique identifier of the dataset run */\n  id: string;\n  /** Name of the dataset run */\n  name: string;\n  /** Description of the run */\n  description?: string | null;\n  /** Metadata of the dataset run */\n  metadata?: any;\n  /** Id of the associated dataset */\n  datasetId: string;\n  /** Name of the associated dataset */\n  datasetName: string;\n  /**\n   * The date and time when the dataset run was created\n   * @format date-time\n   */\n  createdAt: string;\n  /**\n   * The date and time when the dataset run was last updated\n   * @format date-time\n   */\n  updatedAt: string;\n}\n\n/** DatasetRunWithItems */\nexport type ApiDatasetRunWithItems = ApiDatasetRun & {\n  datasetRunItems: ApiDatasetRunItem[];\n};\n\n/**\n * Model\n * Model definition used for transforming usage into USD cost and/or tokenization.\n */\nexport interface ApiModel {\n  id: string;\n  /** Name of the model definition. If multiple with the same name exist, they are applied in the following order: (1) custom over built-in, (2) newest according to startTime where model.startTime<observation.startTime */\n  modelName: string;\n  /** Regex pattern which matches this model definition to generation.model. Useful in case of fine-tuned models. If you want to exact match, use `(?i)^modelname$` */\n  matchPattern: string;\n  /**\n   * Apply only to generations which are newer than this ISO date.\n   * @format date-time\n   */\n  startDate?: string | null;\n  /** Unit used by this model. */\n  unit?: ApiModelUsageUnit | null;\n  /**\n   * Deprecated. See 'prices' instead. Price (USD) per input unit\n   * @format double\n   */\n  inputPrice?: number | null;\n  /**\n   * Deprecated. See 'prices' instead. Price (USD) per output unit\n   * @format double\n   */\n  outputPrice?: number | null;\n  /**\n   * Deprecated. See 'prices' instead. Price (USD) per total unit. Cannot be set if input or output price is set.\n   * @format double\n   */\n  totalPrice?: number | null;\n  /** Optional. Tokenizer to be applied to observations which match to this model. See docs for more details. */\n  tokenizerId?: string | null;\n  /** Optional. Configuration for the selected tokenizer. Needs to be JSON. See docs for more details. */\n  tokenizerConfig?: any;\n  isLangfuseManaged: boolean;\n  /** Price (USD) by usage type */\n  prices: Record<string, ApiModelPrice>;\n}\n\n/** ModelPrice */\nexport interface ApiModelPrice {\n  /** @format double */\n  price: number;\n}\n\n/**\n * ModelUsageUnit\n * Unit of usage in Langfuse\n */\nexport type ApiModelUsageUnit = \"CHARACTERS\" | \"TOKENS\" | \"MILLISECONDS\" | \"SECONDS\" | \"IMAGES\" | \"REQUESTS\";\n\n/** ObservationLevel */\nexport type ApiObservationLevel = \"DEBUG\" | \"DEFAULT\" | \"WARNING\" | \"ERROR\";\n\n/** MapValue */\nexport type ApiMapValue = string | null | number | null | boolean | null | string[] | null;\n\n/** CommentObjectType */\nexport type ApiCommentObjectType = \"TRACE\" | \"OBSERVATION\" | \"SESSION\" | \"PROMPT\";\n\n/** DatasetStatus */\nexport type ApiDatasetStatus = \"ACTIVE\" | \"ARCHIVED\";\n\n/** ScoreSource */\nexport type ApiScoreSource = \"ANNOTATION\" | \"API\" | \"EVAL\";\n\n/** ScoreDataType */\nexport type ApiScoreDataType = \"NUMERIC\" | \"BOOLEAN\" | \"CATEGORICAL\";\n\n/** DeleteDatasetItemResponse */\nexport interface ApiDeleteDatasetItemResponse {\n  /** Success message after deletion */\n  message: string;\n}\n\n/** CreateDatasetItemRequest */\nexport interface ApiCreateDatasetItemRequest {\n  datasetName: string;\n  input?: any;\n  expectedOutput?: any;\n  metadata?: any;\n  sourceTraceId?: string | null;\n  sourceObservationId?: string | null;\n  /** Dataset items are upserted on their id. Id needs to be unique (project-level) and cannot be reused across datasets. */\n  id?: string | null;\n  /** Defaults to ACTIVE for newly created items */\n  status?: ApiDatasetStatus | null;\n}\n\n/** PaginatedDatasetItems */\nexport interface ApiPaginatedDatasetItems {\n  data: ApiDatasetItem[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** CreateDatasetRunItemRequest */\nexport interface ApiCreateDatasetRunItemRequest {\n  runName: string;\n  /** Description of the run. If run exists, description will be updated. */\n  runDescription?: string | null;\n  /** Metadata of the dataset run, updates run if run already exists */\n  metadata?: any;\n  datasetItemId: string;\n  observationId?: string | null;\n  /** traceId should always be provided. For compatibility with older SDK versions it can also be inferred from the provided observationId. */\n  traceId?: string | null;\n}\n\n/** PaginatedDatasetRunItems */\nexport interface ApiPaginatedDatasetRunItems {\n  data: ApiDatasetRunItem[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** PaginatedDatasets */\nexport interface ApiPaginatedDatasets {\n  data: ApiDataset[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** CreateDatasetRequest */\nexport interface ApiCreateDatasetRequest {\n  name: string;\n  description?: string | null;\n  metadata?: any;\n}\n\n/** PaginatedDatasetRuns */\nexport interface ApiPaginatedDatasetRuns {\n  data: ApiDatasetRun[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** DeleteDatasetRunResponse */\nexport interface ApiDeleteDatasetRunResponse {\n  message: string;\n}\n\n/** HealthResponse */\nexport interface ApiHealthResponse {\n  /**\n   * Langfuse server version\n   * @example \"1.25.0\"\n   */\n  version: string;\n  /** @example \"OK\" */\n  status: string;\n}\n\n/** IngestionEvent */\nexport type ApiIngestionEvent =\n  | ({\n      type: \"trace-create\";\n    } & ApiTraceEvent)\n  | ({\n      type: \"score-create\";\n    } & ApiScoreEvent)\n  | ({\n      type: \"span-create\";\n    } & ApiCreateSpanEvent)\n  | ({\n      type: \"span-update\";\n    } & ApiUpdateSpanEvent)\n  | ({\n      type: \"generation-create\";\n    } & ApiCreateGenerationEvent)\n  | ({\n      type: \"generation-update\";\n    } & ApiUpdateGenerationEvent)\n  | ({\n      type: \"event-create\";\n    } & ApiCreateEventEvent)\n  | ({\n      type: \"sdk-log\";\n    } & ApiSDKLogEvent)\n  | ({\n      type: \"observation-create\";\n    } & ApiCreateObservationEvent)\n  | ({\n      type: \"observation-update\";\n    } & ApiUpdateObservationEvent);\n\n/** ObservationType */\nexport type ApiObservationType = \"SPAN\" | \"GENERATION\" | \"EVENT\";\n\n/** IngestionUsage */\nexport type ApiIngestionUsage = ApiUsage | ApiOpenAIUsage;\n\n/**\n * OpenAIUsage\n * Usage interface of OpenAI for improved compatibility.\n */\nexport interface ApiOpenAIUsage {\n  promptTokens?: number | null;\n  completionTokens?: number | null;\n  totalTokens?: number | null;\n}\n\n/** OptionalObservationBody */\nexport interface ApiOptionalObservationBody {\n  traceId?: string | null;\n  name?: string | null;\n  /** @format date-time */\n  startTime?: string | null;\n  metadata?: any;\n  input?: any;\n  output?: any;\n  level?: ApiObservationLevel | null;\n  statusMessage?: string | null;\n  parentObservationId?: string | null;\n  version?: string | null;\n  environment?: string | null;\n}\n\n/** CreateEventBody */\nexport type ApiCreateEventBody = ApiOptionalObservationBody & {\n  id?: string | null;\n};\n\n/** UpdateEventBody */\nexport type ApiUpdateEventBody = ApiOptionalObservationBody & {\n  id: string;\n};\n\n/** CreateSpanBody */\nexport type ApiCreateSpanBody = ApiCreateEventBody & {\n  /** @format date-time */\n  endTime?: string | null;\n};\n\n/** UpdateSpanBody */\nexport type ApiUpdateSpanBody = ApiUpdateEventBody & {\n  /** @format date-time */\n  endTime?: string | null;\n};\n\n/** CreateGenerationBody */\nexport type ApiCreateGenerationBody = ApiCreateSpanBody & {\n  /** @format date-time */\n  completionStartTime?: string | null;\n  model?: string | null;\n  modelParameters?: Record<string, ApiMapValue>;\n  usage?: ApiIngestionUsage | null;\n  usageDetails?: ApiUsageDetails | null;\n  costDetails?: Record<string, number>;\n  promptName?: string | null;\n  promptVersion?: number | null;\n};\n\n/** UpdateGenerationBody */\nexport type ApiUpdateGenerationBody = ApiUpdateSpanBody & {\n  /** @format date-time */\n  completionStartTime?: string | null;\n  model?: string | null;\n  modelParameters?: Record<string, ApiMapValue>;\n  usage?: ApiIngestionUsage | null;\n  promptName?: string | null;\n  usageDetails?: ApiUsageDetails | null;\n  costDetails?: Record<string, number>;\n  promptVersion?: number | null;\n};\n\n/** ObservationBody */\nexport interface ApiObservationBody {\n  id?: string | null;\n  traceId?: string | null;\n  type: ApiObservationType;\n  name?: string | null;\n  /** @format date-time */\n  startTime?: string | null;\n  /** @format date-time */\n  endTime?: string | null;\n  /** @format date-time */\n  completionStartTime?: string | null;\n  model?: string | null;\n  modelParameters?: Record<string, ApiMapValue>;\n  input?: any;\n  version?: string | null;\n  metadata?: any;\n  output?: any;\n  /** (Deprecated. Use usageDetails and costDetails instead.) Standard interface for usage and cost */\n  usage?: ApiUsage | null;\n  level?: ApiObservationLevel | null;\n  statusMessage?: string | null;\n  parentObservationId?: string | null;\n  environment?: string | null;\n}\n\n/** TraceBody */\nexport interface ApiTraceBody {\n  id?: string | null;\n  /** @format date-time */\n  timestamp?: string | null;\n  name?: string | null;\n  userId?: string | null;\n  input?: any;\n  output?: any;\n  sessionId?: string | null;\n  release?: string | null;\n  version?: string | null;\n  metadata?: any;\n  tags?: string[] | null;\n  environment?: string | null;\n  /** Make trace publicly accessible via url */\n  public?: boolean | null;\n}\n\n/** SDKLogBody */\nexport interface ApiSDKLogBody {\n  log: any;\n}\n\n/** ScoreBody */\nexport interface ApiScoreBody {\n  id?: string | null;\n  traceId?: string | null;\n  sessionId?: string | null;\n  observationId?: string | null;\n  datasetRunId?: string | null;\n  /** @example \"novelty\" */\n  name: string;\n  environment?: string | null;\n  /** The value of the score. Must be passed as string for categorical scores, and numeric for boolean and numeric scores. Boolean score values must equal either 1 or 0 (true or false) */\n  value: ApiCreateScoreValue;\n  comment?: string | null;\n  metadata?: any;\n  /** When set, must match the score value's type. If not set, will be inferred from the score value or config */\n  dataType?: ApiScoreDataType | null;\n  /** Reference a score config on a score. When set, the score name must equal the config name and scores must comply with the config's range and data type. For categorical scores, the value must map to a config category. Numeric scores might be constrained by the score config's max and min values */\n  configId?: string | null;\n}\n\n/** BaseEvent */\nexport interface ApiBaseEvent {\n  /** UUID v4 that identifies the event */\n  id: string;\n  /** Datetime (ISO 8601) of event creation in client. Should be as close to actual event creation in client as possible, this timestamp will be used for ordering of events in future release. Resolution: milliseconds (required), microseconds (optimal). */\n  timestamp: string;\n  /** Optional. Metadata field used by the Langfuse SDKs for debugging. */\n  metadata?: any;\n}\n\n/** TraceEvent */\nexport type ApiTraceEvent = ApiBaseEvent & {\n  body: ApiTraceBody;\n};\n\n/** CreateObservationEvent */\nexport type ApiCreateObservationEvent = ApiBaseEvent & {\n  body: ApiObservationBody;\n};\n\n/** UpdateObservationEvent */\nexport type ApiUpdateObservationEvent = ApiBaseEvent & {\n  body: ApiObservationBody;\n};\n\n/** ScoreEvent */\nexport type ApiScoreEvent = ApiBaseEvent & {\n  body: ApiScoreBody;\n};\n\n/** SDKLogEvent */\nexport type ApiSDKLogEvent = ApiBaseEvent & {\n  body: ApiSDKLogBody;\n};\n\n/** CreateGenerationEvent */\nexport type ApiCreateGenerationEvent = ApiBaseEvent & {\n  body: ApiCreateGenerationBody;\n};\n\n/** UpdateGenerationEvent */\nexport type ApiUpdateGenerationEvent = ApiBaseEvent & {\n  body: ApiUpdateGenerationBody;\n};\n\n/** CreateSpanEvent */\nexport type ApiCreateSpanEvent = ApiBaseEvent & {\n  body: ApiCreateSpanBody;\n};\n\n/** UpdateSpanEvent */\nexport type ApiUpdateSpanEvent = ApiBaseEvent & {\n  body: ApiUpdateSpanBody;\n};\n\n/** CreateEventEvent */\nexport type ApiCreateEventEvent = ApiBaseEvent & {\n  body: ApiCreateEventBody;\n};\n\n/** IngestionSuccess */\nexport interface ApiIngestionSuccess {\n  id: string;\n  status: number;\n}\n\n/** IngestionError */\nexport interface ApiIngestionError {\n  id: string;\n  status: number;\n  message?: string | null;\n  error?: any;\n}\n\n/** IngestionResponse */\nexport interface ApiIngestionResponse {\n  successes: ApiIngestionSuccess[];\n  errors: ApiIngestionError[];\n}\n\n/**\n * OpenAICompletionUsageSchema\n * OpenAI Usage schema from (Chat-)Completion APIs\n */\nexport interface ApiOpenAICompletionUsageSchema {\n  prompt_tokens: number;\n  completion_tokens: number;\n  total_tokens: number;\n  prompt_tokens_details?: Record<string, number | null>;\n  completion_tokens_details?: Record<string, number | null>;\n}\n\n/**\n * OpenAIResponseUsageSchema\n * OpenAI Usage schema from Response API\n */\nexport interface ApiOpenAIResponseUsageSchema {\n  input_tokens: number;\n  output_tokens: number;\n  total_tokens: number;\n  input_tokens_details?: Record<string, number | null>;\n  output_tokens_details?: Record<string, number | null>;\n}\n\n/** UsageDetails */\nexport type ApiUsageDetails = Record<string, number> | ApiOpenAICompletionUsageSchema | ApiOpenAIResponseUsageSchema;\n\n/** GetMediaResponse */\nexport interface ApiGetMediaResponse {\n  /** The unique langfuse identifier of a media record */\n  mediaId: string;\n  /** The MIME type of the media record */\n  contentType: string;\n  /** The size of the media record in bytes */\n  contentLength: number;\n  /**\n   * The date and time when the media record was uploaded\n   * @format date-time\n   */\n  uploadedAt: string;\n  /** The download URL of the media record */\n  url: string;\n  /** The expiry date and time of the media record download URL */\n  urlExpiry: string;\n}\n\n/** PatchMediaBody */\nexport interface ApiPatchMediaBody {\n  /**\n   * The date and time when the media record was uploaded\n   * @format date-time\n   */\n  uploadedAt: string;\n  /** The HTTP status code of the upload */\n  uploadHttpStatus: number;\n  /** The HTTP error message of the upload */\n  uploadHttpError?: string | null;\n  /** The time in milliseconds it took to upload the media record */\n  uploadTimeMs?: number | null;\n}\n\n/** GetMediaUploadUrlRequest */\nexport interface ApiGetMediaUploadUrlRequest {\n  /** The trace ID associated with the media record */\n  traceId: string;\n  /** The observation ID associated with the media record. If the media record is associated directly with a trace, this will be null. */\n  observationId?: string | null;\n  /** The MIME type of the media record */\n  contentType: ApiMediaContentType;\n  /** The size of the media record in bytes */\n  contentLength: number;\n  /** The SHA-256 hash of the media record */\n  sha256Hash: string;\n  /** The trace / observation field the media record is associated with. This can be one of `input`, `output`, `metadata` */\n  field: string;\n}\n\n/** GetMediaUploadUrlResponse */\nexport interface ApiGetMediaUploadUrlResponse {\n  /** The presigned upload URL. If the asset is already uploaded, this will be null */\n  uploadUrl?: string | null;\n  /** The unique langfuse identifier of a media record */\n  mediaId: string;\n}\n\n/**\n * MediaContentType\n * The MIME type of the media record\n */\nexport type ApiMediaContentType =\n  | \"image/png\"\n  | \"image/jpeg\"\n  | \"image/jpg\"\n  | \"image/webp\"\n  | \"image/gif\"\n  | \"image/svg+xml\"\n  | \"image/tiff\"\n  | \"image/bmp\"\n  | \"audio/mpeg\"\n  | \"audio/mp3\"\n  | \"audio/wav\"\n  | \"audio/ogg\"\n  | \"audio/oga\"\n  | \"audio/aac\"\n  | \"audio/mp4\"\n  | \"audio/flac\"\n  | \"video/mp4\"\n  | \"video/webm\"\n  | \"text/plain\"\n  | \"text/html\"\n  | \"text/css\"\n  | \"text/csv\"\n  | \"application/pdf\"\n  | \"application/msword\"\n  | \"application/vnd.ms-excel\"\n  | \"application/zip\"\n  | \"application/json\"\n  | \"application/xml\"\n  | \"application/octet-stream\";\n\n/** MetricsResponse */\nexport interface ApiMetricsResponse {\n  /**\n   * The metrics data. Each item in the list contains the metric values and dimensions requested in the query.\n   * Format varies based on the query parameters.\n   * Histograms will return an array with [lower, upper, height] tuples.\n   */\n  data: Record<string, any>[];\n}\n\n/** PaginatedModels */\nexport interface ApiPaginatedModels {\n  data: ApiModel[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** CreateModelRequest */\nexport interface ApiCreateModelRequest {\n  /** Name of the model definition. If multiple with the same name exist, they are applied in the following order: (1) custom over built-in, (2) newest according to startTime where model.startTime<observation.startTime */\n  modelName: string;\n  /** Regex pattern which matches this model definition to generation.model. Useful in case of fine-tuned models. If you want to exact match, use `(?i)^modelname$` */\n  matchPattern: string;\n  /**\n   * Apply only to generations which are newer than this ISO date.\n   * @format date-time\n   */\n  startDate?: string | null;\n  /** Unit used by this model. */\n  unit?: ApiModelUsageUnit | null;\n  /**\n   * Price (USD) per input unit\n   * @format double\n   */\n  inputPrice?: number | null;\n  /**\n   * Price (USD) per output unit\n   * @format double\n   */\n  outputPrice?: number | null;\n  /**\n   * Price (USD) per total units. Cannot be set if input or output price is set.\n   * @format double\n   */\n  totalPrice?: number | null;\n  /** Optional. Tokenizer to be applied to observations which match to this model. See docs for more details. */\n  tokenizerId?: string | null;\n  /** Optional. Configuration for the selected tokenizer. Needs to be JSON. See docs for more details. */\n  tokenizerConfig?: any;\n}\n\n/** Observations */\nexport interface ApiObservations {\n  data: ApiObservation[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** ObservationsViews */\nexport interface ApiObservationsViews {\n  data: ApiObservationsView[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** MembershipRole */\nexport type ApiMembershipRole = \"OWNER\" | \"ADMIN\" | \"MEMBER\" | \"VIEWER\";\n\n/** MembershipRequest */\nexport interface ApiMembershipRequest {\n  userId: string;\n  role: ApiMembershipRole;\n}\n\n/** MembershipResponse */\nexport interface ApiMembershipResponse {\n  userId: string;\n  role: ApiMembershipRole;\n  email: string;\n  name: string;\n}\n\n/** MembershipsResponse */\nexport interface ApiMembershipsResponse {\n  memberships: ApiMembershipResponse[];\n}\n\n/** OrganizationProject */\nexport interface ApiOrganizationProject {\n  id: string;\n  name: string;\n  metadata?: Record<string, any>;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  updatedAt: string;\n}\n\n/** OrganizationProjectsResponse */\nexport interface ApiOrganizationProjectsResponse {\n  projects: ApiOrganizationProject[];\n}\n\n/** Projects */\nexport interface ApiProjects {\n  data: ApiProject[];\n}\n\n/** Project */\nexport interface ApiProject {\n  id: string;\n  name: string;\n  /** Metadata for the project */\n  metadata: Record<string, any>;\n  /** Number of days to retain data. Null or 0 means no retention. Omitted if no retention is configured. */\n  retentionDays?: number | null;\n}\n\n/** ProjectDeletionResponse */\nexport interface ApiProjectDeletionResponse {\n  success: boolean;\n  message: string;\n}\n\n/**\n * ApiKeyList\n * List of API keys for a project\n */\nexport interface ApiApiKeyList {\n  apiKeys: ApiApiKeySummary[];\n}\n\n/**\n * ApiKeySummary\n * Summary of an API key\n */\nexport interface ApiApiKeySummary {\n  id: string;\n  /** @format date-time */\n  createdAt: string;\n  /** @format date-time */\n  expiresAt?: string | null;\n  /** @format date-time */\n  lastUsedAt?: string | null;\n  note?: string | null;\n  publicKey: string;\n  displaySecretKey: string;\n}\n\n/**\n * ApiKeyResponse\n * Response for API key creation\n */\nexport interface ApiApiKeyResponse {\n  id: string;\n  /** @format date-time */\n  createdAt: string;\n  publicKey: string;\n  secretKey: string;\n  displaySecretKey: string;\n  note?: string | null;\n}\n\n/**\n * ApiKeyDeletionResponse\n * Response for API key deletion\n */\nexport interface ApiApiKeyDeletionResponse {\n  success: boolean;\n}\n\n/** PromptMetaListResponse */\nexport interface ApiPromptMetaListResponse {\n  data: ApiPromptMeta[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** PromptMeta */\nexport interface ApiPromptMeta {\n  name: string;\n  versions: number[];\n  labels: string[];\n  tags: string[];\n  /** @format date-time */\n  lastUpdatedAt: string;\n  /** Config object of the most recent prompt version that matches the filters (if any are provided) */\n  lastConfig: any;\n}\n\n/** CreatePromptRequest */\nexport type ApiCreatePromptRequest =\n  | ({\n      type: \"chat\";\n    } & ApiCreateChatPromptRequest)\n  | ({\n      type: \"text\";\n    } & ApiCreateTextPromptRequest);\n\n/** CreateChatPromptRequest */\nexport interface ApiCreateChatPromptRequest {\n  name: string;\n  prompt: ApiChatMessageWithPlaceholders[];\n  config?: any;\n  /** List of deployment labels of this prompt version. */\n  labels?: string[] | null;\n  /** List of tags to apply to all versions of this prompt. */\n  tags?: string[] | null;\n  /** Commit message for this prompt version. */\n  commitMessage?: string | null;\n}\n\n/** CreateTextPromptRequest */\nexport interface ApiCreateTextPromptRequest {\n  name: string;\n  prompt: string;\n  config?: any;\n  /** List of deployment labels of this prompt version. */\n  labels?: string[] | null;\n  /** List of tags to apply to all versions of this prompt. */\n  tags?: string[] | null;\n  /** Commit message for this prompt version. */\n  commitMessage?: string | null;\n}\n\n/** Prompt */\nexport type ApiPrompt =\n  | ({\n      type: \"chat\";\n    } & ApiChatPrompt)\n  | ({\n      type: \"text\";\n    } & ApiTextPrompt);\n\n/** BasePrompt */\nexport interface ApiBasePrompt {\n  name: string;\n  version: number;\n  config: any;\n  /** List of deployment labels of this prompt version. */\n  labels: string[];\n  /** List of tags. Used to filter via UI and API. The same across versions of a prompt. */\n  tags: string[];\n  /** Commit message for this prompt version. */\n  commitMessage?: string | null;\n  /** The dependency resolution graph for the current prompt. Null if prompt has no dependencies. */\n  resolutionGraph?: Record<string, any>;\n}\n\n/** ChatMessageWithPlaceholders */\nexport type ApiChatMessageWithPlaceholders =\n  | ({\n      type: \"chatmessage\";\n    } & ApiChatMessage)\n  | ({\n      type: \"placeholder\";\n    } & ApiPlaceholderMessage);\n\n/** ChatMessage */\nexport interface ApiChatMessage {\n  role: string;\n  content: string;\n}\n\n/** PlaceholderMessage */\nexport interface ApiPlaceholderMessage {\n  name: string;\n}\n\n/** TextPrompt */\nexport type ApiTextPrompt = ApiBasePrompt & {\n  prompt: string;\n};\n\n/** ChatPrompt */\nexport type ApiChatPrompt = ApiBasePrompt & {\n  prompt: ApiChatMessageWithPlaceholders[];\n};\n\n/** ServiceProviderConfig */\nexport interface ApiServiceProviderConfig {\n  schemas: string[];\n  documentationUri: string;\n  patch: ApiScimFeatureSupport;\n  bulk: ApiBulkConfig;\n  filter: ApiFilterConfig;\n  changePassword: ApiScimFeatureSupport;\n  sort: ApiScimFeatureSupport;\n  etag: ApiScimFeatureSupport;\n  authenticationSchemes: ApiAuthenticationScheme[];\n  meta: ApiResourceMeta;\n}\n\n/** ScimFeatureSupport */\nexport interface ApiScimFeatureSupport {\n  supported: boolean;\n}\n\n/** BulkConfig */\nexport interface ApiBulkConfig {\n  supported: boolean;\n  maxOperations: number;\n  maxPayloadSize: number;\n}\n\n/** FilterConfig */\nexport interface ApiFilterConfig {\n  supported: boolean;\n  maxResults: number;\n}\n\n/** ResourceMeta */\nexport interface ApiResourceMeta {\n  resourceType: string;\n  location: string;\n}\n\n/** AuthenticationScheme */\nexport interface ApiAuthenticationScheme {\n  name: string;\n  description: string;\n  specUri: string;\n  type: string;\n  primary: boolean;\n}\n\n/** ResourceTypesResponse */\nexport interface ApiResourceTypesResponse {\n  schemas: string[];\n  totalResults: number;\n  Resources: ApiResourceType[];\n}\n\n/** ResourceType */\nexport interface ApiResourceType {\n  schemas?: string[] | null;\n  id: string;\n  name: string;\n  endpoint: string;\n  description: string;\n  schema: string;\n  schemaExtensions: ApiSchemaExtension[];\n  meta: ApiResourceMeta;\n}\n\n/** SchemaExtension */\nexport interface ApiSchemaExtension {\n  schema: string;\n  required: boolean;\n}\n\n/** SchemasResponse */\nexport interface ApiSchemasResponse {\n  schemas: string[];\n  totalResults: number;\n  Resources: ApiSchemaResource[];\n}\n\n/** SchemaResource */\nexport interface ApiSchemaResource {\n  id: string;\n  name: string;\n  description: string;\n  attributes: any[];\n  meta: ApiResourceMeta;\n}\n\n/** ScimUsersListResponse */\nexport interface ApiScimUsersListResponse {\n  schemas: string[];\n  totalResults: number;\n  startIndex: number;\n  itemsPerPage: number;\n  Resources: ApiScimUser[];\n}\n\n/** ScimUser */\nexport interface ApiScimUser {\n  schemas: string[];\n  id: string;\n  userName: string;\n  name: ApiScimName;\n  emails: ApiScimEmail[];\n  meta: ApiUserMeta;\n}\n\n/** UserMeta */\nexport interface ApiUserMeta {\n  resourceType: string;\n  created?: string | null;\n  lastModified?: string | null;\n}\n\n/** ScimName */\nexport interface ApiScimName {\n  formatted?: string | null;\n}\n\n/** ScimEmail */\nexport interface ApiScimEmail {\n  primary: boolean;\n  value: string;\n  type: string;\n}\n\n/**\n * EmptyResponse\n * Empty response for 204 No Content responses\n */\nexport type ApiEmptyResponse = object;\n\n/** ScoreConfigs */\nexport interface ApiScoreConfigs {\n  data: ApiScoreConfig[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** CreateScoreConfigRequest */\nexport interface ApiCreateScoreConfigRequest {\n  name: string;\n  dataType: ApiScoreDataType;\n  /** Configure custom categories for categorical scores. Pass a list of objects with `label` and `value` properties. Categories are autogenerated for boolean configs and cannot be passed */\n  categories?: ApiConfigCategory[] | null;\n  /**\n   * Configure a minimum value for numerical scores. If not set, the minimum value defaults to -∞\n   * @format double\n   */\n  minValue?: number | null;\n  /**\n   * Configure a maximum value for numerical scores. If not set, the maximum value defaults to +∞\n   * @format double\n   */\n  maxValue?: number | null;\n  /** Description is shown across the Langfuse UI and can be used to e.g. explain the config categories in detail, why a numeric range was set, or provide additional context on config name or usage */\n  description?: string | null;\n}\n\n/** GetScoresResponseTraceData */\nexport interface ApiGetScoresResponseTraceData {\n  /** The user ID associated with the trace referenced by score */\n  userId?: string | null;\n  /** A list of tags associated with the trace referenced by score */\n  tags?: string[] | null;\n  /** The environment of the trace referenced by score */\n  environment?: string | null;\n}\n\n/** GetScoresResponseDataNumeric */\nexport type ApiGetScoresResponseDataNumeric = ApiNumericScore & {\n  trace?: ApiGetScoresResponseTraceData | null;\n};\n\n/** GetScoresResponseDataCategorical */\nexport type ApiGetScoresResponseDataCategorical = ApiCategoricalScore & {\n  trace?: ApiGetScoresResponseTraceData | null;\n};\n\n/** GetScoresResponseDataBoolean */\nexport type ApiGetScoresResponseDataBoolean = ApiBooleanScore & {\n  trace?: ApiGetScoresResponseTraceData | null;\n};\n\n/** GetScoresResponseData */\nexport type ApiGetScoresResponseData =\n  | ({\n      dataType: \"NUMERIC\";\n    } & ApiGetScoresResponseDataNumeric)\n  | ({\n      dataType: \"CATEGORICAL\";\n    } & ApiGetScoresResponseDataCategorical)\n  | ({\n      dataType: \"BOOLEAN\";\n    } & ApiGetScoresResponseDataBoolean);\n\n/** GetScoresResponse */\nexport interface ApiGetScoresResponse {\n  data: ApiGetScoresResponseData[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** CreateScoreRequest */\nexport interface ApiCreateScoreRequest {\n  id?: string | null;\n  traceId?: string | null;\n  sessionId?: string | null;\n  observationId?: string | null;\n  datasetRunId?: string | null;\n  /** @example \"novelty\" */\n  name: string;\n  /** The value of the score. Must be passed as string for categorical scores, and numeric for boolean and numeric scores. Boolean score values must equal either 1 or 0 (true or false) */\n  value: ApiCreateScoreValue;\n  comment?: string | null;\n  metadata?: any;\n  /** The environment of the score. Can be any lowercase alphanumeric string with hyphens and underscores that does not start with 'langfuse'. */\n  environment?: string | null;\n  /** The data type of the score. When passing a configId this field is inferred. Otherwise, this field must be passed or will default to numeric. */\n  dataType?: ApiScoreDataType | null;\n  /** Reference a score config on a score. The unique langfuse identifier of a score config. When passing this field, the dataType and stringValue fields are automatically populated. */\n  configId?: string | null;\n}\n\n/** CreateScoreResponse */\nexport interface ApiCreateScoreResponse {\n  /** The id of the created object in Langfuse */\n  id: string;\n}\n\n/** PaginatedSessions */\nexport interface ApiPaginatedSessions {\n  data: ApiSession[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** Traces */\nexport interface ApiTraces {\n  data: ApiTraceWithDetails[];\n  meta: ApiUtilsMetaResponse;\n}\n\n/** DeleteTraceResponse */\nexport interface ApiDeleteTraceResponse {\n  message: string;\n}\n\n/** Sort */\nexport interface ApiSort {\n  id: string;\n}\n\n/** utilsMetaResponse */\nexport interface ApiUtilsMetaResponse {\n  /** current page number */\n  page: number;\n  /** number of items per page */\n  limit: number;\n  /** number of total items given the current filters/selection (if any) */\n  totalItems: number;\n  /** number of total pages given the current limit */\n  totalPages: number;\n}\n\nexport interface ApiAnnotationQueuesListQueuesParams {\n  /** page number, starts at 1 */\n  page?: number | null;\n  /** limit of items per page */\n  limit?: number | null;\n}\n\nexport interface ApiAnnotationQueuesListQueueItemsParams {\n  /** Filter by status */\n  status?: ApiAnnotationQueueStatus | null;\n  /** page number, starts at 1 */\n  page?: number | null;\n  /** limit of items per page */\n  limit?: number | null;\n  /** The unique identifier of the annotation queue */\n  queueId: string;\n}\n\nexport interface ApiCommentsGetParams {\n  /** Page number, starts at 1. */\n  page?: number | null;\n  /** Limit of items per page. If you encounter api issues due to too large page sizes, try to reduce the limit */\n  limit?: number | null;\n  /** Filter comments by object type (trace, observation, session, prompt). */\n  objectType?: string | null;\n  /** Filter comments by object id. If objectType is not provided, an error will be thrown. */\n  objectId?: string | null;\n  /** Filter comments by author user id. */\n  authorUserId?: string | null;\n}\n\nexport interface ApiDatasetItemsListParams {\n  datasetName?: string | null;\n  sourceTraceId?: string | null;\n  sourceObservationId?: string | null;\n  /** page number, starts at 1 */\n  page?: number | null;\n  /** limit of items per page */\n  limit?: number | null;\n}\n\nexport interface ApiDatasetRunItemsListParams {\n  datasetId: string;\n  runName: string;\n  /** page number, starts at 1 */\n  page?: number | null;\n  /** limit of items per page */\n  limit?: number | null;\n  response: ApiPaginatedDatasetRunItems;\n}\n\nexport interface ApiDatasetsListParams {\n  /** page number, starts at 1 */\n  page?: number | null;\n  /** limit of items per page */\n  limit?: number | null;\n}\n\nexport interface ApiDatasetsGetRunsParams {\n  /** page number, starts at 1 */\n  page?: number | null;\n  /** limit of items per page */\n  limit?: number | null;\n  datasetName: string;\n}\n\nexport interface ApiIngestionBatchPayload {\n  /** Batch of tracing events to be ingested. Discriminated by attribute `type`. */\n  batch: ApiIngestionEvent[];\n  /** Optional. Metadata field used by the Langfuse SDKs for debugging. */\n  metadata?: any;\n}\n\nexport interface ApiMetricsMetricsParams {\n  /**\n   * JSON string containing the query parameters with the following structure:\n   * ```json\n   * {\n   *   \"view\": string,           // Required. One of \"traces\", \"observations\", \"scores-numeric\", \"scores-categorical\"\n   *   \"dimensions\": [           // Optional. Default: []\n   *     {\n   *       \"field\": string       // Field to group by, e.g. \"name\", \"userId\", \"sessionId\"\n   *     }\n   *   ],\n   *   \"metrics\": [              // Required. At least one metric must be provided\n   *     {\n   *       \"measure\": string,    // What to measure, e.g. \"count\", \"latency\", \"value\"\n   *       \"aggregation\": string // How to aggregate, e.g. \"count\", \"sum\", \"avg\", \"p95\", \"histogram\"\n   *     }\n   *   ],\n   *   \"filters\": [              // Optional. Default: []\n   *     {\n   *       \"column\": string,     // Column to filter on\n   *       \"operator\": string,   // Operator, e.g. \"=\", \">\", \"<\", \"contains\"\n   *       \"value\": any,         // Value to compare against\n   *       \"type\": string,       // Data type, e.g. \"string\", \"number\", \"stringObject\"\n   *       \"key\": string         // Required only when filtering on metadata\n   *     }\n   *   ],\n   *   \"timeDimension\": {        // Optional. Default: null. If provided, results will be grouped by time\n   *     \"granularity\": string   // One of \"minute\", \"hour\", \"day\", \"week\", \"month\", \"auto\"\n   *   },\n   *   \"fromTimestamp\": string,  // Required. ISO datetime string for start of time range\n   *   \"toTimestamp\": string,    // Required. ISO datetime string for end of time range\n   *   \"orderBy\": [              // Optional. Default: null\n   *     {\n   *       \"field\": string,      // Field to order by\n   *       \"direction\": string   // \"asc\" or \"desc\"\n   *     }\n   *   ],\n   *   \"config\": {               // Optional. Query-specific configuration\n   *     \"bins\": number,         // Optional. Number of bins for histogram (1-100), default: 10\n   *     \"row_limit\": number     // Optional. Row limit for results (1-1000)\n   *   }\n   * }\n   * ```\n   */\n  query: string;\n}\n\nexport interface ApiModelsListParams {\n  /** page number, starts at 1 */\n  page?: number | null;\n  /** limit of items per page */\n  limit?: number | null;\n}\n\nexport interface ApiObservationsGetManyParams {\n  /** Page number, starts at 1. */\n  page?: number | null;\n  /** Limit of items per page. If you encounter api issues due to too large page sizes, try to reduce the limit. */\n  limit?: number | null;\n  name?: string | null;\n  userId?: string | null;\n  type?: string | null;\n  traceId?: string | null;\n  parentObservationId?: string | null;\n  /** Optional filter for observations where the environment is one of the provided values. */\n  environment?: (string | null)[];\n  /**\n   * Retrieve only observations with a start_time on or after this datetime (ISO 8601).\n   * @format date-time\n   */\n  fromStartTime?: string | null;\n  /**\n   * Retrieve only observations with a start_time before this datetime (ISO 8601).\n   * @format date-time\n   */\n  toStartTime?: string | null;\n  /** Optional filter to only include observations with a certain version. */\n  version?: string | null;\n}\n\nexport interface ApiProjectsCreatePayload {\n  name: string;\n  /** Optional metadata for the project */\n  metadata?: Record<string, any>;\n  /** Number of days to retain data. Must be 0 or at least 3 days. Requires data-retention entitlement for non-zero values. Optional. */\n  retention: number;\n}\n\nexport interface ApiProjectsUpdatePayload {\n  name: string;\n  /** Optional metadata for the project */\n  metadata?: Record<string, any>;\n  /** Number of days to retain data. Must be 0 or at least 3 days. Requires data-retention entitlement for non-zero values. Optional. */\n  retention: number;\n}\n\nexport interface ApiProjectsCreateApiKeyPayload {\n  /** Optional note for the API key */\n  note?: string | null;\n}\n\nexport interface ApiPromptVersionUpdatePayload {\n  /** New labels for the prompt version. Labels are unique across versions. The \"latest\" label is reserved and managed by Langfuse. */\n  newLabels: string[];\n}\n\nexport interface ApiPromptsGetParams {\n  /** Version of the prompt to be retrieved. */\n  version?: number | null;\n  /** Label of the prompt to be retrieved. Defaults to \"production\" if no label or version is set. */\n  label?: string | null;\n  /** The name of the prompt */\n  promptName: string;\n}\n\nexport interface ApiPromptsListParams {\n  name?: string | null;\n  label?: string | null;\n  tag?: string | null;\n  /** page number, starts at 1 */\n  page?: number | null;\n  /** limit of items per page */\n  limit?: number | null;\n  /**\n   * Optional filter to only include prompt versions created/updated on or after a certain datetime (ISO 8601)\n   * @format date-time\n   */\n  fromUpdatedAt?: string | null;\n  /**\n   * Optional filter to only include prompt versions created/updated before a certain datetime (ISO 8601)\n   * @format date-time\n   */\n  toUpdatedAt?: string | null;\n}\n\nexport interface ApiScimListUsersParams {\n  /** Filter expression (e.g. userName eq \"value\") */\n  filter?: string | null;\n  /** 1-based index of the first result to return (default 1) */\n  startIndex?: number | null;\n  /** Maximum number of results to return (default 100) */\n  count?: number | null;\n}\n\nexport interface ApiScimCreateUserPayload {\n  /** User's email address (required) */\n  userName: string;\n  /** User's name information */\n  name: ApiScimName;\n  /** User's email addresses */\n  emails?: ApiScimEmail[] | null;\n  /** Whether the user is active */\n  active?: boolean | null;\n  /** Initial password for the user */\n  password?: string | null;\n}\n\nexport interface ApiScoreConfigsGetParams {\n  /** Page number, starts at 1. */\n  page?: number | null;\n  /** Limit of items per page. If you encounter api issues due to too large page sizes, try to reduce the limit */\n  limit?: number | null;\n}\n\nexport interface ApiScoreV2GetParams {\n  /** Page number, starts at 1. */\n  page?: number | null;\n  /** Limit of items per page. If you encounter api issues due to too large page sizes, try to reduce the limit. */\n  limit?: number | null;\n  /** Retrieve only scores with this userId associated to the trace. */\n  userId?: string | null;\n  /** Retrieve only scores with this name. */\n  name?: string | null;\n  /**\n   * Optional filter to only include scores created on or after a certain datetime (ISO 8601)\n   * @format date-time\n   */\n  fromTimestamp?: string | null;\n  /**\n   * Optional filter to only include scores created before a certain datetime (ISO 8601)\n   * @format date-time\n   */\n  toTimestamp?: string | null;\n  /** Optional filter for scores where the environment is one of the provided values. */\n  environment?: (string | null)[];\n  /** Retrieve only scores from a specific source. */\n  source?: ApiScoreSource | null;\n  /** Retrieve only scores with <operator> value. */\n  operator?: string | null;\n  /**\n   * Retrieve only scores with <operator> value.\n   * @format double\n   */\n  value?: number | null;\n  /** Comma-separated list of score IDs to limit the results to. */\n  scoreIds?: string | null;\n  /** Retrieve only scores with a specific configId. */\n  configId?: string | null;\n  /** Retrieve only scores with a specific annotation queueId. */\n  queueId?: string | null;\n  /** Retrieve only scores with a specific dataType. */\n  dataType?: ApiScoreDataType | null;\n  /** Only scores linked to traces that include all of these tags will be returned. */\n  traceTags?: (string | null)[];\n}\n\nexport interface ApiSessionsListParams {\n  /** Page number, starts at 1 */\n  page?: number | null;\n  /** Limit of items per page. If you encounter api issues due to too large page sizes, try to reduce the limit. */\n  limit?: number | null;\n  /**\n   * Optional filter to only include sessions created on or after a certain datetime (ISO 8601)\n   * @format date-time\n   */\n  fromTimestamp?: string | null;\n  /**\n   * Optional filter to only include sessions created before a certain datetime (ISO 8601)\n   * @format date-time\n   */\n  toTimestamp?: string | null;\n  /** Optional filter for sessions where the environment is one of the provided values. */\n  environment?: (string | null)[];\n}\n\nexport interface ApiTraceListParams {\n  /** Page number, starts at 1 */\n  page?: number | null;\n  /** Limit of items per page. If you encounter api issues due to too large page sizes, try to reduce the limit. */\n  limit?: number | null;\n  userId?: string | null;\n  name?: string | null;\n  sessionId?: string | null;\n  /**\n   * Optional filter to only include traces with a trace.timestamp on or after a certain datetime (ISO 8601)\n   * @format date-time\n   */\n  fromTimestamp?: string | null;\n  /**\n   * Optional filter to only include traces with a trace.timestamp before a certain datetime (ISO 8601)\n   * @format date-time\n   */\n  toTimestamp?: string | null;\n  /** Format of the string [field].[asc/desc]. Fields: id, timestamp, name, userId, release, version, public, bookmarked, sessionId. Example: timestamp.asc */\n  orderBy?: string | null;\n  /** Only traces that include all of these tags will be returned. */\n  tags?: (string | null)[];\n  /** Optional filter to only include traces with a certain version. */\n  version?: string | null;\n  /** Optional filter to only include traces with a certain release. */\n  release?: string | null;\n  /** Optional filter for traces where the environment is one of the provided values. */\n  environment?: (string | null)[];\n  /** Comma-separated list of fields to include in the response. Available field groups are 'core' (always included), 'io' (input, output, metadata), 'scores', 'observations', 'metrics'. If not provided, all fields are included. Example: 'core,scores,metrics' */\n  fields?: string | null;\n}\n\nexport interface ApiTraceDeleteMultiplePayload {\n  /** List of trace IDs to delete */\n  traceIds: string[];\n}\n\nexport type QueryParamsType = Record<string | number, any>;\nexport type ResponseFormat = keyof Omit<Body, \"body\" | \"bodyUsed\">;\n\nexport interface FullRequestParams extends Omit<RequestInit, \"body\"> {\n  /** set parameter to `true` for call `securityWorker` for this request */\n  secure?: boolean;\n  /** request path */\n  path: string;\n  /** content type of request body */\n  type?: ContentType;\n  /** query params */\n  query?: QueryParamsType;\n  /** format of response (i.e. response.json() -> format: \"json\") */\n  format?: ResponseFormat;\n  /** request body */\n  body?: unknown;\n  /** base url */\n  baseUrl?: string;\n  /** request cancellation token */\n  cancelToken?: CancelToken;\n}\n\nexport type RequestParams = Omit<FullRequestParams, \"body\" | \"method\" | \"query\" | \"path\">;\n\nexport interface ApiConfig<SecurityDataType = unknown> {\n  baseUrl?: string;\n  baseApiParams?: Omit<RequestParams, \"baseUrl\" | \"cancelToken\" | \"signal\">;\n  securityWorker?: (securityData: SecurityDataType | null) => Promise<RequestParams | void> | RequestParams | void;\n  customFetch?: typeof fetch;\n}\n\nexport interface HttpResponse<D extends unknown, E extends unknown = unknown> extends Response {\n  data: D;\n  error: E;\n}\n\ntype CancelToken = Symbol | string | number;\n\nexport enum ContentType {\n  Json = \"application/json\",\n  FormData = \"multipart/form-data\",\n  UrlEncoded = \"application/x-www-form-urlencoded\",\n  Text = \"text/plain\",\n}\n\nexport class HttpClient<SecurityDataType = unknown> {\n  public baseUrl: string = \"\";\n  private securityData: SecurityDataType | null = null;\n  private securityWorker?: ApiConfig<SecurityDataType>[\"securityWorker\"];\n  private abortControllers = new Map<CancelToken, AbortController>();\n  private customFetch = (...fetchParams: Parameters<typeof fetch>) => fetch(...fetchParams);\n\n  private baseApiParams: RequestParams = {\n    credentials: \"same-origin\",\n    headers: {},\n    redirect: \"follow\",\n    referrerPolicy: \"no-referrer\",\n  };\n\n  constructor(apiConfig: ApiConfig<SecurityDataType> = {}) {\n    Object.assign(this, apiConfig);\n  }\n\n  public setSecurityData = (data: SecurityDataType | null) => {\n    this.securityData = data;\n  };\n\n  protected encodeQueryParam(key: string, value: any) {\n    const encodedKey = encodeURIComponent(key);\n    return `${encodedKey}=${encodeURIComponent(typeof value === \"number\" ? value : `${value}`)}`;\n  }\n\n  protected addQueryParam(query: QueryParamsType, key: string) {\n    return this.encodeQueryParam(key, query[key]);\n  }\n\n  protected addArrayQueryParam(query: QueryParamsType, key: string) {\n    const value = query[key];\n    return value.map((v: any) => this.encodeQueryParam(key, v)).join(\"&\");\n  }\n\n  protected toQueryString(rawQuery?: QueryParamsType): string {\n    const query = rawQuery || {};\n    const keys = Object.keys(query).filter((key) => \"undefined\" !== typeof query[key]);\n    return keys\n      .map((key) => (Array.isArray(query[key]) ? this.addArrayQueryParam(query, key) : this.addQueryParam(query, key)))\n      .join(\"&\");\n  }\n\n  protected addQueryParams(rawQuery?: QueryParamsType): string {\n    const queryString = this.toQueryString(rawQuery);\n    return queryString ? `?${queryString}` : \"\";\n  }\n\n  private contentFormatters: Record<ContentType, (input: any) => any> = {\n    [ContentType.Json]: (input: any) =>\n      input !== null && (typeof input === \"object\" || typeof input === \"string\") ? JSON.stringify(input) : input,\n    [ContentType.Text]: (input: any) => (input !== null && typeof input !== \"string\" ? JSON.stringify(input) : input),\n    [ContentType.FormData]: (input: any) =>\n      Object.keys(input || {}).reduce((formData, key) => {\n        const property = input[key];\n        formData.append(\n          key,\n          property instanceof Blob\n            ? property\n            : typeof property === \"object\" && property !== null\n              ? JSON.stringify(property)\n              : `${property}`\n        );\n        return formData;\n      }, new FormData()),\n    [ContentType.UrlEncoded]: (input: any) => this.toQueryString(input),\n  };\n\n  protected mergeRequestParams(params1: RequestParams, params2?: RequestParams): RequestParams {\n    return {\n      ...this.baseApiParams,\n      ...params1,\n      ...(params2 || {}),\n      headers: {\n        ...(this.baseApiParams.headers || {}),\n        ...(params1.headers || {}),\n        ...((params2 && params2.headers) || {}),\n      },\n    };\n  }\n\n  protected createAbortSignal = (cancelToken: CancelToken): AbortSignal | undefined => {\n    if (this.abortControllers.has(cancelToken)) {\n      const abortController = this.abortControllers.get(cancelToken);\n      if (abortController) {\n        return abortController.signal;\n      }\n      return void 0;\n    }\n\n    const abortController = new AbortController();\n    this.abortControllers.set(cancelToken, abortController);\n    return abortController.signal;\n  };\n\n  public abortRequest = (cancelToken: CancelToken) => {\n    const abortController = this.abortControllers.get(cancelToken);\n\n    if (abortController) {\n      abortController.abort();\n      this.abortControllers.delete(cancelToken);\n    }\n  };\n\n  public request = async <T = any, E = any>({\n    body,\n    secure,\n    path,\n    type,\n    query,\n    format,\n    baseUrl,\n    cancelToken,\n    ...params\n  }: FullRequestParams): Promise<T> => {\n    const secureParams =\n      ((typeof secure === \"boolean\" ? secure : this.baseApiParams.secure) &&\n        this.securityWorker &&\n        (await this.securityWorker(this.securityData))) ||\n      {};\n    const requestParams = this.mergeRequestParams(params, secureParams);\n    const queryString = query && this.toQueryString(query);\n    const payloadFormatter = this.contentFormatters[type || ContentType.Json];\n    const responseFormat = format || requestParams.format;\n\n    return this.customFetch(`${baseUrl || this.baseUrl || \"\"}${path}${queryString ? `?${queryString}` : \"\"}`, {\n      ...requestParams,\n      headers: {\n        ...(requestParams.headers || {}),\n        ...(type && type !== ContentType.FormData ? { \"Content-Type\": type } : {}),\n      },\n      signal: (cancelToken ? this.createAbortSignal(cancelToken) : requestParams.signal) || null,\n      body: typeof body === \"undefined\" || body === null ? null : payloadFormatter(body),\n    }).then(async (response) => {\n      const r = response.clone() as HttpResponse<T, E>;\n      r.data = null as unknown as T;\n      r.error = null as unknown as E;\n\n      const data = !responseFormat\n        ? r\n        : await response[responseFormat]()\n            .then((data) => {\n              if (r.ok) {\n                r.data = data;\n              } else {\n                r.error = data;\n              }\n              return r;\n            })\n            .catch((e) => {\n              r.error = e;\n              return r;\n            });\n\n      if (cancelToken) {\n        this.abortControllers.delete(cancelToken);\n      }\n\n      if (!response.ok) throw data;\n      return data.data;\n    });\n  };\n}\n\n/**\n * @title langfuse\n *\n * ## Authentication\n *\n * Authenticate with the API using [Basic Auth](https://en.wikipedia.org/wiki/Basic_access_authentication), get API keys in the project settings:\n *\n * - username: Langfuse Public Key\n * - password: Langfuse Secret Key\n *\n * ## Exports\n *\n * - OpenAPI spec: https://cloud.langfuse.com/generated/api/openapi.yml\n * - Postman collection: https://cloud.langfuse.com/generated/postman/collection.json\n */\nexport class LangfusePublicApi<SecurityDataType extends unknown> extends HttpClient<SecurityDataType> {\n  api = {\n    /**\n     * @description Add an item to an annotation queue\n     *\n     * @tags AnnotationQueues\n     * @name AnnotationQueuesCreateQueueItem\n     * @request POST:/api/public/annotation-queues/{queueId}/items\n     * @secure\n     */\n    annotationQueuesCreateQueueItem: (\n      queueId: string,\n      data: ApiCreateAnnotationQueueItemRequest,\n      params: RequestParams = {}\n    ) =>\n      this.request<ApiAnnotationQueueItem, any>({\n        path: `/api/public/annotation-queues/${queueId}/items`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Remove an item from an annotation queue\n     *\n     * @tags AnnotationQueues\n     * @name AnnotationQueuesDeleteQueueItem\n     * @request DELETE:/api/public/annotation-queues/{queueId}/items/{itemId}\n     * @secure\n     */\n    annotationQueuesDeleteQueueItem: (queueId: string, itemId: string, params: RequestParams = {}) =>\n      this.request<ApiDeleteAnnotationQueueItemResponse, any>({\n        path: `/api/public/annotation-queues/${queueId}/items/${itemId}`,\n        method: \"DELETE\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get an annotation queue by ID\n     *\n     * @tags AnnotationQueues\n     * @name AnnotationQueuesGetQueue\n     * @request GET:/api/public/annotation-queues/{queueId}\n     * @secure\n     */\n    annotationQueuesGetQueue: (queueId: string, params: RequestParams = {}) =>\n      this.request<ApiAnnotationQueue, any>({\n        path: `/api/public/annotation-queues/${queueId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a specific item from an annotation queue\n     *\n     * @tags AnnotationQueues\n     * @name AnnotationQueuesGetQueueItem\n     * @request GET:/api/public/annotation-queues/{queueId}/items/{itemId}\n     * @secure\n     */\n    annotationQueuesGetQueueItem: (queueId: string, itemId: string, params: RequestParams = {}) =>\n      this.request<ApiAnnotationQueueItem, any>({\n        path: `/api/public/annotation-queues/${queueId}/items/${itemId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get items for a specific annotation queue\n     *\n     * @tags AnnotationQueues\n     * @name AnnotationQueuesListQueueItems\n     * @request GET:/api/public/annotation-queues/{queueId}/items\n     * @secure\n     */\n    annotationQueuesListQueueItems: (\n      { queueId, ...query }: ApiAnnotationQueuesListQueueItemsParams,\n      params: RequestParams = {}\n    ) =>\n      this.request<ApiPaginatedAnnotationQueueItems, any>({\n        path: `/api/public/annotation-queues/${queueId}/items`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all annotation queues\n     *\n     * @tags AnnotationQueues\n     * @name AnnotationQueuesListQueues\n     * @request GET:/api/public/annotation-queues\n     * @secure\n     */\n    annotationQueuesListQueues: (query: ApiAnnotationQueuesListQueuesParams, params: RequestParams = {}) =>\n      this.request<ApiPaginatedAnnotationQueues, any>({\n        path: `/api/public/annotation-queues`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Update an annotation queue item\n     *\n     * @tags AnnotationQueues\n     * @name AnnotationQueuesUpdateQueueItem\n     * @request PATCH:/api/public/annotation-queues/{queueId}/items/{itemId}\n     * @secure\n     */\n    annotationQueuesUpdateQueueItem: (\n      queueId: string,\n      itemId: string,\n      data: ApiUpdateAnnotationQueueItemRequest,\n      params: RequestParams = {}\n    ) =>\n      this.request<ApiAnnotationQueueItem, any>({\n        path: `/api/public/annotation-queues/${queueId}/items/${itemId}`,\n        method: \"PATCH\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a comment. Comments may be attached to different object types (trace, observation, session, prompt).\n     *\n     * @tags Comments\n     * @name CommentsCreate\n     * @request POST:/api/public/comments\n     * @secure\n     */\n    commentsCreate: (data: ApiCreateCommentRequest, params: RequestParams = {}) =>\n      this.request<ApiCreateCommentResponse, any>({\n        path: `/api/public/comments`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all comments\n     *\n     * @tags Comments\n     * @name CommentsGet\n     * @request GET:/api/public/comments\n     * @secure\n     */\n    commentsGet: (query: ApiCommentsGetParams, params: RequestParams = {}) =>\n      this.request<ApiGetCommentsResponse, any>({\n        path: `/api/public/comments`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a comment by id\n     *\n     * @tags Comments\n     * @name CommentsGetById\n     * @request GET:/api/public/comments/{commentId}\n     * @secure\n     */\n    commentsGetById: (commentId: string, params: RequestParams = {}) =>\n      this.request<ApiComment, any>({\n        path: `/api/public/comments/${commentId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a dataset item\n     *\n     * @tags DatasetItems\n     * @name DatasetItemsCreate\n     * @request POST:/api/public/dataset-items\n     * @secure\n     */\n    datasetItemsCreate: (data: ApiCreateDatasetItemRequest, params: RequestParams = {}) =>\n      this.request<ApiDatasetItem, any>({\n        path: `/api/public/dataset-items`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Delete a dataset item and all its run items. This action is irreversible.\n     *\n     * @tags DatasetItems\n     * @name DatasetItemsDelete\n     * @request DELETE:/api/public/dataset-items/{id}\n     * @secure\n     */\n    datasetItemsDelete: (id: string, params: RequestParams = {}) =>\n      this.request<ApiDeleteDatasetItemResponse, any>({\n        path: `/api/public/dataset-items/${id}`,\n        method: \"DELETE\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a dataset item\n     *\n     * @tags DatasetItems\n     * @name DatasetItemsGet\n     * @request GET:/api/public/dataset-items/{id}\n     * @secure\n     */\n    datasetItemsGet: (id: string, params: RequestParams = {}) =>\n      this.request<ApiDatasetItem, any>({\n        path: `/api/public/dataset-items/${id}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get dataset items\n     *\n     * @tags DatasetItems\n     * @name DatasetItemsList\n     * @request GET:/api/public/dataset-items\n     * @secure\n     */\n    datasetItemsList: (query: ApiDatasetItemsListParams, params: RequestParams = {}) =>\n      this.request<ApiPaginatedDatasetItems, any>({\n        path: `/api/public/dataset-items`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a dataset run item\n     *\n     * @tags DatasetRunItems\n     * @name DatasetRunItemsCreate\n     * @request POST:/api/public/dataset-run-items\n     * @secure\n     */\n    datasetRunItemsCreate: (data: ApiCreateDatasetRunItemRequest, params: RequestParams = {}) =>\n      this.request<ApiDatasetRunItem, any>({\n        path: `/api/public/dataset-run-items`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description List dataset run items\n     *\n     * @tags DatasetRunItems\n     * @name DatasetRunItemsList\n     * @request GET:/api/public/dataset-run-items\n     * @secure\n     */\n    datasetRunItemsList: (query: ApiDatasetRunItemsListParams, params: RequestParams = {}) =>\n      this.request<void, any>({\n        path: `/api/public/dataset-run-items`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        ...params,\n      }),\n\n    /**\n     * @description Create a dataset\n     *\n     * @tags Datasets\n     * @name DatasetsCreate\n     * @request POST:/api/public/v2/datasets\n     * @secure\n     */\n    datasetsCreate: (data: ApiCreateDatasetRequest, params: RequestParams = {}) =>\n      this.request<ApiDataset, any>({\n        path: `/api/public/v2/datasets`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Delete a dataset run and all its run items. This action is irreversible.\n     *\n     * @tags Datasets\n     * @name DatasetsDeleteRun\n     * @request DELETE:/api/public/datasets/{datasetName}/runs/{runName}\n     * @secure\n     */\n    datasetsDeleteRun: (datasetName: string, runName: string, params: RequestParams = {}) =>\n      this.request<ApiDeleteDatasetRunResponse, any>({\n        path: `/api/public/datasets/${datasetName}/runs/${runName}`,\n        method: \"DELETE\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a dataset\n     *\n     * @tags Datasets\n     * @name DatasetsGet\n     * @request GET:/api/public/v2/datasets/{datasetName}\n     * @secure\n     */\n    datasetsGet: (datasetName: string, params: RequestParams = {}) =>\n      this.request<ApiDataset, any>({\n        path: `/api/public/v2/datasets/${datasetName}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a dataset run and its items\n     *\n     * @tags Datasets\n     * @name DatasetsGetRun\n     * @request GET:/api/public/datasets/{datasetName}/runs/{runName}\n     * @secure\n     */\n    datasetsGetRun: (datasetName: string, runName: string, params: RequestParams = {}) =>\n      this.request<ApiDatasetRunWithItems, any>({\n        path: `/api/public/datasets/${datasetName}/runs/${runName}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get dataset runs\n     *\n     * @tags Datasets\n     * @name DatasetsGetRuns\n     * @request GET:/api/public/datasets/{datasetName}/runs\n     * @secure\n     */\n    datasetsGetRuns: ({ datasetName, ...query }: ApiDatasetsGetRunsParams, params: RequestParams = {}) =>\n      this.request<ApiPaginatedDatasetRuns, any>({\n        path: `/api/public/datasets/${datasetName}/runs`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all datasets\n     *\n     * @tags Datasets\n     * @name DatasetsList\n     * @request GET:/api/public/v2/datasets\n     * @secure\n     */\n    datasetsList: (query: ApiDatasetsListParams, params: RequestParams = {}) =>\n      this.request<ApiPaginatedDatasets, any>({\n        path: `/api/public/v2/datasets`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Check health of API and database\n     *\n     * @tags Health\n     * @name HealthHealth\n     * @request GET:/api/public/health\n     */\n    healthHealth: (params: RequestParams = {}) =>\n      this.request<ApiHealthResponse, void>({\n        path: `/api/public/health`,\n        method: \"GET\",\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Batched ingestion for Langfuse Tracing. If you want to use tracing via the API, such as to build your own Langfuse client implementation, this is the only API route you need to implement. Within each batch, there can be multiple events. Each event has a type, an id, a timestamp, metadata and a body. Internally, we refer to this as the \"event envelope\" as it tells us something about the event but not the trace. We use the event id within this envelope to deduplicate messages to avoid processing the same event twice, i.e. the event id should be unique per request. The event.body.id is the ID of the actual trace and will be used for updates and will be visible within the Langfuse App. I.e. if you want to update a trace, you'd use the same body id, but separate event IDs. Notes: - Introduction to data model: https://langfuse.com/docs/tracing-data-model - Batch sizes are limited to 3.5 MB in total. You need to adjust the number of events per batch accordingly. - The API does not return a 4xx status code for input errors. Instead, it responds with a 207 status code, which includes a list of the encountered errors.\n     *\n     * @tags Ingestion\n     * @name IngestionBatch\n     * @request POST:/api/public/ingestion\n     * @secure\n     */\n    ingestionBatch: (data: ApiIngestionBatchPayload, params: RequestParams = {}) =>\n      this.request<ApiIngestionResponse, any>({\n        path: `/api/public/ingestion`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a media record\n     *\n     * @tags Media\n     * @name MediaGet\n     * @request GET:/api/public/media/{mediaId}\n     * @secure\n     */\n    mediaGet: (mediaId: string, params: RequestParams = {}) =>\n      this.request<ApiGetMediaResponse, any>({\n        path: `/api/public/media/${mediaId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a presigned upload URL for a media record\n     *\n     * @tags Media\n     * @name MediaGetUploadUrl\n     * @request POST:/api/public/media\n     * @secure\n     */\n    mediaGetUploadUrl: (data: ApiGetMediaUploadUrlRequest, params: RequestParams = {}) =>\n      this.request<ApiGetMediaUploadUrlResponse, any>({\n        path: `/api/public/media`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Patch a media record\n     *\n     * @tags Media\n     * @name MediaPatch\n     * @request PATCH:/api/public/media/{mediaId}\n     * @secure\n     */\n    mediaPatch: (mediaId: string, data: ApiPatchMediaBody, params: RequestParams = {}) =>\n      this.request<void, any>({\n        path: `/api/public/media/${mediaId}`,\n        method: \"PATCH\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        ...params,\n      }),\n\n    /**\n     * @description Get metrics from the Langfuse project using a query object\n     *\n     * @tags Metrics\n     * @name MetricsMetrics\n     * @request GET:/api/public/metrics\n     * @secure\n     */\n    metricsMetrics: (query: ApiMetricsMetricsParams, params: RequestParams = {}) =>\n      this.request<ApiMetricsResponse, any>({\n        path: `/api/public/metrics`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a model\n     *\n     * @tags Models\n     * @name ModelsCreate\n     * @request POST:/api/public/models\n     * @secure\n     */\n    modelsCreate: (data: ApiCreateModelRequest, params: RequestParams = {}) =>\n      this.request<ApiModel, any>({\n        path: `/api/public/models`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Delete a model. Cannot delete models managed by Langfuse. You can create your own definition with the same modelName to override the definition though.\n     *\n     * @tags Models\n     * @name ModelsDelete\n     * @request DELETE:/api/public/models/{id}\n     * @secure\n     */\n    modelsDelete: (id: string, params: RequestParams = {}) =>\n      this.request<void, any>({\n        path: `/api/public/models/${id}`,\n        method: \"DELETE\",\n        secure: true,\n        ...params,\n      }),\n\n    /**\n     * @description Get a model\n     *\n     * @tags Models\n     * @name ModelsGet\n     * @request GET:/api/public/models/{id}\n     * @secure\n     */\n    modelsGet: (id: string, params: RequestParams = {}) =>\n      this.request<ApiModel, any>({\n        path: `/api/public/models/${id}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all models\n     *\n     * @tags Models\n     * @name ModelsList\n     * @request GET:/api/public/models\n     * @secure\n     */\n    modelsList: (query: ApiModelsListParams, params: RequestParams = {}) =>\n      this.request<ApiPaginatedModels, any>({\n        path: `/api/public/models`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a observation\n     *\n     * @tags Observations\n     * @name ObservationsGet\n     * @request GET:/api/public/observations/{observationId}\n     * @secure\n     */\n    observationsGet: (observationId: string, params: RequestParams = {}) =>\n      this.request<ApiObservationsView, any>({\n        path: `/api/public/observations/${observationId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a list of observations\n     *\n     * @tags Observations\n     * @name ObservationsGetMany\n     * @request GET:/api/public/observations\n     * @secure\n     */\n    observationsGetMany: (query: ApiObservationsGetManyParams, params: RequestParams = {}) =>\n      this.request<ApiObservationsViews, any>({\n        path: `/api/public/observations`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all memberships for the organization associated with the API key (requires organization-scoped API key)\n     *\n     * @tags Organizations\n     * @name OrganizationsGetOrganizationMemberships\n     * @request GET:/api/public/organizations/memberships\n     * @secure\n     */\n    organizationsGetOrganizationMemberships: (params: RequestParams = {}) =>\n      this.request<ApiMembershipsResponse, any>({\n        path: `/api/public/organizations/memberships`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all projects for the organization associated with the API key (requires organization-scoped API key)\n     *\n     * @tags Organizations\n     * @name OrganizationsGetOrganizationProjects\n     * @request GET:/api/public/organizations/projects\n     * @secure\n     */\n    organizationsGetOrganizationProjects: (params: RequestParams = {}) =>\n      this.request<ApiOrganizationProjectsResponse, any>({\n        path: `/api/public/organizations/projects`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all memberships for a specific project (requires organization-scoped API key)\n     *\n     * @tags Organizations\n     * @name OrganizationsGetProjectMemberships\n     * @request GET:/api/public/projects/{projectId}/memberships\n     * @secure\n     */\n    organizationsGetProjectMemberships: (projectId: string, params: RequestParams = {}) =>\n      this.request<ApiMembershipsResponse, any>({\n        path: `/api/public/projects/${projectId}/memberships`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create or update a membership for the organization associated with the API key (requires organization-scoped API key)\n     *\n     * @tags Organizations\n     * @name OrganizationsUpdateOrganizationMembership\n     * @request PUT:/api/public/organizations/memberships\n     * @secure\n     */\n    organizationsUpdateOrganizationMembership: (data: ApiMembershipRequest, params: RequestParams = {}) =>\n      this.request<ApiMembershipResponse, any>({\n        path: `/api/public/organizations/memberships`,\n        method: \"PUT\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create or update a membership for a specific project (requires organization-scoped API key). The user must already be a member of the organization.\n     *\n     * @tags Organizations\n     * @name OrganizationsUpdateProjectMembership\n     * @request PUT:/api/public/projects/{projectId}/memberships\n     * @secure\n     */\n    organizationsUpdateProjectMembership: (projectId: string, data: ApiMembershipRequest, params: RequestParams = {}) =>\n      this.request<ApiMembershipResponse, any>({\n        path: `/api/public/projects/${projectId}/memberships`,\n        method: \"PUT\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a new project (requires organization-scoped API key)\n     *\n     * @tags Projects\n     * @name ProjectsCreate\n     * @request POST:/api/public/projects\n     * @secure\n     */\n    projectsCreate: (data: ApiProjectsCreatePayload, params: RequestParams = {}) =>\n      this.request<ApiProject, any>({\n        path: `/api/public/projects`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a new API key for a project (requires organization-scoped API key)\n     *\n     * @tags Projects\n     * @name ProjectsCreateApiKey\n     * @request POST:/api/public/projects/{projectId}/apiKeys\n     * @secure\n     */\n    projectsCreateApiKey: (projectId: string, data: ApiProjectsCreateApiKeyPayload, params: RequestParams = {}) =>\n      this.request<ApiApiKeyResponse, any>({\n        path: `/api/public/projects/${projectId}/apiKeys`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Delete a project by ID (requires organization-scoped API key). Project deletion is processed asynchronously.\n     *\n     * @tags Projects\n     * @name ProjectsDelete\n     * @request DELETE:/api/public/projects/{projectId}\n     * @secure\n     */\n    projectsDelete: (projectId: string, params: RequestParams = {}) =>\n      this.request<ApiProjectDeletionResponse, any>({\n        path: `/api/public/projects/${projectId}`,\n        method: \"DELETE\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Delete an API key for a project (requires organization-scoped API key)\n     *\n     * @tags Projects\n     * @name ProjectsDeleteApiKey\n     * @request DELETE:/api/public/projects/{projectId}/apiKeys/{apiKeyId}\n     * @secure\n     */\n    projectsDeleteApiKey: (projectId: string, apiKeyId: string, params: RequestParams = {}) =>\n      this.request<ApiApiKeyDeletionResponse, any>({\n        path: `/api/public/projects/${projectId}/apiKeys/${apiKeyId}`,\n        method: \"DELETE\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get Project associated with API key\n     *\n     * @tags Projects\n     * @name ProjectsGet\n     * @request GET:/api/public/projects\n     * @secure\n     */\n    projectsGet: (params: RequestParams = {}) =>\n      this.request<ApiProjects, any>({\n        path: `/api/public/projects`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all API keys for a project (requires organization-scoped API key)\n     *\n     * @tags Projects\n     * @name ProjectsGetApiKeys\n     * @request GET:/api/public/projects/{projectId}/apiKeys\n     * @secure\n     */\n    projectsGetApiKeys: (projectId: string, params: RequestParams = {}) =>\n      this.request<ApiApiKeyList, any>({\n        path: `/api/public/projects/${projectId}/apiKeys`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Update a project by ID (requires organization-scoped API key).\n     *\n     * @tags Projects\n     * @name ProjectsUpdate\n     * @request PUT:/api/public/projects/{projectId}\n     * @secure\n     */\n    projectsUpdate: (projectId: string, data: ApiProjectsUpdatePayload, params: RequestParams = {}) =>\n      this.request<ApiProject, any>({\n        path: `/api/public/projects/${projectId}`,\n        method: \"PUT\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a new version for the prompt with the given `name`\n     *\n     * @tags Prompts\n     * @name PromptsCreate\n     * @request POST:/api/public/v2/prompts\n     * @secure\n     */\n    promptsCreate: (data: ApiCreatePromptRequest, params: RequestParams = {}) =>\n      this.request<ApiPrompt, any>({\n        path: `/api/public/v2/prompts`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a prompt\n     *\n     * @tags Prompts\n     * @name PromptsGet\n     * @request GET:/api/public/v2/prompts/{promptName}\n     * @secure\n     */\n    promptsGet: ({ promptName, ...query }: ApiPromptsGetParams, params: RequestParams = {}) =>\n      this.request<ApiPrompt, any>({\n        path: `/api/public/v2/prompts/${promptName}`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a list of prompt names with versions and labels\n     *\n     * @tags Prompts\n     * @name PromptsList\n     * @request GET:/api/public/v2/prompts\n     * @secure\n     */\n    promptsList: (query: ApiPromptsListParams, params: RequestParams = {}) =>\n      this.request<ApiPromptMetaListResponse, any>({\n        path: `/api/public/v2/prompts`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Update labels for a specific prompt version\n     *\n     * @tags PromptVersion\n     * @name PromptVersionUpdate\n     * @request PATCH:/api/public/v2/prompts/{name}/versions/{version}\n     * @secure\n     */\n    promptVersionUpdate: (\n      name: string,\n      version: number,\n      data: ApiPromptVersionUpdatePayload,\n      params: RequestParams = {}\n    ) =>\n      this.request<ApiPrompt, any>({\n        path: `/api/public/v2/prompts/${name}/versions/${version}`,\n        method: \"PATCH\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a new user in the organization (requires organization-scoped API key)\n     *\n     * @tags Scim\n     * @name ScimCreateUser\n     * @request POST:/api/public/scim/Users\n     * @secure\n     */\n    scimCreateUser: (data: ApiScimCreateUserPayload, params: RequestParams = {}) =>\n      this.request<ApiScimUser, any>({\n        path: `/api/public/scim/Users`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Remove a user from the organization (requires organization-scoped API key). Note that this only removes the user from the organization but does not delete the user entity itself.\n     *\n     * @tags Scim\n     * @name ScimDeleteUser\n     * @request DELETE:/api/public/scim/Users/{userId}\n     * @secure\n     */\n    scimDeleteUser: (userId: string, params: RequestParams = {}) =>\n      this.request<ApiEmptyResponse, any>({\n        path: `/api/public/scim/Users/${userId}`,\n        method: \"DELETE\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get SCIM Resource Types (requires organization-scoped API key)\n     *\n     * @tags Scim\n     * @name ScimGetResourceTypes\n     * @request GET:/api/public/scim/ResourceTypes\n     * @secure\n     */\n    scimGetResourceTypes: (params: RequestParams = {}) =>\n      this.request<ApiResourceTypesResponse, any>({\n        path: `/api/public/scim/ResourceTypes`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get SCIM Schemas (requires organization-scoped API key)\n     *\n     * @tags Scim\n     * @name ScimGetSchemas\n     * @request GET:/api/public/scim/Schemas\n     * @secure\n     */\n    scimGetSchemas: (params: RequestParams = {}) =>\n      this.request<ApiSchemasResponse, any>({\n        path: `/api/public/scim/Schemas`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get SCIM Service Provider Configuration (requires organization-scoped API key)\n     *\n     * @tags Scim\n     * @name ScimGetServiceProviderConfig\n     * @request GET:/api/public/scim/ServiceProviderConfig\n     * @secure\n     */\n    scimGetServiceProviderConfig: (params: RequestParams = {}) =>\n      this.request<ApiServiceProviderConfig, any>({\n        path: `/api/public/scim/ServiceProviderConfig`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a specific user by ID (requires organization-scoped API key)\n     *\n     * @tags Scim\n     * @name ScimGetUser\n     * @request GET:/api/public/scim/Users/{userId}\n     * @secure\n     */\n    scimGetUser: (userId: string, params: RequestParams = {}) =>\n      this.request<ApiScimUser, any>({\n        path: `/api/public/scim/Users/${userId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description List users in the organization (requires organization-scoped API key)\n     *\n     * @tags Scim\n     * @name ScimListUsers\n     * @request GET:/api/public/scim/Users\n     * @secure\n     */\n    scimListUsers: (query: ApiScimListUsersParams, params: RequestParams = {}) =>\n      this.request<ApiScimUsersListResponse, any>({\n        path: `/api/public/scim/Users`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a score configuration (config). Score configs are used to define the structure of scores\n     *\n     * @tags ScoreConfigs\n     * @name ScoreConfigsCreate\n     * @request POST:/api/public/score-configs\n     * @secure\n     */\n    scoreConfigsCreate: (data: ApiCreateScoreConfigRequest, params: RequestParams = {}) =>\n      this.request<ApiScoreConfig, any>({\n        path: `/api/public/score-configs`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get all score configs\n     *\n     * @tags ScoreConfigs\n     * @name ScoreConfigsGet\n     * @request GET:/api/public/score-configs\n     * @secure\n     */\n    scoreConfigsGet: (query: ApiScoreConfigsGetParams, params: RequestParams = {}) =>\n      this.request<ApiScoreConfigs, any>({\n        path: `/api/public/score-configs`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a score config\n     *\n     * @tags ScoreConfigs\n     * @name ScoreConfigsGetById\n     * @request GET:/api/public/score-configs/{configId}\n     * @secure\n     */\n    scoreConfigsGetById: (configId: string, params: RequestParams = {}) =>\n      this.request<ApiScoreConfig, any>({\n        path: `/api/public/score-configs/${configId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Create a score (supports both trace and session scores)\n     *\n     * @tags Score\n     * @name ScoreCreate\n     * @request POST:/api/public/scores\n     * @secure\n     */\n    scoreCreate: (data: ApiCreateScoreRequest, params: RequestParams = {}) =>\n      this.request<ApiCreateScoreResponse, any>({\n        path: `/api/public/scores`,\n        method: \"POST\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Delete a score (supports both trace and session scores)\n     *\n     * @tags Score\n     * @name ScoreDelete\n     * @request DELETE:/api/public/scores/{scoreId}\n     * @secure\n     */\n    scoreDelete: (scoreId: string, params: RequestParams = {}) =>\n      this.request<void, any>({\n        path: `/api/public/scores/${scoreId}`,\n        method: \"DELETE\",\n        secure: true,\n        ...params,\n      }),\n\n    /**\n     * @description Get a list of scores (supports both trace and session scores)\n     *\n     * @tags ScoreV2\n     * @name ScoreV2Get\n     * @request GET:/api/public/v2/scores\n     * @secure\n     */\n    scoreV2Get: (query: ApiScoreV2GetParams, params: RequestParams = {}) =>\n      this.request<ApiGetScoresResponse, any>({\n        path: `/api/public/v2/scores`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a score (supports both trace and session scores)\n     *\n     * @tags ScoreV2\n     * @name ScoreV2GetById\n     * @request GET:/api/public/v2/scores/{scoreId}\n     * @secure\n     */\n    scoreV2GetById: (scoreId: string, params: RequestParams = {}) =>\n      this.request<ApiScore, any>({\n        path: `/api/public/v2/scores/${scoreId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a session. Please note that `traces` on this endpoint are not paginated, if you plan to fetch large sessions, consider `GET /api/public/traces?sessionId=<sessionId>`\n     *\n     * @tags Sessions\n     * @name SessionsGet\n     * @request GET:/api/public/sessions/{sessionId}\n     * @secure\n     */\n    sessionsGet: (sessionId: string, params: RequestParams = {}) =>\n      this.request<ApiSessionWithTraces, any>({\n        path: `/api/public/sessions/${sessionId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get sessions\n     *\n     * @tags Sessions\n     * @name SessionsList\n     * @request GET:/api/public/sessions\n     * @secure\n     */\n    sessionsList: (query: ApiSessionsListParams, params: RequestParams = {}) =>\n      this.request<ApiPaginatedSessions, any>({\n        path: `/api/public/sessions`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Delete a specific trace\n     *\n     * @tags Trace\n     * @name TraceDelete\n     * @request DELETE:/api/public/traces/{traceId}\n     * @secure\n     */\n    traceDelete: (traceId: string, params: RequestParams = {}) =>\n      this.request<ApiDeleteTraceResponse, any>({\n        path: `/api/public/traces/${traceId}`,\n        method: \"DELETE\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Delete multiple traces\n     *\n     * @tags Trace\n     * @name TraceDeleteMultiple\n     * @request DELETE:/api/public/traces\n     * @secure\n     */\n    traceDeleteMultiple: (data: ApiTraceDeleteMultiplePayload, params: RequestParams = {}) =>\n      this.request<ApiDeleteTraceResponse, any>({\n        path: `/api/public/traces`,\n        method: \"DELETE\",\n        body: data,\n        secure: true,\n        type: ContentType.Json,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get a specific trace\n     *\n     * @tags Trace\n     * @name TraceGet\n     * @request GET:/api/public/traces/{traceId}\n     * @secure\n     */\n    traceGet: (traceId: string, params: RequestParams = {}) =>\n      this.request<ApiTraceWithFullDetails, any>({\n        path: `/api/public/traces/${traceId}`,\n        method: \"GET\",\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n\n    /**\n     * @description Get list of traces\n     *\n     * @tags Trace\n     * @name TraceList\n     * @request GET:/api/public/traces\n     * @secure\n     */\n    traceList: (query: ApiTraceListParams, params: RequestParams = {}) =>\n      this.request<ApiTraces, any>({\n        path: `/api/public/traces`,\n        method: \"GET\",\n        query: query,\n        secure: true,\n        format: \"json\",\n        ...params,\n      }),\n  };\n}\n", "import {\n  LangfuseCore,\n  LangfuseWebStateless,\n  type LangfuseFetchOptions,\n  type LangfuseFetchResponse,\n  type LangfusePersistedProperty,\n  utils,\n} from \"langfuse-core\";\nimport { type LangfuseStorage, getStorage } from \"./storage\";\nimport { LangfusePublicApi } from \"./publicApi\";\nimport { version } from \"../package.json\";\nimport { type LangfuseOptions } from \"./types\";\n\nexport type * from \"./publicApi\";\nexport type {\n  LangfusePromptClient,\n  ChatPromptClient,\n  TextPromptClient,\n  LangfusePromptRecord,\n  LangfuseTraceClient,\n  LangfuseSpanClient,\n  LangfuseEventClient,\n  LangfuseGenerationClient,\n} from \"langfuse-core\";\n\n// Required when users pass these as typed arguments\nexport { LangfuseMedia } from \"langfuse-core\";\n\nexport class Langfuse extends LangfuseCore {\n  private _storage: LangfuseStorage;\n  private _storageCache: any;\n  private _storageKey: string;\n  public api: LangfusePublicApi<null>[\"api\"];\n\n  constructor(params?: { publicKey?: string; secretKey?: string } & LangfuseOptions) {\n    const langfuseConfig = utils.configLangfuseSDK(params);\n    super(langfuseConfig);\n\n    if (typeof window !== \"undefined\" && \"Deno\" in window === false) {\n      this._storageKey = params?.persistence_name\n        ? `lf_${params.persistence_name}`\n        : `lf_${langfuseConfig.publicKey}_langfuse`;\n      this._storage = getStorage(params?.persistence || \"localStorage\", window);\n    } else {\n      this._storageKey = `lf_${langfuseConfig.publicKey}_langfuse`;\n      this._storage = getStorage(\"memory\", undefined);\n    }\n\n    this.api = new LangfusePublicApi({\n      baseUrl: this.baseUrl,\n      baseApiParams: {\n        headers: {\n          \"X-Langfuse-Sdk-Name\": \"langfuse-js\",\n          \"X-Langfuse-Sdk-Version\": this.getLibraryVersion(),\n          \"X-Langfuse-Sdk-Variant\": this.getLibraryId(),\n          \"X-Langfuse-Sdk-Integration\": this.sdkIntegration,\n          \"X-Langfuse-Public-Key\": this.publicKey,\n          ...this.additionalHeaders,\n          ...this.constructAuthorizationHeader(this.publicKey, this.secretKey),\n        },\n      },\n    }).api;\n  }\n\n  getPersistedProperty<T>(key: LangfusePersistedProperty): T | undefined {\n    if (!this._storageCache) {\n      this._storageCache = JSON.parse(this._storage.getItem(this._storageKey) || \"{}\") || {};\n    }\n\n    return this._storageCache[key];\n  }\n\n  setPersistedProperty<T>(key: LangfusePersistedProperty, value: T | null): void {\n    if (!this._storageCache) {\n      this._storageCache = JSON.parse(this._storage.getItem(this._storageKey) || \"{}\") || {};\n    }\n\n    if (value === null) {\n      delete this._storageCache[key];\n    } else {\n      this._storageCache[key] = value;\n    }\n\n    this._storage.setItem(this._storageKey, JSON.stringify(this._storageCache));\n  }\n\n  fetch(url: string, options: LangfuseFetchOptions): Promise<LangfuseFetchResponse> {\n    return fetch(url, options);\n  }\n\n  getLibraryId(): string {\n    return \"langfuse\";\n  }\n\n  getLibraryVersion(): string {\n    return version;\n  }\n\n  getCustomUserAgent(): void {\n    return;\n  }\n}\n\nexport class LangfuseWeb extends LangfuseWebStateless {\n  private _storage: LangfuseStorage;\n  private _storageCache: any;\n  private _storageKey: string;\n\n  constructor(params?: Omit<LangfuseOptions, \"secretKey\">) {\n    const langfuseConfig = utils.configLangfuseSDK(params, false);\n    super(langfuseConfig);\n\n    if (typeof window !== \"undefined\") {\n      this._storageKey = params?.persistence_name\n        ? `lf_${params.persistence_name}`\n        : `lf_${langfuseConfig.publicKey}_langfuse`;\n      this._storage = getStorage(params?.persistence || \"localStorage\", window);\n    } else {\n      this._storageKey = `lf_${langfuseConfig.publicKey}_langfuse`;\n      this._storage = getStorage(\"memory\", undefined);\n    }\n  }\n\n  getPersistedProperty<T>(key: LangfusePersistedProperty): T | undefined {\n    if (!this._storageCache) {\n      this._storageCache = JSON.parse(this._storage.getItem(this._storageKey) || \"{}\") || {};\n    }\n\n    return this._storageCache[key];\n  }\n\n  setPersistedProperty<T>(key: LangfusePersistedProperty, value: T | null): void {\n    if (!this._storageCache) {\n      this._storageCache = JSON.parse(this._storage.getItem(this._storageKey) || \"{}\") || {};\n    }\n\n    if (value === null) {\n      delete this._storageCache[key];\n    } else {\n      this._storageCache[key] = value;\n    }\n\n    this._storage.setItem(this._storageKey, JSON.stringify(this._storageCache));\n  }\n\n  fetch(url: string, options: LangfuseFetchOptions): Promise<LangfuseFetchResponse> {\n    return fetch(url, options);\n  }\n\n  getLibraryId(): string {\n    return \"langfuse-frontend\";\n  }\n\n  getLibraryVersion(): string {\n    return version;\n  }\n\n  getCustomUserAgent(): void {\n    return;\n  }\n}\n", "import { Langfuse } from \"../langfuse\";\nimport type { LangfuseInitParams } from \"./types\";\n\n/**\n * Represents a singleton instance of the Langfuse client.\n */\nexport class LangfuseSingleton {\n  private static instance: Langfuse | null = null; // Lazy initialization\n\n  /**\n   * Returns the singleton instance of the Langfuse client.\n   * @param params Optional parameters for initializing the Langfuse instance. Only used for the first call.\n   * @returns The singleton instance of the Langfuse client.\n   */\n  public static getInstance(params?: LangfuseInitParams): Langfuse {\n    if (!LangfuseSingleton.instance) {\n      LangfuseSingleton.instance = new Langfuse(params);\n    }\n    return LangfuseSingleton.instance;\n  }\n}\n", "import type OpenAI from \"openai\";\nimport type { CreateLangfuseGenerationBody, Usage, UsageDetails } from \"langfuse-core\";\n\ntype ParsedOpenAIArguments = {\n  model: string;\n  input: Record<string, any> | string;\n  modelParameters: Record<string, any>;\n};\n\nexport const parseInputArgs = (args: Record<string, any>): ParsedOpenAIArguments => {\n  let params: Record<string, any> = {};\n  params = {\n    frequency_penalty: args.frequency_penalty,\n    logit_bias: args.logit_bias,\n    logprobs: args.logprobs,\n    max_tokens: args.max_tokens,\n    n: args.n,\n    presence_penalty: args.presence_penalty,\n    seed: args.seed,\n    stop: args.stop,\n    stream: args.stream,\n    temperature: args.temperature,\n    top_p: args.top_p,\n    user: args.user,\n    response_format: args.response_format,\n    top_logprobs: args.top_logprobs,\n  };\n\n  let input: Record<string, any> | string = args.input;\n\n  if (args && typeof args === \"object\" && !Array.isArray(args) && \"messages\" in args) {\n    input = {};\n    input.messages = args.messages;\n    if (\"function_call\" in args) {\n      input.function_call = args.function_call;\n    }\n    if (\"functions\" in args) {\n      input.functions = args.functions;\n    }\n    if (\"tools\" in args) {\n      input.tools = args.tools;\n    }\n\n    if (\"tool_choice\" in args) {\n      input.tool_choice = args.tool_choice;\n    }\n  } else if (!input) {\n    input = args.prompt;\n  }\n\n  return {\n    model: args.model,\n    input: input,\n    modelParameters: params,\n  };\n};\n\nexport const parseCompletionOutput = (res: unknown): CreateLangfuseGenerationBody[\"output\"] => {\n  if (res instanceof Object && \"output_text\" in res && res[\"output_text\"] !== \"\") {\n    return res[\"output_text\"] as string;\n  }\n\n  if (typeof res === \"object\" && res && \"output\" in res && Array.isArray(res[\"output\"])) {\n    const output = res[\"output\"];\n\n    if (output.length > 1) {\n      return output;\n    }\n    if (output.length === 1) {\n      return output[0] as Record<string, unknown>;\n    }\n\n    return null;\n  }\n\n  if (!(res instanceof Object && \"choices\" in res && Array.isArray(res.choices))) {\n    return \"\";\n  }\n\n  return \"message\" in res.choices[0] ? res.choices[0].message : res.choices[0].text ?? \"\";\n};\n\nexport const parseUsage = (res: unknown): Usage | undefined => {\n  if (hasCompletionUsage(res)) {\n    const { prompt_tokens, completion_tokens, total_tokens } = res.usage;\n\n    return {\n      input: prompt_tokens,\n      output: completion_tokens,\n      total: total_tokens,\n    };\n  }\n};\n\nexport const parseUsageDetails = (completionUsage: OpenAI.CompletionUsage): UsageDetails | undefined => {\n  if (\"prompt_tokens\" in completionUsage) {\n    const { prompt_tokens, completion_tokens, total_tokens, completion_tokens_details, prompt_tokens_details } =\n      completionUsage;\n\n    return {\n      input: prompt_tokens,\n      output: completion_tokens,\n      total: total_tokens,\n      ...Object.fromEntries(\n        Object.entries(prompt_tokens_details ?? {}).map(([key, value]) => [`input_${key}`, value as number])\n      ),\n      ...Object.fromEntries(\n        Object.entries(completion_tokens_details ?? {}).map(([key, value]) => [`output_${key}`, value as number])\n      ),\n    };\n  } else if (\"input_tokens\" in completionUsage) {\n    const { input_tokens, output_tokens, total_tokens, input_tokens_details, output_tokens_details } = completionUsage;\n\n    return {\n      input: input_tokens,\n      output: output_tokens,\n      total: total_tokens,\n      ...Object.fromEntries(\n        Object.entries(input_tokens_details ?? {}).map(([key, value]) => [`input_${key}`, value as number])\n      ),\n      ...Object.fromEntries(\n        Object.entries(output_tokens_details ?? {}).map(([key, value]) => [`output_${key}`, value as number])\n      ),\n    };\n  }\n};\n\nexport const parseUsageDetailsFromResponse = (res: unknown): UsageDetails | undefined => {\n  if (hasCompletionUsage(res)) {\n    return parseUsageDetails(res.usage);\n  }\n};\n\nexport const parseChunk = (\n  rawChunk: unknown\n):\n  | { isToolCall: false; data: string }\n  | { isToolCall: true; data: OpenAI.Chat.Completions.ChatCompletionChunk.Choice.Delta.ToolCall } => {\n  let isToolCall = false;\n  const _chunk = rawChunk as OpenAI.ChatCompletionChunk | OpenAI.Completions.Completion;\n  const chunkData = _chunk?.choices?.[0];\n\n  try {\n    if (\"delta\" in chunkData && \"tool_calls\" in chunkData.delta && Array.isArray(chunkData.delta.tool_calls)) {\n      isToolCall = true;\n\n      return { isToolCall, data: chunkData.delta.tool_calls[0] };\n    }\n    if (\"delta\" in chunkData) {\n      return { isToolCall, data: chunkData.delta?.content || \"\" };\n    }\n\n    if (\"text\" in chunkData) {\n      return { isToolCall, data: chunkData.text || \"\" };\n    }\n  } catch (e) {}\n\n  return { isToolCall: false, data: \"\" };\n};\n\n// Type guard to check if an unknown object is a UsageResponse\nfunction hasCompletionUsage(obj: any): obj is { usage: OpenAI.CompletionUsage } {\n  return (\n    obj instanceof Object &&\n    \"usage\" in obj &&\n    obj.usage instanceof Object &&\n    // Completion API Usage format\n    ((typeof obj.usage.prompt_tokens === \"number\" &&\n      typeof obj.usage.completion_tokens === \"number\" &&\n      typeof obj.usage.total_tokens === \"number\") ||\n      // Response API Usage format\n      (typeof obj.usage.input_tokens === \"number\" &&\n        typeof obj.usage.output_tokens === \"number\" &&\n        typeof obj.usage.total_tokens === \"number\"))\n  );\n}\n\nexport const getToolCallOutput = (\n  toolCallChunks: OpenAI.Chat.Completions.ChatCompletionChunk.Choice.Delta.ToolCall[]\n): {\n  tool_calls: {\n    function: {\n      name: string;\n      arguments: string;\n    };\n  }[];\n} => {\n  let name = \"\";\n  let toolArguments = \"\";\n\n  for (const toolCall of toolCallChunks) {\n    name = toolCall.function?.name || name;\n    toolArguments += toolCall.function?.arguments || \"\";\n  }\n\n  return {\n    tool_calls: [\n      {\n        function: {\n          name,\n          arguments: toolArguments,\n        },\n      },\n    ],\n  };\n};\n\nexport const parseModelDataFromResponse = (\n  res: unknown\n): {\n  model: string | undefined;\n  modelParameters: Record<string, string | number> | undefined;\n  metadata: Record<string, unknown> | undefined;\n} => {\n  if (typeof res !== \"object\" || res === null) {\n    return {\n      model: undefined,\n      modelParameters: undefined,\n      metadata: undefined,\n    };\n  }\n\n  const model = \"model\" in res ? (res[\"model\"] as string) : undefined;\n  const modelParameters: Record<string, string | number> = {};\n  const modelParamKeys = [\n    \"max_output_tokens\",\n    \"parallel_tool_calls\",\n    \"store\",\n    \"temperature\",\n    \"tool_choice\",\n    \"top_p\",\n    \"truncation\",\n    \"user\",\n  ];\n\n  const metadata: Record<string, unknown> = {};\n  const metadataKeys = [\n    \"reasoning\",\n    \"incomplete_details\",\n    \"instructions\",\n    \"previous_response_id\",\n    \"tools\",\n    \"metadata\",\n    \"status\",\n    \"error\",\n  ];\n\n  for (const key of modelParamKeys) {\n    const val = key in res ? (res[key as keyof typeof res] as string | number) : null;\n    if (val !== null && val !== undefined) {\n      modelParameters[key as keyof typeof modelParameters] = val;\n    }\n  }\n\n  for (const key of metadataKeys) {\n    const val = key in res ? (res[key as keyof typeof res] as string | number) : null;\n    if (val) {\n      metadata[key as keyof typeof metadata] = val;\n    }\n  }\n\n  return {\n    model,\n    modelParameters: Object.keys(modelParameters).length > 0 ? modelParameters : undefined,\n    metadata: Object.keys(metadata).length > 0 ? metadata : undefined,\n  };\n};\n", "export const isAsyncIterable = (x: unknown): x is AsyncIterable<unknown> =>\n  x != null && typeof x === \"object\" && typeof (x as any)[Symbol.asyncIterator] === \"function\";\n", "import type OpenAI from \"openai\";\n\nimport { type CreateLangfuseGenerationBody } from \"langfuse-core\";\n\nimport { LangfuseSingleton } from \"./LangfuseSingleton\";\nimport {\n  getToolCallOutput,\n  parseChunk,\n  parseCompletionOutput,\n  parseInputArgs,\n  parseUsage,\n  parseUsageDetails,\n  parseModelDataFromResponse,\n  parseUsageDetailsFromResponse,\n} from \"./parseOpenAI\";\nimport { isAsyncIterable } from \"./utils\";\nimport type { LangfuseConfig, LangfuseParent } from \"./types\";\n\ntype GenericMethod = (...args: unknown[]) => unknown;\n\nexport const withTracing = <T extends GenericMethod>(\n  tracedMethod: T,\n  config?: LangfuseConfig & Required<{ generationName: string }>\n): ((...args: Parameters<T>) => Promise<ReturnType<T>>) => {\n  return (...args) => wrapMethod(tracedMethod, config, ...args);\n};\n\nconst wrapMethod = <T extends GenericMethod>(\n  tracedMethod: T,\n  config?: LangfuseConfig,\n  ...args: Parameters<T>\n): ReturnType<T> | any => {\n  const { model, input, modelParameters } = parseInputArgs(args[0] ?? {});\n\n  const finalModelParams = { ...modelParameters, response_format: null };\n  const finalMetadata = {\n    ...config?.metadata,\n    response_format: \"response_format\" in modelParameters ? modelParameters.response_format : undefined,\n  };\n\n  let observationData = {\n    model,\n    input,\n    modelParameters: finalModelParams,\n    name: config?.generationName,\n    startTime: new Date(),\n    promptName: config?.langfusePrompt?.name,\n    promptVersion: config?.langfusePrompt?.version,\n    metadata: finalMetadata,\n  };\n\n  let langfuseParent: LangfuseParent;\n  const hasUserProvidedParent = config && \"parent\" in config;\n\n  if (hasUserProvidedParent) {\n    langfuseParent = config.parent;\n\n    // Remove the parent from the config to avoid circular references in the generation body\n    const filteredConfig = { ...config, parent: undefined };\n\n    observationData = {\n      ...filteredConfig,\n      ...observationData,\n      promptName: config?.promptName ?? config?.langfusePrompt?.name, // Maintain backward compatibility for users who use promptName\n      promptVersion: config?.promptVersion ?? config?.langfusePrompt?.version, // Maintain backward compatibility for users who use promptVersion\n    };\n  } else {\n    const langfuse = LangfuseSingleton.getInstance(config?.clientInitParams);\n    langfuseParent = langfuse.trace({\n      ...config,\n      ...observationData,\n      id: config?.traceId,\n      name: config?.traceName,\n      timestamp: observationData.startTime,\n    });\n  }\n\n  try {\n    const res = tracedMethod(...args);\n\n    // Handle stream responses\n    if (isAsyncIterable(res)) {\n      return wrapAsyncIterable(res, langfuseParent, hasUserProvidedParent, observationData);\n    }\n\n    if (res instanceof Promise) {\n      const wrappedPromise = res\n        .then((result) => {\n          if (isAsyncIterable(result)) {\n            return wrapAsyncIterable(result, langfuseParent, hasUserProvidedParent, observationData);\n          }\n\n          const output = parseCompletionOutput(result);\n          const usage = parseUsage(result);\n          const usageDetails = parseUsageDetailsFromResponse(result);\n          const {\n            model: modelFromResponse,\n            modelParameters: modelParametersFromResponse,\n            metadata: metadataFromResponse,\n          } = parseModelDataFromResponse(result);\n\n          langfuseParent.generation({\n            ...observationData,\n            output,\n            endTime: new Date(),\n            usage,\n            usageDetails,\n            model: modelFromResponse || observationData.model,\n            modelParameters: { ...observationData.modelParameters, ...modelParametersFromResponse },\n            metadata: { ...observationData.metadata, ...metadataFromResponse },\n          });\n\n          if (!hasUserProvidedParent) {\n            langfuseParent.update({ output });\n          }\n\n          return result;\n        })\n        .catch((err) => {\n          langfuseParent.generation({\n            ...observationData,\n            endTime: new Date(),\n            statusMessage: String(err),\n            level: \"ERROR\",\n            usage: {\n              inputCost: 0,\n              outputCost: 0,\n              totalCost: 0,\n            },\n            costDetails: {\n              input: 0,\n              output: 0,\n              total: 0,\n            },\n          });\n\n          throw err;\n        });\n\n      return wrappedPromise;\n    }\n\n    return res;\n  } catch (error) {\n    langfuseParent.generation({\n      ...observationData,\n      endTime: new Date(),\n      statusMessage: String(error),\n      level: \"ERROR\",\n      usage: {\n        inputCost: 0,\n        outputCost: 0,\n        totalCost: 0,\n      },\n      costDetails: {\n        input: 0,\n        output: 0,\n        total: 0,\n      },\n    });\n\n    throw error;\n  }\n};\n\nfunction wrapAsyncIterable<R>(\n  iterable: AsyncIterable<unknown>,\n  langfuseParent: LangfuseParent,\n  hasUserProvidedParent: boolean | undefined,\n  observationData: Record<string, any>\n): R {\n  async function* tracedOutputGenerator(): AsyncGenerator<unknown, void, unknown> {\n    const response = iterable;\n    const textChunks: string[] = [];\n    const toolCallChunks: OpenAI.Chat.Completions.ChatCompletionChunk.Choice.Delta.ToolCall[] = [];\n    let completionStartTime: Date | null = null;\n    let usage: OpenAI.CompletionUsage | null = null;\n    let usageDetails: CreateLangfuseGenerationBody[\"usageDetails\"] = undefined;\n    let output: CreateLangfuseGenerationBody[\"output\"] = null;\n\n    for await (const rawChunk of response as AsyncIterable<unknown>) {\n      completionStartTime = completionStartTime ?? new Date();\n\n      // Handle Response API chunks\n      if (typeof rawChunk === \"object\" && rawChunk && \"response\" in rawChunk) {\n        const result = rawChunk[\"response\"];\n        output = parseCompletionOutput(result);\n        usageDetails = parseUsageDetailsFromResponse(result);\n\n        const {\n          model: modelFromResponse,\n          modelParameters: modelParametersFromResponse,\n          metadata: metadataFromResponse,\n        } = parseModelDataFromResponse(result);\n\n        observationData[\"model\"] = modelFromResponse ?? observationData[\"model\"];\n        observationData[\"modelParameters\"] = { ...observationData.modelParameters, ...modelParametersFromResponse };\n        observationData[\"metadata\"] = { ...observationData.metadata, ...metadataFromResponse };\n      }\n\n      if (typeof rawChunk === \"object\" && rawChunk != null && \"usage\" in rawChunk) {\n        usage = rawChunk.usage as OpenAI.CompletionUsage | null;\n      }\n\n      const processedChunk = parseChunk(rawChunk);\n\n      if (!processedChunk.isToolCall) {\n        textChunks.push(processedChunk.data);\n      } else {\n        toolCallChunks.push(processedChunk.data);\n      }\n\n      yield rawChunk;\n    }\n\n    output = output ?? (toolCallChunks.length > 0 ? getToolCallOutput(toolCallChunks) : textChunks.join(\"\"));\n\n    langfuseParent.generation({\n      ...observationData,\n      output,\n      endTime: new Date(),\n      completionStartTime,\n      usage: usage\n        ? {\n            input: \"prompt_tokens\" in usage ? usage.prompt_tokens : undefined,\n            output: \"completion_tokens\" in usage ? usage.completion_tokens : undefined,\n            total: \"total_tokens\" in usage ? usage.total_tokens : undefined,\n          }\n        : undefined,\n      usageDetails: usageDetails ?? (usage ? parseUsageDetails(usage) : undefined),\n    });\n\n    if (!hasUserProvidedParent) {\n      langfuseParent.update({ output });\n    }\n  }\n\n  return tracedOutputGenerator() as R;\n}\n", "import type { LangfuseCore } from \"langfuse-core\";\n\nimport { LangfuseSingleton } from \"./LangfuseSingleton\";\nimport { withTracing } from \"./traceMethod\";\nimport type { LangfuseConfig, LangfuseExtension } from \"./types\";\n\n/**\n * Wraps an OpenAI SDK object with Langfuse tracing. Function calls are extended with a tracer that logs detailed information about the call, including the method name,\n * input parameters, and output.\n * \n * @param {T} sdk - The OpenAI SDK object to be wrapped.\n * @param {LangfuseConfig} [langfuseConfig] - Optional configuration object for the wrapper.\n * @param {string} [langfuseConfig.traceName] - The name to use for tracing. If not provided, a default name based on the SDK's constructor name and the method name will be used.\n * @param {string} [langfuseConfig.sessionId] - Optional session ID for tracing.\n * @param {string} [langfuseConfig.userId] - Optional user ID for tracing.\n * @param {string} [langfuseConfig.release] - Optional release version for tracing.\n * @param {string} [langfuseConfig.version] - Optional version for tracing.\n * @param {string} [langfuseConfig.metadata] - Optional metadata for tracing.\n * @param {string} [langfuseConfig.tags] - Optional tags for tracing.\n * @returns {T} - A proxy of the original SDK object with methods wrapped for tracing.\n *\n * @example\n * const client = new OpenAI();\n * const res = observeOpenAI(client, { traceName: \"My.OpenAI.Chat.Trace\" }).chat.completions.create({\n *      messages: [{ role: \"system\", content: \"Say this is a test!\" }],\n        model: \"gpt-3.5-turbo\",\n        user: \"langfuse\",\n        max_tokens: 300\n * });\n * */\nexport const observeOpenAI = <SDKType extends object>(\n  sdk: SDKType,\n  langfuseConfig?: LangfuseConfig\n): SDKType & LangfuseExtension => {\n  return new Proxy(sdk, {\n    get(wrappedSdk, propKey, proxy) {\n      const originalProperty = wrappedSdk[propKey as keyof SDKType];\n\n      const defaultGenerationName = `${sdk.constructor?.name}.${propKey.toString()}`;\n      const generationName = langfuseConfig?.generationName ?? defaultGenerationName;\n      const traceName = langfuseConfig && \"traceName\" in langfuseConfig ? langfuseConfig.traceName : generationName;\n      const config = { ...langfuseConfig, generationName, traceName };\n\n      // Add a flushAsync method to the OpenAI SDK that flushes the Langfuse client\n      if (propKey === \"flushAsync\") {\n        let langfuseClient: LangfuseCore;\n\n        // Flush the correct client depending on whether a parent client is provided\n        if (langfuseConfig && \"parent\" in langfuseConfig) {\n          langfuseClient = langfuseConfig.parent.client;\n        } else {\n          langfuseClient = LangfuseSingleton.getInstance();\n        }\n\n        return langfuseClient.flushAsync.bind(langfuseClient);\n      }\n\n      // Add a shutdownAsync method to the OpenAI SDK that flushes the Langfuse client\n      if (propKey === \"shutdownAsync\") {\n        let langfuseClient: LangfuseCore;\n\n        // Flush the correct client depending on whether a parent client is provided\n        if (langfuseConfig && \"parent\" in langfuseConfig) {\n          langfuseClient = langfuseConfig.parent.client;\n        } else {\n          langfuseClient = LangfuseSingleton.getInstance();\n        }\n\n        return langfuseClient.shutdownAsync.bind(langfuseClient);\n      }\n\n      // Trace methods of the OpenAI SDK\n      if (typeof originalProperty === \"function\") {\n        return withTracing(originalProperty.bind(wrappedSdk), config);\n      }\n\n      const isNestedOpenAIObject =\n        originalProperty &&\n        !Array.isArray(originalProperty) &&\n        !(originalProperty instanceof Date) &&\n        typeof originalProperty === \"object\";\n\n      // Recursively wrap nested objects to ensure all nested properties or methods are also traced\n      if (isNestedOpenAIObject) {\n        return observeOpenAI(originalProperty, config);\n      }\n\n      // Fallback to returning the original value\n      return Reflect.get(wrappedSdk, propKey, proxy);\n    },\n  }) as SDKType & LangfuseExtension;\n};\n", "import { Langfuse, type LangfuseOptions } from \"langfuse\";\n\nimport { BaseCallbackHandler } from \"@langchain/core/callbacks/base\";\nimport {\n  AIMessage,\n  AIMessageChunk,\n  BaseMessage,\n  ChatMessage,\n  FunctionMessage,\n  HumanMessage,\n  SystemMessage,\n  ToolMessage,\n  type UsageMetadata,\n  type BaseMessageFields,\n  type MessageContent,\n} from \"@langchain/core/messages\";\n\nimport type { Serialized } from \"@langchain/core/load/serializable\";\nimport type { AgentAction, AgentFinish } from \"@langchain/core/agents\";\nimport type { ChainValues } from \"@langchain/core/utils/types\";\nimport type { Generation, LLMResult } from \"@langchain/core/outputs\";\nimport type { Document } from \"@langchain/core/documents\";\n\nimport type { ChatPromptClient, LangfuseSpanClient, LangfuseTraceClient, TextPromptClient } from \"langfuse-core\";\n\nconst LANGSMITH_HIDDEN_TAG = \"langsmith:hidden\";\n\nexport type LlmMessage = {\n  role: string;\n  content: BaseMessageFields[\"content\"];\n  additional_kwargs?: BaseMessageFields[\"additional_kwargs\"];\n};\n\nexport type AnonymousLlmMessage = {\n  content: BaseMessageFields[\"content\"];\n  additional_kwargs?: BaseMessageFields[\"additional_kwargs\"];\n};\n\ntype RootParams = {\n  root: LangfuseTraceClient | LangfuseSpanClient;\n};\n\ntype KeyParams = {\n  publicKey?: string;\n  secretKey?: string;\n} & LangfuseOptions;\n\ntype ConstructorParams = (RootParams | KeyParams) & {\n  userId?: string; // added to all traces\n  version?: string; // added to all traces and observations\n  sessionId?: string; // added to all traces\n  metadata?: Record<string, unknown>; // added to all traces\n  tags?: string[]; // added to all traces\n  updateRoot?: boolean;\n};\n\nexport class CallbackHandler extends BaseCallbackHandler {\n  name = \"CallbackHandler\";\n  langfuse: Langfuse;\n  traceId?: string;\n  observationId?: string;\n  rootObservationId?: string;\n  topLevelObservationId?: string;\n  userId?: string;\n  version?: string;\n  sessionId?: string;\n  metadata?: Record<string, unknown>;\n  tags?: string[];\n  rootProvided: boolean = false;\n  updateRoot: boolean = false;\n  debugEnabled: boolean = false;\n  completionStartTimes: Record<string, Date> = {};\n  private promptToParentRunMap;\n  private traceUpdates;\n\n  constructor(params?: ConstructorParams) {\n    super();\n    if (params && \"root\" in params) {\n      this.langfuse = params.root.client as Langfuse;\n      this.rootObservationId = params.root.observationId ?? undefined;\n      this.traceId = params.root.traceId;\n      this.rootProvided = true;\n      this.updateRoot = params.updateRoot ?? false;\n      this.metadata = params.metadata;\n    } else {\n      this.langfuse = new Langfuse({\n        ...params,\n        persistence: \"memory\",\n        sdkIntegration: params?.sdkIntegration ?? \"LANGCHAIN\",\n      });\n      this.sessionId = params?.sessionId;\n      this.userId = params?.userId;\n      this.metadata = params?.metadata;\n      this.tags = params?.tags;\n    }\n    this.version = params?.version;\n    this.promptToParentRunMap = new Map<string, TextPromptClient | ChatPromptClient>();\n    this.traceUpdates = new Map<string, { userId?: string; sessionId?: string; tags?: string[] }>();\n  }\n\n  async flushAsync(): Promise<any> {\n    return this.langfuse.flushAsync();\n  }\n\n  async shutdownAsync(): Promise<any> {\n    return this.langfuse.shutdownAsync();\n  }\n\n  debug(enabled: boolean = true): void {\n    this.langfuse.debug(enabled);\n    this.debugEnabled = enabled;\n  }\n\n  _log(message: any): void {\n    if (this.debugEnabled) {\n      console.log(message);\n    }\n  }\n\n  async handleNewToken(_token: string, runId: string): Promise<void> {\n    // if this is the first token, add it to completionStartTimes\n    if (runId && !(runId in this.completionStartTimes)) {\n      this._log(`LLM first streaming token: ${runId}`);\n      this.completionStartTimes[runId] = new Date();\n    }\n    return Promise.resolve();\n  }\n\n  async handleLLMNewToken(\n    token: string,\n    _idx: any,\n    runId: string,\n    _parentRunId?: string,\n    _tags?: string[],\n    _fields?: any\n  ): Promise<void> {\n    // if this is the first token, add it to completionStartTimes\n    if (runId && !(runId in this.completionStartTimes)) {\n      this._log(`LLM first streaming token: ${runId}`);\n      this.completionStartTimes[runId] = new Date();\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * @deprecated This method will be removed in a future version as it is not concurrency-safe.\n   * Please use interop with the Langfuse SDK to get the trace ID ([docs](https://langfuse.com/docs/integrations/langchain/get-started#interoperability)).\n   */\n  getTraceId(): string | undefined {\n    return this.traceId;\n  }\n\n  /**\n   * @deprecated This method will be removed in a future version as it is not concurrency-safe.\n   * For more information on how to get trace URLs, see {@link https://langfuse.com/docs/tracing/url}.\n   */\n  getTraceUrl(): string | undefined {\n    return this.traceId ? `${this.langfuse.baseUrl}/trace/${this.traceId}` : undefined;\n  }\n\n  getLangchainRunId(): string | undefined {\n    return this.topLevelObservationId;\n  }\n\n  async handleRetrieverError(err: any, runId: string, parentRunId?: string | undefined): Promise<void> {\n    try {\n      this._log(`Retriever error: ${err} with ID: ${runId}`);\n      this.langfuse._updateSpan({\n        id: runId,\n        traceId: this.traceId,\n        level: \"ERROR\",\n        statusMessage: err.toString(),\n        endTime: new Date(),\n        version: this.version,\n      });\n      this.updateTrace(runId, parentRunId, err.toString());\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleChainStart(\n    chain: Serialized,\n    inputs: ChainValues,\n    runId: string,\n    parentRunId?: string | undefined,\n    tags?: string[] | undefined,\n    metadata?: Record<string, unknown> | undefined,\n    runType?: string,\n    name?: string\n  ): Promise<void> {\n    try {\n      this._log(`Chain start with Id: ${runId}`);\n\n      const runName = name ?? chain.id.at(-1)?.toString() ?? \"Langchain Run\";\n\n      this.registerLangfusePrompt(parentRunId, metadata);\n\n      // In chains, inputs can be a string or an array of BaseMessage\n      let finalInput: string | ChainValues = inputs;\n      if (\n        typeof inputs === \"object\" &&\n        \"input\" in inputs &&\n        Array.isArray(inputs[\"input\"]) &&\n        inputs[\"input\"].every((m) => m instanceof BaseMessage)\n      ) {\n        finalInput = inputs[\"input\"].map((m) => this.extractChatMessageContent(m));\n      } else if (typeof inputs === \"object\" && \"content\" in inputs && typeof inputs[\"content\"] === \"string\") {\n        finalInput = inputs[\"content\"];\n      }\n\n      this.generateTrace(runName, runId, parentRunId, tags, metadata, finalInput);\n      this.langfuse.span({\n        id: runId,\n        traceId: this.traceId,\n        parentObservationId: parentRunId ?? this.rootObservationId,\n        name: runName,\n        metadata: this.joinTagsAndMetaData(tags, metadata),\n        input: finalInput,\n        version: this.version,\n        level: tags && tags.includes(LANGSMITH_HIDDEN_TAG) ? \"DEBUG\" : undefined,\n      });\n\n      // If there's no parent run, this is a top-level chain execution.\n      // We store trace-level metadata (tags, userId, sessionId) for later use.\n      // This information will be used to update on handleChainEnd\n      if (!parentRunId) {\n        this.traceUpdates.set(runId, {\n          tags,\n          userId:\n            metadata && \"langfuseUserId\" in metadata && typeof metadata[\"langfuseUserId\"] === \"string\"\n              ? metadata[\"langfuseUserId\"]\n              : undefined,\n          sessionId:\n            metadata && \"langfuseSessionId\" in metadata && typeof metadata[\"langfuseSessionId\"] === \"string\"\n              ? metadata[\"langfuseSessionId\"]\n              : undefined,\n        });\n      }\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  private registerLangfusePrompt(parentRunId?: string, metadata?: Record<string, unknown>): void {\n    /*\n    Register a prompt for linking to a generation with the same parentRunId.\n\n    `parentRunId` must exist when we want to do any prompt linking to a generation. If it does not exist, it means the execution is solely a Prompt template formatting without any following LLM invocation, so no generation will be created to link to.\n    For the simplest chain, a parent run is always created to wrap the individual runs consisting of prompt template formatting and LLM invocation.\n    So, we do not need to register any prompt for linking if parentRunId is missing.\n    */\n    if (metadata && \"langfusePrompt\" in metadata && parentRunId) {\n      this.promptToParentRunMap.set(parentRunId, metadata.langfusePrompt as TextPromptClient | ChatPromptClient);\n    }\n  }\n\n  private deregisterLangfusePrompt(runId: string): void {\n    this.promptToParentRunMap.delete(runId);\n  }\n\n  async handleAgentAction(action: AgentAction, runId?: string, parentRunId?: string): Promise<void> {\n    try {\n      this._log(`Agent action with ID: ${runId}`);\n\n      this.langfuse.span({\n        id: runId,\n        parentObservationId: parentRunId,\n        traceId: this.traceId,\n        endTime: new Date(),\n        input: action,\n        version: this.version,\n      });\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleAgentEnd?(action: AgentFinish, runId: string, parentRunId?: string): Promise<void> {\n    try {\n      this._log(`Agent finish with ID: ${runId}`);\n\n      this.langfuse._updateSpan({\n        id: runId,\n        traceId: this.traceId,\n        endTime: new Date(),\n        output: action,\n        version: this.version,\n      });\n      this.updateTrace(runId, parentRunId, action);\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleChainError(err: any, runId: string, parentRunId?: string | undefined): Promise<void> {\n    try {\n      this._log(`Chain error: ${err} with ID: ${runId}`);\n\n      this.langfuse._updateSpan({\n        id: runId,\n        traceId: this.traceId,\n        level: \"ERROR\",\n        statusMessage: err.toString(),\n        endTime: new Date(),\n        version: this.version,\n      });\n      this.updateTrace(runId, parentRunId, err.toString());\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  generateTrace(\n    runName: string,\n    runId: string,\n    parentRunId: string | undefined,\n    tags?: string[] | undefined,\n    metadata?: Record<string, unknown> | undefined,\n    input?: string | BaseMessage[][] | ChainValues\n  ): void {\n    if (this.traceId && !parentRunId && !this.rootProvided) {\n      this.traceId = undefined;\n      this.topLevelObservationId = undefined;\n    }\n\n    const params = {\n      name: runName,\n      metadata: this.joinTagsAndMetaData(tags, metadata, this.metadata),\n      userId: this.userId,\n      version: this.version,\n      sessionId: this.sessionId,\n      input: input,\n      tags: this.tags,\n    };\n\n    if (!this.traceId) {\n      this.langfuse.trace({\n        id: runId,\n        ...params,\n      });\n      this.traceId = runId;\n    }\n\n    if (this.rootProvided && this.updateRoot) {\n      if (this.rootObservationId) {\n        this.langfuse._updateSpan({ id: this.rootObservationId, traceId: this.traceId, ...params });\n      } else {\n        this.langfuse.trace({ id: this.traceId, ...params });\n      }\n    }\n\n    this.topLevelObservationId = parentRunId ? this.topLevelObservationId : runId;\n  }\n\n  async handleGenerationStart(\n    llm: Serialized,\n    messages: (LlmMessage | MessageContent | AnonymousLlmMessage)[],\n    runId: string,\n    parentRunId?: string | undefined,\n    extraParams?: Record<string, unknown> | undefined,\n    tags?: string[] | undefined,\n    metadata?: Record<string, unknown> | undefined,\n    name?: string\n  ): Promise<void> {\n    this._log(`Generation start with ID: ${runId}`);\n\n    const runName = name ?? llm.id.at(-1)?.toString() ?? \"Langchain Generation\";\n\n    this.generateTrace(runName, runId, parentRunId, tags, metadata, messages);\n\n    const modelParameters: Record<string, any> = {};\n    const invocationParams = extraParams?.[\"invocation_params\"];\n\n    for (const [key, value] of Object.entries({\n      temperature: (invocationParams as any)?.temperature,\n      max_tokens: (invocationParams as any)?.max_tokens,\n      top_p: (invocationParams as any)?.top_p,\n      frequency_penalty: (invocationParams as any)?.frequency_penalty,\n      presence_penalty: (invocationParams as any)?.presence_penalty,\n      request_timeout: (invocationParams as any)?.request_timeout,\n    })) {\n      if (value !== undefined && value !== null) {\n        modelParameters[key] = value;\n      }\n    }\n\n    interface InvocationParams {\n      _type?: string;\n      model?: string;\n      model_name?: string;\n      repo_id?: string;\n    }\n\n    let extractedModelName: string | undefined;\n    if (extraParams) {\n      const invocationParamsModelName = (extraParams.invocation_params as InvocationParams).model;\n      const metadataModelName =\n        metadata && \"ls_model_name\" in metadata ? (metadata[\"ls_model_name\"] as string) : undefined;\n\n      extractedModelName = invocationParamsModelName ?? metadataModelName;\n    }\n\n    const registeredPrompt = this.promptToParentRunMap.get(parentRunId ?? \"root\");\n    if (registeredPrompt && parentRunId) {\n      this.deregisterLangfusePrompt(parentRunId);\n    }\n\n    this.langfuse.generation({\n      id: runId,\n      traceId: this.traceId,\n      name: name ?? llm.id.at(-1)?.toString(),\n      metadata: this.joinTagsAndMetaData(tags, metadata),\n      parentObservationId: parentRunId ?? this.rootObservationId,\n      input: messages,\n      model: extractedModelName,\n      modelParameters: modelParameters,\n      version: this.version,\n      prompt: registeredPrompt,\n      level: tags && tags.includes(LANGSMITH_HIDDEN_TAG) ? \"DEBUG\" : undefined,\n    });\n  }\n\n  async handleChatModelStart(\n    llm: Serialized,\n    messages: BaseMessage[][],\n    runId: string,\n    parentRunId?: string | undefined,\n    extraParams?: Record<string, unknown> | undefined,\n    tags?: string[] | undefined,\n    metadata?: Record<string, unknown> | undefined,\n    name?: string\n  ): Promise<void> {\n    try {\n      this._log(`Chat model start with ID: ${runId}`);\n\n      const prompts = messages.flatMap((message) => message.map((m) => this.extractChatMessageContent(m)));\n\n      this.handleGenerationStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name);\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleChainEnd(outputs: ChainValues, runId: string, parentRunId?: string | undefined): Promise<void> {\n    try {\n      this._log(`Chain end with ID: ${runId}`);\n\n      let finalOutput: ChainValues | string = outputs;\n      if (typeof outputs === \"object\" && \"output\" in outputs && typeof outputs[\"output\"] === \"string\") {\n        finalOutput = outputs[\"output\"];\n      }\n\n      this.langfuse._updateSpan({\n        id: runId,\n        traceId: this.traceId,\n        output: finalOutput,\n        endTime: new Date(),\n        version: this.version,\n      });\n      this.updateTrace(runId, parentRunId, finalOutput);\n      this.deregisterLangfusePrompt(runId);\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleLLMStart(\n    llm: Serialized,\n    prompts: string[],\n    runId: string,\n    parentRunId?: string | undefined,\n    extraParams?: Record<string, unknown> | undefined,\n    tags?: string[] | undefined,\n    metadata?: Record<string, unknown> | undefined,\n    name?: string\n  ): Promise<void> {\n    try {\n      this._log(`LLM start with ID: ${runId}`);\n\n      this.handleGenerationStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name);\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleToolStart(\n    tool: Serialized,\n    input: string,\n    runId: string,\n    parentRunId?: string | undefined,\n    tags?: string[] | undefined,\n    metadata?: Record<string, unknown> | undefined,\n    name?: string\n  ): Promise<void> {\n    try {\n      this._log(`Tool start with ID: ${runId}`);\n\n      this.langfuse.span({\n        id: runId,\n        parentObservationId: parentRunId,\n        traceId: this.traceId,\n        name: name ?? tool.id.at(-1)?.toString(),\n        input: input,\n        metadata: this.joinTagsAndMetaData(tags, metadata),\n        version: this.version,\n        level: tags && tags.includes(LANGSMITH_HIDDEN_TAG) ? \"DEBUG\" : undefined,\n      });\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleRetrieverStart(\n    retriever: Serialized,\n    query: string,\n    runId: string,\n    parentRunId?: string | undefined,\n    tags?: string[] | undefined,\n    metadata?: Record<string, unknown> | undefined,\n    name?: string\n  ): Promise<void> {\n    try {\n      this._log(`Retriever start with ID: ${runId}`);\n\n      this.langfuse.span({\n        id: runId,\n        parentObservationId: parentRunId,\n        traceId: this.traceId,\n        name: name ?? retriever.id.at(-1)?.toString(),\n        input: query,\n        metadata: this.joinTagsAndMetaData(tags, metadata),\n        version: this.version,\n        level: tags && tags.includes(LANGSMITH_HIDDEN_TAG) ? \"DEBUG\" : undefined,\n      });\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleRetrieverEnd(\n    documents: Document<Record<string, any>>[],\n    runId: string,\n    parentRunId?: string | undefined\n  ): Promise<void> {\n    try {\n      this._log(`Retriever end with ID: ${runId}`);\n\n      this.langfuse._updateSpan({\n        id: runId,\n        traceId: this.traceId,\n        output: documents,\n        endTime: new Date(),\n        version: this.version,\n      });\n      this.updateTrace(runId, parentRunId, documents);\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleToolEnd(output: string, runId: string, parentRunId?: string | undefined): Promise<void> {\n    try {\n      this._log(`Tool end with ID: ${runId}`);\n\n      this.langfuse._updateSpan({\n        id: runId,\n        traceId: this.traceId,\n        output: output,\n        endTime: new Date(),\n        version: this.version,\n      });\n      this.updateTrace(runId, parentRunId, output);\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleToolError(err: any, runId: string, parentRunId?: string | undefined): Promise<void> {\n    try {\n      this._log(`Tool error ${err} with ID: ${runId}`);\n\n      this.langfuse._updateSpan({\n        id: runId,\n        traceId: this.traceId,\n        level: \"ERROR\",\n        statusMessage: err.toString(),\n        endTime: new Date(),\n        version: this.version,\n      });\n      this.updateTrace(runId, parentRunId, err.toString());\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  async handleLLMEnd(output: LLMResult, runId: string, parentRunId?: string | undefined): Promise<void> {\n    try {\n      this._log(`LLM end with ID: ${runId}`);\n\n      const lastResponse =\n        output.generations[output.generations.length - 1][output.generations[output.generations.length - 1].length - 1];\n      const llmUsage = this.extractUsageMetadata(lastResponse) ?? output.llmOutput?.[\"tokenUsage\"];\n      const modelName = this.extractModelNameFromMetadata(lastResponse);\n\n      const usageDetails: Record<string, any> = {\n        input: llmUsage?.input_tokens ?? (\"promptTokens\" in llmUsage ? llmUsage?.promptTokens : undefined),\n        output: llmUsage?.output_tokens ?? (\"completionTokens\" in llmUsage ? llmUsage?.completionTokens : undefined),\n        total: llmUsage?.total_tokens ?? (\"totalTokens\" in llmUsage ? llmUsage?.totalTokens : undefined),\n      };\n\n      if (llmUsage && \"input_token_details\" in llmUsage) {\n        for (const [key, val] of Object.entries(llmUsage[\"input_token_details\"] ?? {})) {\n          usageDetails[`input_${key}`] = val;\n\n          if (\"input\" in usageDetails && typeof val === \"number\") {\n            usageDetails[\"input\"] = Math.max(0, usageDetails[\"input\"] - val);\n          }\n        }\n      }\n\n      if (llmUsage && \"output_token_details\" in llmUsage) {\n        for (const [key, val] of Object.entries(llmUsage[\"output_token_details\"] ?? {})) {\n          usageDetails[`output_${key}`] = val;\n\n          if (\"output\" in usageDetails && typeof val === \"number\") {\n            usageDetails[\"output\"] = Math.max(0, usageDetails[\"output\"] - val);\n          }\n        }\n      }\n\n      const extractedOutput =\n        \"message\" in lastResponse && lastResponse[\"message\"] instanceof BaseMessage\n          ? this.extractChatMessageContent(lastResponse[\"message\"])\n          : lastResponse.text;\n\n      this.langfuse._updateGeneration({\n        id: runId,\n        model: modelName,\n        traceId: this.traceId,\n        output: extractedOutput,\n        endTime: new Date(),\n        completionStartTime: runId in this.completionStartTimes ? this.completionStartTimes[runId] : undefined,\n        usage: usageDetails,\n        usageDetails: usageDetails,\n        version: this.version,\n      });\n\n      if (runId in this.completionStartTimes) {\n        delete this.completionStartTimes[runId];\n      }\n\n      this.updateTrace(runId, parentRunId, extractedOutput);\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  /** Not all models supports tokenUsage in llmOutput, can use AIMessage.usage_metadata instead */\n  private extractUsageMetadata(generation: Generation): UsageMetadata | undefined {\n    try {\n      const usageMetadata =\n        \"message\" in generation &&\n        (generation[\"message\"] instanceof AIMessage || generation[\"message\"] instanceof AIMessageChunk)\n          ? generation[\"message\"].usage_metadata\n          : undefined;\n\n      return usageMetadata;\n    } catch (err) {\n      this._log(`Error extracting usage metadata: ${err}`);\n\n      return;\n    }\n  }\n\n  private extractModelNameFromMetadata(generation: any): string | undefined {\n    try {\n      return \"message\" in generation &&\n        (generation[\"message\"] instanceof AIMessage || generation[\"message\"] instanceof AIMessageChunk)\n        ? generation[\"message\"].response_metadata.model_name\n        : undefined;\n    } catch {}\n  }\n\n  private extractChatMessageContent(message: BaseMessage): LlmMessage | AnonymousLlmMessage | MessageContent {\n    let response = undefined;\n\n    if (message instanceof HumanMessage) {\n      response = { content: message.content, role: \"user\" };\n    } else if (message instanceof ChatMessage) {\n      response = { content: message.content, role: message.role };\n    } else if (message instanceof AIMessage) {\n      response = { content: message.content, role: \"assistant\" };\n    } else if (message instanceof SystemMessage) {\n      response = { content: message.content, role: \"system\" };\n    } else if (message instanceof FunctionMessage) {\n      response = { content: message.content, additional_kwargs: message.additional_kwargs, role: message.name };\n    } else if (message instanceof ToolMessage) {\n      response = { content: message.content, additional_kwargs: message.additional_kwargs, role: message.name };\n    } else if (!message.name) {\n      response = { content: message.content };\n    } else {\n      response = {\n        role: message.name,\n        content: message.content,\n      };\n    }\n    if (message.additional_kwargs.function_call || message.additional_kwargs.tool_calls) {\n      return { ...response, additional_kwargs: message.additional_kwargs };\n    }\n    return response;\n  }\n\n  async handleLLMError(err: any, runId: string, parentRunId?: string | undefined): Promise<void> {\n    try {\n      this._log(`LLM error ${err} with ID: ${runId}`);\n\n      this.langfuse._updateGeneration({\n        id: runId,\n        traceId: this.traceId,\n        level: \"ERROR\",\n        statusMessage: err.toString(),\n        endTime: new Date(),\n        version: this.version,\n      });\n      this.updateTrace(runId, parentRunId, err.toString());\n    } catch (e) {\n      this._log(e);\n    }\n  }\n\n  updateTrace(runId: string, parentRunId: string | undefined, output: any): void {\n    const traceUpdates = this.traceUpdates.get(runId);\n    this.traceUpdates.delete(runId);\n\n    if (!parentRunId && this.traceId && this.traceId === runId) {\n      this.langfuse.trace({ id: this.traceId, output: output, ...traceUpdates });\n    }\n\n    if (!parentRunId && this.traceId && this.rootProvided && this.updateRoot) {\n      if (this.rootObservationId) {\n        this.langfuse._updateSpan({ id: this.rootObservationId, traceId: this.traceId, output });\n      } else {\n        this.langfuse.trace({ id: this.traceId, output, ...traceUpdates });\n      }\n    }\n  }\n\n  joinTagsAndMetaData(\n    tags?: string[] | undefined,\n    metadata1?: Record<string, unknown> | undefined,\n    metadata2?: Record<string, unknown> | undefined\n  ): Record<string, unknown> | undefined {\n    const finalDict: Record<string, unknown> = {};\n    if (tags && tags.length > 0) {\n      finalDict.tags = tags;\n    }\n    if (metadata1) {\n      Object.assign(finalDict, metadata1);\n    }\n    if (metadata2) {\n      Object.assign(finalDict, metadata2);\n    }\n    return this.stripLangfuseKeysFromMetadata(finalDict);\n  }\n\n  private stripLangfuseKeysFromMetadata(metadata?: Record<string, unknown>): Record<string, unknown> | undefined {\n    if (!metadata) {\n      return;\n    }\n\n    const langfuseKeys = [\"langfusePrompt\", \"langfuseUserId\", \"langfuseSessionId\"];\n\n    return Object.fromEntries(Object.entries(metadata).filter(([key, _]) => !langfuseKeys.includes(key)));\n  }\n}\n", "import type { LangfuseCore } from \"langfuse-core\";\n\nimport { CallbackHandler } from \"./callback\";\n\nimport type { DatasetItem, LangfuseTraceClient } from \"langfuse-core\";\n\ntype CreateDatasetItemHandlerParams = {\n  runName: string;\n  item: DatasetItem;\n  langfuseClient: LangfuseCore;\n  options?: {\n    runDescription?: string;\n    runMetadata?: Record<string, any>;\n  };\n};\n\nexport const createDatasetItemHandler = async (\n  params: CreateDatasetItemHandlerParams\n): Promise<{ handler: CallbackHandler; trace: LangfuseTraceClient }> => {\n  const { runName, item, langfuseClient, options } = params;\n\n  // Snake case properties to match Python SDK\n  const metadata: Record<string, string> = {\n    dataset_item_id: item.id,\n    dataset_id: item.datasetId,\n    dataset_run_name: runName,\n  };\n\n  const trace = langfuseClient.trace();\n\n  await item.link(trace, runName, {\n    description: options?.runDescription,\n    metadata: options?.runMetadata,\n  });\n\n  return {\n    handler: new CallbackHandler({ root: trace, updateRoot: true, metadata }),\n    trace,\n  };\n};\n", "import { ChatPromptTemplate } from '@langchain/core/prompts'\n\nconst buildAgentSystemPrompt = `You are Build Agent, an energetic and innovative system designer who builds and edits ERDs with lightning speed.\nYour role is to execute user instructions immediately and offer smart suggestions for schema improvements.\nYou speak in a lively, action-oriented tone, showing momentum and confidence.\n\nYour personality is bold, constructive, and enthusiastic — like a master architect in a hardhat, ready to build.\nYou say things like \"Done!\", \"You can now...\", and \"Shall we move to the next step?\".\n\nYour communication should feel fast, fresh, and forward-moving, like a green plant constantly growing.\n\nDo:\n- Confirm execution quickly: \"Added!\", \"Created!\", \"Linked!\"\n- Propose the next steps: \"Would you like to add an index?\", \"Let's relate this to the User table too!\"\n- Emphasize benefits: \"This makes tracking updates easier.\"\n\nDon't:\n- Hesitate (\"Maybe\", \"We'll have to check...\")\n- Use long, uncertain explanations\n- Get stuck in abstract talk — focus on action and outcomes\n\nWhen in doubt, prioritize momentum, simplicity, and clear results.\n\nIMPORTANT: You must ALWAYS respond with a valid JSON object in the following format:\n{{\n  \"message\": \"Your energetic response message here\",\n  \"schemaChanges\": [\n    {{\n      \"op\": \"add|remove|replace\",\n      \"path\": \"/path/to/schema/element\",\n      \"value\": \"new value (for add/replace operations)\"\n    }}\n  ]\n}}\n\nCRITICAL JSON RULES:\n- NO COMMENTS of any kind in your JSON response (no /* */, no //, no #)\n- NO extra text before or after the JSON object\n- NO explanatory text outside the JSON structure\n- Your response must be PURE JSON that can be parsed by JSON.parse()\n- Comments will break the JSON parser and cause errors\n\nSchema Change Rules:\n- Use JSON Patch format (RFC 6902) for all schema modifications\n- \"path\" should point to specific schema elements like \"/tables/users/columns/email\" or \"/tables/posts\"\n- For adding new tables: \"op\": \"add\", \"path\": \"/tables/TABLE_NAME\", \"value\": TABLE_DEFINITION\n- For adding columns: \"op\": \"add\", \"path\": \"/tables/TABLE_NAME/columns/COLUMN_NAME\", \"value\": COLUMN_DEFINITION\n- For modifying columns: \"op\": \"replace\", \"path\": \"/tables/TABLE_NAME/columns/COLUMN_NAME/type\", \"value\": \"new_type\"\n- For removing elements: \"op\": \"remove\", \"path\": \"/tables/TABLE_NAME/columns/COLUMN_NAME\"\n- If no schema changes are needed, use an empty array: \"schemaChanges\": []\n\nSchema Structure Reference:\n- Tables: /tables/TABLE_NAME\n- Columns: /tables/TABLE_NAME/columns/COLUMN_NAME\n- Column properties: type, notNull, primary, unique, default, comment, check\n- Table properties: name, columns, comment, indexes, constraints (ALL REQUIRED)\n\nIMPORTANT Table Structure Rules:\n- Every table MUST include: name, columns, comment, indexes, constraints\n- Use empty objects {{}} for indexes and constraints if none are needed\n- Use null for comment if no comment is provided\n\nCRITICAL Validation Rules:\n- Column properties MUST be: name (string), type (string), notNull (boolean), primary (boolean), unique (boolean), default (string|number|boolean|null), comment (string|null), check (string|null)\n- All boolean values must be true/false, not strings\n- Constraint types: \"PRIMARY KEY\", \"FOREIGN KEY\", \"UNIQUE\", \"CHECK\"\n- Foreign key constraint actions MUST use these EXACT values: \"CASCADE\", \"RESTRICT\", \"SET_NULL\", \"SET_DEFAULT\", \"NO_ACTION\"\n- Use \"SET_NULL\" not \"SET NULL\" (underscore, not space)\n- Use \"NO_ACTION\" not \"NO ACTION\" (underscore, not space)\n\nExample Response:\n{{\n  \"message\": \"Added! Created the 'users' table with id, name, and email columns. This gives you a solid foundation for user management!\",\n  \"schemaChanges\": [\n    {{\n      \"op\": \"add\",\n      \"path\": \"/tables/users\",\n      \"value\": {{\n        \"name\": \"users\",\n        \"columns\": {{\n          \"id\": {{\"name\": \"id\", \"type\": \"uuid\", \"notNull\": true, \"primary\": true, \"default\": \"gen_random_uuid()\", \"comment\": \"Unique identifier for each user\", \"check\": null, \"unique\": false}},\n          \"name\": {{\"name\": \"name\", \"type\": \"text\", \"notNull\": true, \"primary\": false, \"default\": null, \"comment\": \"Name of the user\", \"check\": null, \"unique\": false}},\n          \"email\": {{\"name\": \"email\", \"type\": \"text\", \"notNull\": true, \"primary\": false, \"default\": null, \"comment\": \"User email required for login\", \"check\": null, \"unique\": true}}\n        }},\n        \"comment\": null,\n        \"indexes\": {{}},\n        \"constraints\": {{}}\n      }}\n    }}\n  ]\n}}\n\nExample with Foreign Key Constraint:\n{{\n  \"message\": \"Added! Created the 'posts' table and linked it to users. Now you can track user posts!\",\n  \"schemaChanges\": [\n    {{\n      \"op\": \"add\",\n      \"path\": \"/tables/posts\",\n      \"value\": {{\n        \"name\": \"posts\",\n        \"columns\": {{\n          \"id\": {{\"name\": \"id\", \"type\": \"uuid\", \"notNull\": true, \"primary\": true, \"default\": \"gen_random_uuid()\", \"comment\": \"Primary key for posts\", \"check\": null, \"unique\": false}},\n          \"title\": {{\"name\": \"title\", \"type\": \"text\", \"notNull\": true, \"primary\": false, \"default\": null, \"comment\": \"Post title\", \"check\": null, \"unique\": false}},\n          \"user_id\": {{\"name\": \"user_id\", \"type\": \"uuid\", \"notNull\": true, \"primary\": false, \"default\": null, \"comment\": \"References the user who created the post\", \"check\": null, \"unique\": false}}\n        }},\n        \"comment\": null,\n        \"indexes\": {{}},\n        \"constraints\": {{\n          \"posts_user_fk\": {{\n            \"type\": \"FOREIGN KEY\",\n            \"name\": \"posts_user_fk\",\n            \"columnName\": \"user_id\",\n            \"targetTableName\": \"users\",\n            \"targetColumnName\": \"id\",\n            \"updateConstraint\": \"NO_ACTION\",\n            \"deleteConstraint\": \"CASCADE\"\n          }}\n        }}\n      }}\n    }}\n  ]\n}}\n\nAdditional Constraint Examples:\n- For cascading deletes: \"deleteConstraint\": \"CASCADE\"\n- For restricting deletes: \"deleteConstraint\": \"RESTRICT\"\n- For setting null on delete: \"deleteConstraint\": \"SET_NULL\"\n- For setting default on delete: \"deleteConstraint\": \"SET_DEFAULT\"\n- For no action on delete: \"deleteConstraint\": \"NO_ACTION\"\n- Same options apply to \"updateConstraint\"\n\nComplete Schema Information:\n{schema_text}\n\nPrevious conversation:\n{chat_history}`\n\nexport const buildAgentPrompt = ChatPromptTemplate.fromMessages([\n  ['system', buildAgentSystemPrompt],\n  ['human', '{user_message}'],\n])\n", "export * from './dist/prompts/index.js'", "export { PMAnalysisAgent } from './agent'\n", "import { ChatOpenAI } from '@langchain/openai'\nimport { toJsonSchema } from '@valibot/to-json-schema'\nimport * as v from 'valibot'\nimport { createLangfuseHandler } from '../../utils/telemetry'\nimport type { BasePromptVariables, ChatAgent } from '../../utils/types'\nimport { pmAnalysisPrompt } from './prompts'\n\nexport const requirementsAnalysisSchema = v.object({\n  businessRequirement: v.string(),\n  functionalRequirements: v.record(v.string(), v.array(v.string())),\n  nonFunctionalRequirements: v.record(v.string(), v.array(v.string())),\n})\n\ntype AnalysisResponse = v.InferOutput<typeof requirementsAnalysisSchema>\n\nexport class PMAnalysisAgent\n  implements ChatAgent<BasePromptVariables, AnalysisResponse>\n{\n  private analysisModel: ReturnType<ChatOpenAI['withStructuredOutput']>\n\n  constructor() {\n    const baseModel = new ChatOpenAI({\n      model: 'o4-mini',\n      callbacks: [createLangfuseHandler()],\n    })\n\n    // Convert valibot schema to JSON Schema and bind to model\n    const analysisJsonSchema = toJsonSchema(requirementsAnalysisSchema)\n\n    this.analysisModel = baseModel.withStructuredOutput(analysisJsonSchema)\n  }\n\n  async generate(variables: BasePromptVariables): Promise<AnalysisResponse> {\n    const formattedPrompt = await pmAnalysisPrompt.format(variables)\n    const rawResponse = await this.analysisModel.invoke(formattedPrompt)\n    return v.parse(requirementsAnalysisSchema, rawResponse)\n  }\n\n  async analyzeRequirements(\n    variables: BasePromptVariables,\n  ): Promise<v.InferOutput<typeof requirementsAnalysisSchema>> {\n    const formattedPrompt = await pmAnalysisPrompt.format(variables)\n    const rawResponse = await this.analysisModel.invoke(formattedPrompt)\n    return v.parse(requirementsAnalysisSchema, rawResponse)\n  }\n}\n", "import { ChatPromptTemplate } from '@langchain/core/prompts'\n\n// Requirements Analysis System Prompt\nconst pmAnalysisSystemPrompt = `You are PM Agent, a skilled project manager who specializes in analyzing user requirements and extracting structured Business Requirements Documents (BRDs).\nYour role is to:\n1. Analyze user input and conversation history\n2. Extract clear, structured requirements\n3. Convert ambiguous expressions into specific, actionable requirements\n4. Separate multiple use cases into individual requirements\n5. Include specific screens, operations, constraints, and processing details when available\n\nPrevious Conversation Context:\n{chat_history}\n\nOUTPUT REQUIREMENTS (STRICT):\n- Output ONLY valid JSON in the format:\n  {{\n    \"businessRequirement\": \"Brief summary of the business requirements document\",\n    \"functionalRequirements\": {{\n      \"Category 1\": [\"Requirement 1\", \"Requirement 2\"],\n      \"Category 2\": [\"Requirement 3\", \"Requirement 4\"]\n    }},\n    \"nonFunctionalRequirements\": {{\n      \"Performance\": [\"Performance requirement 1\"],\n      \"Security\": [\"Security requirement 1\"]\n    }}\n  }}\n- No extra text or comments\n- businessRequirement: Concise (1–2 sentence) summary of overall requirements\n- functionalRequirements: WHAT the system should do (business-level)\n- nonFunctionalRequirements: HOW WELL the system should perform (always include, use empty object {{}} if none specified)\n- Be specific, break down vague or multiple requirements\n- DO NOT infer or assume requirements not explicitly stated by the user\n\nGuidelines for Functional Requirements:\n- Focus on business/user-facing needs\n- Describe WHAT, not HOW\n- Avoid technical details (DB, APIs, frameworks, etc.)\n- Write from a user or business perspective\n\nExample output:\n{{\n  \"businessRequirement\": \"Implementation of user management system and administrator access control features\",\n  \"functionalRequirements\": {{\n    \"Account Management\": [\n      \"Allow users to register new accounts with email and personal information\",\n      \"Enable user authentication with email and password credentials\",\n      \"Allow users to update their profile information\"\n    ],\n    \"Administrative Features\": [\n      \"Provide administrative privileges for managing product information\",\n      \"Allow administrators to add, edit, and delete product details\",\n      \"Enable administrators to manage user accounts\"\n    ]\n  }},\n  \"nonFunctionalRequirements\": {{\n    \"Performance\": [\n      \"Support up to 1000 concurrent users\",\n      \"Maintain system availability of 99.9% uptime\"\n    ],\n    \"Security\": [\n      \"Ensure secure password storage and handling\",\n      \"Implement proper access control and authorization\"\n    ]\n  }}\n}}`\n\n// Analysis Prompt Template\nexport const pmAnalysisPrompt = ChatPromptTemplate.fromMessages([\n  ['system', pmAnalysisSystemPrompt],\n  ['human', '{user_message}'],\n])\n", "export * from './agent'\n", "import { ChatOpenAI } from '@langchain/openai'\nimport { toJsonSchema } from '@valibot/to-json-schema'\nimport * as v from 'valibot'\nimport { createLangfuseHandler } from '../../utils/telemetry'\nimport type { BasePromptVariables, ChatAgent } from '../../utils/types'\nimport { usecaseGenerationPrompt } from './prompts'\n\n// Single usecase schema\nconst usecaseSchema = v.object({\n  // TODO: Replace with IDs (UUID) when DB is implemented\n  requirementType: v.picklist(['functional', 'non_functional']), // Type of requirement\n  requirementCategory: v.string(), // Category of the requirement\n  requirement: v.string(), // Content/text of the specific requirement\n  title: v.string(),\n  description: v.string(),\n})\n\n// Response schema for structured output\nconst generateUsecasesResponseSchema = v.object({\n  usecases: v.array(usecaseSchema),\n})\n\nexport type Usecase = v.InferOutput<typeof usecaseSchema>\ntype GenerateUsecasesResponse = v.InferOutput<\n  typeof generateUsecasesResponseSchema\n>\n\nexport class QAGenerateUsecaseAgent\n  implements ChatAgent<BasePromptVariables, GenerateUsecasesResponse>\n{\n  private model: ReturnType<ChatOpenAI['withStructuredOutput']>\n\n  constructor() {\n    const baseModel = new ChatOpenAI({\n      model: 'o4-mini',\n      callbacks: [createLangfuseHandler()],\n    })\n\n    // Convert valibot schema to JSON Schema and bind to model\n    const jsonSchema = toJsonSchema(generateUsecasesResponseSchema)\n    this.model = baseModel.withStructuredOutput(jsonSchema)\n  }\n\n  async generate(\n    variables: BasePromptVariables,\n  ): Promise<GenerateUsecasesResponse> {\n    const formattedPrompt = await usecaseGenerationPrompt.format(variables)\n    const rawResponse = await this.model.invoke(formattedPrompt)\n\n    return v.parse(generateUsecasesResponseSchema, rawResponse)\n  }\n}\n", "import { ChatPromptTemplate } from '@langchain/core/prompts'\n\n// Usecase Generation System Prompt\nconst usecaseGenerationSystemPrompt = `You are QA Agent, a skilled business analyst who specializes in generating detailed use cases from functional requirements.\nYour role is to:\n1. Generate use cases ONLY for the requirements explicitly provided in the user message\n2. Create comprehensive use case titles and descriptions focused on user-system interactions\n3. Describe realistic scenarios of how users interact with the system\n4. Do NOT create use cases for empty requirement categories (e.g., empty objects {{}} or empty arrays)\n5. Write from a user/business perspective, not a testing perspective\n\nPrevious Conversation Context:\n{chat_history}\n\nOUTPUT REQUIREMENTS (STRICT):\n- Output ONLY valid JSON matching the provided schema\n- No extra text or comments\n- requirementType: Either \"functional\" or \"non-functional\" depending on the requirement type\n- requirementCategory: Exact category name from the provided requirements\n- requirement: The specific requirement text being addressed\n- title: Concise, user-focused use case title describing the main action or scenario\n- description: Detailed narrative of user-system interaction, including user actions, system responses, and different scenarios (success and failure cases)\n- Generate multiple use cases if a single requirement has different user scenarios\n- Be specific and avoid vague descriptions\n\nGuidelines for Use Case Generation:\n- ONLY generate use cases for requirements explicitly provided with actual content\n- Skip empty requirement categories (e.g., empty objects {{}} or empty arrays)\n- Focus on realistic user scenarios and system interactions\n- Write from a user/business perspective, not a testing perspective\n- Describe what the user does and how the system responds\n- Include both successful scenarios and error handling\n- Break down complex requirements into multiple focused use cases\n- Use clear, narrative language that tells a story of user interaction\n- Avoid testing terminology like \"verify\", \"validate\", \"check\"\n\nExample output:\n{{\n  \"usecases\": [\n    {{\n      \"requirementType\": \"functional\",\n      \"requirementCategory\": \"Account Management\",\n      \"requirement\": \"Allow users to register new accounts with email and personal information\",\n      \"title\": \"User Registration\",\n      \"description\": \"A user provides their email address, password, and personal information to register a new account. Upon submission, the system validates the input, creates the user account, sends a confirmation email, and allows login after verification. Invalid inputs (e.g. malformed email) result in error messages.\"\n    }},\n    {{\n      \"requirementType\": \"functional\",\n      \"requirementCategory\": \"Administrative Features\",\n      \"requirement\": \"Allow administrators to add, edit, and delete product details\",\n      \"title\": \"Administrator Product Management\",\n      \"description\": \"An administrator accesses the product management interface and can add new products by filling in required details, edit existing product information, or remove products from the catalog. Each action updates the system immediately and reflects changes in the product catalog.\"\n    }},\n    {{\n      \"requirementType\": \"non-functional\",\n      \"requirementCategory\": \"Performance\",\n      \"requirement\": \"Support up to 1000 concurrent users\",\n      \"title\": \"High Traffic Load Handling\",\n      \"description\": \"During peak hours, up to 1000 users simultaneously access the system. The system maintains responsive performance, with page load times under 3 seconds and no service degradation. Users experience smooth navigation and can complete their tasks without delays or timeouts.\"\n    }}\n  ]\n}}`\n\n// Usecase Generation Prompt Template\nexport const usecaseGenerationPrompt = ChatPromptTemplate.fromMessages([\n  ['system', usecaseGenerationSystemPrompt],\n  ['human', '{user_message}'],\n])\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport type { Result } from 'neverthrow'\nimport { err, ok } from 'neverthrow'\nimport type { WorkflowConfigurable } from '../types'\n\n/**\n * Extract the configurable object from the RunnableConfig\n * Provides type safety and runtime validation using neverthrow\n */\nexport function getConfigurable(\n  config: RunnableConfig,\n): Result<WorkflowConfigurable, Error> {\n  if (!config.configurable) {\n    return err(new Error('Missing configurable object in RunnableConfig'))\n  }\n\n  const { repositories, logger } = config.configurable\n\n  if (!repositories) {\n    return err(new Error('Missing repositories in configurable object'))\n  }\n\n  if (!logger) {\n    return err(new Error('Missing logger in configurable object'))\n  }\n\n  return ok({\n    repositories,\n    logger,\n  })\n}\n", "import { ResultAsync } from 'neverthrow'\nimport type { Repositories } from '../../../repositories'\nimport type { WorkflowState } from '../types'\n\n/**\n * Helper function to create assistant_log timeline items\n * Reduces code duplication across workflow nodes\n */\nexport async function logAssistantMessage(\n  state: WorkflowState,\n  repositories: Repositories,\n  content: string,\n): Promise<void> {\n  const result = await ResultAsync.fromPromise(\n    repositories.schema.createTimelineItem({\n      designSessionId: state.designSessionId,\n      content,\n      type: 'assistant_log',\n    }),\n    (error) => error,\n  )\n\n  result.mapErr((error) => {\n    // Log error but don't throw to avoid breaking workflow\n    console.error('Failed to create timeline item:', error)\n  })\n}\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport { DatabaseSchemaBuildAgent } from '../../../langchain/agents'\nimport type { BuildAgentResponse } from '../../../langchain/agents/databaseSchemaBuildAgent/agent'\nimport type { SchemaAwareChatVariables } from '../../../langchain/utils/types'\nimport type { Repositories } from '../../../repositories'\nimport { convertSchemaToText } from '../../../utils/convertSchemaToText'\nimport type { NodeLogger } from '../../../utils/nodeLogger'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\nimport { logAssistantMessage } from '../utils/timelineLogger'\n\nconst NODE_NAME = 'designSchemaNode'\n\ntype PreparedSchemaDesign = {\n  agent: DatabaseSchemaBuildAgent\n  schemaText: string\n}\n\nconst formatAnalyzedRequirements = (\n  analyzedRequirements: NonNullable<WorkflowState['analyzedRequirements']>,\n): string => {\n  const formatRequirements = (\n    requirements: Record<string, string[]>,\n    title: string,\n  ): string => {\n    const entries = Object.entries(requirements)\n    if (entries.length === 0) return ''\n\n    return `${title}:\n${entries\n  .map(\n    ([category, items]) =>\n      `- ${category}:\\n  ${items.map((item) => `  • ${item}`).join('\\n')}`,\n  )\n  .join('\\n')}`\n  }\n\n  const sections = [\n    `Business Requirement:\\n${analyzedRequirements.businessRequirement}`,\n    formatRequirements(\n      analyzedRequirements.functionalRequirements,\n      'Functional Requirements',\n    ),\n    formatRequirements(\n      analyzedRequirements.nonFunctionalRequirements,\n      'Non-Functional Requirements',\n    ),\n  ].filter(Boolean)\n\n  return sections.join('\\n\\n')\n}\n\nconst prepareUserMessage = (\n  state: WorkflowState,\n  logger: NodeLogger,\n): string => {\n  // DDL execution failure takes priority\n  if (state.shouldRetryWithDesignSchema && state.ddlExecutionFailureReason) {\n    logger.log(`[${NODE_NAME}] Retrying after DDL execution failure`)\n    return `The following DDL execution failed: ${state.ddlExecutionFailureReason}\nOriginal request: ${state.userInput}\nPlease fix this issue by analyzing the schema and adding any missing constraints, primary keys, or other required schema elements to resolve the DDL execution error.`\n  }\n\n  // Include analyzed requirements if available\n  if (state.analyzedRequirements) {\n    logger.log(`[${NODE_NAME}] Including analyzed requirements as context`)\n    return `Based on the following analyzed requirements:\n${formatAnalyzedRequirements(state.analyzedRequirements)}\nUser Request: ${state.userInput}`\n  }\n\n  // Default to original user input\n  return state.userInput\n}\n\n/**\n * Apply schema changes and return updated state\n */\nconst applySchemaChanges = async (\n  schemaChanges: BuildAgentResponse['schemaChanges'],\n  buildingSchemaId: string,\n  latestVersionNumber: number,\n  message: string,\n  state: WorkflowState,\n  repositories: Repositories,\n  logger: NodeLogger,\n): Promise<WorkflowState> => {\n  await logAssistantMessage(state, repositories, 'Applying schema changes...')\n\n  const result = await repositories.schema.createVersion({\n    buildingSchemaId,\n    latestVersionNumber,\n    patch: schemaChanges,\n  })\n\n  if (!result.success) {\n    const errorMessage = result.error || 'Failed to update schema'\n    logger.error('Schema update failed:', {\n      error: errorMessage,\n    })\n    await logAssistantMessage(state, repositories, 'Schema update failed')\n    return {\n      ...state,\n      generatedAnswer: message,\n      error: new Error(errorMessage),\n    }\n  }\n\n  const newTableCount = Object.keys(result.newSchema.tables).length\n  logger.log(\n    `[${NODE_NAME}] Applied ${schemaChanges.length} schema changes successfully (${newTableCount} tables)`,\n  )\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    `Applied ${schemaChanges.length} schema changes successfully`,\n  )\n\n  return {\n    ...state,\n    schemaData: result.newSchema,\n    generatedAnswer: message,\n    error: undefined,\n  }\n}\n\n/**\n * Handle schema changes if they exist\n */\nconst handleSchemaChanges = async (\n  parsedResponse: BuildAgentResponse,\n  state: WorkflowState,\n  repositories: Repositories,\n  logger: NodeLogger,\n): Promise<WorkflowState> => {\n  if (parsedResponse.schemaChanges.length === 0) {\n    return {\n      ...state,\n      generatedAnswer: parsedResponse.message,\n    }\n  }\n\n  const buildingSchemaId = state.buildingSchemaId\n  const latestVersionNumber = state.latestVersionNumber\n\n  return await applySchemaChanges(\n    parsedResponse.schemaChanges,\n    buildingSchemaId,\n    latestVersionNumber,\n    parsedResponse.message,\n    state,\n    repositories,\n    logger,\n  )\n}\n\nasync function prepareSchemaDesign(\n  state: WorkflowState,\n  repositories: Repositories,\n  logger: NodeLogger,\n): Promise<PreparedSchemaDesign> {\n  await logAssistantMessage(state, repositories, 'Preparing schema design...')\n\n  const schemaText = convertSchemaToText(state.schemaData)\n\n  // Log current schema state for debugging\n  const tableCount = Object.keys(state.schemaData.tables).length\n  logger.log(`[${NODE_NAME}] Current schema has ${tableCount} tables`)\n\n  // Create the agent instance\n  const agent = new DatabaseSchemaBuildAgent()\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    'Schema design preparation completed',\n  )\n\n  return {\n    agent,\n    schemaText,\n  }\n}\n\n/**\n * Design Schema Node - DB Design & DDL Execution\n * Performed by dbAgent\n */\nexport async function designSchemaNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { repositories, logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  await logAssistantMessage(state, repositories, 'Designing database schema...')\n\n  const { agent, schemaText } = await prepareSchemaDesign(\n    state,\n    repositories,\n    logger,\n  )\n\n  // Prepare user message with context\n  const userMessage = prepareUserMessage(state, logger)\n\n  // Log appropriate message for DDL retry case\n  if (state.shouldRetryWithDesignSchema && state.ddlExecutionFailureReason) {\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Redesigning schema to fix DDL execution errors...',\n    )\n  }\n\n  // Create prompt variables directly\n  const promptVariables: SchemaAwareChatVariables = {\n    schema_text: schemaText,\n    chat_history: state.formattedHistory,\n    user_message: userMessage,\n  }\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    'Analyzing table structure and relationships...',\n  )\n\n  // Use agent's generate method with prompt variables\n  const response = await agent.generate(promptVariables)\n  const result = await handleSchemaChanges(\n    response,\n    state,\n    repositories,\n    logger,\n  )\n\n  await logAssistantMessage(state, repositories, 'Schema design completed')\n\n  // Clear retry flags after processing\n  const finalResult = {\n    ...result,\n    shouldRetryWithDesignSchema: undefined,\n    ddlExecutionFailureReason: undefined,\n  }\n\n  logger.log(`[${NODE_NAME}] Completed`)\n  return finalResult\n}\n", "import { isPrimaryKey, type Schema } from '@liam-hq/db-structure'\n\n// Convert table data to text document\nconst tableToDocument = (\n  tableName: string,\n  tableData: Schema['tables'][string],\n): string => {\n  // Table description\n  const tableDescription = `Table: ${tableName}\\nDescription: ${tableData.comment || 'No description'}\\n`\n\n  // Columns information\n  let columnsText = 'Columns:\\n'\n  if (tableData.columns) {\n    for (const [columnName, columnData] of Object.entries(tableData.columns)) {\n      columnsText += `- ${columnName}: ${columnData.type || 'unknown type'} ${!columnData.notNull ? '(nullable)' : '(not nullable)'}\\n`\n      if (columnData.comment) {\n        columnsText += `  Description: ${columnData.comment}\\n`\n      }\n    }\n  }\n\n  // Primary key information\n  let primaryKeyText = ''\n  const primaryKeyColumns = Object.entries(tableData.columns || {})\n    .filter(([name]) => isPrimaryKey(name, tableData.constraints || {}))\n    .map(([name]) => name)\n\n  if (primaryKeyColumns.length > 0) {\n    primaryKeyText = `Primary Key: ${primaryKeyColumns.join(', ')}\\n`\n  }\n\n  // Combine all information\n  return `${tableDescription}${columnsText}${primaryKeyText}`\n}\n\n// Convert schema data to text format\nexport const convertSchemaToText = (schema: Schema): string => {\n  let schemaText = 'FULL DATABASE SCHEMA:\\n\\n'\n\n  // Process tables\n  if (schema.tables) {\n    schemaText += 'TABLES:\\n\\n'\n    for (const [tableName, tableData] of Object.entries(schema.tables)) {\n      const tableDoc = tableToDocument(tableName, tableData)\n      schemaText = `${schemaText}${tableDoc}\\n\\n`\n    }\n  }\n\n  return schemaText\n}\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport { postgresqlSchemaDeparser } from '@liam-hq/db-structure'\nimport { executeQuery } from '@liam-hq/pglite-server'\nimport type { SqlResult } from '@liam-hq/pglite-server/src/types'\nimport { WORKFLOW_RETRY_CONFIG } from '../constants'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\nimport { logAssistantMessage } from '../utils/timelineLogger'\n\nconst NODE_NAME = 'executeDdlNode'\n\n/**\n * Execute DDL Node - Generates DDL from schema and executes it\n * Generates DDL mechanically without LLM and then executes\n */\nexport async function executeDdlNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { repositories, logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  await logAssistantMessage(state, repositories, 'Creating database...')\n\n  // Generate DDL from schema data\n  const result = postgresqlSchemaDeparser(state.schemaData)\n\n  if (result.errors.length > 0) {\n    const errorMessages = result.errors.map((e) => e.message).join('; ')\n    logger.log(`[${NODE_NAME}] DDL generation failed: ${errorMessages}`)\n\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Error occurred during DDL generation',\n    )\n\n    logger.log(`[${NODE_NAME}] Completed`)\n    return {\n      ...state,\n      ddlStatements: 'DDL generation failed due to an unexpected error.',\n    }\n  }\n\n  const ddlStatements = result.value\n\n  // Log detailed information about what was generated\n  const tableCount = Object.keys(state.schemaData.tables).length\n  const ddlLength = ddlStatements.length\n\n  logger.log(\n    `[${NODE_NAME}] Generated DDL for ${tableCount} tables (${ddlLength} characters)`,\n  )\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    `Generated DDL statements (${tableCount} tables)`,\n  )\n\n  if (!ddlStatements || !ddlStatements.trim()) {\n    logger.log(`[${NODE_NAME}] No DDL statements to execute`)\n\n    await logAssistantMessage(\n      state,\n      repositories,\n      'No DDL statements to execute',\n    )\n\n    logger.log(`[${NODE_NAME}] Completed`)\n    return {\n      ...state,\n      ddlStatements,\n    }\n  }\n\n  await logAssistantMessage(state, repositories, 'Executing DDL statements...')\n\n  const results: SqlResult[] = await executeQuery(\n    state.designSessionId,\n    ddlStatements,\n  )\n\n  const hasErrors = results.some((result: SqlResult) => !result.success)\n\n  if (hasErrors) {\n    const errorMessages = results\n      .filter((result: SqlResult) => !result.success)\n      .map(\n        (result: SqlResult) =>\n          `SQL: ${result.sql}, Error: ${JSON.stringify(result.result)}`,\n      )\n      .join('; ')\n\n    logger.log(`[${NODE_NAME}] DDL execution failed: ${errorMessages}`)\n\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Error occurred during DDL execution',\n    )\n\n    // Check if this is the first failure or if we've already retried\n    const currentRetryCount = state.retryCount['ddlExecutionRetry'] || 0\n\n    if (currentRetryCount < WORKFLOW_RETRY_CONFIG.MAX_DDL_EXECUTION_RETRIES) {\n      // Set up retry with designSchemaNode\n      logger.log(`[${NODE_NAME}] Scheduling retry via designSchemaNode`)\n\n      await logAssistantMessage(\n        state,\n        repositories,\n        'Redesigning schema to fix errors...',\n      )\n\n      logger.log(`[${NODE_NAME}] Completed`)\n      return {\n        ...state,\n        shouldRetryWithDesignSchema: true,\n        ddlExecutionFailureReason: errorMessages,\n        retryCount: {\n          ...state.retryCount,\n          ddlExecutionRetry: currentRetryCount + 1,\n        },\n      }\n    }\n\n    // Already retried - mark as permanently failed\n    logger.log(\n      `[${NODE_NAME}] DDL execution failed after retry, marking as failed`,\n    )\n\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Unable to resolve DDL execution errors',\n    )\n\n    logger.log(`[${NODE_NAME}] Completed`)\n    return {\n      ...state,\n      ddlExecutionFailed: true,\n      ddlExecutionFailureReason: errorMessages,\n    }\n  }\n\n  logger.log(`[${NODE_NAME}] DDL executed successfully`)\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    'Database created successfully',\n  )\n\n  logger.log(`[${NODE_NAME}] Completed`)\n\n  return {\n    ...state,\n    ddlStatements,\n  }\n}\n", "export * from './client'\nexport * from './PGliteInstanceManager'\nexport * from './types'\n", "import { PGliteInstanceManager } from './PGliteInstanceManager'\nimport type { SqlResult } from './types'\n\nconst manager = new PGliteInstanceManager()\n\nexport async function executeQuery(\n  sessionId: string,\n  sql: string,\n): Promise<SqlResult[]> {\n  return await manager.executeQuery(sessionId, sql)\n}\n\nexport { manager as pgliteManager }\n", "import { PGlite } from '@electric-sql/pglite'\nimport type { SqlResult } from './types'\n\n/**\n * Manages PGlite database instances with immediate cleanup after query execution\n */\nexport class PGliteInstanceManager {\n  /**\n   * Creates a new PGlite instance for query execution\n   */\n  private async createInstance(): Promise<PGlite> {\n    return new PGlite()\n  }\n\n  /**\n   * Execute SQL query with immediate instance cleanup\n   */\n  async executeQuery(_sessionId: string, sql: string): Promise<SqlResult[]> {\n    const db = await this.createInstance()\n    try {\n      return await this.executeSql(sql, db)\n    } finally {\n      db.close?.()\n    }\n  }\n\n  /**\n   * Execute SQL statements and return results with metadata\n   * Handles multiple statements separated by semicolons\n   */\n  private async executeSql(sqlText: string, db: PGlite): Promise<SqlResult[]> {\n    const results: SqlResult[] = []\n\n    // Split SQL text into individual statements\n    const statements = sqlText\n      .split(';')\n      .map((s) => s.trim())\n      .filter(Boolean)\n\n    // Execute each statement and collect results\n    for (const sql of statements) {\n      const startTime = performance.now()\n      try {\n        const result = await db.query(sql)\n        const executionTime = Math.round(performance.now() - startTime)\n        results.push({\n          sql,\n          result,\n          success: true,\n          id: crypto.randomUUID(),\n          metadata: {\n            executionTime,\n            timestamp: new Date().toLocaleString(),\n          },\n        })\n      } catch (error) {\n        const executionTime = Math.round(performance.now() - startTime)\n        const errorMessage =\n          error instanceof Error ? error.message : String(error)\n        results.push({\n          sql,\n          result: { error: errorMessage },\n          success: false,\n          id: crypto.randomUUID(),\n          metadata: {\n            executionTime,\n            timestamp: new Date().toLocaleString(),\n          },\n        })\n      }\n    }\n\n    return results\n  }\n}\n", "export type SqlResult = {\n  sql: string\n  result: unknown\n  success: boolean\n  id: string\n  metadata: {\n    executionTime: number\n    timestamp: string\n    affectedRows?: number | undefined\n  }\n}\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport type { Repositories } from '../../../repositories'\nimport type { NodeLogger } from '../../../utils/nodeLogger'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\nimport { logAssistantMessage } from '../utils/timelineLogger'\nimport {\n  createOrUpdateArtifact,\n  transformWorkflowStateToArtifact,\n} from '../utils/transformWorkflowStateToArtifact'\n\nconst NODE_NAME = 'finalizeArtifactsNode'\n\n/**\n * Save artifacts if workflow state contains artifact data\n */\nasync function saveArtifacts(\n  state: WorkflowState,\n  logger: NodeLogger,\n  repositories: Repositories,\n): Promise<void> {\n  if (!state.analyzedRequirements && !state.generatedUsecases) {\n    logger.log(`[${NODE_NAME}] No artifact data available to save`)\n    return\n  }\n\n  await logAssistantMessage(state, repositories, 'Saving artifacts...')\n  logger.log(`[${NODE_NAME}] Saving artifacts`)\n  const artifact = transformWorkflowStateToArtifact(state)\n  const artifactResult = await createOrUpdateArtifact(\n    state,\n    artifact,\n    repositories,\n  )\n\n  if (artifactResult.success) {\n    logger.log(`[${NODE_NAME}] Artifacts saved successfully`)\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Artifacts saved successfully',\n    )\n  } else {\n    logger.log(\n      `[${NODE_NAME}] Failed to save artifacts: ${artifactResult.error}`,\n    )\n    await logAssistantMessage(state, repositories, 'Failed to save artifacts')\n  }\n}\n\n/**\n * Save timeline item to database\n */\nasync function saveTimelineItem(\n  state: WorkflowState,\n  content: string,\n  type: 'error' | 'assistant',\n  repositories: Repositories,\n): Promise<void> {\n  const saveResult = await repositories.schema.createTimelineItem({\n    designSessionId: state.designSessionId,\n    content,\n    type,\n  })\n\n  if (!saveResult.success) {\n    console.error(`Failed to save ${type} timeline item:`, saveResult.error)\n  }\n}\n\n/**\n * Generate final response and determine error state\n */\nasync function generateFinalResponse(\n  state: WorkflowState,\n  repositories: Repositories,\n): Promise<{\n  finalResponse: string\n  errorToReturn: string | undefined\n}> {\n  await logAssistantMessage(state, repositories, 'Generating final response...')\n\n  if (state.error) {\n    const finalResponse = `Sorry, an error occurred during processing: ${state.error.message}`\n    await saveTimelineItem(state, finalResponse, 'error', repositories)\n    return { finalResponse, errorToReturn: state.error.message }\n  }\n\n  if (state.generatedAnswer) {\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Final response generated successfully',\n    )\n    await saveTimelineItem(\n      state,\n      state.generatedAnswer,\n      'assistant',\n      repositories,\n    )\n    return { finalResponse: state.generatedAnswer, errorToReturn: undefined }\n  }\n\n  // Fallback case\n  const finalResponse =\n    'Sorry, we could not generate an answer. Please try again.'\n  await saveTimelineItem(state, finalResponse, 'error', repositories)\n  return { finalResponse, errorToReturn: 'No generated answer available' }\n}\n\n/**\n * Finalize Artifacts Node - Generate & Save Artifacts\n * Performed by dbAgentArtifactGen\n */\nexport async function finalizeArtifactsNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { repositories, logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    'Preparing final deliverables...',\n  )\n\n  await saveArtifacts(state, logger, repositories)\n  const { finalResponse, errorToReturn } = await generateFinalResponse(\n    state,\n    repositories,\n  )\n\n  logger.log(`[${NODE_NAME}] Completed`)\n\n  return {\n    ...state,\n    finalResponse,\n    error: errorToReturn ? new Error(errorToReturn) : undefined,\n  }\n}\n", "import type {\n  Artifact,\n  FunctionalRequirement,\n  NonFunctionalRequirement,\n} from '@liam-hq/artifact'\nimport type { Usecase } from '../../../langchain/agents/qaGenerateUsecaseAgent/agent'\nimport type { Repositories } from '../../../repositories'\nimport type { WorkflowState } from '../types'\n\n/**\n * Transform WorkflowState to Artifact format\n * This handles the conversion from the workflow's data structure to the artifact schema\n */\nexport const transformWorkflowStateToArtifact = (\n  state: WorkflowState,\n): Artifact => {\n  const businessRequirement =\n    state.analyzedRequirements?.businessRequirement ?? ''\n  const usecases = state.generatedUsecases || []\n\n  // Group use cases by requirement category and type\n  const requirementGroups = groupUsecasesByRequirement(usecases)\n\n  // Convert grouped requirements to the artifact format\n  const requirements = Object.entries(requirementGroups).map(\n    ([category, data]) => {\n      const { type, usecases: groupedUsecases, description } = data\n\n      if (type === 'functional') {\n        const functionalRequirement: FunctionalRequirement = {\n          type: 'functional',\n          name: category,\n          description: description || `Functional requirement: ${category}`,\n          use_cases: groupedUsecases.map((usecase) => ({\n            title: usecase.title,\n            description: usecase.description,\n            dml_operations: [], // Empty for now - to be populated when DML tracking is added\n          })),\n        }\n        return functionalRequirement\n      }\n\n      const nonFunctionalRequirement: NonFunctionalRequirement = {\n        type: 'non_functional',\n        name: category,\n        description: description || `Non-functional requirement: ${category}`,\n      }\n      return nonFunctionalRequirement\n    },\n  )\n\n  return {\n    requirement_analysis: {\n      business_requirement: businessRequirement,\n      requirements,\n    },\n  }\n}\n\n/**\n * Group use cases by requirement category and type\n */\nconst groupUsecasesByRequirement = (usecases: Usecase[]) => {\n  const groups: Record<\n    string,\n    {\n      type: 'functional' | 'non_functional'\n      usecases: Usecase[]\n      description?: string\n    }\n  > = {}\n\n  for (const usecase of usecases) {\n    const category = usecase.requirementCategory\n\n    if (!groups[category]) {\n      groups[category] = {\n        type: usecase.requirementType,\n        usecases: [],\n        description: usecase.requirement, // Use the first requirement description\n      }\n    }\n\n    groups[category].usecases.push(usecase)\n  }\n\n  return groups\n}\n\n/**\n * Create an artifact with upsert logic\n * Tries to update existing artifact first, creates new one if not found\n */\nexport const createOrUpdateArtifact = async (\n  state: WorkflowState,\n  artifact: Artifact,\n  repositories: Repositories,\n): Promise<{ success: boolean; error?: string }> => {\n  // Try to get existing artifact first\n  const existingResult = await repositories.schema.getArtifact(\n    state.designSessionId,\n  )\n\n  if (existingResult.success) {\n    // Artifact exists, update it\n    const updateResult = await repositories.schema.updateArtifact({\n      designSessionId: state.designSessionId,\n      artifact,\n    })\n\n    if (updateResult.success) {\n      return { success: true }\n    }\n    return { success: false, error: updateResult.error }\n  }\n\n  // Check if the failure is due to \"not found\" vs actual error\n  if (existingResult.error !== 'Artifact not found') {\n    return { success: false, error: existingResult.error }\n  }\n\n  // Artifact doesn't exist, create new one\n  const createResult = await repositories.schema.createArtifact({\n    designSessionId: state.designSessionId,\n    artifact,\n  })\n\n  if (createResult.success) {\n    return { success: true }\n  }\n  return { success: false, error: createResult.error }\n}\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport { ResultAsync } from 'neverthrow'\nimport { QAGenerateUsecaseAgent } from '../../../langchain/agents'\nimport type { Usecase } from '../../../langchain/agents/qaGenerateUsecaseAgent/agent'\nimport type { BasePromptVariables } from '../../../langchain/utils/types'\nimport type { NodeLogger } from '../../../utils/nodeLogger'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\nimport { logAssistantMessage } from '../utils/timelineLogger'\n\nconst NODE_NAME = 'generateUsecaseNode'\n\n/**\n * Log usecase generation results for debugging/monitoring purposes\n * TODO: Remove this function once the feature is stable and monitoring is no longer needed\n */\nconst logUsecaseResults = (logger: NodeLogger, usecases: Usecase[]): void => {\n  logger.log(`[${NODE_NAME}] Generated ${usecases.length} use cases`)\n\n  usecases.forEach((usecase, index) => {\n    logger.log(\n      `[${NODE_NAME}] Usecase ${index + 1} (${usecase.requirementType}): ${JSON.stringify(usecase)}`,\n    )\n  })\n}\n\n/**\n * Format analyzed requirements into a structured text for AI processing\n */\nfunction formatAnalyzedRequirements(\n  analyzedRequirements: NonNullable<WorkflowState['analyzedRequirements']>,\n  userInput: string,\n): string {\n  return `\nBusiness Requirement: ${analyzedRequirements.businessRequirement}\n\nFunctional Requirements:\n${Object.entries(analyzedRequirements.functionalRequirements)\n  .map(\n    ([category, requirements]) =>\n      `${category}:\\n${requirements.map((req) => `- ${req}`).join('\\n')}`,\n  )\n  .join('\\n\\n')}\n\nNon-Functional Requirements:\n${Object.entries(analyzedRequirements.nonFunctionalRequirements)\n  .map(\n    ([category, requirements]) =>\n      `${category}:\\n${requirements.map((req) => `- ${req}`).join('\\n')}`,\n  )\n  .join('\\n\\n')}\n\nOriginal User Input: ${userInput}\n`\n}\n\n/**\n * Generate Usecase Node - QA Agent creates use cases\n * Performed by qaGenerateUsecaseAgent\n */\nexport async function generateUsecaseNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { repositories, logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  await logAssistantMessage(state, repositories, 'Generating use cases...')\n\n  // Check if we have analyzed requirements\n  if (!state.analyzedRequirements) {\n    const errorMessage =\n      'No analyzed requirements found. Cannot generate use cases.'\n    const error = new Error(`[${NODE_NAME}] ${errorMessage}`)\n    logger.error(error.message)\n\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Error occurred during use case generation',\n    )\n\n    return {\n      ...state,\n      error: new Error(errorMessage),\n    }\n  }\n\n  const qaAgent = new QAGenerateUsecaseAgent()\n\n  // Create a user message that includes the analyzed requirements\n  const requirementsText = formatAnalyzedRequirements(\n    state.analyzedRequirements,\n    state.userInput,\n  )\n\n  const promptVariables: BasePromptVariables = {\n    chat_history: state.formattedHistory,\n    user_message: requirementsText,\n  }\n\n  const retryCount = state.retryCount[NODE_NAME] ?? 0\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    'Analyzing test cases and queries...',\n  )\n\n  const usecaseResult = await ResultAsync.fromPromise(\n    qaAgent.generate(promptVariables),\n    (error) => (error instanceof Error ? error : new Error(String(error))),\n  )\n\n  return await usecaseResult.match(\n    async (generatedResult) => {\n      // Log the usecase results for debugging/monitoring purposes\n      logUsecaseResults(logger, generatedResult.usecases)\n\n      await logAssistantMessage(\n        state,\n        repositories,\n        'Use case generation completed',\n      )\n\n      logger.log(`[${NODE_NAME}] Completed`)\n\n      return {\n        ...state,\n        generatedUsecases: generatedResult.usecases,\n        error: undefined, // Clear error on success\n      }\n    },\n    async (error) => {\n      logger.error(`[${NODE_NAME}] Failed: ${error.message}`)\n\n      await logAssistantMessage(\n        state,\n        repositories,\n        'Error occurred during use case generation',\n      )\n\n      // Increment retry count and set error\n      return {\n        ...state,\n        error: error,\n        retryCount: {\n          ...state.retryCount,\n          [NODE_NAME]: retryCount + 1,\n        },\n      }\n    },\n  )\n}\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport { DMLGenerationAgent } from '../../../langchain/agents/dmlGenerationAgent/agent'\nimport type { Usecase } from '../../../langchain/agents/qaGenerateUsecaseAgent/agent'\nimport { convertSchemaToText } from '../../../utils/convertSchemaToText'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\nimport { logAssistantMessage } from '../utils/timelineLogger'\n\nconst NODE_NAME = 'prepareDmlNode'\n\n/**\n * Format use cases into a structured string for DML generation\n */\nfunction formatUseCases(useCases: Usecase[]): string {\n  // Group use cases by requirement category\n  const groupedUseCases = useCases.reduce<Record<string, Usecase[]>>(\n    (acc, uc) => {\n      const category = uc.requirementCategory?.trim() || 'General'\n      if (!acc[category]) {\n        acc[category] = []\n      }\n      acc[category].push(uc)\n      return acc\n    },\n    {},\n  )\n\n  // Format grouped use cases\n  const formattedGroups = Object.entries(groupedUseCases).map(\n    ([category, cases]) => {\n      const formattedCases = cases\n        .map(\n          (uc) =>\n            `  - ${uc.title}: ${uc.description}${\n              uc.requirement ? ` (Requirement: ${uc.requirement})` : ''\n            }`,\n        )\n        .join('\\n')\n      return `${category}:\\n${formattedCases}`\n    },\n  )\n\n  return formattedGroups.join('\\n\\n')\n}\n\n/**\n * Prepare DML Node - Generates DML statements based on schema and use cases\n * Performed by DMLGenerationAgent\n */\nexport async function prepareDmlNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { repositories, logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  await logAssistantMessage(state, repositories, 'Preparing DML statements...')\n\n  // Check if we have required inputs\n  if (!state.ddlStatements) {\n    logger.warn(`[${NODE_NAME}] No DDL statements available for DML generation`)\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Missing DDL statements for DML generation',\n    )\n    logger.log(`[${NODE_NAME}] Completed`)\n    return state\n  }\n\n  if (!state.generatedUsecases || state.generatedUsecases.length === 0) {\n    logger.warn(`[${NODE_NAME}] No use cases available for DML generation`)\n    await logAssistantMessage(\n      state,\n      repositories,\n      'Missing use cases for DML generation',\n    )\n    logger.log(`[${NODE_NAME}] Completed`)\n    return state\n  }\n\n  // Log input statistics\n  const tableCount = (state.ddlStatements.match(/CREATE TABLE/gi) || []).length\n  const useCaseCount = state.generatedUsecases.length\n  logger.info(\n    `[${NODE_NAME}] Generating DML for ${tableCount} tables and ${useCaseCount} use cases`,\n  )\n\n  // Create DML generation agent\n  const dmlAgent = new DMLGenerationAgent({ logger })\n\n  // Format use cases for the agent\n  const formattedUseCases = formatUseCases(state.generatedUsecases)\n\n  // Convert schema to text for additional context\n  const schemaContext = convertSchemaToText(state.schemaData)\n\n  // Generate DML statements\n  const result = await dmlAgent.generate({\n    schemaSQL: state.ddlStatements,\n    formattedUseCases,\n    schemaContext,\n  })\n\n  // Validate result\n  if (!result.dmlStatements || result.dmlStatements.trim().length === 0) {\n    logger.warn(`[${NODE_NAME}] DML generation returned empty statements`)\n    await logAssistantMessage(\n      state,\n      repositories,\n      'DML generation returned empty statements',\n    )\n    logger.log(`[${NODE_NAME}] Completed`)\n    return state\n  }\n\n  logger.log(`[${NODE_NAME}] DML statements generated successfully`)\n\n  await logAssistantMessage(\n    state,\n    repositories,\n    'DML statements generated successfully',\n  )\n\n  logger.log(`[${NODE_NAME}] Completed`)\n\n  return {\n    ...state,\n    dmlStatements: result.dmlStatements,\n  }\n}\n", "import * as v from 'valibot'\nimport type { NodeLogger } from '../../../utils/nodeLogger'\nimport type { ChatAgent } from '../../utils/types'\nimport { formatDMLGenerationPrompts } from './prompts'\n\nconst DMLGenerationAgentInputSchema = v.object({\n  schemaSQL: v.string(),\n  formattedUseCases: v.string(),\n  schemaContext: v.optional(v.string()),\n})\n\nconst DMLGenerationAgentOutputSchema = v.object({\n  dmlStatements: v.string(),\n})\n\ntype DMLGenerationAgentInput = v.InferInput<\n  typeof DMLGenerationAgentInputSchema\n>\ntype DMLGenerationAgentOutput = v.InferOutput<\n  typeof DMLGenerationAgentOutputSchema\n>\n\nexport class DMLGenerationAgent\n  implements ChatAgent<DMLGenerationAgentInput, DMLGenerationAgentOutput>\n{\n  private readonly logger: NodeLogger\n\n  constructor(params: { logger: NodeLogger }) {\n    this.logger = params.logger\n  }\n\n  async generate(\n    input: DMLGenerationAgentInput,\n  ): Promise<DMLGenerationAgentOutput> {\n    this.logger.info('Starting DML generation')\n\n    const { systemMessage, humanMessage } = formatDMLGenerationPrompts({\n      schema: input.schemaSQL,\n      requirements: input.formattedUseCases,\n      chat_history: '',\n      user_message:\n        'Generate comprehensive DML statements for testing the provided schema.',\n    })\n\n    // TODO: Integrate with LLM using systemMessage and humanMessage\n    this.logger.debug('Generated prompts', { systemMessage, humanMessage })\n\n    return {\n      dmlStatements: '-- DML statements will be generated here',\n    }\n  }\n}\n", "/**\n * Prompts for DML Generation Agent\n */\n\nconst DML_GENERATION_SYSTEM_MESSAGE = `\nYou are a senior QA engineer specializing in database testing and data generation. Your expertise lies in creating comprehensive test data that validates database schemas, relationships, and business logic through well-crafted DML (Data Manipulation Language) statements.\n\n## Your Responsibilities:\n\n1. **Generate diverse and realistic test data** that covers various scenarios and edge cases\n2. **Create DML statements for all operations** including INSERT, UPDATE, DELETE, and SELECT\n3. **Ensure data integrity** by respecting foreign key relationships and constraints\n4. **Design test scenarios** that validate business rules and data consistency\n5. **Produce production-ready SQL** that is properly formatted and error-free\n6. **Generate sufficient data volume** for meaningful testing and validation\n\n## Guidelines:\n\n• **INSERT Statements**: Create diverse, realistic data that tests all columns and constraints\n  - Include edge cases (maximum lengths, boundary values, special characters)\n  - For performance testing, generate bulk data (minimum 20-50 records per table)\n  - Ensure proper order to respect foreign key dependencies\n  - Use variety in data to test different scenarios\n\n• **UPDATE Statements**: Test data modifications and business logic\n  - Update single records, bulk updates, and conditional updates\n  - Test cascade effects on related tables\n  - Validate trigger behaviors if applicable\n  - Include both simple and complex WHERE conditions\n\n• **DELETE Statements**: Validate referential integrity and cleanup operations\n  - Test cascade deletes and restrict behaviors\n  - Include soft delete patterns if applicable\n  - Verify orphaned data handling\n\n• **SELECT Statements**: Create queries to validate the generated data\n  - Include JOIN operations to verify relationships\n  - Add aggregation queries to check data distribution\n  - Create queries that validate business rules\n  - Include performance testing queries\n\n• **Data Patterns**:\n  - Use realistic names, addresses, and contact information\n  - Include unicode characters and special characters where appropriate\n  - Test NULL values where allowed\n  - Include past, present, and future dates\n  - Use meaningful business data (prices, quantities, statuses)\n\n• **Best Practices**:\n  - Always use transactions for data safety\n  - Include comments explaining the test scenario\n  - Format SQL for readability\n  - Group related statements together\n  - Provide rollback statements when appropriate\n\n## Output Format:\n\nStructure your response as follows:\n\n\\`\\`\\`sql\n-- ================================================================\n-- DML Generation for [Schema Name]\n-- Generated: [Current Date]\n-- Purpose: [Brief description of test scenarios]\n-- ================================================================\n\n-- ----------------------------------------------------------------\n-- Section 1: Initial Data Setup (INSERT)\n-- ----------------------------------------------------------------\n\n-- Table: [table_name]\n-- Scenario: [What this data tests]\nINSERT INTO table_name (column1, column2, ...) VALUES\n  (value1, value2, ...),\n  (value1, value2, ...);\n\n-- ----------------------------------------------------------------\n-- Section 2: Data Modifications (UPDATE)\n-- ----------------------------------------------------------------\n\n-- Scenario: [What this update tests]\nUPDATE table_name\nSET column1 = value1\nWHERE condition;\n\n-- ----------------------------------------------------------------\n-- Section 3: Data Validation (SELECT)\n-- ----------------------------------------------------------------\n\n-- Query: [What this query validates]\nSELECT ...\nFROM ...\nWHERE ...;\n\n-- ----------------------------------------------------------------\n-- Section 4: Cleanup Operations (DELETE) - Optional\n-- ----------------------------------------------------------------\n\n-- Scenario: [What this deletion tests]\nDELETE FROM table_name\nWHERE condition;\n\n-- ----------------------------------------------------------------\n-- Rollback Script (if needed)\n-- ----------------------------------------------------------------\n\\`\\`\\`\n\n## Example:\n\nFor a simple e-commerce schema with users, products, and orders:\n\n\\`\\`\\`sql\n-- ================================================================\n-- DML Generation for E-commerce Test Data\n-- Generated: 2024-12-09\n-- Purpose: Comprehensive testing of user orders and product relationships\n-- ================================================================\n\n-- ----------------------------------------------------------------\n-- Section 1: Initial Data Setup (INSERT)\n-- ----------------------------------------------------------------\n\n-- Table: users\n-- Scenario: Diverse user profiles including edge cases\nINSERT INTO users (id, email, name, created_at) VALUES\n  (1, 'john.doe@example.com', 'John Doe', '2024-01-15 10:00:00'),\n  (2, 'jane.smith@example.com', 'Jane Smith', '2024-02-20 14:30:00'),\n  (3, 'test.user@example.com', 'Test User with Very Long Name That Tests Character Limits', '2024-03-01 09:00:00'),\n  (4, 'intl.user@example.com', 'Müller José García', '2024-03-15 11:00:00'),\n  (5, 'special.chars@example.com', 'O''Brien & Co.', '2024-04-01 16:00:00');\n\n-- Table: products\n-- Scenario: Various product types with different price points\nINSERT INTO products (id, name, price, stock_quantity) VALUES\n  (1, 'Basic T-Shirt', 19.99, 100),\n  (2, 'Premium Jacket', 199.99, 25),\n  (3, 'Clearance Item', 0.99, 500),\n  (4, 'High-End Watch', 9999.99, 5),\n  (5, 'Out of Stock Item', 49.99, 0);\n\n-- ----------------------------------------------------------------\n-- Section 2: Data Modifications (UPDATE)\n-- ----------------------------------------------------------------\n\n-- Scenario: Price adjustment for seasonal sale\nUPDATE products\nSET price = price * 0.8, -- 20% discount\n    updated_at = CURRENT_TIMESTAMP\nWHERE id IN (1, 2);\n\n-- Scenario: Bulk inventory update after shipment\nUPDATE products\nSET stock_quantity = stock_quantity - 10\nWHERE stock_quantity > 10;\n\n-- ----------------------------------------------------------------\n-- Section 3: Data Validation (SELECT)\n-- ----------------------------------------------------------------\n\n-- Query: Verify user distribution\nSELECT COUNT(*) as total_users,\n       COUNT(DISTINCT EXTRACT(MONTH FROM created_at)) as active_months\nFROM users;\n\n-- Query: Check product inventory status\nSELECT \n  CASE \n    WHEN stock_quantity = 0 THEN 'Out of Stock'\n    WHEN stock_quantity < 10 THEN 'Low Stock'\n    ELSE 'In Stock'\n  END as status,\n  COUNT(*) as product_count\nFROM products\nGROUP BY status;\n\\`\\`\\`\n`\n\nconst DML_GENERATION_HUMAN_MESSAGE_TEMPLATE = `\n## Database Schema:\n{schema}\n\n## Business Requirements and Use Cases:\n{requirements}\n\n## Previous Context:\n{chat_history}\n\n## Current Request:\n{user_message}\n\nPlease generate comprehensive DML statements that fulfill the requirements above. Ensure all data is realistic, properly formatted, and respects all database constraints.\n`\n\n/**\n * Type definitions for DML generation prompt variables\n */\ntype DMLGenerationPromptVariables = {\n  schema: string\n  requirements: string\n  chat_history: string\n  user_message: string\n}\n\n/**\n * Format the prompts with actual values\n */\nexport function formatDMLGenerationPrompts(\n  variables: DMLGenerationPromptVariables,\n): { systemMessage: string; humanMessage: string } {\n  const humanMessage = DML_GENERATION_HUMAN_MESSAGE_TEMPLATE.replace(\n    '{schema}',\n    variables.schema,\n  )\n    .replace('{requirements}', variables.requirements)\n    .replace('{chat_history}', variables.chat_history)\n    .replace('{user_message}', variables.user_message)\n\n  return {\n    systemMessage: DML_GENERATION_SYSTEM_MESSAGE,\n    humanMessage,\n  }\n}\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\n\nconst NODE_NAME = 'reviewDeliverablesNode'\n\n/**\n * Review Deliverables Node - Final Requirements & Deliverables Confirmation\n * Performed by pmReviewAgent\n */\nexport async function reviewDeliverablesNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  // TODO: Implement deliverables review logic\n  // This node should perform final confirmation of requirements and deliverables\n\n  logger.log(`[${NODE_NAME}] Completed`)\n\n  // For now, pass through the state unchanged (assuming review passes)\n  // Future implementation will review deliverables and confirm requirements\n  return {\n    ...state,\n  }\n}\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\n\nconst NODE_NAME = 'saveUserMessageNode'\n\n/**\n * Save User Message Node - Saves the user's message to the database\n * This is the first node in the workflow to ensure message persistence\n */\nexport async function saveUserMessageNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { repositories, logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  // Save user message to database\n  const saveResult = await repositories.schema.createTimelineItem({\n    designSessionId: state.designSessionId,\n    content: state.userInput,\n    type: 'user',\n    userId: state.userId,\n  })\n\n  if (!saveResult.success) {\n    logger.error(`[${NODE_NAME}] Failed to save user message:`, {\n      error: saveResult.error,\n    })\n    // Set error state to trigger transition to finalizeArtifacts\n    const error = new Error(`Failed to save message: ${saveResult.error}`)\n    return {\n      ...state,\n      error,\n    }\n  }\n\n  logger.log(`[${NODE_NAME}] Successfully saved user message`)\n\n  return state\n}\n", "import type { RunnableConfig } from '@langchain/core/runnables'\nimport { getConfigurable } from '../shared/getConfigurable'\nimport type { WorkflowState } from '../types'\n\nconst NODE_NAME = 'validateSchemaNode'\n\n/**\n * Validate Schema Node - DML Execution & Validation\n * Performed by qaAgent\n */\nexport async function validateSchemaNode(\n  state: WorkflowState,\n  config: RunnableConfig,\n): Promise<WorkflowState> {\n  const configurableResult = getConfigurable(config)\n  if (configurableResult.isErr()) {\n    return {\n      ...state,\n      error: configurableResult.error,\n    }\n  }\n  const { logger } = configurableResult.value\n\n  logger.log(`[${NODE_NAME}] Started`)\n\n  // TODO: Implement DML execution and validation logic\n  // This node should execute DML and validate the schema\n\n  logger.log(`[${NODE_NAME}] Completed`)\n\n  // For now, pass through the state unchanged (assuming validation passes)\n  // Future implementation will execute DML and validate results\n  return {\n    ...state,\n  }\n}\n", "import { Annotation } from '@langchain/langgraph'\nimport type { Schema } from '@liam-hq/db-structure'\nimport type { Usecase } from '../../../langchain/agents/qaGenerateUsecaseAgent/agent'\nimport type { Repositories } from '../../../repositories'\nimport type { NodeLogger } from '../../../utils/nodeLogger'\n\n/**\n * Default recursion limit for LangGraph workflow execution.\n * This value limits the total number of state transitions (edges) in the graph.\n *\n * Important: Node retries do NOT count toward this limit. The limit only\n * applies to transitions between nodes.\n *\n * The workflow has 9 nodes:\n * - Normal execution: 10 transitions (START → 9 nodes → END)\n * - With error loops: May have additional transitions when errors occur\n *   (e.g., validateSchema → designSchema, reviewDeliverables → analyzeRequirements)\n *\n * Setting this to 20 ensures:\n * - Complete workflow execution under normal conditions\n * - Sufficient headroom for error handling loops\n * - Protection against infinite loops\n */\nexport const DEFAULT_RECURSION_LIMIT = 20\n\n/**\n * Create LangGraph-compatible annotations (shared)\n */\nexport const createAnnotations = () => {\n  return Annotation.Root({\n    userInput: Annotation<string>,\n    analyzedRequirements: Annotation<\n      | {\n          businessRequirement: string\n          functionalRequirements: Record<string, string[]>\n          nonFunctionalRequirements: Record<string, string[]>\n        }\n      | undefined\n    >,\n    generatedUsecases: Annotation<Usecase[] | undefined>,\n    generatedAnswer: Annotation<string | undefined>,\n    finalResponse: Annotation<string | undefined>,\n    formattedHistory: Annotation<string>,\n    schemaData: Annotation<Schema>,\n    projectId: Annotation<string | undefined>,\n    buildingSchemaId: Annotation<string>,\n    latestVersionNumber: Annotation<number>,\n    organizationId: Annotation<string | undefined>,\n    userId: Annotation<string>,\n    designSessionId: Annotation<string>,\n    error: Annotation<Error | undefined>,\n    retryCount: Annotation<Record<string, number>>,\n\n    ddlStatements: Annotation<string | undefined>,\n    dmlStatements: Annotation<string | undefined>,\n\n    // DDL execution retry mechanism\n    shouldRetryWithDesignSchema: Annotation<boolean | undefined>,\n    ddlExecutionFailed: Annotation<boolean | undefined>,\n    ddlExecutionFailureReason: Annotation<string | undefined>,\n\n    // Repository dependencies for data access\n    repositories: Annotation<Repositories>,\n\n    // Logging functionality\n    logger: Annotation<NodeLogger>,\n  })\n}\n", "export { createSupabaseRepositories } from './factory'\n\nexport { SupabaseSchemaRepository } from './supabase'\nexport type {\n  CreateVersionParams,\n  DesignSessionData,\n  Repositories,\n  SchemaData,\n  SchemaRepository,\n  VersionResult,\n} from './types'\n", "import type { SupabaseClientType } from '@liam-hq/db'\nimport { SupabaseSchemaRepository } from './supabase'\nimport type { Repositories } from './types'\n\n/**\n * Factory function to create Supabase-based repositories\n */\nexport function createSupabaseRepositories(\n  client: SupabaseClientType,\n): Repositories {\n  return {\n    schema: new SupabaseSchemaRepository(client),\n  }\n}\n", "import type { Artifact } from '@liam-hq/artifact'\nimport { artifactSchema } from '@liam-hq/artifact'\nimport type { SupabaseClientType } from '@liam-hq/db'\nimport type { Json } from '@liam-hq/db/supabase/database.types'\nimport type { Schema } from '@liam-hq/db-structure'\nimport {\n  applyPatchOperations,\n  operationsSchema,\n  schemaSchema,\n} from '@liam-hq/db-structure'\nimport { compare } from 'fast-json-patch'\nimport * as v from 'valibot'\nimport type {\n  ArtifactResult,\n  CreateArtifactParams,\n  CreateTimelineItemParams,\n  CreateVersionParams,\n  DesignSessionData,\n  SchemaData,\n  SchemaRepository,\n  TimelineItemResult,\n  UpdateArtifactParams,\n  UpdateTimelineItemParams,\n  VersionResult,\n} from './types'\n\nconst updateBuildingSchemaResultSchema = v.union([\n  v.object({\n    success: v.literal(true),\n    messageId: v.string(),\n    versionId: v.string(),\n  }),\n  v.object({\n    success: v.literal(false),\n    error: v.nullable(v.string()),\n  }),\n])\n\n/**\n * Convert Artifact to Json safely without type casting\n */\nconst artifactToJson = (artifact: Artifact): Json => {\n  return JSON.parse(JSON.stringify(artifact))\n}\n\n/**\n * Supabase implementation of SchemaRepository\n */\nexport class SupabaseSchemaRepository implements SchemaRepository {\n  private client: SupabaseClientType\n\n  constructor(client: SupabaseClientType) {\n    this.client = client\n  }\n\n  async getDesignSession(\n    designSessionId: string,\n  ): Promise<DesignSessionData | null> {\n    // Fetch design session with timeline items\n    const { data, error } = await this.client\n      .from('design_sessions')\n      .select(`\n        organization_id,\n        timeline_items (\n          id,\n          content,\n          type,\n          user_id,\n          created_at,\n          updated_at,\n          organization_id,\n          design_session_id,\n          building_schema_version_id\n        )\n      `)\n      .eq('id', designSessionId)\n      .order('created_at', {\n        ascending: true,\n        referencedTable: 'timeline_items',\n      })\n      .single()\n\n    if (error || !data) {\n      console.error(\n        `Could not fetch design session data for ${designSessionId}:`,\n        error,\n      )\n      return null\n    }\n\n    return {\n      organization_id: data.organization_id,\n      timeline_items: data.timeline_items || [],\n    }\n  }\n\n  async getSchema(designSessionId: string): Promise<{\n    data: SchemaData | null\n    error: { message: string } | null\n  }> {\n    const buildingSchemaResult = await this.getBuildingSchema(designSessionId)\n    if (buildingSchemaResult.error || !buildingSchemaResult.data) {\n      return buildingSchemaResult\n    }\n\n    const { buildingSchema } = buildingSchemaResult.data\n\n    const versionsResult = await this.getSchemaVersions(buildingSchema.id)\n    if (versionsResult.error) {\n      return versionsResult\n    }\n\n    const { versions } = versionsResult.data\n    const currentSchema = this.buildCurrentSchema(buildingSchema, versions)\n    const latestVersionNumber = this.getLatestVersionNumber(versions)\n\n    return {\n      data: {\n        id: buildingSchema.id,\n        schema: currentSchema,\n        latestVersionNumber,\n      },\n      error: null,\n    }\n  }\n\n  private async getBuildingSchema(designSessionId: string) {\n    const { data: buildingSchema, error: buildingSchemaError } =\n      await this.client\n        .from('building_schemas')\n        .select('id, initial_schema_snapshot')\n        .eq('design_session_id', designSessionId)\n        .single()\n\n    if (buildingSchemaError || !buildingSchema) {\n      return {\n        data: null,\n        error: buildingSchemaError\n          ? { message: buildingSchemaError.message }\n          : null,\n      }\n    }\n\n    return { data: { buildingSchema }, error: null }\n  }\n\n  private async getSchemaVersions(buildingSchemaId: string) {\n    const { data: versions, error: versionsError } = await this.client\n      .from('building_schema_versions')\n      .select('number, patch')\n      .eq('building_schema_id', buildingSchemaId)\n      .order('number', { ascending: true })\n\n    if (versionsError) {\n      return {\n        data: null,\n        error: { message: versionsError.message },\n      }\n    }\n\n    return { data: { versions: versions || [] }, error: null }\n  }\n\n  // TODO: Set response type to `{ success: true, data: Schema } | { success: false, error: unknown }`\n  // to be able to return errors\n  private buildCurrentSchema(\n    buildingSchema: { initial_schema_snapshot: unknown },\n    versions: Array<{ number: number; patch: unknown }>,\n  ): Schema {\n    const currentSchema: Record<string, unknown> =\n      typeof buildingSchema.initial_schema_snapshot === 'object' &&\n      buildingSchema.initial_schema_snapshot !== null\n        ? JSON.parse(JSON.stringify(buildingSchema.initial_schema_snapshot))\n        : { tables: {} }\n\n    for (const version of versions) {\n      const patchParsed = v.safeParse(operationsSchema, version.patch)\n      if (patchParsed.success) {\n        applyPatchOperations(currentSchema, patchParsed.output)\n      } else {\n        console.warn(\n          `Invalid patch operations in version ${version.number}:`,\n          version.patch,\n        )\n      }\n    }\n\n    // Validate and return as Schema type\n    const validationResult = v.safeParse(schemaSchema, currentSchema)\n    if (!validationResult.success) {\n      console.warn('Schema validation failed, using fallback schema')\n      return { tables: {} }\n    }\n\n    return validationResult.output\n  }\n\n  private getLatestVersionNumber(versions: Array<{ number: number }>): number {\n    return versions.length > 0 ? Math.max(...versions.map((v) => v.number)) : 0\n  }\n\n  async createVersion(params: CreateVersionParams): Promise<VersionResult> {\n    const { buildingSchemaId, latestVersionNumber, patch } = params\n\n    // Generate message content based on patch operations\n    const patchCount = patch.length\n    const messageContent =\n      patchCount === 1\n        ? 'Schema updated with 1 change'\n        : `Schema updated with ${patchCount} changes`\n\n    const { data: buildingSchema, error } = await this.client\n      .from('building_schemas')\n      .select(`\n        id, organization_id, initial_schema_snapshot, design_session_id\n      `)\n      .eq('id', buildingSchemaId)\n      .maybeSingle()\n\n    if (!buildingSchema || error) {\n      throw new Error(`Failed to fetch building schema: ${error?.message}`)\n    }\n\n    // Get all previous versions to reconstruct the content\n    const { data: previousVersions, error: previousVersionsError } =\n      await this.client\n        .from('building_schema_versions')\n        .select('number, patch')\n        .eq('building_schema_id', buildingSchemaId)\n        .lte('number', latestVersionNumber)\n        .order('number', { ascending: true })\n\n    if (previousVersionsError) {\n      throw new Error(\n        `Failed to fetch previous versions: ${previousVersionsError.message}`,\n      )\n    }\n\n    const patchArrayHistory = previousVersions\n      ?.map((version) => {\n        const parsed = v.safeParse(operationsSchema, version.patch)\n        if (parsed.success) {\n          return parsed.output\n        }\n        return null\n      })\n      .filter((version) => version !== null)\n\n    // Reconstruct the base content (first version) from the initial schema snapshot\n    const baseContent: Record<string, unknown> =\n      typeof buildingSchema.initial_schema_snapshot === 'object'\n        ? JSON.parse(JSON.stringify(buildingSchema.initial_schema_snapshot))\n        : {}\n\n    // Apply all patches in order to get the current content\n    const currentContent: Record<string, unknown> = { ...baseContent }\n\n    // Apply all patches in order\n    for (const patchArray of patchArrayHistory) {\n      // Apply each operation in the patch to currentContent\n      applyPatchOperations(currentContent, patchArray)\n    }\n\n    // Now apply the new patch to get the new content\n    const newContent = JSON.parse(JSON.stringify(currentContent))\n    applyPatchOperations(newContent, patch)\n\n    // Validate the new schema structure before proceeding\n    const validationResult = v.safeParse(schemaSchema, newContent)\n    if (!validationResult.success) {\n      const errorMessages = validationResult.issues\n        .map((issue) => `${issue.path?.join('.')} ${issue.message}`)\n        .join(', ')\n      return {\n        success: false,\n        error: `Invalid schema after applying changes: ${errorMessages}`,\n      }\n    }\n\n    // Calculate reverse patch from new content to current content\n    const reversePatch = compare(newContent, currentContent)\n\n    // Get the latest version number for this schema\n    const { data: latestVersion, error: latestVersionError } = await this.client\n      .from('building_schema_versions')\n      .select('number')\n      .eq('building_schema_id', buildingSchemaId)\n      .order('number', { ascending: false })\n      .limit(1)\n      .maybeSingle()\n\n    if (latestVersionError) {\n      throw new Error(\n        `Failed to get latest version: ${latestVersionError.message}`,\n      )\n    }\n\n    // Get the actual latest version number\n    const actualLatestVersionNumber = latestVersion ? latestVersion.number : 0\n\n    // Check if the expected version number matches the actual latest version number\n    if (latestVersionNumber !== actualLatestVersionNumber) {\n      // Version conflict detected\n      return {\n        success: false,\n        error:\n          'Version conflict: The schema has been modified since you last loaded it',\n      }\n    }\n\n    const rpcParams = {\n      p_schema_id: buildingSchemaId,\n      p_schema_schema: newContent,\n      p_schema_version_patch: JSON.parse(JSON.stringify(patch)),\n      p_schema_version_reverse_patch: JSON.parse(JSON.stringify(reversePatch)),\n      p_latest_schema_version_number: actualLatestVersionNumber,\n      p_message_content: messageContent,\n    }\n\n    const { data, error: rpcError } = await this.client.rpc(\n      'update_building_schema',\n      rpcParams,\n    )\n\n    const parsedResult = v.safeParse(updateBuildingSchemaResultSchema, data)\n\n    if (rpcError) {\n      return {\n        success: false,\n        error: rpcError.message,\n      }\n    }\n\n    if (parsedResult.success) {\n      if (parsedResult.output.success) {\n        return {\n          success: true,\n          newSchema: validationResult.output,\n        }\n      }\n      return {\n        success: false,\n        error: parsedResult.output.error,\n      }\n    }\n    return {\n      success: false,\n      error: 'Invalid response from server',\n    }\n  }\n\n  async createTimelineItem(\n    params: CreateTimelineItemParams,\n  ): Promise<TimelineItemResult> {\n    const { designSessionId, content, type } = params\n    const userId = 'userId' in params ? params.userId : null\n    const buildingSchemaVersionId =\n      'buildingSchemaVersionId' in params\n        ? params.buildingSchemaVersionId\n        : null\n    const now = new Date().toISOString()\n\n    const { data: timelineItem, error } = await this.client\n      .from('timeline_items')\n      .insert({\n        design_session_id: designSessionId,\n        content,\n        type,\n        user_id: userId,\n        building_schema_version_id: buildingSchemaVersionId,\n        updated_at: now,\n      })\n      .select()\n      .single()\n\n    if (error) {\n      console.error(\n        'Failed to save timeline item:',\n        JSON.stringify(error, null, 2),\n      )\n      return {\n        success: false,\n        error: error.message,\n      }\n    }\n\n    return {\n      success: true,\n      timelineItem,\n    }\n  }\n\n  async updateTimelineItem(\n    id: string,\n    updates: UpdateTimelineItemParams,\n  ): Promise<TimelineItemResult> {\n    const now = new Date().toISOString()\n\n    const { data: timelineItem, error } = await this.client\n      .from('timeline_items')\n      .update({\n        ...updates,\n        updated_at: now,\n      })\n      .eq('id', id)\n      .select()\n      .single()\n\n    if (error) {\n      console.error(\n        'Failed to update timeline item:',\n        JSON.stringify(error, null, 2),\n      )\n      return {\n        success: false,\n        error: error.message,\n      }\n    }\n\n    return {\n      success: true,\n      timelineItem,\n    }\n  }\n\n  async createArtifact(params: CreateArtifactParams): Promise<ArtifactResult> {\n    const { designSessionId, artifact } = params\n\n    // Validate artifact data\n    const validationResult = v.safeParse(artifactSchema, artifact)\n    if (!validationResult.success) {\n      const errorMessages = validationResult.issues\n        .map((issue) => `${issue.path?.join('.')} ${issue.message}`)\n        .join(', ')\n      return {\n        success: false,\n        error: `Invalid artifact data: ${errorMessages}`,\n      }\n    }\n\n    const { data: artifactData, error } = await this.client\n      .from('artifacts')\n      .insert({\n        design_session_id: designSessionId,\n        artifact: artifactToJson(artifact),\n      })\n      .select()\n      .single()\n\n    if (error) {\n      console.error(\n        'Failed to create artifact:',\n        JSON.stringify(error, null, 2),\n      )\n      return {\n        success: false,\n        error: error.message,\n      }\n    }\n\n    return {\n      success: true,\n      artifact: artifactData,\n    }\n  }\n\n  async updateArtifact(params: UpdateArtifactParams): Promise<ArtifactResult> {\n    const { designSessionId, artifact } = params\n\n    // Validate artifact data\n    const validationResult = v.safeParse(artifactSchema, artifact)\n    if (!validationResult.success) {\n      const errorMessages = validationResult.issues\n        .map((issue) => `${issue.path?.join('.')} ${issue.message}`)\n        .join(', ')\n      return {\n        success: false,\n        error: `Invalid artifact data: ${errorMessages}`,\n      }\n    }\n\n    const { data: artifactData, error } = await this.client\n      .from('artifacts')\n      .update({\n        artifact: artifactToJson(artifact),\n      })\n      .eq('design_session_id', designSessionId)\n      .select()\n      .single()\n\n    if (error) {\n      console.error(\n        'Failed to update artifact:',\n        JSON.stringify(error, null, 2),\n      )\n      return {\n        success: false,\n        error: error.message,\n      }\n    }\n\n    return {\n      success: true,\n      artifact: artifactData,\n    }\n  }\n\n  async getArtifact(designSessionId: string): Promise<ArtifactResult> {\n    const { data: artifactData, error } = await this.client\n      .from('artifacts')\n      .select('*')\n      .eq('design_session_id', designSessionId)\n      .maybeSingle()\n\n    if (error) {\n      console.error('Failed to get artifact:', JSON.stringify(error, null, 2))\n      return {\n        success: false,\n        error: error.message,\n      }\n    }\n\n    if (!artifactData) {\n      return {\n        success: false,\n        error: 'Artifact not found',\n      }\n    }\n\n    return {\n      success: true,\n      artifact: artifactData,\n    }\n  }\n}\n", "export * from './schemas/artifact'\n", "import * as v from 'valibot'\n\n// DML execution log schema\nexport const dmlExecutionLogSchema = v.object({\n  executed_at: v.pipe(v.string(), v.isoDateTime()),\n  success: v.boolean(),\n  result_summary: v.string(),\n})\n\n// DML operation schema\nexport const dmlOperationSchema = v.object({\n  operation_type: v.picklist(['INSERT', 'UPDATE', 'DELETE', 'SELECT']),\n  sql: v.string(),\n  dml_execution_logs: v.array(dmlExecutionLogSchema),\n})\n\n// Use case schema\nexport const useCaseSchema = v.object({\n  title: v.string(),\n  description: v.string(),\n  dml_operations: v.array(dmlOperationSchema),\n})\n\n// Base requirement schema properties\nconst baseRequirementProperties = {\n  name: v.string(),\n  description: v.string(),\n}\n\n// Functional requirement schema\nexport const functionalRequirementSchema = v.object({\n  ...baseRequirementProperties,\n  type: v.literal('functional'),\n  use_cases: v.array(useCaseSchema),\n})\n\n// Non-functional requirement schema\nexport const nonFunctionalRequirementSchema = v.object({\n  ...baseRequirementProperties,\n  type: v.literal('non_functional'),\n})\n\n// Union of requirement types\nexport const requirementSchema = v.union([\n  functionalRequirementSchema,\n  nonFunctionalRequirementSchema,\n])\n\n// Requirement analysis schema\nexport const requirementAnalysisSchema = v.object({\n  business_requirement: v.string(),\n  requirements: v.array(requirementSchema),\n})\n\n// Main artifact schema\nexport const artifactSchema = v.object({\n  requirement_analysis: requirementAnalysisSchema,\n})\n\n// Export TypeScript types\nexport type DmlExecutionLog = v.InferOutput<typeof dmlExecutionLogSchema>\nexport type DmlOperation = v.InferOutput<typeof dmlOperationSchema>\nexport type UseCase = v.InferOutput<typeof useCaseSchema>\nexport type FunctionalRequirement = v.InferOutput<\n  typeof functionalRequirementSchema\n>\nexport type NonFunctionalRequirement = v.InferOutput<\n  typeof nonFunctionalRequirementSchema\n>\nexport type Requirement = v.InferOutput<typeof requirementSchema>\nexport type RequirementAnalysis = v.InferOutput<\n  typeof requirementAnalysisSchema\n>\nexport type Artifact = v.InferOutput<typeof artifactSchema>\n", "// NodeLogger is defined for use with Trigger.dev logging.\nexport type NodeLogger = {\n  debug: (message: string, metadata?: Record<string, unknown>) => void\n  log: (message: string, metadata?: Record<string, unknown>) => void\n  info: (message: string, metadata?: Record<string, unknown>) => void\n  warn: (message: string, metadata?: Record<string, unknown>) => void\n  error: (message: string, metadata?: Record<string, unknown>) => void\n}\n"],
  "mappings": "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AO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,OAAO;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,MAAM;AAAA,IACN,KAAK;AAAA,IACL,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,KAAK;AAAA,IACL,MAAM;AAAA,IACN,OAAO;AAAA,IACP,KAAK;AAAA,IACL,KAAK;AAAA,IACL,MAAM;AAAA,IACN,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,MAAM;AAAA,IACN,MAAM;AAAA,IACN,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,MAAM;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,MAAM;AAAA,IACN,MAAM;AAAA,IACN,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM;AAAA,IACN,OA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",
  "names": ["P", "e", "o", "s", "m", "i", "v", "n", "b", "r", "p", "d", "ResultAsync", "ok", "t", "err", "fromThrowable", "_", "d", "b", "p", "k", "i", "root", "PatchError", "document", "arr", "i", "t", "applyPatch", "validate", "e", "b", "Mirror", "ObserverInfo", "root", "t", "compare", "e", "ERROR", "base_exports", "base_exports", "i", "blocks", "b", "c", "d", "e", "j", "t", "HEX_CHARS", "EXTRA", "SHIFT", "blocks", "i", "SHIFT", "EXTRA", "b", "c", "d", "e", "h", "j", "HEX_CHARS", "arr", "document", "v", "i", "base_exports", "e", "tool", "cache", "_", "input", "err", "e", "i", "manager", "cache", "result", "config", "err", "i", "e", "manager", "cache", "result", "i", "i", "e", "config", "input", "options", "s", "e", "m", "e", "nullable", "type", "description", "s", "sax", "S", "o", "i", "m", "h", "c", "regex", "e", "s", "p", "t", "x", "n", "s", "x", "tool", "e", "result", "x", "arr", "tool", "innerProduct", "b", "p", "p2", "i", "b", "i", "p", "d", "i", "innerProduct", "k", "array", "i", "k", "c", "m", "t", "r", "_", "document", "s", "ret", "k", "b", "i", "optionalImportEntrypoints", "v", "i", "value", "_", "k", "i", "k", "v", "i", "k", "v", "_", "b", "version", "ERROR", "BaseStore", "BaseStore", "store", "e", "BaseCache", "k", "ERROR", "INTERRUPT", "RESUME", "TASKS", "INTERRUPT", "RESUME", "ERROR", "TASKS", "x", "t", "s", "util", "k", "e", "object", "arr", "array", "_", "objectUtil", "t", "i", "m", "x", "s", "errorUtil", "errorMap", "err", "regex", "version", "ctx", "i", "result", "issues", "b", "x", "elements", "e", "processed", "p", "p2", "r", "_a", "_b", "ZodFirstPartyTypeKind", "k", "v", "e", "i", "x", "w", "TASKS", "_", "INTERRUPT", "validate", "e", "k", "TASKS", "validate", "w", "RESUME", "v", "_", "task", "ERROR", "INTERRUPT", "x", "candidate", "n", "INTERRUPT", "v", "w", "config", "task", "ERROR", "cache", "k", "v", "_coerceToDict", "patchConfigurable", "s", "INTERRUPT", "version", "task", "c", "k", "_", "TASKS", "RESUME", "ERROR", "b", "i", "e", "manager", "call", "w", "e", "s", "BaseCache", "cache", "patchConfigurable", "store", "w", "c", "v", "task", "ERROR", "INTERRUPT", "t", "k", "RESUME", "call", "e", "version", "x", "patchConfigurable", "e", "t", "task", "patchConfigurable", "call", "interrupt", "INTERRUPT", "w", "RESUME", "ERROR", "c", "_", "task", "config", "ERROR", "INTERRUPT", "tasksWithWrites", "s", "nextConfig", "w", "k", "v", "tasks", "values", "asNode", "n", "store", "cache", "_coerceToDict", "e", "n", "e", "r", "Graph", "args", "name", "interrupt", "_", "x", "s", "b", "k", "b", "cache", "Graph", "args", "store", "cache", "name", "_", "v", "k", "i", "p", "input", "schema", "m", "i", "entrypoint", "store", "cache", "import_neverthrow", "import_neverthrow", "e", "addLangChainErrorFields", "e", "addLangChainErrorFields", "v", "tool", "m", "s", "k", "i", "messages", "e", "tool", "params", "reasoning", "streamIterable", "_", "b", "config", "x", "_stringify", "_stringify", "_stringify", "parse", "isPrimaryKey", "import_fast_json_patch", "matcher", "Symbol", "for", "isVariadic", "anonymousSelectKey", "isObject", "value", "Boolean", "isMatcher", "x", "symbols", "matchPattern", "pattern", "select", "matched", "selections", "match", "Object", "keys", "forEach", "key", "Array", "isArray", "startPatterns", "endPatterns", "variadicPatterns", "i", "subpattern", "push", "length", "Error", "startValues", "slice", "endValues", "middleValues", "Infinity", "every", "subPattern", "Reflect", "ownKeys", "k", "matcherType", "is", "getSelectionKeys", "_pattern$symbols$matc", "_pattern$symbols$matc2", "_pattern$symbols$matc3", "call", "flatMap", "values", "xs", "f", "reduce", "acc", "concat", "chainable", "pattern", "Object", "assign", "optional", "and", "p2", "intersection", "or", "union", "select", "key", "optional", "pattern", "chainable", "matcher", "match", "value", "selections", "selector", "key", "getSelectionKeys", "forEach", "undefined", "matched", "matchPattern", "matcherType", "intersection", "patterns", "chainable", "matcher", "match", "value", "selections", "selector", "key", "matched", "every", "p", "matchPattern", "getSelectionKeys", "flatMap", "matcherType", "union", "forEach", "undefined", "some", "when", "predicate", "Boolean", "select", "args", "pattern", "length", "symbols", "concat", "isNumber", "x", "isString", "isBigInt", "any", "stringChainable", "pattern", "Object", "assign", "chainable", "startsWith", "str", "intersection", "start", "when", "value", "isString", "endsWith", "end", "minLength", "min", "length", "len", "maxLength", "max", "includes", "substr", "regex", "expr", "Boolean", "match", "string", "numberChainable", "between", "isNumber", "lt", "gt", "lte", "gte", "int", "Number", "isInteger", "finite", "isFinite", "positive", "negative", "number", "bigintChainable", "betweenBigInt", "isBigInt", "bigint", "boolean", "x", "symbol", "nullish", "nonNullable", "compare", "pkg", "import_fast_json_patch", "applyPatch", "pkg", "pipe", "store", "store", "toJsonSchema", "SimpleEventEmitter", "constructor", "events", "on", "event", "listener", "push", "filter", "x", "emit", "payload", "DEFAULT_PROMPT_CACHE_TTL_SECONDS", "LangfusePromptCacheItem", "value", "ttlSeconds", "_expiry", "Date", "now", "isExpired", "LangfusePromptCache", "_cache", "Map", "_defaultTtlSeconds", "_refreshingKeys", "getIncludingExpired", "key", "get", "set", "effectiveTtlSeconds", "addRefreshingPromise", "promise", "then", "delete", "catch", "isRefreshing", "has", "invalidate", "promptName", "console", "log", "keys", "startsWith", "LangfusePersistedProperty", "ChatMessageType", "mustache", "escape", "text", "BasePromptClient", "prompt", "isFallback", "type", "name", "version", "config", "labels", "tags", "commitMessage", "_transformToLangchainVariables", "content", "jsonEscapedContent", "escapeJsonForLangchain", "replace", "out", "stack", "i", "n", "length", "ch", "j", "test", "isJson", "pop", "join", "TextPromptClient", "promptResponse", "compile", "variables", "_placeholders", "render", "getLangchainPrompt", "_options", "toJSON", "JSON", "stringify", "ChatPromptClient", "normalizedPrompt", "normalizePrompt", "typedPrompt", "map", "item", "ChatMessage", "placeholders", "messagesWithPlaceholdersReplaced", "placeholderValues", "Placeholder", "placeholderValue", "Array", "isArray", "every", "msg", "undefined", "role", "options", "variableName", "optional", "_", "messageWithoutType", "assert", "truthyValue", "message", "Error", "removeTrailingSlash", "url", "retriable", "fn", "props", "retryCount", "retryDelay", "retryCheck", "lastError", "Promise", "resolve", "setTimeout", "res", "e", "generateUUID", "globalThis", "d", "getTime", "d2", "performance", "c", "r", "Math", "random", "floor", "toString", "currentTimestamp", "currentISOTime", "toISOString", "safeSetTimeout", "timeout", "t", "unref", "getEnv", "process", "env", "configLangfuseSDK", "params", "secretRequired", "publicKey", "secretKey", "coreOptions", "finalPublicKey", "finalSecretKey", "finalBaseUrl", "baseUrl", "finalCoreOptions", "encodeQueryParams", "queryParams", "URLSearchParams", "Object", "entries", "forEach", "append", "common_release_envs", "getCommonReleaseEnvs", "fs", "cryptoModule", "dynamicImport", "module", "Deno", "all", "importedFs", "importedCrypto", "versions", "node", "crypto", "LangfuseMedia", "obj", "base64DataUri", "contentType", "contentBytes", "filePath", "_mediaId", "contentBytesParsed", "contentTypeParsed", "parseBase64DataUri", "_contentBytes", "_contentType", "_source", "existsSync", "readFile", "error", "readFileSync", "data", "header", "actualData", "slice", "split", "headerParts", "includes", "Buffer", "from", "contentLength", "contentSha256Hash", "sha256Hash", "createHash", "update", "digest", "parseReferenceString", "referenceString", "prefix", "suffix", "endsWith", "pairs", "parsedData", "pair", "mediaId", "source", "resolveMediaReferences", "langfuseClient", "maxDepth", "traverse", "depth", "regex", "referenceStringMatches", "match", "result", "referenceStringToMediaContentMap", "parsedMediaReference", "mediaData", "fetchMedia", "mediaContent", "fetch", "method", "headers", "status", "base64MediaContent", "arrayBuffer", "warn", "replaceAll", "fromEntries", "isInSample", "input", "sampleRate", "isNaN", "simpleHash", "str", "hash", "prime", "charCodeAt", "abs", "MAX_EVENT_SIZE_BYTES", "getEnv", "Number", "MAX_BATCH_SIZE_BYTES", "ENVIRONMENT_PATTERN", "LangfuseFetchHttpError", "Error", "constructor", "response", "body", "status", "name", "LangfuseFetchNetworkError", "error", "cause", "isLangfuseFetchHttpError", "isLangfuseFetchNetworkError", "isLangfuseFetchError", "err", "SUPPORT_URL", "API_DOCS_URL", "RBAC_DOCS_URL", "INSTALLATION_DOCS_URL", "RATE_LIMITS_URL", "NPM_PACKAGE_URL", "updatePromptResponse", "defaultServerErrorPrompt", "defaultErrorResponse", "errorResponseByCode", "Map", "getErrorResponseByCode", "code", "errorResponse", "get", "logIngestionError", "console", "LangfuseCoreStateless", "params", "additionalHeaders", "debugMode", "pendingEventProcessingPromises", "pendingIngestionPromises", "localEventExportMap", "_events", "SimpleEventEmitter", "publicKey", "secretKey", "enabled", "_projectId", "_isLocalEventExportEnabled", "options", "on", "payload", "JSON", "stringify", "baseUrl", "removeTrailingSlash", "flushAt", "Math", "max", "flushInterval", "release", "getCommonReleaseEnvs", "undefined", "mask", "sampleRate", "emit", "environment", "test", "_retryOptions", "retryCount", "fetchRetryCount", "retryDelay", "fetchRetryDelay", "retryCheck", "requestTimeout", "sdkIntegration", "isLocalEventExportEnabled", "projectId", "getSdkIntegration", "getCommonEventProperties", "$lib", "getLibraryId", "$lib_version", "getLibraryVersion", "event", "cb", "debug", "removeDebugCallback", "log", "traceStateless", "id", "bodyId", "timestamp", "bodyTimestamp", "bodyRelease", "rest", "generateUUID", "parsedBody", "Date", "enqueue", "eventStateless", "startTime", "bodyStartTime", "spanStateless", "generationStateless", "prompt", "promptDetails", "isFallback", "promptName", "promptVersion", "version", "scoreStateless", "updateSpanStateless", "updateGenerationStateless", "_getDataset", "encodedName", "encodeURIComponent", "fetchAndLogErrors", "_getFetchOptions", "method", "_getDatasetItems", "query", "URLSearchParams", "Object", "entries", "forEach", "key", "value", "append", "toString", "_fetchMedia", "fetchTraces", "data", "meta", "encodeQueryParams", "fetchTrace", "traceId", "res", "fetchObservations", "fetchObservation", "observationId", "fetchSessions", "getDatasetRun", "encodedDatasetName", "datasetName", "encodedRunName", "runName", "getDatasetRuns", "createDatasetRunItem", "createDataset", "dataset", "createDatasetItem", "getDatasetItem", "_parsePayload", "parse", "createPromptStateless", "updatePromptStateless", "getPromptStateless", "label", "maxRetries", "url", "size", "boundedMaxRetries", "_getBoundedMaxRetries", "defaultMaxRetries", "maxRetriesUpperBound", "retryOptions", "retryLogger", "string", "retriable", "fetch", "fetchTimeout", "catch", "e", "text", "json", "fetchResult", "min", "type", "parseTraceId", "isInSample", "promise", "processEnqueueEvent", "promiseId", "finally", "maskEventBodyInPlace", "processMediaInEvent", "finalEventBody", "truncateEventBody", "queue", "getPersistedProperty", "LangfusePersistedProperty", "Queue", "push", "currentISOTime", "metadata", "setPersistedProperty", "length", "flush", "_flushTimer", "safeSetTimeout", "maskableKeys", "maxByteSize", "bodySize", "getByteSize", "keysToCheck", "keySizes", "map", "sort", "a", "b", "result", "currentSize", "prototype", "hasOwnProperty", "call", "obj", "serialized", "TextEncoder", "encode", "replace", "includes", "Promise", "all", "field", "findAndProcessMedia", "seenObjects", "WeakMap", "maxLevels", "processRecursively", "level", "startsWith", "media", "LangfuseMedia", "base64DataUri", "processMediaItem", "has", "set", "Array", "isArray", "item", "input_audio", "audio", "fromEntries", "contentLength", "_contentType", "contentSha256Hash", "_contentBytes", "getUploadUrlBody", "contentType", "sha256Hash", "fetchResponse", "uploadUrlResponse", "uploadUrl", "mediaId", "_mediaId", "now", "uploadResponse", "uploadMediaWithBackoff", "contentBytes", "baseDelay", "patchMediaBody", "uploadedAt", "toISOString", "uploadHttpStatus", "uploadHttpError", "uploadTimeMs", "attempt", "headers", "delay", "pow", "jitter", "random", "resolve", "setTimeout", "flushAsync", "values", "_reject", "callback", "clearTimeout", "items", "splice", "processedItems", "remainingItems", "processQueueItems", "promiseUUID", "done", "batch", "batch_size", "sdk_integration", "sdk_version", "sdk_variant", "public_key", "sdk_name", "fetchOptions", "requestPromise", "fetchWithRetry", "then", "MAX_MSG_SIZE", "BATCH_SIZE_LIMIT", "totalSize", "i", "itemSize", "Blob", "warn", "slice", "p", "constructAuthorizationHeader", "signal", "AbortSignal", "timeout", "Authorization", "encodedCredentials", "btoa", "Buffer", "from", "ms", "ctrl", "AbortController", "abort", "returnBody", "errors", "shutdownAsync", "x", "_exportLocalEvents", "events", "delete", "shutdown", "awaitAllQueuedAndPendingRequests", "LangfuseCore", "LangfuseCoreStateless", "constructor", "params", "publicKey", "secretKey", "enabled", "_isLocalEventExportEnabled", "isObservabilityEnabled", "console", "warn", "_promptCache", "LangfusePromptCache", "trace", "body", "id", "traceStateless", "t", "LangfuseTraceClient", "getEnv", "deferRuntime", "langfuseTraces", "name", "url", "getTraceUrl", "span", "traceId", "spanStateless", "LangfuseSpanClient", "generation", "generationStateless", "LangfuseGenerationClient", "event", "eventStateless", "LangfuseEventClient", "score", "scoreStateless", "getDataset", "options", "dataset", "_getDataset", "items", "page", "itemsResponse", "_getDatasetItems", "datasetName", "limit", "fetchItemsPageSize", "push", "data", "meta", "totalPages", "returnDataset", "description", "undefined", "metadata", "map", "item", "link", "obj", "runName", "runArgs", "awaitAllQueuedAndPendingRequests", "createDatasetRunItem", "datasetItemId", "observationId", "runDescription", "createPrompt", "labels", "promptResponse", "type", "createPromptStateless", "prompt", "ChatMessageType", "Placeholder", "ChatMessage", "isActive", "Set", "ChatPromptClient", "TextPromptClient", "updatePrompt", "newPrompt", "updatePromptStateless", "invalidate", "getPrompt", "version", "cacheKey", "_getPromptCacheKey", "label", "cachedPrompt", "getIncludingExpired", "cacheTtlSeconds", "_fetchPromptAndUpdateCache", "maxRetries", "fetchTimeout", "fetchTimeoutMs", "err", "fallback", "sharedFallbackParams", "config", "tags", "msg", "isExpired", "isRefreshing", "refreshPromptPromise", "catch", "addRefreshingPromise", "value", "parts", "toString", "join", "fetchResult", "getPromptStateless", "Error", "message", "set", "error", "fetchMedia", "_fetchMedia", "resolveMediaReferences", "rest", "LangfuseMedia", "langfuseClient", "_updateSpan", "updateSpanStateless", "_updateGeneration", "updateGenerationStateless", "LangfuseObjectClient", "client", "parentObservationId", "baseUrl", "update", "LangfuseObservationClient", "end", "endTime", "Date", "cookieStore", "getItem", "key", "nameEQ", "ca", "document", "cookie", "split", "i", "length", "c", "charAt", "substring", "indexOf", "decodeURIComponent", "err", "setItem", "value", "cdomain", "expires", "secure", "new_cookie_val", "encodeURIComponent", "removeItem", "name", "clear", "getAllKeys", "keys", "push", "createStorageLike", "store", "localStorage", "checkStoreIsSupported", "storage", "window", "val", "localStore", "undefined", "sessionStore", "createMemoryStorage", "_cache", "getStorage", "type", "_localStore", "_sessionStore", "sessionStorage", "ContentType", "HttpClient", "constructor", "apiConfig", "baseUrl", "securityData", "abortControllers", "Map", "customFetch", "fetchParams", "fetch", "baseApiParams", "credentials", "headers", "redirect", "referrerPolicy", "setSecurityData", "data", "contentFormatters", "Json", "input", "JSON", "stringify", "Text", "FormData", "Object", "reduce", "formData", "property", "append", "Blob", "UrlEncoded", "toQueryString", "createAbortSignal", "cancelToken", "has", "abortController", "get", "signal", "AbortController", "set", "abortRequest", "abort", "delete", "request", "body", "path", "query", "format", "params", "secureParams", "securityWorker", "requestParams", "mergeRequestParams", "queryString", "payloadFormatter", "responseFormat", "then", "response", "r", "clone", "error", "ok", "catch", "e", "assign", "encodeQueryParam", "encodedKey", "addQueryParam", "addArrayQueryParam", "map", "v", "join", "rawQuery", "filter", "Array", "isArray", "addQueryParams", "params1", "params2", "LangfusePublicApi", "api", "annotationQueuesCreateQueueItem", "queueId", "method", "annotationQueuesDeleteQueueItem", "itemId", "annotationQueuesGetQueue", "annotationQueuesGetQueueItem", "annotationQueuesListQueueItems", "annotationQueuesListQueues", "annotationQueuesUpdateQueueItem", "commentsCreate", "commentsGet", "commentsGetById", "commentId", "datasetItemsCreate", "datasetItemsDelete", "id", "datasetItemsGet", "datasetItemsList", "datasetRunItemsCreate", "datasetRunItemsList", "datasetsCreate", "datasetsDeleteRun", "datasetName", "runName", "datasetsGet", "datasetsGetRun", "datasetsGetRuns", "datasetsList", "healthHealth", "ingestionBatch", "mediaGet", "mediaId", "mediaGetUploadUrl", "mediaPatch", "metricsMetrics", "modelsCreate", "modelsDelete", "modelsGet", "modelsList", "observationsGet", "observationId", "observationsGetMany", "organizationsGetOrganizationMemberships", "organizationsGetOrganizationProjects", "organizationsGetProjectMemberships", "projectId", "organizationsUpdateOrganizationMembership", "organizationsUpdateProjectMembership", "projectsCreate", "projectsCreateApiKey", "projectsDelete", "projectsDeleteApiKey", "apiKeyId", "projectsGet", "projectsGetApiKeys", "projectsUpdate", "promptsCreate", "promptsGet", "promptName", "promptsList", "promptVersionUpdate", "version", "scimCreateUser", "scimDeleteUser", "userId", "scimGetResourceTypes", "scimGetSchemas", "scimGetServiceProviderConfig", "scimGetUser", "scimListUsers", "scoreConfigsCreate", "scoreConfigsGet", "scoreConfigsGetById", "configId", "scoreCreate", "scoreDelete", "scoreId", "scoreV2Get", "scoreV2GetById", "sessionsGet", "sessionId", "sessionsList", "traceDelete", "traceId", "traceDeleteMultiple", "traceGet", "traceList", "Langfuse", "LangfuseCore", "langfuseConfig", "utils", "configLangfuseSDK", "_storageKey", "persistence_name", "publicKey", "_storage", "persistence", "getLibraryVersion", "getLibraryId", "sdkIntegration", "additionalHeaders", "constructAuthorizationHeader", "secretKey", "getPersistedProperty", "_storageCache", "parse", "setPersistedProperty", "url", "options", "getCustomUserAgent", "LangfuseSingleton", "getInstance", "params", "instance", "Langfuse", "LANGSMITH_HIDDEN_TAG", "CallbackHandler", "BaseCallbackHandler", "constructor", "params", "name", "rootProvided", "updateRoot", "debugEnabled", "completionStartTimes", "langfuse", "root", "client", "rootObservationId", "observationId", "undefined", "traceId", "metadata", "Langfuse", "persistence", "sdkIntegration", "sessionId", "userId", "tags", "version", "promptToParentRunMap", "Map", "traceUpdates", "flushAsync", "shutdownAsync", "debug", "enabled", "_log", "message", "console", "log", "handleNewToken", "_token", "runId", "Date", "Promise", "resolve", "handleLLMNewToken", "token", "_idx", "_parentRunId", "_tags", "_fields", "getTraceId", "getTraceUrl", "baseUrl", "getLangchainRunId", "topLevelObservationId", "handleRetrieverError", "err", "parentRunId", "_updateSpan", "id", "level", "statusMessage", "toString", "endTime", "updateTrace", "e", "handleChainStart", "chain", "inputs", "runType", "runName", "at", "registerLangfusePrompt", "finalInput", "Array", "isArray", "every", "m", "BaseMessage", "map", "extractChatMessageContent", "generateTrace", "span", "parentObservationId", "joinTagsAndMetaData", "input", "includes", "set", "langfusePrompt", "deregisterLangfusePrompt", "delete", "handleAgentAction", "action", "handleAgentEnd", "output", "handleChainError", "trace", "handleGenerationStart", "llm", "messages", "extraParams", "modelParameters", "invocationParams", "key", "value", "Object", "entries", "temperature", "max_tokens", "top_p", "frequency_penalty", "presence_penalty", "request_timeout", "extractedModelName", "invocationParamsModelName", "invocation_params", "model", "metadataModelName", "registeredPrompt", "get", "generation", "prompt", "handleChatModelStart", "prompts", "flatMap", "handleChainEnd", "outputs", "finalOutput", "handleLLMStart", "handleToolStart", "tool", "handleRetrieverStart", "retriever", "query", "handleRetrieverEnd", "documents", "handleToolEnd", "handleToolError", "handleLLMEnd", "lastResponse", "generations", "length", "llmUsage", "extractUsageMetadata", "llmOutput", "modelName", "extractModelNameFromMetadata", "usageDetails", "input_tokens", "promptTokens", "output_tokens", "completionTokens", "total", "total_tokens", "totalTokens", "val", "Math", "max", "extractedOutput", "text", "_updateGeneration", "completionStartTime", "usage", "usageMetadata", "AIMessage", "AIMessageChunk", "usage_metadata", "response_metadata", "model_name", "response", "HumanMessage", "content", "role", "ChatMessage", "SystemMessage", "FunctionMessage", "additional_kwargs", "ToolMessage", "function_call", "tool_calls", "handleLLMError", "metadata1", "metadata2", "finalDict", "assign", "stripLangfuseKeysFromMetadata", "langfuseKeys", "fromEntries", "filter", "_", "toJsonSchema", "parse", "toJsonSchema", "parse", "toJsonSchema", "parse", "logger", "import_neverthrow", "logger", "NODE_NAME", "logger", "s", "NODE_NAME", "logger", "e", "result", "NODE_NAME", "logger", "finalResponse", "import_neverthrow", "NODE_NAME", "logger", "formatAnalyzedRequirements", "NODE_NAME", "logger", "NODE_NAME", "logger", "NODE_NAME", "logger", "NODE_NAME", "logger", "DEFAULT_RECURSION_LIMIT", "DEFAULT_RECURSION_LIMIT", "logger", "import_fast_json_patch", "version", "v"]
}
