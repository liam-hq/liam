# Schema-Bench 次期開発計画
## ベンチマーカーの目的達成に向けた具体的行動計画

### 📅 全体スケジュール（2025年7月11日現在）
- **2025年7月中旬～下旬**: 緊急基盤構築フェーズ
- **2025年7月下旬～8月上旬**: 高速データセット構築フェーズ
- **2025年8月上旬～中旬**: 評価・リリース準備フェーズ
- **2025年8月下旬**: プロダクトリリース

---

## Phase 1: 緊急基盤構築（7月11日～7月21日）

### 1.1 ライセンス確認とデータセット戦略決定 🔍
**期限**: 7月14日（3日以内）

#### アクション
1. **RSchemaライセンス調査**
   - 湖南大学論文著者へのコンタクト試行（即日実施、3日待機）
   - 返答なしの場合は独自データセットで即座に進行
   - 法務リスクを避けるため、独自データ優先の方針確定

2. **独自データセット「Schema-Bench」設計**
   - 初期10件のサンプルケース選定（7月12日）
   - データ作成プロセスの標準化ドキュメント作成（7月13日）
   - アノテーションガイドライン策定（7月14日）

### 1.2 評価指標の拡張仕様確定 📊
**期限**: 7月17日（1週間以内）

#### アクション
1. **基本5指標の維持**
   - tableF1Score
   - columnF1ScoreAverage
   - primaryKeyAccuracyAverage
   - constraintAccuracy
   - foreignKeyF1Score

2. **拡張指標の追加**（shihyou.mdベース）
   - `columnTypeAccuracy`: カラム型一致率
   - `uniqueConstraintF1Score`: ユニーク制約F1スコア
   - `checkConstraintAccuracy`: チェック制約精度
   - `indexEffectivenessScore`: インデックス有効性スコア

3. **インデックス評価基準の策定**
   ```markdown
   ## インデックス正解定義ガイドライン
   
   ### 基本原則
   1. 主キー・外部キーには自動的にインデックスが必要
   2. WHERE句で頻繁に使用されるカラムを想定
   3. 一般的なWebアプリケーションのユースケースを基準
   
   ### 評価方法
   - 完全一致: 1.0点
   - 部分一致（カラム順序違い）: 0.5点
   - 不一致: 0点
   ```

### 1.3 CI/CD統合の実装 🔧
**期限**: 7月21日（10日以内）

#### 実装内容
1. **GitHub Actions ワークフロー作成**
   ```yaml
   # .github/workflows/schema-bench-evaluation.yml
   name: Schema Bench Evaluation
   on:
     schedule:
       - cron: '0 0 1 */3 *'  # 3ヶ月ごと
     workflow_dispatch:  # 手動実行可能
   ```

2. **評価スクリプトの拡張**
   - 複数LLMモデルの並列評価
   - 結果の自動レポート生成
   - Slackへの通知機能

---

## Phase 2: 高速データセット構築（7月22日～8月4日）

### 2.1 効率的なデータ作成プロセス構築 🏗️
**期限**: 7月25日（3日で構築）

#### アクション
1. **半自動化ツールの開発**
   ```typescript
   // schema-bench-builder.ts
   interface SchemaTemplate {
     domain: 'e-commerce' | 'healthcare' | 'education' | ...
     complexity: 'simple' | 'medium' | 'complex'
     tableCount: number
     hasAdvancedFeatures: boolean
   }
   ```

2. **Liam DB活用によるドッグフーディング**
   - 基本スキーマをLiam DBで生成
   - 専門家レビューで修正
   - 正解データとして確定

### 2.2 初期データセット作成（現実的な目標設定） 📚
**期限**: 8月4日（2週間で20件目標）

#### データセット構成（優先順位順）
```
第1週（7/22-7/28）:
  5件: シンプル（3-5テーブル）- 1日1件ペース
  3件: 中規模（6-10テーブル）- 2日で3件

第2週（7/29-8/4）:
  7件: 中規模（6-15テーブル）- 1日1件ペース
  5件: 複雑（16-25テーブル）- 2日で5件

合計: 20件（当初50件から現実的に調整）
```

#### ドメイン分布（シンプル化）
- Eコマース: 5件
- ヘルスケア: 4件
- 教育: 4件
- 金融: 4件
- SNS: 3件

---

## Phase 3: 評価・リリース準備（8月5日～8月20日）

### 3.1 ベンチマーク実行と分析 📈
**期限**: 8月10日（5日間集中実施）

#### 評価対象
1. **Liam DB (Deep Modeling)**
2. **GPT-4o Direct**
3. **GPT-4o with CoT**
4. **Claude 3.5 Sonnet**
5. **Gemini Ultra**

#### 分析項目
- 各指標での性能比較
- ドメイン別の得意・不得意分析
- 複雑度別のパフォーマンス傾向

### 3.2 開発プロセスへの統合 🔄
**期限**: 8月17日（1週間で完了）

#### 実装内容
1. **リグレッションテスト化**
   - PRごとの自動評価
   - 性能劣化の自動検知
   - 改善提案の自動生成

2. **開発者向けダッシュボード**
   - リアルタイム性能追跡
   - Agent別の詳細分析
   - 改善ポイントの可視化

---

## 成功指標と達成基準 🎯

### 短期目標（2025年8月）
1. **開発効率**: ベンチマークによるリグレッション検知率 90%以上
2. **データセット**: 50件の高品質データセット完成
3. **性能改善**: 主要5指標で平均10%以上の改善

### 中期目標（2025年12月）
1. **コミュニティ採用**: 3つ以上の外部プロジェクトでの利用
2. **学術引用**: テクニカルレポートの公開と引用開始
3. **業界認知**: DB設計評価の事実上の標準として言及

### 長期展望（2026年以降）
1. **業界標準化**: 主要AIベンダーによる公式採用
2. **データセット拡張**: 500件規模への拡大
3. **国際カンファレンス**: 発表・ワークショップ開催

---

## リスクと対策 ⚠️

### リスク1: 短期間でのデータセット作成
**対策**: 
- 目標を50件→20件に現実的に調整済み
- Liam DBドッグフーディングで効率化
- 毎日の進捗確認と調整

### リスク2: インデックス正解定義の曖昧さ
**対策**:
- 複数の専門家によるレビュー体制
- 「推奨」「許容」「非推奨」の3段階評価
- ユースケース別の評価基準策定

### リスク3: LLMライセンスコスト
**対策**:
- 評価頻度の最適化（月次→四半期）
- サンプリング評価の導入
- オープンソースLLMの活用

---

## 次のアクション（今すぐ開始）🚀

### 7月11日（本日）
1. **午前中**
   - RSchemaライセンス確認メール送信（独自データ優先で進行）
   - 初期10件のサンプルケース概要設計開始

2. **午後**
   - インデックス評価基準のドラフト作成
   - データ作成プロセスの効率化案検討

### 7月12日（土）
1. **データセット設計**
   - 最初の5件（シンプル）の詳細設計
   - Liam DBでの自動生成テスト

### 7月15日（月）
1. **評価指標実装**
   - shihyou.mdベースの拡張指標実装開始
   - CI/CD設計書完成

### 7月18日（木）
1. **中間チェック**
   - 進捗確認と計画調整
   - 最初のサンプルデータ完成

### 週次マイルストーン
- **第1週（7/11-7/17）**: 基盤構築完了
- **第2週（7/18-7/24）**: データ作成プロセス確立
- **第3週（7/25-7/31）**: データセット前半完成
- **第4週（8/1-8/7）**: データセット完成
- **第5週（8/8-8/14）**: 評価実施
- **第6週（8/15-8/21）**: リリース準備

---

この計画に基づいて、**開発加速を最優先**に着実に進めていきましょう。
