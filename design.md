# ベンチマーカー(CLIツール・データセット)の設計と実装

### **目的 (Purpose)**

1.  **学術的貢献と業界標準化 (Academic Contribution & Industry Standardization)**
    -   Liam DB の優位性を示す研究成果を、将来的には `Arxiv` 等のプレプリントサーバーへ後続研究として公開する。
    -   新しい大規模言語モデル（LLM）が発表された際に、本ベンチマーカーを用いて迅速に DB 設計能力を評価し、技術ブログ等で結果を公開する。これにより、Liam DB を「DB 設計能力を測る指標」として確立し、AI ベンダーから公式に引用されることを目指す。

2.  **マーケティングと信頼性獲得 (Marketing & Trust Building)**
    -   Liam DB のランディングページにおいて、Deep Modeling 機能が生成する設計の品質が、主要な汎用 LLM（例: GPT-4o, Claude 3.5 Sonnet）と比較して優れていることを客観的な指標で示す。
    -   「プロレベルの DB 設計」というプロダクトの主張を裏付け、技術的な意思決定者（CTO, SRE, リードエンジニア）からの信頼を獲得する。

3.  **開発プロセスの加速 (Development Acceleration)**
    -   Deep Modeling を構成する各 AI Agent の性能を継続的に評価し、改善サイクルを高速化するためのデバッグツールとして活用する。
    -   リグレッションを防止し、設計品質を維持するため、CI (Continuous Integration) プロセスにベンチマークテストを組み込む。

### **主要機能 (Key Features)**

1.  **データセット管理 (Dataset Management)**
    -   論文 [2503.23886v1](https://arxiv.org/html/2503.23886v1) で提案されている `RSchema` をベースにした標準データセットを内蔵する。
    -   インデックス設計や物理的な制約など、より実践的な評価を可能にするため、`RSchema` を独自に拡張したデータセット `Schema-Bench` (仮)を構築・提供する。

2.  **評価実行 (Evaluation Execution)**
    -   コマンドラインインターフェース (CLI) を通じて、比較対象のモデル（例: Liam DB(DeepModeling), GPT-4o Direct, GPT-4o with CoT）を指定し、評価タスクを並列実行できる。
    -   評価結果は、分析しやすい標準化された形式（JSON）で出力する。

3.  **結果レポート (Result Reporting)**
    -   テーブル、カラム、リレーション、インデックス等に関する適合率 (Precision)、再現率 (Recall)、F1 スコアといった詳細な評価指標を自動で算出する。
    -   複数のモデルの結果を比較・可視化する簡易なレポート機能を提供する。

### **技術要件 (Technical Requirements)**

-   **言語:** TypeScript で実装し、Node.js 環境で動作させることで、既存の Liam DB プロジェクトとの親和性を高める。
-   **依存関係:** 外部ライブラリへの依存は最小限に抑え、メンテナンス性を確保する。
-   **評価ロジック:** `LLM4DBdesign` の Python 実装を参考にしつつ、論文で定義されている評価指標を TypeScript で忠実に再現する。
    - https://github.com/route06/liam-internal/discussions/4822

### **プロダクト上の位置付け (Product Positioning)**

-   **ランディングページへの統合:** Web サイトのランディングページに専用セクションを設け、常に最新のベンチマーク結果を分かりやすく提示する。独立した `/benchmark` ページは設けない。
-   **オープンソース化:** ベンチマーカーツール自体も `Apache 2.0` ライセンスで公開する。これにより透明性を確保し、コミュニティによる利用や改善を促進することで、業界標準としての地位を確立する。

### **検討事項 (Further Considerations)**

-   **`Schema-Bench` の構築戦略:**
    -   **スコープ定義:** 500 件すべての `RSchema` データに対し、最初から完全な物理設計を追加するのは現実的か。まずは代表的な 30〜50 件のサブセットから着手し、段階的に拡張する計画を立てる。
    -   **設計思想の明文化:** インデックス設計には複数の正解があり得るため、「どのような思想に基づいて正解データを作成したか」という設計ガイドラインを明文化し、データセットと合わせて公開する。
    -   **構築プロセスの効率化:** 「Liam DB の Deep Modeling を用いて `RSchema` に対する物理設計案を生成し、それを専門家がレビュー・修正する」というドッグフーディング的アプローチを取り入れ、データセット構築の効率化とプロダクト改善を同時に進められないか検討する。
-   **評価指標の拡張:**
    -   `RSchema` の論文で提案されている指標に加え、インデックスの妥当性やパフォーマンスへの影響など、物理設計を評価するための新しい指標を独自に定義・導入する必要がある。

## 関連

- https://github.com/route06/liam-internal/discussions/4879
